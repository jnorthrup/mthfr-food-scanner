(()=>{var a={};a.id=974,a.ids=[974],a.modules={106:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"Image",{enumerable:!0,get:function(){return u}});let d=c(5288),e=c(5823),f=c(1124),g=e._(c(8301)),h=d._(c(3312)),i=d._(c(3725)),j=c(3974),k=c(3001),l=c(456);c(1507);let m=c(8355),n=d._(c(9656)),o=c(9427),p={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0};function q(a,b,c,d,e,f,g){let h=null==a?void 0:a.src;a&&a["data-loaded-src"]!==h&&(a["data-loaded-src"]=h,("decode"in a?a.decode():Promise.resolve()).catch(()=>{}).then(()=>{if(a.parentElement&&a.isConnected){if("empty"!==b&&e(!0),null==c?void 0:c.current){let b=new Event("load");Object.defineProperty(b,"target",{writable:!1,value:a});let d=!1,e=!1;c.current({...b,nativeEvent:b,currentTarget:a,target:a,isDefaultPrevented:()=>d,isPropagationStopped:()=>e,persist:()=>{},preventDefault:()=>{d=!0,b.preventDefault()},stopPropagation:()=>{e=!0,b.stopPropagation()}})}(null==d?void 0:d.current)&&d.current(a)}}))}function r(a){return g.use?{fetchPriority:a}:{fetchpriority:a}}globalThis.__NEXT_IMAGE_IMPORTED=!0;let s=(0,g.forwardRef)((a,b)=>{let{src:c,srcSet:d,sizes:e,height:h,width:i,decoding:j,className:k,style:l,fetchPriority:m,placeholder:n,loading:p,unoptimized:s,fill:t,onLoadRef:u,onLoadingCompleteRef:v,setBlurComplete:w,setShowAltText:x,sizesInput:y,onLoad:z,onError:A,...B}=a,C=(0,g.useCallback)(a=>{a&&(A&&(a.src=a.src),a.complete&&q(a,n,u,v,w,s,y))},[c,n,u,v,w,A,s,y]),D=(0,o.useMergedRef)(b,C);return(0,f.jsx)("img",{...B,...r(m),loading:p,width:i,height:h,decoding:j,"data-nimg":t?"fill":"1",className:k,style:l,sizes:e,srcSet:d,src:c,ref:D,onLoad:a=>{q(a.currentTarget,n,u,v,w,s,y)},onError:a=>{x(!0),"empty"!==n&&w(!0),A&&A(a)}})});function t(a){let{isAppRouter:b,imgAttributes:c}=a,d={as:"image",imageSrcSet:c.srcSet,imageSizes:c.sizes,crossOrigin:c.crossOrigin,referrerPolicy:c.referrerPolicy,...r(c.fetchPriority)};return b&&h.default.preload?(h.default.preload(c.src,d),null):(0,f.jsx)(i.default,{children:(0,f.jsx)("link",{rel:"preload",href:c.srcSet?void 0:c.src,...d},"__nimg-"+c.src+c.srcSet+c.sizes)})}let u=(0,g.forwardRef)((a,b)=>{let c=(0,g.useContext)(m.RouterContext),d=(0,g.useContext)(l.ImageConfigContext),e=(0,g.useMemo)(()=>{var a;let b=p||d||k.imageConfigDefault,c=[...b.deviceSizes,...b.imageSizes].sort((a,b)=>a-b),e=b.deviceSizes.sort((a,b)=>a-b),f=null==(a=b.qualities)?void 0:a.sort((a,b)=>a-b);return{...b,allSizes:c,deviceSizes:e,qualities:f}},[d]),{onLoad:h,onLoadingComplete:i}=a,o=(0,g.useRef)(h);(0,g.useEffect)(()=>{o.current=h},[h]);let q=(0,g.useRef)(i);(0,g.useEffect)(()=>{q.current=i},[i]);let[r,u]=(0,g.useState)(!1),[v,w]=(0,g.useState)(!1),{props:x,meta:y}=(0,j.getImgProps)(a,{defaultLoader:n.default,imgConf:e,blurComplete:r,showAltText:v});return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(s,{...x,unoptimized:y.unoptimized,placeholder:y.placeholder,fill:y.fill,onLoadRef:o,onLoadingCompleteRef:q,setBlurComplete:u,setShowAltText:w,sizesInput:a.sizes,ref:b}),y.priority?(0,f.jsx)(t,{isAppRouter:!c,imgAttributes:x}):null]})});("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},189:(a,b,c)=>{"use strict";let d,e,f;c.r(b),c.d(b,{default:()=>wT});var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y=c(1124),z=c(8301),A=c.t(z,2);let B=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],C=new Set(B),D=(a,b,c)=>c>b?b:c<a?a:c,E={test:a=>"number"==typeof a,parse:parseFloat,transform:a=>a},F={...E,transform:a=>D(0,1,a)},G={...E,default:1},H=a=>Math.round(1e5*a)/1e5,I=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,J=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,K=(a,b)=>c=>!!("string"==typeof c&&J.test(c)&&c.startsWith(a)||b&&null!=c&&Object.prototype.hasOwnProperty.call(c,b)),L=(a,b,c)=>d=>{if("string"!=typeof d)return d;let[e,f,g,h]=d.match(I);return{[a]:parseFloat(e),[b]:parseFloat(f),[c]:parseFloat(g),alpha:void 0!==h?parseFloat(h):1}},M={...E,transform:a=>Math.round(D(0,255,a))},N={test:K("rgb","red"),parse:L("red","green","blue"),transform:({red:a,green:b,blue:c,alpha:d=1})=>"rgba("+M.transform(a)+", "+M.transform(b)+", "+M.transform(c)+", "+H(F.transform(d))+")"},O={test:K("#"),parse:function(a){let b="",c="",d="",e="";return a.length>5?(b=a.substring(1,3),c=a.substring(3,5),d=a.substring(5,7),e=a.substring(7,9)):(b=a.substring(1,2),c=a.substring(2,3),d=a.substring(3,4),e=a.substring(4,5),b+=b,c+=c,d+=d,e+=e),{red:parseInt(b,16),green:parseInt(c,16),blue:parseInt(d,16),alpha:e?parseInt(e,16)/255:1}},transform:N.transform},P=a=>({test:b=>"string"==typeof b&&b.endsWith(a)&&1===b.split(" ").length,parse:parseFloat,transform:b=>`${b}${a}`}),Q=P("deg"),R=P("%"),S=P("px"),T=P("vh"),U=P("vw"),V={...R,parse:a=>R.parse(a)/100,transform:a=>R.transform(100*a)},W={test:K("hsl","hue"),parse:L("hue","saturation","lightness"),transform:({hue:a,saturation:b,lightness:c,alpha:d=1})=>"hsla("+Math.round(a)+", "+R.transform(H(b))+", "+R.transform(H(c))+", "+H(F.transform(d))+")"},X={test:a=>N.test(a)||O.test(a)||W.test(a),parse:a=>N.test(a)?N.parse(a):W.test(a)?W.parse(a):O.parse(a),transform:a=>"string"==typeof a?a:a.hasOwnProperty("red")?N.transform(a):W.transform(a),getAnimatableNone:a=>{let b=X.parse(a);return b.alpha=0,X.transform(b)}},Y=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,Z="number",$="color",_=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function aa(a){let b=a.toString(),c=[],d={color:[],number:[],var:[]},e=[],f=0,g=b.replace(_,a=>(X.test(a)?(d.color.push(f),e.push($),c.push(X.parse(a))):a.startsWith("var(")?(d.var.push(f),e.push("var"),c.push(a)):(d.number.push(f),e.push(Z),c.push(parseFloat(a))),++f,"${}")).split("${}");return{values:c,split:g,indexes:d,types:e}}function ab(a){return aa(a).values}function ac(a){let{split:b,types:c}=aa(a),d=b.length;return a=>{let e="";for(let f=0;f<d;f++)if(e+=b[f],void 0!==a[f]){let b=c[f];b===Z?e+=H(a[f]):b===$?e+=X.transform(a[f]):e+=a[f]}return e}}let ad=a=>"number"==typeof a?0:X.test(a)?X.getAnimatableNone(a):a,ae={test:function(a){return isNaN(a)&&"string"==typeof a&&(a.match(I)?.length||0)+(a.match(Y)?.length||0)>0},parse:ab,createTransformer:ac,getAnimatableNone:function(a){let b=ab(a);return ac(a)(b.map(ad))}},af=new Set(["brightness","contrast","saturate","opacity"]);function ag(a){let[b,c]=a.slice(0,-1).split("(");if("drop-shadow"===b)return a;let[d]=c.match(I)||[];if(!d)return a;let e=c.replace(d,""),f=+!!af.has(b);return d!==c&&(f*=100),b+"("+f+e+")"}let ah=/\b([a-z-]*)\(.*?\)/gu,ai={...ae,getAnimatableNone:a=>{let b=a.match(ah);return b?b.map(ag).join(" "):a}},aj={...ae,getAnimatableNone:a=>{let b=ae.parse(a);return ae.createTransformer(a)(b.map(a=>"number"==typeof a?0:"object"==typeof a?{...a,alpha:1}:a))}},ak={...E,transform:Math.round},al={borderWidth:S,borderTopWidth:S,borderRightWidth:S,borderBottomWidth:S,borderLeftWidth:S,borderRadius:S,borderTopLeftRadius:S,borderTopRightRadius:S,borderBottomRightRadius:S,borderBottomLeftRadius:S,width:S,maxWidth:S,height:S,maxHeight:S,top:S,right:S,bottom:S,left:S,inset:S,insetBlock:S,insetBlockStart:S,insetBlockEnd:S,insetInline:S,insetInlineStart:S,insetInlineEnd:S,padding:S,paddingTop:S,paddingRight:S,paddingBottom:S,paddingLeft:S,paddingBlock:S,paddingBlockStart:S,paddingBlockEnd:S,paddingInline:S,paddingInlineStart:S,paddingInlineEnd:S,margin:S,marginTop:S,marginRight:S,marginBottom:S,marginLeft:S,marginBlock:S,marginBlockStart:S,marginBlockEnd:S,marginInline:S,marginInlineStart:S,marginInlineEnd:S,fontSize:S,backgroundPositionX:S,backgroundPositionY:S,rotate:Q,rotateX:Q,rotateY:Q,rotateZ:Q,scale:G,scaleX:G,scaleY:G,scaleZ:G,skew:Q,skewX:Q,skewY:Q,distance:S,translateX:S,translateY:S,translateZ:S,x:S,y:S,z:S,perspective:S,transformPerspective:S,opacity:F,originX:V,originY:V,originZ:S,zIndex:ak,fillOpacity:F,strokeOpacity:F,numOctaves:ak},am={...al,color:X,backgroundColor:X,outlineColor:X,fill:X,stroke:X,borderColor:X,borderTopColor:X,borderRightColor:X,borderBottomColor:X,borderLeftColor:X,filter:ai,WebkitFilter:ai,mask:aj,WebkitMask:aj},an=a=>am[a],ao=()=>({translate:0,scale:1,origin:0,originPoint:0}),ap=()=>({x:ao(),y:ao()}),aq=()=>({min:0,max:0}),ar=()=>({x:aq(),y:aq()}),as=a=>!!(a&&a.getVelocity),at=new Set(["width","height","top","left","right","bottom",...B]),au=a=>b=>b.test(a),av=[E,S,R,Q,U,T,{test:a=>"auto"===a,parse:a=>a}],aw=a=>av.find(au(a)),ax=()=>{},ay=()=>{},az=a=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(a),aA=a=>b=>"string"==typeof b&&b.startsWith(a),aB=aA("--"),aC=aA("var(--"),aD=a=>!!aC(a)&&aE.test(a.split("/*")[0].trim()),aE=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function aF(a){return"string"==typeof a&&a.split("/*")[0].includes("var(--")}let aG=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u,aH=a=>180*a/Math.PI,aI=a=>aK(aH(Math.atan2(a[1],a[0]))),aJ={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:a=>(Math.abs(a[0])+Math.abs(a[3]))/2,rotate:aI,rotateZ:aI,skewX:a=>aH(Math.atan(a[1])),skewY:a=>aH(Math.atan(a[2])),skew:a=>(Math.abs(a[1])+Math.abs(a[2]))/2},aK=a=>((a%=360)<0&&(a+=360),a),aL=a=>Math.sqrt(a[0]*a[0]+a[1]*a[1]),aM=a=>Math.sqrt(a[4]*a[4]+a[5]*a[5]),aN={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:aL,scaleY:aM,scale:a=>(aL(a)+aM(a))/2,rotateX:a=>aK(aH(Math.atan2(a[6],a[5]))),rotateY:a=>aK(aH(Math.atan2(-a[2],a[0]))),rotateZ:aI,rotate:aI,skewX:a=>aH(Math.atan(a[4])),skewY:a=>aH(Math.atan(a[1])),skew:a=>(Math.abs(a[1])+Math.abs(a[4]))/2};function aO(a){return+!!a.includes("scale")}function aP(a,b){let c,d;if(!a||"none"===a)return aO(b);let e=a.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);if(e)c=aN,d=e;else{let b=a.match(/^matrix\(([-\d.e\s,]+)\)$/u);c=aJ,d=b}if(!d)return aO(b);let f=c[b],g=d[1].split(",").map(aQ);return"function"==typeof f?f(g):g[f]}function aQ(a){return parseFloat(a.trim())}let aR=a=>a===E||a===S,aS=new Set(["x","y","z"]),aT=B.filter(a=>!aS.has(a)),aU={width:({x:a},{paddingLeft:b="0",paddingRight:c="0"})=>a.max-a.min-parseFloat(b)-parseFloat(c),height:({y:a},{paddingTop:b="0",paddingBottom:c="0"})=>a.max-a.min-parseFloat(b)-parseFloat(c),top:(a,{top:b})=>parseFloat(b),left:(a,{left:b})=>parseFloat(b),bottom:({y:a},{top:b})=>parseFloat(b)+(a.max-a.min),right:({x:a},{left:b})=>parseFloat(b)+(a.max-a.min),x:(a,{transform:b})=>aP(b,"x"),y:(a,{transform:b})=>aP(b,"y")};aU.translateX=aU.x,aU.translateY=aU.y;let aV=a=>a,aW={},aX=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],aY={value:null,addProjectionMetrics:null};function aZ(a,b){let c=!1,d=!0,e={delta:0,timestamp:0,isProcessing:!1},f=()=>c=!0,g=aX.reduce((a,c)=>(a[c]=function(a,b){let c=new Set,d=new Set,e=!1,f=!1,g=new WeakSet,h={delta:0,timestamp:0,isProcessing:!1},i=0;function j(b){g.has(b)&&(k.schedule(b),a()),i++,b(h)}let k={schedule:(a,b=!1,f=!1)=>{let h=f&&e?c:d;return b&&g.add(a),h.has(a)||h.add(a),a},cancel:a=>{d.delete(a),g.delete(a)},process:a=>{if(h=a,e){f=!0;return}e=!0,[c,d]=[d,c],c.forEach(j),b&&aY.value&&aY.value.frameloop[b].push(i),i=0,c.clear(),e=!1,f&&(f=!1,k.process(a))}};return k}(f,b?c:void 0),a),{}),{setup:h,read:i,resolveKeyframes:j,preUpdate:k,update:l,preRender:m,render:n,postRender:o}=g,p=()=>{let f=aW.useManualTiming?e.timestamp:performance.now();c=!1,aW.useManualTiming||(e.delta=d?1e3/60:Math.max(Math.min(f-e.timestamp,40),1)),e.timestamp=f,e.isProcessing=!0,h.process(e),i.process(e),j.process(e),k.process(e),l.process(e),m.process(e),n.process(e),o.process(e),e.isProcessing=!1,c&&b&&(d=!1,a(p))};return{schedule:aX.reduce((b,f)=>{let h=g[f];return b[f]=(b,f=!1,g=!1)=>(!c&&(c=!0,d=!0,e.isProcessing||a(p)),h.schedule(b,f,g)),b},{}),cancel:a=>{for(let b=0;b<aX.length;b++)g[aX[b]].cancel(a)},state:e,steps:g}}let{schedule:a$,cancel:a_,state:a0,steps:a1}=aZ("undefined"!=typeof requestAnimationFrame?requestAnimationFrame:aV,!0),a2=new Set,a3=!1,a4=!1,a5=!1;function a6(){if(a4){let a=Array.from(a2).filter(a=>a.needsMeasurement),b=new Set(a.map(a=>a.element)),c=new Map;b.forEach(a=>{let b=function(a){let b=[];return aT.forEach(c=>{let d=a.getValue(c);void 0!==d&&(b.push([c,d.get()]),d.set(+!!c.startsWith("scale")))}),b}(a);b.length&&(c.set(a,b),a.render())}),a.forEach(a=>a.measureInitialState()),b.forEach(a=>{a.render();let b=c.get(a);b&&b.forEach(([b,c])=>{a.getValue(b)?.set(c)})}),a.forEach(a=>a.measureEndState()),a.forEach(a=>{void 0!==a.suspendedScrollY&&window.scrollTo(0,a.suspendedScrollY)})}a4=!1,a3=!1,a2.forEach(a=>a.complete(a5)),a2.clear()}function a7(){a2.forEach(a=>{a.readKeyframes(),a.needsMeasurement&&(a4=!0)})}class a8{constructor(a,b,c,d,e,f=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...a],this.onComplete=b,this.name=c,this.motionValue=d,this.element=e,this.isAsync=f}scheduleResolve(){this.state="scheduled",this.isAsync?(a2.add(this),a3||(a3=!0,a$.read(a7),a$.resolveKeyframes(a6))):(this.readKeyframes(),this.complete())}readKeyframes(){let{unresolvedKeyframes:a,name:b,element:c,motionValue:d}=this;if(null===a[0]){let e=d?.get(),f=a[a.length-1];if(void 0!==e)a[0]=e;else if(c&&b){let d=c.readValue(b,f);null!=d&&(a[0]=d)}void 0===a[0]&&(a[0]=f),d&&void 0===e&&d.set(a[0])}for(let b=1;b<a.length;b++)a[b]??(a[b]=a[b-1])}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(a=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,a),a2.delete(this)}cancel(){"scheduled"===this.state&&(a2.delete(this),this.state="pending")}resume(){"pending"===this.state&&this.scheduleResolve()}}let a9=a=>/^0[^.\s]+$/u.test(a),ba=new Set([ai,aj]);function bb(a,b){let c=an(a);return ba.has(c)||(c=ae),c.getAnimatableNone?c.getAnimatableNone(b):void 0}let bc=new Set(["auto","none","0"]);class bd extends a8{constructor(a,b,c,d,e){super(a,b,c,d,e,!0)}readKeyframes(){let{unresolvedKeyframes:a,element:b,name:c}=this;if(!b||!b.current)return;super.readKeyframes();for(let c=0;c<a.length;c++){let d=a[c];if("string"==typeof d&&aD(d=d.trim())){let e=function a(b,c,d=1){ay(d<=4,`Max CSS variable fallback depth detected in property "${b}". This may indicate a circular fallback dependency.`,"max-css-var-depth");let[e,f]=function(a){let b=aG.exec(a);if(!b)return[,];let[,c,d,e]=b;return[`--${c??d}`,e]}(b);if(!e)return;let g=window.getComputedStyle(c).getPropertyValue(e);if(g){let a=g.trim();return az(a)?parseFloat(a):a}return aD(f)?a(f,c,d+1):f}(d,b.current);void 0!==e&&(a[c]=e),c===a.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!at.has(c)||2!==a.length)return;let[d,e]=a,f=aw(d),g=aw(e);if(aF(d)!==aF(e)&&aU[c]){this.needsMeasurement=!0;return}if(f!==g)if(aR(f)&&aR(g))for(let b=0;b<a.length;b++){let c=a[b];"string"==typeof c&&(a[b]=parseFloat(c))}else aU[c]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){let{unresolvedKeyframes:a,name:b}=this,c=[];for(let b=0;b<a.length;b++){var d;(null===a[b]||("number"==typeof(d=a[b])?0===d:null===d||"none"===d||"0"===d||a9(d)))&&c.push(b)}c.length&&function(a,b,c){let d,e=0;for(;e<a.length&&!d;){let b=a[e];"string"==typeof b&&!bc.has(b)&&aa(b).values.length&&(d=a[e]),e++}if(d&&c)for(let e of b)a[e]=bb(c,d)}(a,c,b)}measureInitialState(){let{element:a,unresolvedKeyframes:b,name:c}=this;if(!a||!a.current)return;"height"===c&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=aU[c](a.measureViewportBox(),window.getComputedStyle(a.current)),b[0]=this.measuredOrigin;let d=b[b.length-1];void 0!==d&&a.getValue(c,d).jump(d,!1)}measureEndState(){let{element:a,name:b,unresolvedKeyframes:c}=this;if(!a||!a.current)return;let d=a.getValue(b);d&&d.jump(this.measuredOrigin,!1);let e=c.length-1,f=c[e];c[e]=aU[b](a.measureViewportBox(),window.getComputedStyle(a.current)),null!==f&&void 0===this.finalKeyframe&&(this.finalKeyframe=f),this.removedTransforms?.length&&this.removedTransforms.forEach(([b,c])=>{a.getValue(b).set(c)}),this.resolveNoneKeyframes()}}let be=a=>1e3*a;function bf(a,b){-1===a.indexOf(b)&&a.push(b)}function bg(a,b){let c=a.indexOf(b);c>-1&&a.splice(c,1)}class bh{constructor(){this.subscriptions=[]}add(a){return bf(this.subscriptions,a),()=>bg(this.subscriptions,a)}notify(a,b,c){let d=this.subscriptions.length;if(d)if(1===d)this.subscriptions[0](a,b,c);else for(let e=0;e<d;e++){let d=this.subscriptions[e];d&&d(a,b,c)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function bi(a){let b;return()=>(void 0===b&&(b=a()),b)}let bj={};function bk(a,b){let c=bi(a);return()=>bj[b]??c()}let bl=bk(()=>void 0!==window.ScrollTimeline,"scrollTimeline"),bm=a=>null!==a;function bn(a,{repeat:b,repeatType:c="loop"},d,e=1){let f=a.filter(bm),g=e<0||b&&"loop"!==c&&b%2==1?0:f.length-1;return g&&void 0!==d?d:f[g]}class bo{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(a=>{this.resolve=a})}notifyFinished(){this.resolve()}then(a,b){return this.finished.then(a,b)}}let bp={layout:0,mainThread:0,waapi:0},bq=a=>Array.isArray(a)&&"number"==typeof a[0],br=bk(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(a){return!1}return!0},"linearEasing"),bs=(a,b,c=10)=>{let d="",e=Math.max(Math.round(b/c),2);for(let b=0;b<e;b++)d+=Math.round(1e4*a(b/(e-1)))/1e4+", ";return`linear(${d.substring(0,d.length-2)})`},bt=([a,b,c,d])=>`cubic-bezier(${a}, ${b}, ${c}, ${d})`,bu={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:bt([0,.65,.55,1]),circOut:bt([.55,0,1,.45]),backIn:bt([.31,.01,.66,-.59]),backOut:bt([.33,1.53,.69,.99])};function bv(a){return"function"==typeof a&&"applyToOptions"in a}class bw extends bo{constructor(a){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!a)return;let{element:b,name:c,keyframes:d,pseudoElement:e,allowFlatten:f=!1,finalKeyframe:g,onComplete:h}=a;this.isPseudoElement=!!e,this.allowFlatten=f,this.options=a,ay("string"!=typeof a.type,'Mini animate() doesn\'t support "type" as a string.',"mini-spring");let i=function({type:a,...b}){return bv(a)&&br()?a.applyToOptions(b):(b.duration??(b.duration=300),b.ease??(b.ease="easeOut"),b)}(a);this.animation=function(a,b,c,{delay:d=0,duration:e=300,repeat:f=0,repeatType:g="loop",ease:h="easeOut",times:i}={},j){let k={[b]:c};i&&(k.offset=i);let l=function a(b,c){if(b)return"function"==typeof b?br()?bs(b,c):"ease-out":bq(b)?bt(b):Array.isArray(b)?b.map(b=>a(b,c)||bu.easeOut):bu[b]}(h,e);Array.isArray(l)&&(k.easing=l),aY.value&&bp.waapi++;let m={delay:d,duration:e,easing:Array.isArray(l)?"linear":l,fill:"both",iterations:f+1,direction:"reverse"===g?"alternate":"normal"};j&&(m.pseudoElement=j);let n=a.animate(k,m);return aY.value&&n.finished.finally(()=>{bp.waapi--}),n}(b,c,d,i,e),!1===i.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!e){let a=bn(d,this.options,g,this.speed);this.updateMotionValue?this.updateMotionValue(a):function(a,b,c){b.startsWith("--")?a.style.setProperty(b,c):a.style[b]=c}(b,c,a),this.animation.cancel()}h?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch(a){}}stop(){if(this.isStopped)return;this.isStopped=!0;let{state:a}=this;"idle"!==a&&"finished"!==a&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){let a=this.options?.element;!this.isPseudoElement&&a?.isConnected&&this.animation.commitStyles?.()}get duration(){return Number(this.animation.effect?.getComputedTiming?.().duration||0)/1e3}get iterationDuration(){let{delay:a=0}=this.options||{};return this.duration+a/1e3}get time(){return(Number(this.animation.currentTime)||0)/1e3}set time(a){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=be(a)}get speed(){return this.animation.playbackRate}set speed(a){a<0&&(this.finishedTime=null),this.animation.playbackRate=a}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(a){this.manualStartTime=this.animation.startTime=a}attachTimeline({timeline:a,observe:b}){return(this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,a&&bl())?(this.animation.timeline=a,aV):b(this)}}let bx=new Set(["opacity","clipPath","filter","transform"]),{schedule:by}=aZ(queueMicrotask,!1);function bz(){d=void 0}let bA={now:()=>(void 0===d&&bA.set(a0.isProcessing||aW.useManualTiming?a0.timestamp:performance.now()),d),set:a=>{d=a,queueMicrotask(bz)}},bB={current:void 0};class bC{constructor(a,b={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=a=>{let b=bA.now();if(this.updatedAt!==b&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(a),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(let a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(a),this.owner=b.owner}setCurrent(a){this.current=a,this.updatedAt=bA.now(),null===this.canTrackVelocity&&void 0!==a&&(this.canTrackVelocity=!isNaN(parseFloat(this.current)))}setPrevFrameValue(a=this.current){this.prevFrameValue=a,this.prevUpdatedAt=this.updatedAt}onChange(a){return this.on("change",a)}on(a,b){this.events[a]||(this.events[a]=new bh);let c=this.events[a].add(b);return"change"===a?()=>{c(),a$.read(()=>{this.events.change.getSize()||this.stop()})}:c}clearListeners(){for(let a in this.events)this.events[a].clear()}attach(a,b){this.passiveEffect=a,this.stopPassiveEffect=b}set(a){this.passiveEffect?this.passiveEffect(a,this.updateAndNotify):this.updateAndNotify(a)}setWithVelocity(a,b,c){this.set(b),this.prev=void 0,this.prevFrameValue=a,this.prevUpdatedAt=this.updatedAt-c}jump(a,b=!0){this.updateAndNotify(a),this.prev=a,this.prevUpdatedAt=this.prevFrameValue=void 0,b&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(a){this.dependents||(this.dependents=new Set),this.dependents.add(a)}removeDependent(a){this.dependents&&this.dependents.delete(a)}get(){return bB.current&&bB.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){var a;let b=bA.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||b-this.updatedAt>30)return 0;let c=Math.min(this.updatedAt-this.prevUpdatedAt,30);return a=parseFloat(this.current)-parseFloat(this.prevFrameValue),c?1e3/c*a:0}start(a){return this.stop(),new Promise(b=>{this.hasAnimated=!0,this.animation=a(b),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function bD(a,b){return new bC(a,b)}let bE=[...av,X,ae],bF=new WeakMap;function bG(a){return null!==a&&"object"==typeof a&&"function"==typeof a.start}function bH(a){return"string"==typeof a||Array.isArray(a)}let bI=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],bJ=["initial",...bI];function bK(a){return bG(a.animate)||bJ.some(b=>bH(a[b]))}function bL(a){return!!(bK(a)||a.variants)}let bM={current:null},bN={current:!1},bO="undefined"!=typeof window;function bP(a){let b=[{},{}];return a?.values.forEach((a,c)=>{b[0][c]=a.get(),b[1][c]=a.getVelocity()}),b}function bQ(a,b,c,d){if("function"==typeof b){let[e,f]=bP(d);b=b(void 0!==c?c:a.custom,e,f)}if("string"==typeof b&&(b=a.variants&&a.variants[b]),"function"==typeof b){let[e,f]=bP(d);b=b(void 0!==c?c:a.custom,e,f)}return b}let bR=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],bS={};class bT{scrapeMotionValuesFromProps(a,b,c){return{}}constructor({parent:a,props:b,presenceContext:c,reducedMotionConfig:d,skipAnimations:e,blockInitialAnimation:f,visualState:g},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=a8,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.hasBeenMounted=!1,this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{let a=bA.now();this.renderScheduledAt<a&&(this.renderScheduledAt=a,a$.render(this.render,!1,!0))};let{latestValues:i,renderState:j}=g;this.latestValues=i,this.baseTarget={...i},this.initialValues=b.initial?{...i}:{},this.renderState=j,this.parent=a,this.props=b,this.presenceContext=c,this.depth=a?a.depth+1:0,this.reducedMotionConfig=d,this.skipAnimationsConfig=e,this.options=h,this.blockInitialAnimation=!!f,this.isControllingVariants=bK(b),this.isVariantNode=bL(b),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(a&&a.current);let{willChange:k,...l}=this.scrapeMotionValuesFromProps(b,{},this);for(let a in l){let b=l[a];void 0!==i[a]&&as(b)&&b.set(i[a])}}mount(a){if(this.hasBeenMounted)for(let a in this.initialValues)this.values.get(a)?.jump(this.initialValues[a]),this.latestValues[a]=this.initialValues[a];this.current=a,bF.set(a,this),this.projection&&!this.projection.instance&&this.projection.mount(a),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((a,b)=>this.bindToMotionValue(b,a)),"never"===this.reducedMotionConfig?this.shouldReduceMotion=!1:"always"===this.reducedMotionConfig?this.shouldReduceMotion=!0:(bN.current||function(){if(bN.current=!0,bO)if(window.matchMedia){let a=window.matchMedia("(prefers-reduced-motion)"),b=()=>bM.current=a.matches;a.addEventListener("change",b),b()}else bM.current=!1}(),this.shouldReduceMotion=bM.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,this.parent?.addChild(this),this.update(this.props,this.presenceContext),this.hasBeenMounted=!0}unmount(){for(let a in this.projection&&this.projection.unmount(),a_(this.notifyUpdate),a_(this.render),this.valueSubscriptions.forEach(a=>a()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this),this.events)this.events[a].clear();for(let a in this.features){let b=this.features[a];b&&(b.unmount(),b.isMounted=!1)}this.current=null}addChild(a){this.children.add(a),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(a)}removeChild(a){this.children.delete(a),this.enteringChildren&&this.enteringChildren.delete(a)}bindToMotionValue(a,b){let c;if(this.valueSubscriptions.has(a)&&this.valueSubscriptions.get(a)(),b.accelerate&&bx.has(a)&&this.current instanceof HTMLElement){let{factory:c,keyframes:d,times:e,ease:f,duration:g}=b.accelerate,h=new bw({element:this.current,name:a,keyframes:d,times:e,ease:f,duration:be(g)}),i=c(h);this.valueSubscriptions.set(a,()=>{i(),h.cancel()});return}let d=C.has(a);d&&this.onBindTransform&&this.onBindTransform();let e=b.on("change",b=>{this.latestValues[a]=b,this.props.onUpdate&&a$.preRender(this.notifyUpdate),d&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});"undefined"!=typeof window&&window.MotionCheckAppearSync&&(c=window.MotionCheckAppearSync(this,a,b)),this.valueSubscriptions.set(a,()=>{e(),c&&c(),b.owner&&b.stop()})}sortNodePosition(a){return this.current&&this.sortInstanceNodePosition&&this.type===a.type?this.sortInstanceNodePosition(this.current,a.current):0}updateFeatures(){let a="animation";for(a in bS){let b=bS[a];if(!b)continue;let{isEnabled:c,Feature:d}=b;if(!this.features[a]&&d&&c(this.props)&&(this.features[a]=new d(this)),this.features[a]){let b=this.features[a];b.isMounted?b.update():(b.mount(),b.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ar()}getStaticValue(a){return this.latestValues[a]}setStaticValue(a,b){this.latestValues[a]=b}update(a,b){(a.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=a,this.prevPresenceContext=this.presenceContext,this.presenceContext=b;for(let b=0;b<bR.length;b++){let c=bR[b];this.propEventSubscriptions[c]&&(this.propEventSubscriptions[c](),delete this.propEventSubscriptions[c]);let d=a["on"+c];d&&(this.propEventSubscriptions[c]=this.on(c,d))}this.prevMotionValues=function(a,b,c){for(let d in b){let e=b[d],f=c[d];if(as(e))a.addValue(d,e);else if(as(f))a.addValue(d,bD(e,{owner:a}));else if(f!==e)if(a.hasValue(d)){let b=a.getValue(d);!0===b.liveStyle?b.jump(e):b.hasAnimated||b.set(e)}else{let b=a.getStaticValue(d);a.addValue(d,bD(void 0!==b?b:e,{owner:a}))}}for(let d in c)void 0===b[d]&&a.removeValue(d);return b}(this,this.scrapeMotionValuesFromProps(a,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(a){return this.props.variants?this.props.variants[a]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(a){let b=this.getClosestVariantNode();if(b)return b.variantChildren&&b.variantChildren.add(a),()=>b.variantChildren.delete(a)}addValue(a,b){let c=this.values.get(a);b!==c&&(c&&this.removeValue(a),this.bindToMotionValue(a,b),this.values.set(a,b),this.latestValues[a]=b.get())}removeValue(a){this.values.delete(a);let b=this.valueSubscriptions.get(a);b&&(b(),this.valueSubscriptions.delete(a)),delete this.latestValues[a],this.removeValueFromRenderState(a,this.renderState)}hasValue(a){return this.values.has(a)}getValue(a,b){if(this.props.values&&this.props.values[a])return this.props.values[a];let c=this.values.get(a);return void 0===c&&void 0!==b&&(c=bD(null===b?void 0:b,{owner:this}),this.addValue(a,c)),c}readValue(a,b){let c=void 0===this.latestValues[a]&&this.current?this.getBaseTargetFromProps(this.props,a)??this.readValueFromInstance(this.current,a,this.options):this.latestValues[a];if(null!=c){if("string"==typeof c&&(az(c)||a9(c)))c=parseFloat(c);else{let d;d=c,!bE.find(au(d))&&ae.test(b)&&(c=bb(a,b))}this.setBaseTarget(a,as(c)?c.get():c)}return as(c)?c.get():c}setBaseTarget(a,b){this.baseTarget[a]=b}getBaseTarget(a){let b,{initial:c}=this.props;if("string"==typeof c||"object"==typeof c){let d=bQ(this.props,c,this.presenceContext?.custom);d&&(b=d[a])}if(c&&void 0!==b)return b;let d=this.getBaseTargetFromProps(this.props,a);return void 0===d||as(d)?void 0!==this.initialValues[a]&&void 0===b?void 0:this.baseTarget[a]:d}on(a,b){return this.events[a]||(this.events[a]=new bh),this.events[a].add(b)}notify(a,...b){this.events[a]&&this.events[a].notify(...b)}scheduleRenderMicrotask(){by.render(this.render)}}class bU extends bT{constructor(){super(...arguments),this.KeyframeResolver=bd}sortInstanceNodePosition(a,b){return 2&a.compareDocumentPosition(b)?1:-1}getBaseTargetFromProps(a,b){let c=a.style;return c?c[b]:void 0}removeValueFromRenderState(a,{vars:b,style:c}){delete b[a],delete c[a]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);let{children:a}=this.props;as(a)&&(this.childSubscription=a.on("change",a=>{this.current&&(this.current.textContent=`${a}`)}))}}function bV(a){return a.replace(/([A-Z])/g,a=>`-${a.toLowerCase()}`)}let bW=(a,b)=>b&&"number"==typeof a?b.transform(a):a,bX={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},bY=B.length;function bZ(a,b,c){let{style:d,vars:e,transformOrigin:f}=a,g=!1,h=!1;for(let a in b){let c=b[a];if(C.has(a)){g=!0;continue}if(aB(a)){e[a]=c;continue}{let b=bW(c,al[a]);a.startsWith("origin")?(h=!0,f[a]=b):d[a]=b}}if(!b.transform&&(g||c?d.transform=function(a,b,c){let d="",e=!0;for(let f=0;f<bY;f++){let g=B[f],h=a[g];if(void 0===h)continue;let i=!0;if("number"==typeof h)i=h===+!!g.startsWith("scale");else{let a=parseFloat(h);i=g.startsWith("scale")?1===a:0===a}if(!i||c){let a=bW(h,al[g]);if(!i){e=!1;let b=bX[g]||g;d+=`${b}(${a}) `}c&&(b[g]=a)}}return d=d.trim(),c?d=c(b,e?"":d):e&&(d="none"),d}(b,a.transform,c):d.transform&&(d.transform="none")),h){let{originX:a="50%",originY:b="50%",originZ:c=0}=f;d.transformOrigin=`${a} ${b} ${c}`}}let b$={offset:"stroke-dashoffset",array:"stroke-dasharray"},b_={offset:"strokeDashoffset",array:"strokeDasharray"},b0=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function b1(a,{attrX:b,attrY:c,attrScale:d,pathLength:e,pathSpacing:f=1,pathOffset:g=0,...h},i,j,k){if(bZ(a,h,j),i){a.style.viewBox&&(a.attrs.viewBox=a.style.viewBox);return}a.attrs=a.style,a.style={};let{attrs:l,style:m}=a;for(let a of(l.transform&&(m.transform=l.transform,delete l.transform),(m.transform||l.transformOrigin)&&(m.transformOrigin=l.transformOrigin??"50% 50%",delete l.transformOrigin),m.transform&&(m.transformBox=k?.transformBox??"fill-box",delete l.transformBox),b0))void 0!==l[a]&&(m[a]=l[a],delete l[a]);void 0!==b&&(l.x=b),void 0!==c&&(l.y=c),void 0!==d&&(l.scale=d),void 0!==e&&function(a,b,c=1,d=0,e=!0){a.pathLength=1;let f=e?b$:b_;a[f.offset]=`${-d}`,a[f.array]=`${b} ${c}`}(l,e,f,g,!1)}let b2=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),b3=a=>"string"==typeof a&&"svg"===a.toLowerCase();function b4(a,{style:b,vars:c},d,e){let f,g=a.style;for(f in b)g[f]=b[f];for(f in e?.applyProjectionStyles(g,d),c)g.setProperty(f,c[f])}function b5(a,b){return b.max===b.min?0:a/(b.max-b.min)*100}let b6={correct:(a,b)=>{if(!b.target)return a;if("string"==typeof a)if(!S.test(a))return a;else a=parseFloat(a);let c=b5(a,b.target.x),d=b5(a,b.target.y);return`${c}% ${d}%`}},b7=(a,b,c)=>a+(b-a)*c,b8={borderRadius:{...b6,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:b6,borderTopRightRadius:b6,borderBottomLeftRadius:b6,borderBottomRightRadius:b6,boxShadow:{correct:(a,{treeScale:b,projectionDelta:c})=>{let d=ae.parse(a);if(d.length>5)return a;let e=ae.createTransformer(a),f=+("number"!=typeof d[0]),g=c.x.scale*b.x,h=c.y.scale*b.y;d[0+f]/=g,d[1+f]/=h;let i=b7(g,h,.5);return"number"==typeof d[2+f]&&(d[2+f]/=i),"number"==typeof d[3+f]&&(d[3+f]/=i),e(d)}}};function b9(a,{layout:b,layoutId:c}){return C.has(a)||a.startsWith("origin")||(b||void 0!==c)&&(!!b8[a]||"opacity"===a)}function ca(a,b,c){let d=a.style,e=b?.style,f={};if(!d)return f;for(let b in d)(as(d[b])||e&&as(e[b])||b9(b,a)||c?.getValue(b)?.liveStyle!==void 0)&&(f[b]=d[b]);return f}function cb(a,b,c){let d=ca(a,b,c);for(let c in a)(as(a[c])||as(b[c]))&&(d[-1!==B.indexOf(c)?"attr"+c.charAt(0).toUpperCase()+c.substring(1):c]=a[c]);return d}class cc extends bU{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ar}getBaseTargetFromProps(a,b){return a[b]}readValueFromInstance(a,b){if(C.has(b)){let a=an(b);return a&&a.default||0}return b=b2.has(b)?b:bV(b),a.getAttribute(b)}scrapeMotionValuesFromProps(a,b,c){return cb(a,b,c)}build(a,b,c){b1(a,b,this.isSVGTag,c.transformTemplate,c.style)}renderInstance(a,b,c,d){for(let c in b4(a,b,void 0,d),b.attrs)a.setAttribute(b2.has(c)?c:bV(c),b.attrs[c])}mount(a){this.isSVGTag=b3(a.tagName),super.mount(a)}}function cd({top:a,left:b,right:c,bottom:d}){return{x:{min:b,max:c},y:{min:a,max:d}}}function ce(a){return void 0===a||1===a}function cf({scale:a,scaleX:b,scaleY:c}){return!ce(a)||!ce(b)||!ce(c)}function cg(a){return cf(a)||ch(a)||a.z||a.rotate||a.rotateX||a.rotateY||a.skewX||a.skewY}function ch(a){var b,c;return(b=a.x)&&"0%"!==b||(c=a.y)&&"0%"!==c}function ci(a,b,c,d,e){return void 0!==e&&(a=d+e*(a-d)),d+c*(a-d)+b}function cj(a,b=0,c=1,d,e){a.min=ci(a.min,b,c,d,e),a.max=ci(a.max,b,c,d,e)}function ck(a,{x:b,y:c}){cj(a.x,b.translate,b.scale,b.originPoint),cj(a.y,c.translate,c.scale,c.originPoint)}function cl(a,b){a.min=a.min+b,a.max=a.max+b}function cm(a,b,c,d,e=.5){let f=b7(a.min,a.max,e);cj(a,b,c,f,d)}function cn(a,b){cm(a.x,b.x,b.scaleX,b.scale,b.originX),cm(a.y,b.y,b.scaleY,b.scale,b.originY)}function co(a,b){return cd(function(a,b){if(!b)return a;let c=b({x:a.left,y:a.top}),d=b({x:a.right,y:a.bottom});return{top:c.y,left:c.x,bottom:d.y,right:d.x}}(a.getBoundingClientRect(),b))}class cp extends bU{constructor(){super(...arguments),this.type="html",this.renderInstance=b4}readValueFromInstance(a,b){if(C.has(b))return this.projection?.isProjecting?aO(b):((a,b)=>{let{transform:c="none"}=getComputedStyle(a);return aP(c,b)})(a,b);{let c=window.getComputedStyle(a),d=(aB(b)?c.getPropertyValue(b):c[b])||0;return"string"==typeof d?d.trim():d}}measureInstanceViewportBox(a,{transformPagePoint:b}){return co(a,b)}build(a,b,c){bZ(a,b,c.transformTemplate)}scrapeMotionValuesFromProps(a,b,c){return ca(a,b,c)}}let cq=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function cr(a){if("string"!=typeof a||a.includes("-"));else if(cq.indexOf(a)>-1||/[A-Z]/u.test(a))return!0;return!1}let cs=(0,z.createContext)({}),ct=(0,z.createContext)({strict:!1}),cu=(0,z.createContext)({transformPagePoint:a=>a,isStatic:!1,reducedMotion:"never"}),cv=(0,z.createContext)({});function cw(a){return Array.isArray(a)?a.join(" "):a}let cx=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function cy(a,b,c){for(let d in b)as(b[d])||b9(d,c)||(a[d]=b[d])}let cz=()=>({...cx(),attrs:{}}),cA=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function cB(a){return a.startsWith("while")||a.startsWith("drag")&&"draggable"!==a||a.startsWith("layout")||a.startsWith("onTap")||a.startsWith("onPan")||a.startsWith("onLayout")||cA.has(a)}let cC=a=>!cB(a);try{!function(a){"function"==typeof a&&(cC=b=>b.startsWith("on")?!cB(b):a(b))}(require("@emotion/is-prop-valid").default)}catch{}function cD(a){return as(a)?a.get():a}let cE=(0,z.createContext)(null);function cF(a){let b=(0,z.useRef)(null);return null===b.current&&(b.current=a()),b.current}let cG=a=>(b,c)=>{let d=(0,z.useContext)(cv),e=(0,z.useContext)(cE),f=()=>(function({scrapeMotionValuesFromProps:a,createRenderState:b},c,d,e){return{latestValues:function(a,b,c,d){let e={},f=d(a,{});for(let a in f)e[a]=cD(f[a]);let{initial:g,animate:h}=a,i=bK(a),j=bL(a);b&&j&&!i&&!1!==a.inherit&&(void 0===g&&(g=b.initial),void 0===h&&(h=b.animate));let k=!!c&&!1===c.initial,l=(k=k||!1===g)?h:g;if(l&&"boolean"!=typeof l&&!bG(l)){let b=Array.isArray(l)?l:[l];for(let c=0;c<b.length;c++){let d=bQ(a,b[c]);if(d){let{transitionEnd:a,transition:b,...c}=d;for(let a in c){let b=c[a];if(Array.isArray(b)){let a=k?b.length-1:0;b=b[a]}null!==b&&(e[a]=b)}for(let b in a)e[b]=a[b]}}}return e}(c,d,e,a),renderState:b()}})(a,b,d,e);return c?f():cF(f)},cH=cG({scrapeMotionValuesFromProps:ca,createRenderState:cx}),cI=cG({scrapeMotionValuesFromProps:cb,createRenderState:cz}),cJ="undefined"!=typeof window,cK={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},cL=!1;function cM(){return!function(){if(cL)return;let a={};for(let b in cK)a[b]={isEnabled:a=>cK[b].some(b=>!!a[b])};bS=a,cL=!0}(),bS}let cN=Symbol.for("motionComponentSymbol"),cO="data-"+bV("framerAppearId"),cP=(0,z.createContext)({});function cQ(a){return a&&"object"==typeof a&&Object.prototype.hasOwnProperty.call(a,"current")}let cR=cJ?z.useLayoutEffect:z.useEffect;function cS(a,{forwardMotionProps:b=!1,type:c}={},d,e){d&&function(a){let b=cM();for(let c in a)b[c]={...b[c],...a[c]};bS=b}(d);let f=c?"svg"===c:cr(a),g=f?cI:cH;function h(c,d){let h,i={...(0,z.useContext)(cu),...c,layoutId:function({layoutId:a}){let b=(0,z.useContext)(cs).id;return b&&void 0!==a?b+"-"+a:a}(c)},{isStatic:j}=i,k=function(a){let{initial:b,animate:c}=function(a,b){if(bK(a)){let{initial:b,animate:c}=a;return{initial:!1===b||bH(b)?b:void 0,animate:bH(c)?c:void 0}}return!1!==a.inherit?b:{}}(a,(0,z.useContext)(cv));return(0,z.useMemo)(()=>({initial:b,animate:c}),[cw(b),cw(c)])}(c),l=g(c,j);if(!j&&cJ){(0,z.useContext)(ct).strict;let b=function(a){let{drag:b,layout:c}=cM();if(!b&&!c)return{};let d={...b,...c};return{MeasureLayout:b?.isEnabled(a)||c?.isEnabled(a)?d.MeasureLayout:void 0,ProjectionNode:d.ProjectionNode}}(i);h=b.MeasureLayout,k.visualElement=function(a,b,c,d,e,f){let{visualElement:g}=(0,z.useContext)(cv),h=(0,z.useContext)(ct),i=(0,z.useContext)(cE),j=(0,z.useContext)(cu),k=j.reducedMotion,l=j.skipAnimations,m=(0,z.useRef)(null),n=(0,z.useRef)(!1);d=d||h.renderer,!m.current&&d&&(m.current=d(a,{visualState:b,parent:g,props:c,presenceContext:i,blockInitialAnimation:!!i&&!1===i.initial,reducedMotionConfig:k,skipAnimations:l,isSVG:f}),n.current&&m.current&&(m.current.manuallyAnimateOnMount=!0));let o=m.current,p=(0,z.useContext)(cP);o&&!o.projection&&e&&("html"===o.type||"svg"===o.type)&&function(a,b,c,d){let{layoutId:e,layout:f,drag:g,dragConstraints:h,layoutScroll:i,layoutRoot:j,layoutCrossfade:k}=b;a.projection=new c(a.latestValues,b["data-framer-portal-id"]?void 0:function a(b){if(b)return!1!==b.options.allowProjection?b.projection:a(b.parent)}(a.parent)),a.projection.setOptions({layoutId:e,layout:f,alwaysMeasureLayout:!!g||h&&cQ(h),visualElement:a,animationType:"string"==typeof f?f:"both",initialPromotionConfig:d,crossfade:k,layoutScroll:i,layoutRoot:j})}(m.current,c,e,p);let q=(0,z.useRef)(!1);(0,z.useInsertionEffect)(()=>{o&&q.current&&o.update(c,i)});let r=c[cO],s=(0,z.useRef)(!!r&&!window.MotionHandoffIsComplete?.(r)&&window.MotionHasOptimisedAnimation?.(r));return cR(()=>{n.current=!0,o&&(q.current=!0,window.MotionIsMounted=!0,o.updateFeatures(),o.scheduleRenderMicrotask(),s.current&&o.animationState&&o.animationState.animateChanges())}),o}(a,l,i,e,b.ProjectionNode,f)}return(0,y.jsxs)(cv.Provider,{value:k,children:[h&&k.visualElement?(0,y.jsx)(h,{visualElement:k.visualElement,...i}):null,function(a,b,c,{latestValues:d},e,f=!1,g){let h=(g??cr(a)?function(a,b,c,d){let e=(0,z.useMemo)(()=>{let c=cz();return b1(c,b,b3(d),a.transformTemplate,a.style),{...c.attrs,style:{...c.style}}},[b]);if(a.style){let b={};cy(b,a.style,a),e.style={...b,...e.style}}return e}:function(a,b){let c={},d=function(a,b){let c=a.style||{},d={};return cy(d,c,a),Object.assign(d,function({transformTemplate:a},b){return(0,z.useMemo)(()=>{let c=cx();return bZ(c,b,a),Object.assign({},c.vars,c.style)},[b])}(a,b)),d}(a,b);return a.drag&&!1!==a.dragListener&&(c.draggable=!1,d.userSelect=d.WebkitUserSelect=d.WebkitTouchCallout="none",d.touchAction=!0===a.drag?"none":`pan-${"x"===a.drag?"y":"x"}`),void 0===a.tabIndex&&(a.onTap||a.onTapStart||a.whileTap)&&(c.tabIndex=0),c.style=d,c})(b,d,e,a),i=function(a,b,c){let d={};for(let e in a)("values"!==e||"object"!=typeof a.values)&&(cC(e)||!0===c&&cB(e)||!b&&!cB(e)||a.draggable&&e.startsWith("onDrag"))&&(d[e]=a[e]);return d}(b,"string"==typeof a,f),j=a!==z.Fragment?{...i,...h,ref:c}:{},{children:k}=b,l=(0,z.useMemo)(()=>as(k)?k.get():k,[k]);return(0,z.createElement)(a,{...j,children:l})}(a,c,function(a,b,c){let d=(0,z.useRef)(c);(0,z.useInsertionEffect)(()=>{d.current=c});let e=(0,z.useRef)(null);return(0,z.useCallback)(c=>{c&&a.onMount?.(c),b&&(c?b.mount(c):b.unmount());let f=d.current;if("function"==typeof f)if(c){let a=f(c);"function"==typeof a&&(e.current=a)}else e.current?(e.current(),e.current=null):f(c);else f&&(f.current=c)},[b])}(l,k.visualElement,d),l,j,b,f)]})}h.displayName=`motion.${"string"==typeof a?a:`create(${a.displayName??a.name??""})`}`;let i=(0,z.forwardRef)(h);return i[cN]=a,i}class cT{constructor(a){this.isMounted=!1,this.node=a}update(){}}function cU(a,b,c){let d=a.getProps();return bQ(d,b,void 0!==c?c:d.custom,a)}function cV(a,b){if(a?.inherit&&b){let{inherit:c,...d}=a;return{...b,...d}}return a}function cW(a,b){let c=a?.[b]??a?.default??a;return c!==a?cV(c,a):c}let cX=a=>Array.isArray(a);function cY(a,b){let c=a.getValue("willChange");if(as(c)&&c.add)return c.add(b);if(!c&&aW.WillChange){let c=new aW.WillChange("auto");a.addValue("willChange",c),c.add(b)}}let cZ=(a,b)=>c=>b(a(c)),c$=(...a)=>a.reduce(cZ);function c_(a,b,c){return(c<0&&(c+=1),c>1&&(c-=1),c<1/6)?a+(b-a)*6*c:c<.5?b:c<2/3?a+(b-a)*(2/3-c)*6:a}function c0(a,b){return c=>c>0?b:a}let c1=(a,b,c)=>{let d=a*a,e=c*(b*b-d)+d;return e<0?0:Math.sqrt(e)},c2=[O,N,W];function c3(a){let b=c2.find(b=>b.test(a));if(ax(!!b,`'${a}' is not an animatable color. Use the equivalent color code instead.`,"color-not-animatable"),!b)return!1;let c=b.parse(a);return b===W&&(c=function({hue:a,saturation:b,lightness:c,alpha:d}){a/=360,c/=100;let e=0,f=0,g=0;if(b/=100){let d=c<.5?c*(1+b):c+b-c*b,h=2*c-d;e=c_(h,d,a+1/3),f=c_(h,d,a),g=c_(h,d,a-1/3)}else e=f=g=c;return{red:Math.round(255*e),green:Math.round(255*f),blue:Math.round(255*g),alpha:d}}(c)),c}let c4=(a,b)=>{let c=c3(a),d=c3(b);if(!c||!d)return c0(a,b);let e={...c};return a=>(e.red=c1(c.red,d.red,a),e.green=c1(c.green,d.green,a),e.blue=c1(c.blue,d.blue,a),e.alpha=b7(c.alpha,d.alpha,a),N.transform(e))},c5=new Set(["none","hidden"]);function c6(a,b){return c=>b7(a,b,c)}function c7(a){return"number"==typeof a?c6:"string"==typeof a?aD(a)?c0:X.test(a)?c4:da:Array.isArray(a)?c8:"object"==typeof a?X.test(a)?c4:c9:c0}function c8(a,b){let c=[...a],d=c.length,e=a.map((a,c)=>c7(a)(a,b[c]));return a=>{for(let b=0;b<d;b++)c[b]=e[b](a);return c}}function c9(a,b){let c={...a,...b},d={};for(let e in c)void 0!==a[e]&&void 0!==b[e]&&(d[e]=c7(a[e])(a[e],b[e]));return a=>{for(let b in d)c[b]=d[b](a);return c}}let da=(a,b)=>{let c=ae.createTransformer(b),d=aa(a),e=aa(b);return d.indexes.var.length===e.indexes.var.length&&d.indexes.color.length===e.indexes.color.length&&d.indexes.number.length>=e.indexes.number.length?c5.has(a)&&!e.values.length||c5.has(b)&&!d.values.length?function(a,b){return c5.has(a)?c=>c<=0?a:b:c=>c>=1?b:a}(a,b):c$(c8(function(a,b){let c=[],d={color:0,var:0,number:0};for(let e=0;e<b.values.length;e++){let f=b.types[e],g=a.indexes[f][d[f]],h=a.values[g]??0;c[e]=h,d[f]++}return c}(d,e),e.values),c):(ax(!0,`Complex values '${a}' and '${b}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`,"complex-values-different"),c0(a,b))};function db(a,b,c){return"number"==typeof a&&"number"==typeof b&&"number"==typeof c?b7(a,b,c):c7(a)(a,b)}let dc=a=>{let b=({timestamp:b})=>a(b);return{start:(a=!0)=>a$.update(b,a),stop:()=>a_(b),now:()=>a0.isProcessing?a0.timestamp:bA.now()}};function dd(a){let b=0,c=a.next(b);for(;!c.done&&b<2e4;)b+=50,c=a.next(b);return b>=2e4?1/0:b}function de(a,b,c){var d,e;let f=Math.max(b-5,0);return d=c-a(f),(e=b-f)?1e3/e*d:0}let df={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1};function dg(a,b){return a*Math.sqrt(1-b*b)}let dh=["duration","bounce"],di=["stiffness","damping","mass"];function dj(a,b){return b.some(b=>void 0!==a[b])}function dk(a=df.visualDuration,b=df.bounce){let c,d="object"!=typeof a?{visualDuration:a,keyframes:[0,1],bounce:b}:a,{restSpeed:e,restDelta:f}=d,g=d.keyframes[0],h=d.keyframes[d.keyframes.length-1],i={done:!1,value:g},{stiffness:j,damping:k,mass:l,duration:m,velocity:n,isResolvedFromDuration:o}=function(a){let b={velocity:df.velocity,stiffness:df.stiffness,damping:df.damping,mass:df.mass,isResolvedFromDuration:!1,...a};if(!dj(a,di)&&dj(a,dh))if(b.velocity=0,a.visualDuration){let c=2*Math.PI/(1.2*a.visualDuration),d=c*c,e=2*D(.05,1,1-(a.bounce||0))*Math.sqrt(d);b={...b,mass:df.mass,stiffness:d,damping:e}}else{let c=function({duration:a=df.duration,bounce:b=df.bounce,velocity:c=df.velocity,mass:d=df.mass}){let e,f;ax(a<=be(df.maxDuration),"Spring duration must be 10 seconds or less","spring-duration-limit");let g=1-b;g=D(df.minDamping,df.maxDamping,g),a=D(df.minDuration,df.maxDuration,a/1e3),g<1?(e=b=>{let d=b*g,e=d*a;return .001-(d-c)/dg(b,g)*Math.exp(-e)},f=b=>{let d=b*g*a,f=Math.pow(g,2)*Math.pow(b,2)*a,h=Math.exp(-d),i=dg(Math.pow(b,2),g);return(d*c+c-f)*h*(-e(b)+.001>0?-1:1)/i}):(e=b=>-.001+Math.exp(-b*a)*((b-c)*a+1),f=b=>a*a*(c-b)*Math.exp(-b*a));let h=function(a,b,c){let d=c;for(let c=1;c<12;c++)d-=a(d)/b(d);return d}(e,f,5/a);if(a=be(a),isNaN(h))return{stiffness:df.stiffness,damping:df.damping,duration:a};{let b=Math.pow(h,2)*d;return{stiffness:b,damping:2*g*Math.sqrt(d*b),duration:a}}}({...a,velocity:0});(b={...b,...c,mass:df.mass}).isResolvedFromDuration=!0}return b}({...d,velocity:-((d.velocity||0)/1e3)}),p=n||0,q=k/(2*Math.sqrt(j*l)),r=h-g,s=Math.sqrt(j/l)/1e3,t=5>Math.abs(r);if(e||(e=t?df.restSpeed.granular:df.restSpeed.default),f||(f=t?df.restDelta.granular:df.restDelta.default),q<1){let a=dg(s,q);c=b=>h-Math.exp(-q*s*b)*((p+q*s*r)/a*Math.sin(a*b)+r*Math.cos(a*b))}else if(1===q)c=a=>h-Math.exp(-s*a)*(r+(p+s*r)*a);else{let a=s*Math.sqrt(q*q-1);c=b=>{let c=Math.exp(-q*s*b),d=Math.min(a*b,300);return h-c*((p+q*s*r)*Math.sinh(d)+a*r*Math.cosh(d))/a}}let u={calculatedDuration:o&&m||null,next:a=>{let b=c(a);if(o)i.done=a>=m;else{let d=0===a?p:0;q<1&&(d=0===a?be(p):de(c,a,b));let g=Math.abs(h-b)<=f;i.done=Math.abs(d)<=e&&g}return i.value=i.done?h:b,i},toString:()=>{let a=Math.min(dd(u),2e4),b=bs(b=>u.next(a*b).value,a,30);return a+"ms "+b},toTransition:()=>{}};return u}function dl({keyframes:a,velocity:b=0,power:c=.8,timeConstant:d=325,bounceDamping:e=10,bounceStiffness:f=500,modifyTarget:g,min:h,max:i,restDelta:j=.5,restSpeed:k}){let l,m,n=a[0],o={done:!1,value:n},p=c*b,q=n+p,r=void 0===g?q:g(q);r!==q&&(p=r-n);let s=a=>-p*Math.exp(-a/d),t=a=>r+s(a),u=a=>{let b=s(a),c=t(a);o.done=Math.abs(b)<=j,o.value=o.done?r:c},v=a=>{let b;if(b=o.value,void 0!==h&&b<h||void 0!==i&&b>i){var c;l=a,m=dk({keyframes:[o.value,(c=o.value,void 0===h?i:void 0===i||Math.abs(h-c)<Math.abs(i-c)?h:i)],velocity:de(t,a,o.value),damping:e,stiffness:f,restDelta:j,restSpeed:k})}};return v(0),{calculatedDuration:null,next:a=>{let b=!1;return(m||void 0!==l||(b=!0,u(a),v(a)),void 0!==l&&a>=l)?m.next(a-l):(b||u(a),o)}}}dk.applyToOptions=a=>{let b=function(a,b=100,c){let d=c({...a,keyframes:[0,b]}),e=Math.min(dd(d),2e4);return{type:"keyframes",ease:a=>d.next(e*a).value/b,duration:e/1e3}}(a,100,dk);return a.ease=b.ease,a.duration=be(b.duration),a.type="keyframes",a};let dm=(a,b,c)=>(((1-3*c+3*b)*a+(3*c-6*b))*a+3*b)*a;function dn(a,b,c,d){return a===b&&c===d?aV:e=>0===e||1===e?e:dm(function(a,b,c,d,e){let f,g,h=0;do(f=dm(g=b+(c-b)/2,d,e)-a)>0?c=g:b=g;while(Math.abs(f)>1e-7&&++h<12);return g}(e,0,1,a,c),b,d)}let dp=dn(.42,0,1,1),dq=dn(0,0,.58,1),dr=dn(.42,0,.58,1),ds=a=>b=>b<=.5?a(2*b)/2:(2-a(2*(1-b)))/2,dt=a=>b=>1-a(1-b),du=dn(.33,1.53,.69,.99),dv=dt(du),dw=ds(dv),dx=a=>(a*=2)<1?.5*dv(a):.5*(2-Math.pow(2,-10*(a-1))),dy=a=>1-Math.sin(Math.acos(a)),dz=dt(dy),dA=ds(dy),dB={linear:aV,easeIn:dp,easeInOut:dr,easeOut:dq,circIn:dy,circInOut:dA,circOut:dz,backIn:dv,backInOut:dw,backOut:du,anticipate:dx},dC=a=>{if(bq(a)){ay(4===a.length,"Cubic bezier arrays must contain four numerical values.","cubic-bezier-length");let[b,c,d,e]=a;return dn(b,c,d,e)}return"string"==typeof a?(ay(void 0!==dB[a],`Invalid easing type '${a}'`,"invalid-easing-type"),dB[a]):a},dD=(a,b,c)=>{let d=b-a;return 0===d?1:(c-a)/d};function dE({duration:a=300,keyframes:b,times:c,ease:d="easeInOut"}){var e;let f=Array.isArray(d)&&"number"!=typeof d[0]?d.map(dC):dC(d),g={done:!1,value:b[0]},h=function(a,b,{clamp:c=!0,ease:d,mixer:e}={}){let f=a.length;if(ay(f===b.length,"Both input and output ranges must be the same length","range-length"),1===f)return()=>b[0];if(2===f&&b[0]===b[1])return()=>b[1];let g=a[0]===a[1];a[0]>a[f-1]&&(a=[...a].reverse(),b=[...b].reverse());let h=function(a,b,c){let d=[],e=c||aW.mix||db,f=a.length-1;for(let c=0;c<f;c++){let f=e(a[c],a[c+1]);b&&(f=c$(Array.isArray(b)?b[c]||aV:b,f)),d.push(f)}return d}(b,d,e),i=h.length,j=c=>{if(g&&c<a[0])return b[0];let d=0;if(i>1)for(;d<a.length-2&&!(c<a[d+1]);d++);let e=dD(a[d],a[d+1],c);return h[d](e)};return c?b=>j(D(a[0],a[f-1],b)):j}((e=c&&c.length===b.length?c:function(a){let b=[0];return!function(a,b){let c=a[a.length-1];for(let d=1;d<=b;d++){let e=dD(0,b,d);a.push(b7(c,1,e))}}(b,a.length-1),b}(b),e.map(b=>b*a)),b,{ease:Array.isArray(f)?f:b.map(()=>f||dr).splice(0,b.length-1)});return{calculatedDuration:a,next:b=>(g.value=h(b),g.done=b>=a,g)}}let dF={decay:dl,inertia:dl,tween:dE,keyframes:dE,spring:dk};function dG(a){"string"==typeof a.type&&(a.type=dF[a.type])}let dH=a=>a/100;class dI extends bo{constructor(a){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{let{motionValue:a}=this.options;a&&a.updatedAt!==bA.now()&&this.tick(bA.now()),this.isStopped=!0,"idle"!==this.state&&(this.teardown(),this.options.onStop?.())},bp.mainThread++,this.options=a,this.initAnimation(),this.play(),!1===a.autoplay&&this.pause()}initAnimation(){let{options:a}=this;dG(a);let{type:b=dE,repeat:c=0,repeatDelay:d=0,repeatType:e,velocity:f=0}=a,{keyframes:g}=a,h=b||dE;h!==dE&&"number"!=typeof g[0]&&(this.mixKeyframes=c$(dH,db(g[0],g[1])),g=[0,100]);let i=h({...a,keyframes:g});"mirror"===e&&(this.mirroredGenerator=h({...a,keyframes:[...g].reverse(),velocity:-f})),null===i.calculatedDuration&&(i.calculatedDuration=dd(i));let{calculatedDuration:j}=i;this.calculatedDuration=j,this.resolvedDuration=j+d,this.totalDuration=this.resolvedDuration*(c+1)-d,this.generator=i}updateTime(a){let b=Math.round(a-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=b}tick(a,b=!1){let{generator:c,totalDuration:d,mixKeyframes:e,mirroredGenerator:f,resolvedDuration:g,calculatedDuration:h}=this;if(null===this.startTime)return c.next(0);let{delay:i=0,keyframes:j,repeat:k,repeatType:l,repeatDelay:m,type:n,onUpdate:o,finalKeyframe:p}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,a):this.speed<0&&(this.startTime=Math.min(a-d/this.speed,this.startTime)),b?this.currentTime=a:this.updateTime(a);let q=this.currentTime-i*(this.playbackSpeed>=0?1:-1),r=this.playbackSpeed>=0?q<0:q>d;this.currentTime=Math.max(q,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=d);let s=this.currentTime,t=c;if(k){let a=Math.min(this.currentTime,d)/g,b=Math.floor(a),c=a%1;!c&&a>=1&&(c=1),1===c&&b--,(b=Math.min(b,k+1))%2&&("reverse"===l?(c=1-c,m&&(c-=m/g)):"mirror"===l&&(t=f)),s=D(0,1,c)*g}let u=r?{done:!1,value:j[0]}:t.next(s);e&&(u.value=e(u.value));let{done:v}=u;r||null===h||(v=this.playbackSpeed>=0?this.currentTime>=d:this.currentTime<=0);let w=null===this.holdTime&&("finished"===this.state||"running"===this.state&&v);return w&&n!==dl&&(u.value=bn(j,this.options,p,this.speed)),o&&o(u.value),w&&this.finish(),u}then(a,b){return this.finished.then(a,b)}get duration(){return this.calculatedDuration/1e3}get iterationDuration(){let{delay:a=0}=this.options||{};return this.duration+a/1e3}get time(){return this.currentTime/1e3}set time(a){a=be(a),this.currentTime=a,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=a:this.driver&&(this.startTime=this.driver.now()-a/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(a){this.updateTime(bA.now());let b=this.playbackSpeed!==a;this.playbackSpeed=a,b&&(this.time=this.currentTime/1e3)}play(){if(this.isStopped)return;let{driver:a=dc,startTime:b}=this.options;this.driver||(this.driver=a(a=>this.tick(a))),this.options.onPlay?.();let c=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=c):null!==this.holdTime?this.startTime=c-this.holdTime:this.startTime||(this.startTime=b??c),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(bA.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null,bp.mainThread--}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(a){return this.startTime=0,this.tick(a,!0)}attachTimeline(a){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),a.observe(this)}}let dJ={anticipate:dx,backInOut:dw,circInOut:dA};class dK extends bw{constructor(a){!function(a){"string"==typeof a.ease&&a.ease in dJ&&(a.ease=dJ[a.ease])}(a),dG(a),super(a),void 0!==a.startTime&&(this.startTime=a.startTime),this.options=a}updateMotionValue(a){let{motionValue:b,onUpdate:c,onComplete:d,element:e,...f}=this.options;if(!b)return;if(void 0!==a)return void b.set(a);let g=new dI({...f,autoplay:!1}),h=Math.max(10,bA.now()-this.startTime),i=D(0,10,h-10);b.setWithVelocity(g.sample(Math.max(0,h-i)).value,g.sample(h).value,i),g.stop()}}let dL=(a,b)=>"zIndex"!==b&&!!("number"==typeof a||Array.isArray(a)||"string"==typeof a&&(ae.test(a)||"0"===a)&&!a.startsWith("url("));function dM(a){a.duration=0,a.type="keyframes"}let dN=new Set(["opacity","clipPath","filter","transform"]),dO=bi(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));class dP extends bo{constructor({autoplay:a=!0,delay:b=0,type:c="keyframes",repeat:d=0,repeatDelay:e=0,repeatType:f="loop",keyframes:g,name:h,motionValue:i,element:j,...k}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=bA.now();let l={autoplay:a,delay:b,type:c,repeat:d,repeatDelay:e,repeatType:f,name:h,motionValue:i,element:j,...k},m=j?.KeyframeResolver||a8;this.keyframeResolver=new m(g,(a,b,c)=>this.onKeyframesResolved(a,b,l,!c),h,i,j),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(a,b,c,d){this.keyframeResolver=void 0;let{name:e,type:f,velocity:g,delay:h,isHandoff:i,onUpdate:j}=c;this.resolvedAt=bA.now(),!function(a,b,c,d){let e=a[0];if(null===e)return!1;if("display"===b||"visibility"===b)return!0;let f=a[a.length-1],g=dL(e,b),h=dL(f,b);return ax(g===h,`You are trying to animate ${b} from "${e}" to "${f}". "${g?f:e}" is not an animatable value.`,"value-not-animatable"),!!g&&!!h&&(function(a){let b=a[0];if(1===a.length)return!0;for(let c=0;c<a.length;c++)if(a[c]!==b)return!0}(a)||("spring"===c||bv(c))&&d)}(a,e,f,g)&&((aW.instantAnimations||!h)&&j?.(bn(a,c,b)),a[0]=a[a.length-1],dM(c),c.repeat=0);let k={startTime:d?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,finalKeyframe:b,...c,keyframes:a},l=!i&&function(a){let{motionValue:b,name:c,repeatDelay:d,repeatType:e,damping:f,type:g}=a;if(!(b?.owner?.current instanceof HTMLElement))return!1;let{onUpdate:h,transformTemplate:i}=b.owner.getProps();return dO()&&c&&dN.has(c)&&("transform"!==c||!i)&&!h&&!d&&"mirror"!==e&&0!==f&&"inertia"!==g}(k),m=k.motionValue?.owner?.current,n=l?new dK({...k,element:m}):new dI(k);n.finished.then(()=>{this.notifyFinished()}).catch(aV),this.pendingTimeline&&(this.stopTimeline=n.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=n}get finished(){return this._animation?this.animation.finished:this._finished}then(a,b){return this.finished.finally(a).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),a5=!0,a7(),a6(),a5=!1),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(a){this.animation.time=a}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(a){this.animation.speed=a}get startTime(){return this.animation.startTime}attachTimeline(a){return this._animation?this.stopTimeline=this.animation.attachTimeline(a):this.pendingTimeline=a,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}let dQ={type:"spring",stiffness:500,damping:25,restSpeed:10},dR={type:"keyframes",duration:.8},dS={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},dT=a=>null!==a,dU=(a,b,c,d={},e,f)=>g=>{let h=cW(d,a)||{},i=h.delay||d.delay||0,{elapsed:j=0}=d;j-=be(i);let k={keyframes:Array.isArray(c)?c:[null,c],ease:"easeOut",velocity:b.getVelocity(),...h,delay:-j,onUpdate:a=>{b.set(a),h.onUpdate&&h.onUpdate(a)},onComplete:()=>{g(),h.onComplete&&h.onComplete()},name:a,motionValue:b,element:f?void 0:e};!function({when:a,delay:b,delayChildren:c,staggerChildren:d,staggerDirection:e,repeat:f,repeatType:g,repeatDelay:h,from:i,elapsed:j,...k}){return!!Object.keys(k).length}(h)&&Object.assign(k,((a,{keyframes:b})=>b.length>2?dR:C.has(a)?a.startsWith("scale")?{type:"spring",stiffness:550,damping:0===b[1]?2*Math.sqrt(550):30,restSpeed:10}:dQ:dS)(a,k)),k.duration&&(k.duration=be(k.duration)),k.repeatDelay&&(k.repeatDelay=be(k.repeatDelay)),void 0!==k.from&&(k.keyframes[0]=k.from);let l=!1;if(!1!==k.type&&(0!==k.duration||k.repeatDelay)||(dM(k),0===k.delay&&(l=!0)),(aW.instantAnimations||aW.skipAnimations||e?.shouldSkipAnimations)&&(l=!0,dM(k),k.delay=0),k.allowFlatten=!h.type&&!h.ease,l&&!f&&void 0!==b.get()){let a=function(a,{repeat:b,repeatType:c="loop"},d){let e=a.filter(dT),f=b&&"loop"!==c&&b%2==1?0:e.length-1;return e[f]}(k.keyframes,h);if(void 0!==a)return void a$.update(()=>{k.onUpdate(a),k.onComplete()})}return h.isSync?new dI(k):new dP(k)};function dV(a,b,{delay:c=0,transitionOverride:d,type:e}={}){let{transition:f,transitionEnd:g,...h}=b,i=a.getDefaultTransition();f=f?cV(f,i):i;let j=f?.reduceMotion;d&&(f=d);let k=[],l=e&&a.animationState&&a.animationState.getState()[e];for(let b in h){let d=a.getValue(b,a.latestValues[b]??null),e=h[b];if(void 0===e||l&&function({protectedKeys:a,needsAnimating:b},c){let d=a.hasOwnProperty(c)&&!0!==b[c];return b[c]=!1,d}(l,b))continue;let g={delay:c,...cW(f||{},b)},i=d.get();if(void 0!==i&&!d.isAnimating&&!Array.isArray(e)&&e===i&&!g.velocity)continue;let m=!1;if(window.MotionHandoffAnimation){let c=a.props[cO];if(c){let a=window.MotionHandoffAnimation(c,b,a$);null!==a&&(g.startTime=a,m=!0)}}cY(a,b);let n=j??a.shouldReduceMotion;d.start(dU(b,d,e,n&&at.has(b)?{type:!1}:g,a,m));let o=d.animation;o&&k.push(o)}if(g){let b=()=>a$.update(()=>{g&&function(a,b){let{transitionEnd:c={},transition:d={},...e}=cU(a,b)||{};for(let b in e={...e,...c}){var f;let c=cX(f=e[b])?f[f.length-1]||0:f;a.hasValue(b)?a.getValue(b).set(c):a.addValue(b,bD(c))}}(a,g)});k.length?Promise.all(k).then(b):b()}return k}function dW(a,b,c,d=0,e=1){let f=Array.from(a).sort((a,b)=>a.sortNodePosition(b)).indexOf(b),g=a.size,h=(g-1)*d;return"function"==typeof c?c(f,g):1===e?f*d:h-f*d}function dX(a,b,c={}){let d=cU(a,b,"exit"===c.type?a.presenceContext?.custom:void 0),{transition:e=a.getDefaultTransition()||{}}=d||{};c.transitionOverride&&(e=c.transitionOverride);let f=d?()=>Promise.all(dV(a,d,c)):()=>Promise.resolve(),g=a.variantChildren&&a.variantChildren.size?(d=0)=>{let{delayChildren:f=0,staggerChildren:g,staggerDirection:h}=e;return function(a,b,c=0,d=0,e=0,f=1,g){let h=[];for(let i of a.variantChildren)i.notify("AnimationStart",b),h.push(dX(i,b,{...g,delay:c+("function"==typeof d?0:d)+dW(a.variantChildren,i,d,e,f)}).then(()=>i.notify("AnimationComplete",b)));return Promise.all(h)}(a,b,d,f,g,h,c)}:()=>Promise.resolve(),{when:h}=e;if(!h)return Promise.all([f(),g(c.delay)]);{let[a,b]="beforeChildren"===h?[f,g]:[g,f];return a().then(()=>b())}}let dY=bJ.length;function dZ(a,b){if(!Array.isArray(b))return!1;let c=b.length;if(c!==a.length)return!1;for(let d=0;d<c;d++)if(b[d]!==a[d])return!1;return!0}let d$=[...bI].reverse(),d_=bI.length;function d0(a=!1){return{isActive:a,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function d1(){return{animate:d0(!0),whileInView:d0(),whileHover:d0(),whileTap:d0(),whileDrag:d0(),whileFocus:d0(),exit:d0()}}class d2 extends cT{constructor(a){super(a),a.animationState||(a.animationState=function(a){let b=b=>Promise.all(b.map(({animation:b,options:c})=>(function(a,b,c={}){let d;if(a.notify("AnimationStart",b),Array.isArray(b))d=Promise.all(b.map(b=>dX(a,b,c)));else if("string"==typeof b)d=dX(a,b,c);else{let e="function"==typeof b?cU(a,b,c.custom):b;d=Promise.all(dV(a,e,c))}return d.then(()=>{a.notify("AnimationComplete",b)})})(a,b,c))),c=d1(),d=!0,e=b=>(c,d)=>{let e=cU(a,d,"exit"===b?a.presenceContext?.custom:void 0);if(e){let{transition:a,transitionEnd:b,...d}=e;c={...c,...d,...b}}return c};function f(f){let{props:g}=a,h=function a(b){if(!b)return;if(!b.isControllingVariants){let c=b.parent&&a(b.parent)||{};return void 0!==b.props.initial&&(c.initial=b.props.initial),c}let c={};for(let a=0;a<dY;a++){let d=bJ[a],e=b.props[d];(bH(e)||!1===e)&&(c[d]=e)}return c}(a.parent)||{},i=[],j=new Set,k={},l=1/0;for(let b=0;b<d_;b++){var m,n;let o=d$[b],p=c[o],q=void 0!==g[o]?g[o]:h[o],r=bH(q),s=o===f?p.isActive:null;!1===s&&(l=b);let t=q===h[o]&&q!==g[o]&&r;if(t&&d&&a.manuallyAnimateOnMount&&(t=!1),p.protectedKeys={...k},!p.isActive&&null===s||!q&&!p.prevProp||bG(q)||"boolean"==typeof q)continue;if("exit"===o&&p.isActive&&!0!==s){p.prevResolvedValues&&(k={...k,...p.prevResolvedValues});continue}let u=(m=p.prevProp,"string"==typeof(n=q)?n!==m:!!Array.isArray(n)&&!dZ(n,m)),v=u||o===f&&p.isActive&&!t&&r||b>l&&r,w=!1,x=Array.isArray(q)?q:[q],y=x.reduce(e(o),{});!1===s&&(y={});let{prevResolvedValues:z={}}=p,A={...z,...y},B=b=>{v=!0,j.has(b)&&(w=!0,j.delete(b)),p.needsAnimating[b]=!0;let c=a.getValue(b);c&&(c.liveStyle=!1)};for(let a in A){let b=y[a],c=z[a];if(!k.hasOwnProperty(a))(cX(b)&&cX(c)?dZ(b,c):b===c)?void 0!==b&&j.has(a)?B(a):p.protectedKeys[a]=!0:null!=b?B(a):j.add(a)}p.prevProp=q,p.prevResolvedValues=y,p.isActive&&(k={...k,...y}),d&&a.blockInitialAnimation&&(v=!1);let C=t&&u,D=!C||w;v&&D&&i.push(...x.map(b=>{let c={type:o};if("string"==typeof b&&d&&!C&&a.manuallyAnimateOnMount&&a.parent){let{parent:d}=a,e=cU(d,b);if(d.enteringChildren&&e){let{delayChildren:b}=e.transition||{};c.delay=dW(d.enteringChildren,a,b)}}return{animation:b,options:c}}))}if(j.size){let b={};if("boolean"!=typeof g.initial){let c=cU(a,Array.isArray(g.initial)?g.initial[0]:g.initial);c&&c.transition&&(b.transition=c.transition)}j.forEach(c=>{let d=a.getBaseTarget(c),e=a.getValue(c);e&&(e.liveStyle=!0),b[c]=d??null}),i.push({animation:b})}let o=!!i.length;return d&&(!1===g.initial||g.initial===g.animate)&&!a.manuallyAnimateOnMount&&(o=!1),d=!1,o?b(i):Promise.resolve()}return{animateChanges:f,setActive:function(b,d){if(c[b].isActive===d)return Promise.resolve();a.variantChildren?.forEach(a=>a.animationState?.setActive(b,d)),c[b].isActive=d;let e=f(b);for(let a in c)c[a].protectedKeys={};return e},setAnimateFunction:function(c){b=c(a)},getState:()=>c,reset:()=>{c=d1()}}}(a))}updateAnimationControlsSubscription(){let{animate:a}=this.node.getProps();bG(a)&&(this.unmountControls=a.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){let{animate:a}=this.node.getProps(),{animate:b}=this.node.prevProps||{};a!==b&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let d3=0;class d4 extends cT{constructor(){super(...arguments),this.id=d3++}update(){if(!this.node.presenceContext)return;let{isPresent:a,onExitComplete:b}=this.node.presenceContext,{isPresent:c}=this.node.prevPresenceContext||{};if(!this.node.animationState||a===c)return;let d=this.node.animationState.setActive("exit",!a);b&&!a&&d.then(()=>{b(this.id)})}mount(){let{register:a,onExitComplete:b}=this.node.presenceContext||{};b&&b(this.id),a&&(this.unmount=a(this.id))}unmount(){}}let d5={x:!1,y:!1};function d6(a){return[a("x"),a("y")]}function d7(a){return a.max-a.min}function d8(a,b,c,d=.5){a.origin=d,a.originPoint=b7(b.min,b.max,a.origin),a.scale=d7(c)/d7(b),a.translate=b7(c.min,c.max,a.origin)-a.originPoint,(a.scale>=.9999&&a.scale<=1.0001||isNaN(a.scale))&&(a.scale=1),(a.translate>=-.01&&a.translate<=.01||isNaN(a.translate))&&(a.translate=0)}function d9(a,b,c,d){d8(a.x,b.x,c.x,d?d.originX:void 0),d8(a.y,b.y,c.y,d?d.originY:void 0)}function ea(a,b,c){a.min=c.min+b.min,a.max=a.min+d7(b)}function eb(a,b,c){a.min=b.min-c.min,a.max=a.min+d7(b)}function ec(a,b,c){eb(a.x,b.x,c.x),eb(a.y,b.y,c.y)}let ed=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]),ee=new Set(["INPUT","SELECT","TEXTAREA"]);function ef(a,b,c,d={passive:!0}){return a.addEventListener(b,c,d),()=>a.removeEventListener(b,c)}function eg(a){return"object"==typeof a&&null!==a}function eh(a){return eg(a)&&"ownerSVGElement"in a}function ei(a,b,c){if(null==a)return[];if(a instanceof EventTarget)return[a];if("string"==typeof a){let d=document;b&&(d=b.current);let e=c?.[a]??d.querySelectorAll(a);return e?Array.from(e):[]}return Array.from(a).filter(a=>null!=a)}let ej=new WeakMap,ek=(a,b,c)=>(d,e)=>e&&e[0]?e[0][a+"Size"]:eh(d)&&"getBBox"in d?d.getBBox()[b]:d[c],el=ek("inline","width","offsetWidth"),em=ek("block","height","offsetHeight");function en({target:a,borderBoxSize:b}){ej.get(a)?.forEach(c=>{c(a,{get width(){return el(a,b)},get height(){return em(a,b)}})})}function eo(a){a.forEach(en)}let ep=new Set;function eq(a,b){return"function"==typeof a?(ep.add(a),f||(f=()=>{let a={get width(){return window.innerWidth},get height(){return window.innerHeight}};ep.forEach(b=>b(a))},window.addEventListener("resize",f)),()=>{ep.delete(a),ep.size||"function"!=typeof f||(window.removeEventListener("resize",f),f=void 0)}):function(a,b){e||"undefined"!=typeof ResizeObserver&&(e=new ResizeObserver(eo));let c=ei(a);return c.forEach(a=>{let c=ej.get(a);c||(c=new Set,ej.set(a,c)),c.add(b),e?.observe(a)}),()=>{c.forEach(a=>{let c=ej.get(a);c?.delete(b),c?.size||e?.unobserve(a)})}}(a,b)}let er=a=>"mouse"===a.pointerType?"number"!=typeof a.button||a.button<=0:!1!==a.isPrimary;function es(a){return{point:{x:a.pageX,y:a.pageY}}}function et(a,b,c,d){return ef(a,b,a=>er(a)&&c(a,es(a)),d)}let eu=({current:a})=>a?a.ownerDocument.defaultView:null,ev=(a,b)=>Math.abs(a-b),ew=new Set(["auto","scroll"]);class ex{constructor(a,b,{transformPagePoint:c,contextWindow:d=window,dragSnapToOrigin:e=!1,distanceThreshold:f=3,element:g}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=a=>{this.handleScroll(a.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let a=eA(this.lastMoveEventInfo,this.history),b=null!==this.startEvent,c=function(a,b){return Math.sqrt(ev(a.x,b.x)**2+ev(a.y,b.y)**2)}(a.offset,{x:0,y:0})>=this.distanceThreshold;if(!b&&!c)return;let{point:d}=a,{timestamp:e}=a0;this.history.push({...d,timestamp:e});let{onStart:f,onMove:g}=this.handlers;b||(f&&f(this.lastMoveEvent,a),this.startEvent=this.lastMoveEvent),g&&g(this.lastMoveEvent,a)},this.handlePointerMove=(a,b)=>{this.lastMoveEvent=a,this.lastMoveEventInfo=ey(b,this.transformPagePoint),a$.update(this.updatePoint,!0)},this.handlePointerUp=(a,b)=>{this.end();let{onEnd:c,onSessionEnd:d,resumeAnimation:e}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&e&&e(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let f=eA("pointercancel"===a.type?this.lastMoveEventInfo:ey(b,this.transformPagePoint),this.history);this.startEvent&&c&&c(a,f),d&&d(a,f)},!er(a))return;this.dragSnapToOrigin=e,this.handlers=b,this.transformPagePoint=c,this.distanceThreshold=f,this.contextWindow=d||window;let h=ey(es(a),this.transformPagePoint),{point:i}=h,{timestamp:j}=a0;this.history=[{...i,timestamp:j}];let{onSessionStart:k}=b;k&&k(a,eA(h,this.history)),this.removeListeners=c$(et(this.contextWindow,"pointermove",this.handlePointerMove),et(this.contextWindow,"pointerup",this.handlePointerUp),et(this.contextWindow,"pointercancel",this.handlePointerUp)),g&&this.startScrollTracking(g)}startScrollTracking(a){let b=a.parentElement;for(;b;){let a=getComputedStyle(b);(ew.has(a.overflowX)||ew.has(a.overflowY))&&this.scrollPositions.set(b,{x:b.scrollLeft,y:b.scrollTop}),b=b.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0}),window.addEventListener("scroll",this.onWindowScroll),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(a){let b=this.scrollPositions.get(a);if(!b)return;let c=a===window,d=c?{x:window.scrollX,y:window.scrollY}:{x:a.scrollLeft,y:a.scrollTop},e={x:d.x-b.x,y:d.y-b.y};(0!==e.x||0!==e.y)&&(c?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=e.x,this.lastMoveEventInfo.point.y+=e.y):this.history.length>0&&(this.history[0].x-=e.x,this.history[0].y-=e.y),this.scrollPositions.set(a,d),a$.update(this.updatePoint,!0))}updateHandlers(a){this.handlers=a}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),a_(this.updatePoint)}}function ey(a,b){return b?{point:b(a.point)}:a}function ez(a,b){return{x:a.x-b.x,y:a.y-b.y}}function eA({point:a},b){return{point:a,delta:ez(a,eB(b)),offset:ez(a,b[0]),velocity:function(a,b){if(a.length<2)return{x:0,y:0};let c=a.length-1,d=null,e=eB(a);for(;c>=0&&(d=a[c],!(e.timestamp-d.timestamp>be(.1)));)c--;if(!d)return{x:0,y:0};d===a[0]&&a.length>2&&e.timestamp-d.timestamp>2*be(b)&&(d=a[1]);let f=(e.timestamp-d.timestamp)/1e3;if(0===f)return{x:0,y:0};let g={x:(e.x-d.x)/f,y:(e.y-d.y)/f};return g.x===1/0&&(g.x=0),g.y===1/0&&(g.y=0),g}(b,.1)}}function eB(a){return a[a.length-1]}function eC(a,b,c){return{min:void 0!==b?a.min+b:void 0,max:void 0!==c?a.max+c-(a.max-a.min):void 0}}function eD(a,b){let c=b.min-a.min,d=b.max-a.max;return b.max-b.min<a.max-a.min&&([c,d]=[d,c]),{min:c,max:d}}function eE(a,b,c){return{min:eF(a,b),max:eF(a,c)}}function eF(a,b){return"number"==typeof a?a:a[b]||0}let eG=new WeakMap;class eH{constructor(a){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ar(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=a}start(a,{snapToCursor:b=!1,distanceThreshold:c}={}){let{presenceContext:d}=this.visualElement;if(d&&!1===d.isPresent)return;let e=a=>{b&&this.snapToCursor(es(a).point),this.stopAnimation()},f=(a,b)=>{let{drag:c,dragPropagation:d,onDragStart:e}=this.getProps();if(c&&!d&&(this.openDragLock&&this.openDragLock(),this.openDragLock=function(a){if("x"===a||"y"===a)if(d5[a])return null;else return d5[a]=!0,()=>{d5[a]=!1};return d5.x||d5.y?null:(d5.x=d5.y=!0,()=>{d5.x=d5.y=!1})}(c),!this.openDragLock))return;this.latestPointerEvent=a,this.latestPanInfo=b,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),d6(a=>{let b=this.getAxisMotionValue(a).get()||0;if(R.test(b)){let{projection:c}=this.visualElement;if(c&&c.layout){let d=c.layout.layoutBox[a];d&&(b=d7(d)*(parseFloat(b)/100))}}this.originPoint[a]=b}),e&&a$.update(()=>e(a,b),!1,!0),cY(this.visualElement,"transform");let{animationState:f}=this.visualElement;f&&f.setActive("whileDrag",!0)},g=(a,b)=>{this.latestPointerEvent=a,this.latestPanInfo=b;let{dragPropagation:c,dragDirectionLock:d,onDirectionLock:e,onDrag:f}=this.getProps();if(!c&&!this.openDragLock)return;let{offset:g}=b;if(d&&null===this.currentDirection){this.currentDirection=function(a,b=10){let c=null;return Math.abs(a.y)>b?c="y":Math.abs(a.x)>b&&(c="x"),c}(g),null!==this.currentDirection&&e&&e(this.currentDirection);return}this.updateAxis("x",b.point,g),this.updateAxis("y",b.point,g),this.visualElement.render(),f&&a$.update(()=>f(a,b),!1,!0)},h=(a,b)=>{this.latestPointerEvent=a,this.latestPanInfo=b,this.stop(a,b),this.latestPointerEvent=null,this.latestPanInfo=null},i=()=>{let{dragSnapToOrigin:a}=this.getProps();(a||this.constraints)&&this.startAnimation({x:0,y:0})},{dragSnapToOrigin:j}=this.getProps();this.panSession=new ex(a,{onSessionStart:e,onStart:f,onMove:g,onSessionEnd:h,resumeAnimation:i},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:j,distanceThreshold:c,contextWindow:eu(this.visualElement),element:this.visualElement.current})}stop(a,b){let c=a||this.latestPointerEvent,d=b||this.latestPanInfo,e=this.isDragging;if(this.cancel(),!e||!d||!c)return;let{velocity:f}=d;this.startAnimation(f);let{onDragEnd:g}=this.getProps();g&&a$.postRender(()=>g(c,d))}cancel(){this.isDragging=!1;let{projection:a,animationState:b}=this.visualElement;a&&(a.isAnimationBlocked=!1),this.endPanSession();let{dragPropagation:c}=this.getProps();!c&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),b&&b.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(a,b,c){let{drag:d}=this.getProps();if(!c||!eJ(a,d,this.currentDirection))return;let e=this.getAxisMotionValue(a),f=this.originPoint[a]+c[a];this.constraints&&this.constraints[a]&&(f=function(a,{min:b,max:c},d){return void 0!==b&&a<b?a=d?b7(b,a,d.min):Math.max(a,b):void 0!==c&&a>c&&(a=d?b7(c,a,d.max):Math.min(a,c)),a}(f,this.constraints[a],this.elastic[a])),e.set(f)}resolveConstraints(){let{dragConstraints:a,dragElastic:b}=this.getProps(),c=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,d=this.constraints;a&&cQ(a)?this.constraints||(this.constraints=this.resolveRefConstraints()):a&&c?this.constraints=function(a,{top:b,left:c,bottom:d,right:e}){return{x:eC(a.x,c,e),y:eC(a.y,b,d)}}(c.layoutBox,a):this.constraints=!1,this.elastic=function(a=.35){return!1===a?a=0:!0===a&&(a=.35),{x:eE(a,"left","right"),y:eE(a,"top","bottom")}}(b),d!==this.constraints&&!cQ(a)&&c&&this.constraints&&!this.hasMutatedConstraints&&d6(a=>{!1!==this.constraints&&this.getAxisMotionValue(a)&&(this.constraints[a]=function(a,b){let c={};return void 0!==b.min&&(c.min=b.min-a.min),void 0!==b.max&&(c.max=b.max-a.min),c}(c.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){var a;let{dragConstraints:b,onMeasureDragConstraints:c}=this.getProps();if(!b||!cQ(b))return!1;let d=b.current;ay(null!==d,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.","drag-constraints-ref");let{projection:e}=this.visualElement;if(!e||!e.layout)return!1;let f=function(a,b,c){let d=co(a,c),{scroll:e}=b;return e&&(cl(d.x,e.offset.x),cl(d.y,e.offset.y)),d}(d,e.root,this.visualElement.getTransformPagePoint()),g=(a=e.layout.layoutBox,{x:eD(a.x,f.x),y:eD(a.y,f.y)});if(c){let a=c(function({x:a,y:b}){return{top:b.min,right:a.max,bottom:b.max,left:a.min}}(g));this.hasMutatedConstraints=!!a,a&&(g=cd(a))}return g}startAnimation(a){let{drag:b,dragMomentum:c,dragElastic:d,dragTransition:e,dragSnapToOrigin:f,onDragTransitionEnd:g}=this.getProps(),h=this.constraints||{};return Promise.all(d6(g=>{if(!eJ(g,b,this.currentDirection))return;let i=h&&h[g]||{};f&&(i={min:0,max:0});let j={type:"inertia",velocity:c?a[g]:0,bounceStiffness:d?200:1e6,bounceDamping:d?40:1e7,timeConstant:750,restDelta:1,restSpeed:10,...e,...i};return this.startAxisValueAnimation(g,j)})).then(g)}startAxisValueAnimation(a,b){let c=this.getAxisMotionValue(a);return cY(this.visualElement,a),c.start(dU(a,c,0,b,this.visualElement,!1))}stopAnimation(){d6(a=>this.getAxisMotionValue(a).stop())}getAxisMotionValue(a){let b=`_drag${a.toUpperCase()}`,c=this.visualElement.getProps();return c[b]||this.visualElement.getValue(a,(c.initial?c.initial[a]:void 0)||0)}snapToCursor(a){d6(b=>{let{drag:c}=this.getProps();if(!eJ(b,c,this.currentDirection))return;let{projection:d}=this.visualElement,e=this.getAxisMotionValue(b);if(d&&d.layout){let{min:c,max:f}=d.layout.layoutBox[b],g=e.get()||0;e.set(a[b]-b7(c,f,.5)+g)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;let{drag:a,dragConstraints:b}=this.getProps(),{projection:c}=this.visualElement;if(!cQ(b)||!c||!this.constraints)return;this.stopAnimation();let d={x:0,y:0};d6(a=>{let b=this.getAxisMotionValue(a);if(b&&!1!==this.constraints){let c=b.get();d[a]=function(a,b){let c=.5,d=d7(a),e=d7(b);return e>d?c=dD(b.min,b.max-d,a.min):d>e&&(c=dD(a.min,a.max-e,b.min)),D(0,1,c)}({min:c,max:c},this.constraints[a])}});let{transformTemplate:e}=this.visualElement.getProps();this.visualElement.current.style.transform=e?e({},""):"none",c.root&&c.root.updateScroll(),c.updateLayout(),this.constraints=!1,this.resolveConstraints(),d6(b=>{if(!eJ(b,a,null))return;let c=this.getAxisMotionValue(b),{min:e,max:f}=this.constraints[b];c.set(b7(e,f,d[b]))}),this.visualElement.render()}addListeners(){let a;if(!this.visualElement.current)return;eG.set(this.visualElement,this);let b=this.visualElement.current,c=et(b,"pointerdown",a=>{let{drag:c,dragListener:d=!0}=this.getProps(),e=a.target,f=e!==b&&(ee.has(e.tagName)||!0===e.isContentEditable);c&&d&&!f&&this.start(a)}),d=()=>{let{dragConstraints:c}=this.getProps();cQ(c)&&c.current&&(this.constraints=this.resolveRefConstraints(),a||(a=function(a,b,c){let d=eq(a,eI(c)),e=eq(b,eI(c));return()=>{d(),e()}}(b,c.current,()=>this.scalePositionWithinConstraints())))},{projection:e}=this.visualElement,f=e.addEventListener("measure",d);e&&!e.layout&&(e.root&&e.root.updateScroll(),e.updateLayout()),a$.read(d);let g=ef(window,"resize",()=>this.scalePositionWithinConstraints()),h=e.addEventListener("didUpdate",({delta:a,hasLayoutChanged:b})=>{this.isDragging&&b&&(d6(b=>{let c=this.getAxisMotionValue(b);c&&(this.originPoint[b]+=a[b].translate,c.set(c.get()+a[b].translate))}),this.visualElement.render())});return()=>{g(),c(),f(),h&&h(),a&&a()}}getProps(){let a=this.visualElement.getProps(),{drag:b=!1,dragDirectionLock:c=!1,dragPropagation:d=!1,dragConstraints:e=!1,dragElastic:f=.35,dragMomentum:g=!0}=a;return{...a,drag:b,dragDirectionLock:c,dragPropagation:d,dragConstraints:e,dragElastic:f,dragMomentum:g}}}function eI(a){let b=!0;return()=>{if(b){b=!1;return}a()}}function eJ(a,b,c){return(!0===b||b===a)&&(null===c||c===a)}class eK extends cT{constructor(a){super(a),this.removeGroupControls=aV,this.removeListeners=aV,this.controls=new eH(a)}mount(){let{dragControls:a}=this.node.getProps();a&&(this.removeGroupControls=a.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||aV}update(){let{dragControls:a}=this.node.getProps(),{dragControls:b}=this.node.prevProps||{};a!==b&&(this.removeGroupControls(),a&&(this.removeGroupControls=a.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}let eL=a=>(b,c)=>{a&&a$.update(()=>a(b,c),!1,!0)};class eM extends cT{constructor(){super(...arguments),this.removePointerDownListener=aV}onPointerDown(a){this.session=new ex(a,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:eu(this.node)})}createPanHandlers(){let{onPanSessionStart:a,onPanStart:b,onPan:c,onPanEnd:d}=this.node.getProps();return{onSessionStart:eL(a),onStart:eL(b),onMove:eL(c),onEnd:(a,b)=>{delete this.session,d&&a$.postRender(()=>d(a,b))}}}mount(){this.removePointerDownListener=et(this.node.current,"pointerdown",a=>this.onPointerDown(a))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let eN={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function eO(a=!0){let b=(0,z.useContext)(cE);if(null===b)return[!0,null];let{isPresent:c,onExitComplete:d,register:e}=b,f=(0,z.useId)(),g=(0,z.useCallback)(()=>a&&d&&d(f),[f,d,a]);return!c&&d?[!1,g]:[!0]}let eP=!1;class eQ extends z.Component{componentDidMount(){let{visualElement:a,layoutGroup:b,switchLayoutGroup:c,layoutId:d}=this.props,{projection:e}=a;e&&(b.group&&b.group.add(e),c&&c.register&&d&&c.register(e),eP&&e.root.didUpdate(),e.addEventListener("animationComplete",()=>{this.safeToRemove()}),e.setOptions({...e.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),eN.hasEverUpdated=!0}getSnapshotBeforeUpdate(a){let{layoutDependency:b,visualElement:c,drag:d,isPresent:e}=this.props,{projection:f}=c;return f&&(f.isPresent=e,a.layoutDependency!==b&&f.setOptions({...f.options,layoutDependency:b}),eP=!0,d||a.layoutDependency!==b||void 0===b||a.isPresent!==e?f.willUpdate():this.safeToRemove(),a.isPresent!==e&&(e?f.promote():f.relegate()||a$.postRender(()=>{let a=f.getStack();a&&a.members.length||this.safeToRemove()}))),null}componentDidUpdate(){let{projection:a}=this.props.visualElement;a&&(a.root.didUpdate(),by.postRender(()=>{!a.currentAnimation&&a.isLead()&&this.safeToRemove()}))}componentWillUnmount(){let{visualElement:a,layoutGroup:b,switchLayoutGroup:c}=this.props,{projection:d}=a;eP=!0,d&&(d.scheduleCheckAfterUnmount(),b&&b.group&&b.group.remove(d),c&&c.deregister&&c.deregister(d))}safeToRemove(){let{safeToRemove:a}=this.props;a&&a()}render(){return null}}function eR(a){let[b,c]=eO(),d=(0,z.useContext)(cs);return(0,y.jsx)(eQ,{...a,layoutGroup:d,switchLayoutGroup:(0,z.useContext)(cP),isPresent:b,safeToRemove:c})}let eS=["TopLeft","TopRight","BottomLeft","BottomRight"],eT=eS.length,eU=a=>"string"==typeof a?parseFloat(a):a,eV=a=>"number"==typeof a||S.test(a);function eW(a,b){return void 0!==a[b]?a[b]:a.borderRadius}let eX=eZ(0,.5,dz),eY=eZ(.5,.95,aV);function eZ(a,b,c){return d=>d<a?0:d>b?1:c(dD(a,b,d))}function e$(a,b){a.min=b.min,a.max=b.max}function e_(a,b){e$(a.x,b.x),e$(a.y,b.y)}function e0(a,b){a.translate=b.translate,a.scale=b.scale,a.originPoint=b.originPoint,a.origin=b.origin}function e1(a,b,c,d,e){return a-=b,a=d+1/c*(a-d),void 0!==e&&(a=d+1/e*(a-d)),a}function e2(a,b,[c,d,e],f,g){!function(a,b=0,c=1,d=.5,e,f=a,g=a){if(R.test(b)&&(b=parseFloat(b),b=b7(g.min,g.max,b/100)-g.min),"number"!=typeof b)return;let h=b7(f.min,f.max,d);a===f&&(h-=b),a.min=e1(a.min,b,c,h,e),a.max=e1(a.max,b,c,h,e)}(a,b[c],b[d],b[e],b.scale,f,g)}let e3=["x","scaleX","originX"],e4=["y","scaleY","originY"];function e5(a,b,c,d){e2(a.x,b,e3,c?c.x:void 0,d?d.x:void 0),e2(a.y,b,e4,c?c.y:void 0,d?d.y:void 0)}function e6(a){return 0===a.translate&&1===a.scale}function e7(a){return e6(a.x)&&e6(a.y)}function e8(a,b){return a.min===b.min&&a.max===b.max}function e9(a,b){return Math.round(a.min)===Math.round(b.min)&&Math.round(a.max)===Math.round(b.max)}function fa(a,b){return e9(a.x,b.x)&&e9(a.y,b.y)}function fb(a){return d7(a.x)/d7(a.y)}function fc(a,b){return a.translate===b.translate&&a.scale===b.scale&&a.originPoint===b.originPoint}class fd{constructor(){this.members=[]}add(a){bf(this.members,a);for(let b=this.members.length-1;b>=0;b--){let c=this.members[b];if(c===a||c===this.lead||c===this.prevLead)continue;let d=c.instance;d&&!1===d.isConnected&&!1!==c.isPresent&&!c.snapshot&&bg(this.members,c)}a.scheduleRender()}remove(a){if(bg(this.members,a),a===this.prevLead&&(this.prevLead=void 0),a===this.lead){let a=this.members[this.members.length-1];a&&this.promote(a)}}relegate(a){let b,c=this.members.findIndex(b=>a===b);if(0===c)return!1;for(let a=c;a>=0;a--){let c=this.members[a],d=c.instance;if(!1!==c.isPresent&&(!d||!1!==d.isConnected)){b=c;break}}return!!b&&(this.promote(b),!0)}promote(a,b){let c=this.lead;if(a!==c&&(this.prevLead=c,this.lead=a,a.show(),c)){c.instance&&c.scheduleRender(),a.scheduleRender();let d=c.options.layoutDependency,e=a.options.layoutDependency;if(void 0===d||void 0===e||d!==e){let d=c.instance;!(d&&!1===d.isConnected&&!c.snapshot)&&(a.resumeFrom=c,b&&(a.resumeFrom.preserveOpacity=!0),c.snapshot&&(a.snapshot=c.snapshot,a.snapshot.latestValues=c.animationValues||c.latestValues),a.root&&a.root.isUpdating&&(a.isLayoutDirty=!0))}let{crossfade:f}=a.options;!1===f&&c.hide()}}exitAnimationComplete(){this.members.forEach(a=>{let{options:b,resumingFrom:c}=a;b.onExitComplete&&b.onExitComplete(),c&&c.options.onExitComplete&&c.options.onExitComplete()})}scheduleRender(){this.members.forEach(a=>{a.instance&&a.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}let fe=(a,b)=>a.depth-b.depth;class ff{constructor(){this.children=[],this.isDirty=!1}add(a){bf(this.children,a),this.isDirty=!0}remove(a){bg(this.children,a),this.isDirty=!0}forEach(a){this.isDirty&&this.children.sort(fe),this.isDirty=!1,this.children.forEach(a)}}let fg={nodes:0,calculatedTargetDeltas:0,calculatedProjections:0},fh=["","X","Y","Z"],fi=0;function fj(a,b,c,d){let{latestValues:e}=b;e[a]&&(c[a]=e[a],b.setStaticValue(a,0),d&&(d[a]=0))}function fk({attachResizeListener:a,defaultParent:b,measureScroll:c,checkIsScrollRoot:d,resetTransform:e}){return class{constructor(a={},c=b?.()){this.id=fi++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,aY.value&&(fg.nodes=fg.calculatedTargetDeltas=fg.calculatedProjections=0),this.nodes.forEach(fn),this.nodes.forEach(fu),this.nodes.forEach(fv),this.nodes.forEach(fo),aY.addProjectionMetrics&&aY.addProjectionMetrics(fg)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let a=0;a<this.path.length;a++)this.path[a].shouldResetTransform=!0;this.root===this&&(this.nodes=new ff)}addEventListener(a,b){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new bh),this.eventHandlers.get(a).add(b)}notifyListeners(a,...b){let c=this.eventHandlers.get(a);c&&c.notify(...b)}hasListeners(a){return this.eventHandlers.has(a)}mount(b){if(this.instance)return;this.isSVG=eh(b)&&!(eh(b)&&"svg"===b.tagName),this.instance=b;let{layoutId:c,layout:d,visualElement:e}=this.options;if(e&&!e.current&&e.mount(b),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||c)&&(this.isLayoutDirty=!0),a){let c,d=0,e=()=>this.root.updateBlockedByResize=!1;a$.read(()=>{d=window.innerWidth}),a(b,()=>{let a=window.innerWidth;a!==d&&(d=a,this.root.updateBlockedByResize=!0,c&&c(),c=function(a,b){let c=bA.now(),d=({timestamp:b})=>{let e=b-c;e>=250&&(a_(d),a(e-250))};return a$.setup(d,!0),()=>a_(d)}(e,250),eN.hasAnimatedSinceResize&&(eN.hasAnimatedSinceResize=!1,this.nodes.forEach(ft)))})}c&&this.root.registerSharedNode(c,this),!1!==this.options.animate&&e&&(c||d)&&this.addEventListener("didUpdate",({delta:a,hasLayoutChanged:b,hasRelativeLayoutChanged:c,layout:d})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}let f=this.options.transition||e.getDefaultTransition()||fB,{onLayoutAnimationStart:g,onLayoutAnimationComplete:h}=e.getProps(),i=!this.targetLayout||!fa(this.targetLayout,d),j=!b&&c;if(this.options.layoutRoot||this.resumeFrom||j||b&&(i||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);let b={...cW(f,"layout"),onPlay:g,onComplete:h};(e.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b),this.setAnimationOrigin(a,j)}else b||ft(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=d})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);let a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),a_(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){!this.isUpdateBlocked()&&(this.isUpdating=!0,this.nodes&&this.nodes.forEach(fw),this.animationId++)}getTransformTemplate(){let{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&function a(b){if(b.hasCheckedOptimisedAppear=!0,b.root===b)return;let{visualElement:c}=b.options;if(!c)return;let d=c.props[cO];if(window.MotionHasOptimisedAnimation(d,"transform")){let{layout:a,layoutId:c}=b.options;window.MotionCancelOptimisedAnimation(d,"transform",a$,!(a||c))}let{parent:e}=b;e&&!e.hasCheckedOptimisedAppear&&a(e)}(this),this.root.isUpdating||this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let a=0;a<this.path.length;a++){let b=this.path[a];b.shouldResetTransform=!0,b.updateScroll("snapshot"),b.options.layoutRoot&&b.willUpdate(!1)}let{layoutId:b,layout:c}=this.options;if(void 0===b&&!c)return;let d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(fq);return}if(this.animationId<=this.animationCommitId)return void this.nodes.forEach(fr);this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(fs),this.nodes.forEach(fl),this.nodes.forEach(fm)):this.nodes.forEach(fr),this.clearAllSnapshots();let a=bA.now();a0.delta=D(0,1e3/60,a-a0.timestamp),a0.timestamp=a,a0.isProcessing=!0,a1.update.process(a0),a1.preRender.process(a0),a1.render.process(a0),a0.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,by.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(fp),this.sharedNodes.forEach(fx)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,a$.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){a$.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||d7(this.snapshot.measuredBox.x)||d7(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let a=0;a<this.path.length;a++)this.path[a].updateScroll();let a=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=ar(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);let{visualElement:b}=this.options;b&&b.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let b=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(b=!1),b&&this.instance){let b=d(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:b,offset:c(this.instance),wasRoot:this.scroll?this.scroll.isRoot:b}}}resetTransform(){if(!e)return;let a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,b=this.projectionDelta&&!e7(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,f=d!==this.prevTransformTemplateValue;a&&this.instance&&(b||cg(this.latestValues)||f)&&(e(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){var b;let c=this.measurePageBox(),d=this.removeElementScroll(c);return a&&(d=this.removeTransform(d)),fE((b=d).x),fE(b.y),{animationId:this.root.animationId,measuredBox:c,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){let{visualElement:a}=this.options;if(!a)return ar();let b=a.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(fG))){let{scroll:a}=this.root;a&&(cl(b.x,a.offset.x),cl(b.y,a.offset.y))}return b}removeElementScroll(a){let b=ar();if(e_(b,a),this.scroll?.wasRoot)return b;for(let c=0;c<this.path.length;c++){let d=this.path[c],{scroll:e,options:f}=d;d!==this.root&&e&&f.layoutScroll&&(e.wasRoot&&e_(b,a),cl(b.x,e.offset.x),cl(b.y,e.offset.y))}return b}applyTransform(a,b=!1){let c=ar();e_(c,a);for(let a=0;a<this.path.length;a++){let d=this.path[a];!b&&d.options.layoutScroll&&d.scroll&&d!==d.root&&cn(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),cg(d.latestValues)&&cn(c,d.latestValues)}return cg(this.latestValues)&&cn(c,this.latestValues),c}removeTransform(a){let b=ar();e_(b,a);for(let a=0;a<this.path.length;a++){let c=this.path[a];if(!c.instance||!cg(c.latestValues))continue;cf(c.latestValues)&&c.updateSnapshot();let d=ar();e_(d,c.measurePageBox()),e5(b,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,d)}return cg(this.latestValues)&&e5(b,this.latestValues),b}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:void 0===a.crossfade||a.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==a0.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){let b=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=b.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=b.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=b.isSharedProjectionDirty);let c=!!this.resumingFrom||this!==b;if(!(a||c&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;let{layout:d,layoutId:e}=this.options;if(!this.layout||!(d||e))return;this.resolvedRelativeTargetAt=a0.timestamp;let f=this.getClosestProjectingParent();if(f&&this.linkedParentVersion!==f.layoutVersion&&!f.options.layoutRoot&&this.removeRelativeTarget(),this.targetDelta||this.relativeTarget||(f&&f.layout?this.createRelativeTarget(f,this.layout.layoutBox,f.layout.layoutBox):this.removeRelativeTarget()),this.relativeTarget||this.targetDelta){if(this.target||(this.target=ar(),this.targetWithTransforms=ar()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target){var g,h,i;this.forceRelativeParentToResolveTarget(),g=this.target,h=this.relativeTarget,i=this.relativeParent.target,ea(g.x,h.x,i.x),ea(g.y,h.y,i.y)}else this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):e_(this.target,this.layout.layoutBox),ck(this.target,this.targetDelta)):e_(this.target,this.layout.layoutBox);this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&1!==this.animationProgress?this.createRelativeTarget(f,this.target,f.target):this.relativeParent=this.relativeTarget=void 0),aY.value&&fg.calculatedTargetDeltas++}}getClosestProjectingParent(){if(!(!this.parent||cf(this.parent.latestValues)||ch(this.parent.latestValues)))if(this.parent.isProjecting())return this.parent;else return this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(a,b,c){this.relativeParent=a,this.linkedParentVersion=a.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ar(),this.relativeTargetOrigin=ar(),ec(this.relativeTargetOrigin,b,c),e_(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){let a=this.getLead(),b=!!this.resumingFrom||this!==a,c=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(c=!1),b&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===a0.timestamp&&(c=!1),c)return;let{layout:d,layoutId:e}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||e))return;e_(this.layoutCorrected,this.layout.layoutBox);let f=this.treeScale.x,g=this.treeScale.y;!function(a,b,c,d=!1){let e,f,g=c.length;if(g){b.x=b.y=1;for(let h=0;h<g;h++){f=(e=c[h]).projectionDelta;let{visualElement:g}=e.options;(!g||!g.props.style||"contents"!==g.props.style.display)&&(d&&e.options.layoutScroll&&e.scroll&&e!==e.root&&cn(a,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),f&&(b.x*=f.x.scale,b.y*=f.y.scale,ck(a,f)),d&&cg(e.latestValues)&&cn(a,e.latestValues))}b.x<1.0000000000001&&b.x>.999999999999&&(b.x=1),b.y<1.0000000000001&&b.y>.999999999999&&(b.y=1)}}(this.layoutCorrected,this.treeScale,this.path,b),a.layout&&!a.target&&(1!==this.treeScale.x||1!==this.treeScale.y)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=ar());let{target:h}=a;if(!h){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}this.projectionDelta&&this.prevProjectionDelta?(e0(this.prevProjectionDelta.x,this.projectionDelta.x),e0(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),d9(this.projectionDelta,this.layoutCorrected,h,this.latestValues),this.treeScale.x===f&&this.treeScale.y===g&&fc(this.projectionDelta.x,this.prevProjectionDelta.x)&&fc(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",h)),aY.value&&fg.calculatedProjections++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.visualElement?.scheduleRender(),a){let a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ap(),this.projectionDelta=ap(),this.projectionDeltaWithTransform=ap()}setAnimationOrigin(a,b=!1){let c,d=this.snapshot,e=d?d.latestValues:{},f={...this.latestValues},g=ap();this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!b;let h=ar(),i=(d?d.source:void 0)!==(this.layout?this.layout.source:void 0),j=this.getStack(),k=!j||j.members.length<=1,l=!!(i&&!k&&!0===this.options.crossfade&&!this.path.some(fA));this.animationProgress=0,this.mixTargetDelta=b=>{let d=b/1e3;if(fy(g.x,a.x,d),fy(g.y,a.y,d),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout){var j,m,n,o,p,q;ec(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),n=this.relativeTarget,o=this.relativeTargetOrigin,p=h,q=d,fz(n.x,o.x,p.x,q),fz(n.y,o.y,p.y,q),c&&(j=this.relativeTarget,m=c,e8(j.x,m.x)&&e8(j.y,m.y))&&(this.isProjectionDirty=!1),c||(c=ar()),e_(c,this.relativeTarget)}i&&(this.animationValues=f,function(a,b,c,d,e,f){e?(a.opacity=b7(0,c.opacity??1,eX(d)),a.opacityExit=b7(b.opacity??1,0,eY(d))):f&&(a.opacity=b7(b.opacity??1,c.opacity??1,d));for(let e=0;e<eT;e++){let f=`border${eS[e]}Radius`,g=eW(b,f),h=eW(c,f);(void 0!==g||void 0!==h)&&(g||(g=0),h||(h=0),0===g||0===h||eV(g)===eV(h)?(a[f]=Math.max(b7(eU(g),eU(h),d),0),(R.test(h)||R.test(g))&&(a[f]+="%")):a[f]=h)}(b.rotate||c.rotate)&&(a.rotate=b7(b.rotate||0,c.rotate||0,d))}(f,e,this.latestValues,d,l,k)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=d},this.mixTargetDelta(1e3*!!this.options.layoutRoot)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(a_(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=a$.update(()=>{eN.hasAnimatedSinceResize=!0,bp.layout++,this.motionValue||(this.motionValue=bD(0)),this.motionValue.jump(0,!1),this.currentAnimation=function(a,b,c){let d=as(a)?a:bD(a);return d.start(dU("",d,b,c)),d.animation}(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:b=>{this.mixTargetDelta(b),a.onUpdate&&a.onUpdate(b)},onStop:()=>{bp.layout--},onComplete:()=>{bp.layout--,a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);let a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){let a=this.getLead(),{targetWithTransforms:b,target:c,layout:d,latestValues:e}=a;if(b&&c&&d){if(this!==a&&this.layout&&d&&fF(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||ar();let b=d7(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+b;let d=d7(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+d}e_(b,c),cn(b,e),d9(this.projectionDeltaWithTransform,this.layoutCorrected,b,e)}}registerSharedNode(a,b){this.sharedNodes.has(a)||this.sharedNodes.set(a,new fd),this.sharedNodes.get(a).add(b);let c=b.options.initialPromotionConfig;b.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(b):void 0})}isLead(){let a=this.getStack();return!a||a.lead===this}getLead(){let{layoutId:a}=this.options;return a&&this.getStack()?.lead||this}getPrevLead(){let{layoutId:a}=this.options;return a?this.getStack()?.prevLead:void 0}getStack(){let{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:b,preserveFollowOpacity:c}={}){let d=this.getStack();d&&d.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),b&&this.setOptions({transition:b})}relegate(){let a=this.getStack();return!!a&&a.relegate(this)}resetSkewAndRotation(){let{visualElement:a}=this.options;if(!a)return;let b=!1,{latestValues:c}=a;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(b=!0),!b)return;let d={};c.z&&fj("z",a,d,this.animationValues);for(let b=0;b<fh.length;b++)fj(`rotate${fh[b]}`,a,d,this.animationValues),fj(`skew${fh[b]}`,a,d,this.animationValues);for(let b in a.render(),d)a.setStaticValue(b,d[b]),this.animationValues&&(this.animationValues[b]=d[b]);a.scheduleRender()}applyProjectionStyles(a,b){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}let c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=cD(b?.pointerEvents)||"",a.transform=c?c(this.latestValues,""):"none";return}let d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(a.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,a.pointerEvents=cD(b?.pointerEvents)||""),this.hasProjected&&!cg(this.latestValues)&&(a.transform=c?c({},""):"none",this.hasProjected=!1);return}a.visibility="";let e=d.animationValues||d.latestValues;this.applyTransformsToTarget();let f=function(a,b,c){let d="",e=a.x.translate/b.x,f=a.y.translate/b.y,g=c?.z||0;if((e||f||g)&&(d=`translate3d(${e}px, ${f}px, ${g}px) `),(1!==b.x||1!==b.y)&&(d+=`scale(${1/b.x}, ${1/b.y}) `),c){let{transformPerspective:a,rotate:b,rotateX:e,rotateY:f,skewX:g,skewY:h}=c;a&&(d=`perspective(${a}px) ${d}`),b&&(d+=`rotate(${b}deg) `),e&&(d+=`rotateX(${e}deg) `),f&&(d+=`rotateY(${f}deg) `),g&&(d+=`skewX(${g}deg) `),h&&(d+=`skewY(${h}deg) `)}let h=a.x.scale*b.x,i=a.y.scale*b.y;return(1!==h||1!==i)&&(d+=`scale(${h}, ${i})`),d||"none"}(this.projectionDeltaWithTransform,this.treeScale,e);c&&(f=c(e,f)),a.transform=f;let{x:g,y:h}=this.projectionDelta;for(let b in a.transformOrigin=`${100*g.origin}% ${100*h.origin}% 0`,d.animationValues?a.opacity=d===this?e.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:e.opacityExit:a.opacity=d===this?void 0!==e.opacity?e.opacity:"":void 0!==e.opacityExit?e.opacityExit:0,b8){if(void 0===e[b])continue;let{correct:c,applyTo:g,isCSSVariable:h}=b8[b],i="none"===f?e[b]:c(e[b],d);if(g){let b=g.length;for(let c=0;c<b;c++)a[g[c]]=i}else h?this.options.visualElement.renderState.vars[b]=i:a[b]=i}this.options.layoutId&&(a.pointerEvents=d===this?cD(b?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>a.currentAnimation?.stop()),this.root.nodes.forEach(fq),this.root.sharedNodes.clear()}}}function fl(a){a.updateLayout()}function fm(a){let b=a.resumeFrom?.snapshot||a.snapshot;if(a.isLead()&&a.layout&&b&&a.hasListeners("didUpdate")){let{layoutBox:c,measuredBox:d}=a.layout,{animationType:e}=a.options,f=b.source!==a.layout.source;"size"===e?d6(a=>{let d=f?b.measuredBox[a]:b.layoutBox[a],e=d7(d);d.min=c[a].min,d.max=d.min+e}):fF(e,b.layoutBox,c)&&d6(d=>{let e=f?b.measuredBox[d]:b.layoutBox[d],g=d7(c[d]);e.max=e.min+g,a.relativeTarget&&!a.currentAnimation&&(a.isProjectionDirty=!0,a.relativeTarget[d].max=a.relativeTarget[d].min+g)});let g=ap();d9(g,c,b.layoutBox);let h=ap();f?d9(h,a.applyTransform(d,!0),b.measuredBox):d9(h,c,b.layoutBox);let i=!e7(g),j=!1;if(!a.resumeFrom){let d=a.getClosestProjectingParent();if(d&&!d.resumeFrom){let{snapshot:e,layout:f}=d;if(e&&f){let g=ar();ec(g,b.layoutBox,e.layoutBox);let h=ar();ec(h,c,f.layoutBox),fa(g,h)||(j=!0),d.options.layoutRoot&&(a.relativeTarget=h,a.relativeTargetOrigin=g,a.relativeParent=d)}}}a.notifyListeners("didUpdate",{layout:c,snapshot:b,delta:h,layoutDelta:g,hasLayoutChanged:i,hasRelativeLayoutChanged:j})}else if(a.isLead()){let{onExitComplete:b}=a.options;b&&b()}a.options.transition=void 0}function fn(a){aY.value&&fg.nodes++,a.parent&&(a.isProjecting()||(a.isProjectionDirty=a.parent.isProjectionDirty),a.isSharedProjectionDirty||(a.isSharedProjectionDirty=!!(a.isProjectionDirty||a.parent.isProjectionDirty||a.parent.isSharedProjectionDirty)),a.isTransformDirty||(a.isTransformDirty=a.parent.isTransformDirty))}function fo(a){a.isProjectionDirty=a.isSharedProjectionDirty=a.isTransformDirty=!1}function fp(a){a.clearSnapshot()}function fq(a){a.clearMeasurements()}function fr(a){a.isLayoutDirty=!1}function fs(a){let{visualElement:b}=a.options;b&&b.getProps().onBeforeLayoutMeasure&&b.notify("BeforeLayoutMeasure"),a.resetTransform()}function ft(a){a.finishAnimation(),a.targetDelta=a.relativeTarget=a.target=void 0,a.isProjectionDirty=!0}function fu(a){a.resolveTargetDelta()}function fv(a){a.calcProjection()}function fw(a){a.resetSkewAndRotation()}function fx(a){a.removeLeadSnapshot()}function fy(a,b,c){a.translate=b7(b.translate,0,c),a.scale=b7(b.scale,1,c),a.origin=b.origin,a.originPoint=b.originPoint}function fz(a,b,c,d){a.min=b7(b.min,c.min,d),a.max=b7(b.max,c.max,d)}function fA(a){return a.animationValues&&void 0!==a.animationValues.opacityExit}let fB={duration:.45,ease:[.4,0,.1,1]},fC=a=>"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(a),fD=fC("applewebkit/")&&!fC("chrome/")?Math.round:aV;function fE(a){a.min=fD(a.min),a.max=fD(a.max)}function fF(a,b,c){return"position"===a||"preserve-aspect"===a&&!(.2>=Math.abs(fb(b)-fb(c)))}function fG(a){return a!==a.root&&a.scroll?.wasRoot}let fH=fk({attachResizeListener:(a,b)=>ef(a,"resize",b),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body?.scrollLeft||0,y:document.documentElement.scrollTop||document.body?.scrollTop||0}),checkIsScrollRoot:()=>!0}),fI={current:void 0},fJ=fk({measureScroll:a=>({x:a.scrollLeft,y:a.scrollTop}),defaultParent:()=>{if(!fI.current){let a=new fH({});a.mount(window),a.setOptions({layoutScroll:!0}),fI.current=a}return fI.current},resetTransform:(a,b)=>{a.style.transform=void 0!==b?b:"none"},checkIsScrollRoot:a=>"fixed"===window.getComputedStyle(a).position});function fK(a,b){let c=ei(a),d=new AbortController;return[c,{passive:!0,...b,signal:d.signal},()=>d.abort()]}function fL(a,b,c){let{props:d}=a;a.animationState&&d.whileHover&&a.animationState.setActive("whileHover","Start"===c);let e=d["onHover"+c];e&&a$.postRender(()=>e(b,es(b)))}class fM extends cT{mount(){let{current:a}=this.node;a&&(this.unmount=function(a,b,c={}){let[d,e,f]=fK(a,c);return d.forEach(a=>{let c,d=!1,f=!1,g=b=>{c&&(c(b),c=void 0),a.removeEventListener("pointerleave",i)},h=a=>{d=!1,window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",h),f&&(f=!1,g(a))},i=a=>{if("touch"!==a.pointerType){if(d){f=!0;return}g(a)}};a.addEventListener("pointerenter",d=>{if("touch"===d.pointerType||d5.x||d5.y)return;f=!1;let g=b(a,d);"function"==typeof g&&(c=g,a.addEventListener("pointerleave",i,e))},e),a.addEventListener("pointerdown",()=>{d=!0,window.addEventListener("pointerup",h,e),window.addEventListener("pointercancel",h,e)},e)}),f}(a,(a,b)=>(fL(this.node,b,"Start"),a=>fL(this.node,a,"End"))))}unmount(){}}class fN extends cT{constructor(){super(...arguments),this.isActive=!1}onFocus(){let a=!1;try{a=this.node.current.matches(":focus-visible")}catch(b){a=!0}a&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=c$(ef(this.node.current,"focus",()=>this.onFocus()),ef(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function fO(a){return eg(a)&&"offsetHeight"in a}let fP=(a,b)=>!!b&&(a===b||fP(a,b.parentElement)),fQ=new WeakSet;function fR(a){return b=>{"Enter"===b.key&&a(b)}}function fS(a,b){a.dispatchEvent(new PointerEvent("pointer"+b,{isPrimary:!0,bubbles:!0}))}function fT(a){return er(a)&&!(d5.x||d5.y)}let fU=new WeakSet;function fV(a,b,c){let{props:d}=a;if(a.current instanceof HTMLButtonElement&&a.current.disabled)return;a.animationState&&d.whileTap&&a.animationState.setActive("whileTap","Start"===c);let e=d["onTap"+("End"===c?"":c)];e&&a$.postRender(()=>e(b,es(b)))}class fW extends cT{mount(){let{current:a}=this.node;if(!a)return;let{globalTapTarget:b,propagate:c}=this.node.props;this.unmount=function(a,b,c={}){let[d,e,f]=fK(a,c),g=a=>{let d=a.currentTarget;if(!fT(a)||fU.has(a))return;fQ.add(d),c.stopPropagation&&fU.add(a);let f=b(d,a),g=(a,b)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",i),fQ.has(d)&&fQ.delete(d),fT(a)&&"function"==typeof f&&f(a,{success:b})},h=a=>{g(a,d===window||d===document||c.useGlobalTarget||fP(d,a.target))},i=a=>{g(a,!1)};window.addEventListener("pointerup",h,e),window.addEventListener("pointercancel",i,e)};return d.forEach(a=>{((c.useGlobalTarget?window:a).addEventListener("pointerdown",g,e),fO(a))&&(a.addEventListener("focus",a=>((a,b)=>{let c=a.currentTarget;if(!c)return;let d=fR(()=>{if(fQ.has(c))return;fS(c,"down");let a=fR(()=>{fS(c,"up")});c.addEventListener("keyup",a,b),c.addEventListener("blur",()=>fS(c,"cancel"),b)});c.addEventListener("keydown",d,b),c.addEventListener("blur",()=>c.removeEventListener("keydown",d),b)})(a,e)),ed.has(a.tagName)||!0===a.isContentEditable||a.hasAttribute("tabindex")||(a.tabIndex=0))}),f}(a,(a,b)=>(fV(this.node,b,"Start"),(a,{success:b})=>fV(this.node,a,b?"End":"Cancel")),{useGlobalTarget:b,stopPropagation:c?.tap===!1})}unmount(){}}let fX=new WeakMap,fY=new WeakMap,fZ=a=>{let b=fX.get(a.target);b&&b(a)},f$=a=>{a.forEach(fZ)},f_={some:0,all:1};class f0 extends cT{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();let{viewport:a={}}=this.node.getProps(),{root:b,margin:c,amount:d="some",once:e}=a,f={root:b?b.current:void 0,rootMargin:c,threshold:"number"==typeof d?d:f_[d]},g=a=>{let{isIntersecting:b}=a;if(this.isInView===b||(this.isInView=b,e&&!b&&this.hasEnteredView))return;b&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",b);let{onViewportEnter:c,onViewportLeave:d}=this.node.getProps(),f=b?c:d;f&&f(a)};var h=this.node.current;let i=function({root:a,...b}){let c=a||document;fY.has(c)||fY.set(c,{});let d=fY.get(c),e=JSON.stringify(b);return d[e]||(d[e]=new IntersectionObserver(f$,{root:a,...b})),d[e]}(f);return fX.set(h,g),i.observe(h),()=>{fX.delete(h),i.unobserve(h)}}mount(){this.startObserver()}update(){if("undefined"==typeof IntersectionObserver)return;let{props:a,prevProps:b}=this.node;["amount","margin","root"].some(function({viewport:a={}},{viewport:b={}}={}){return c=>a[c]!==b[c]}(a,b))&&this.startObserver()}unmount(){}}let f1=function(a,b){if("undefined"==typeof Proxy)return cS;let c=new Map,d=(c,d)=>cS(c,d,a,b);return new Proxy((a,b)=>d(a,b),{get:(e,f)=>"create"===f?d:(c.has(f)||c.set(f,cS(f,void 0,a,b)),c.get(f))})}({animation:{Feature:d2},exit:{Feature:d4},inView:{Feature:f0},tap:{Feature:fW},focus:{Feature:fN},hover:{Feature:fM},pan:{Feature:eM},drag:{Feature:eK,ProjectionNode:fJ,MeasureLayout:eR},layout:{ProjectionNode:fJ,MeasureLayout:eR}},(a,b)=>b.isSVG??cr(a)?new cc(b):new cp(b,{allowProjection:a!==z.Fragment}));function f2(a,b){if("function"==typeof a)return a(b);null!=a&&(a.current=b)}class f3 extends z.Component{getSnapshotBeforeUpdate(a){let b=this.props.childRef.current;if(b&&a.isPresent&&!this.props.isPresent&&!1!==this.props.pop){let a=b.offsetParent,c=fO(a)&&a.offsetWidth||0,d=fO(a)&&a.offsetHeight||0,e=this.props.sizeRef.current;e.height=b.offsetHeight||0,e.width=b.offsetWidth||0,e.top=b.offsetTop,e.left=b.offsetLeft,e.right=c-e.width-e.left,e.bottom=d-e.height-e.top}return null}componentDidUpdate(){}render(){return this.props.children}}function f4({children:a,isPresent:b,anchorX:c,anchorY:d,root:e,pop:f}){let g=(0,z.useId)(),h=(0,z.useRef)(null),i=(0,z.useRef)({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:j}=(0,z.useContext)(cu),k=function(...a){return z.useCallback(function(...a){return b=>{let c=!1,d=a.map(a=>{let d=f2(a,b);return c||"function"!=typeof d||(c=!0),d});if(c)return()=>{for(let b=0;b<d.length;b++){let c=d[b];"function"==typeof c?c():f2(a[b],null)}}}}(...a),a)}(h,a.props?.ref??a?.ref);return(0,z.useInsertionEffect)(()=>{let{width:a,height:k,top:l,left:m,right:n,bottom:o}=i.current;if(b||!1===f||!h.current||!a||!k)return;let p="left"===c?`left: ${m}`:`right: ${n}`,q="bottom"===d?`bottom: ${o}`:`top: ${l}`;h.current.dataset.motionPopId=g;let r=document.createElement("style");j&&(r.nonce=j);let s=e??document.head;return s.appendChild(r),r.sheet&&r.sheet.insertRule(`
          [data-motion-pop-id="${g}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${k}px !important;
            ${p}px !important;
            ${q}px !important;
          }
        `),()=>{s.contains(r)&&s.removeChild(r)}},[b]),(0,y.jsx)(f3,{isPresent:b,childRef:h,sizeRef:i,pop:f,children:!1===f?a:z.cloneElement(a,{ref:k})})}let f5=({children:a,initial:b,isPresent:c,onExitComplete:d,custom:e,presenceAffectsLayout:f,mode:g,anchorX:h,anchorY:i,root:j})=>{let k=cF(f6),l=(0,z.useId)(),m=!0,n=(0,z.useMemo)(()=>(m=!1,{id:l,initial:b,isPresent:c,custom:e,onExitComplete:a=>{for(let b of(k.set(a,!0),k.values()))if(!b)return;d&&d()},register:a=>(k.set(a,!1),()=>k.delete(a))}),[c,k,d]);return f&&m&&(n={...n}),(0,z.useMemo)(()=>{k.forEach((a,b)=>k.set(b,!1))},[c]),z.useEffect(()=>{c||k.size||!d||d()},[c]),a=(0,y.jsx)(f4,{pop:"popLayout"===g,isPresent:c,anchorX:h,anchorY:i,root:j,children:a}),(0,y.jsx)(cE.Provider,{value:n,children:a})};function f6(){return new Map}let f7=a=>a.key||"";function f8(a){let b=[];return z.Children.forEach(a,a=>{(0,z.isValidElement)(a)&&b.push(a)}),b}let f9=({children:a,custom:b,initial:c=!0,onExitComplete:d,presenceAffectsLayout:e=!0,mode:f="sync",propagate:g=!1,anchorX:h="left",anchorY:i="top",root:j})=>{let[k,l]=eO(g),m=(0,z.useMemo)(()=>f8(a),[a]),n=g&&!k?[]:m.map(f7),o=(0,z.useRef)(!0),p=(0,z.useRef)(m),q=cF(()=>new Map),r=(0,z.useRef)(new Set),[s,t]=(0,z.useState)(m),[u,v]=(0,z.useState)(m);cR(()=>{o.current=!1,p.current=m;for(let a=0;a<u.length;a++){let b=f7(u[a]);n.includes(b)?(q.delete(b),r.current.delete(b)):!0!==q.get(b)&&q.set(b,!1)}},[u,n.length,n.join("-")]);let w=[];if(m!==s){let a=[...m];for(let b=0;b<u.length;b++){let c=u[b],d=f7(c);n.includes(d)||(a.splice(b,0,c),w.push(c))}return"wait"===f&&w.length&&(a=w),v(f8(a)),t(m),null}let{forceRender:x}=(0,z.useContext)(cs);return(0,y.jsx)(y.Fragment,{children:u.map(a=>{let s=f7(a),t=(!g||!!k)&&(m===u||n.includes(s));return(0,y.jsx)(f5,{isPresent:t,initial:(!o.current||!!c)&&void 0,custom:b,presenceAffectsLayout:e,mode:f,root:j,onExitComplete:t?void 0:()=>{if(r.current.has(s)||(r.current.add(s),!q.has(s)))return;q.set(s,!0);let a=!0;q.forEach(b=>{b||(a=!1)}),a&&(x?.(),v(p.current),g&&l?.(),d&&d())},anchorX:h,anchorY:i,children:a},s)})})},ga=a=>{let b,c=new Set,d=(a,d)=>{let e="function"==typeof a?a(b):a;if(!Object.is(e,b)){let a=b;b=(null!=d?d:"object"!=typeof e||null===e)?e:Object.assign({},b,e),c.forEach(c=>c(b,a))}},e=()=>b,f={setState:d,getState:e,getInitialState:()=>g,subscribe:a=>(c.add(a),()=>c.delete(a))},g=b=a(d,e,f);return f},gb=a=>{let b=(a=>a?ga(a):ga)(a),c=a=>(function(a,b=a=>a){let c=z.useSyncExternalStore(a.subscribe,z.useCallback(()=>b(a.getState()),[a,b]),z.useCallback(()=>b(a.getInitialState()),[a,b]));return z.useDebugValue(c),c})(b,a);return Object.assign(c,b),c},gc=a=>b=>{try{let c=a(b);if(c instanceof Promise)return c;return{then:a=>gc(a)(c),catch(a){return this}}}catch(a){return{then(a){return this},catch:b=>gc(b)(a)}}},gd={location:{consentType:"location",granted:!1,version:1},photo:{consentType:"photo",granted:!1,version:1},review:{consentType:"review",granted:!1,version:1},data_contribution:{consentType:"data_contribution",granted:!1,version:1}},ge=(a=>a?gb(a):gb)()(((a,b)=>(c,d,e)=>{let f,g={storage:function(a,b){let c;try{c=a()}catch(a){return}return{getItem:a=>{var b;let d=a=>null===a?null:JSON.parse(a,void 0),e=null!=(b=c.getItem(a))?b:null;return e instanceof Promise?e.then(d):d(e)},setItem:(a,b)=>c.setItem(a,JSON.stringify(b,void 0)),removeItem:a=>c.removeItem(a)}}(()=>window.localStorage),partialize:a=>a,version:0,merge:(a,b)=>({...b,...a}),...b},h=!1,i=0,j=new Set,k=new Set,l=g.storage;if(!l)return a((...a)=>{console.warn(`[zustand persist middleware] Unable to update item '${g.name}', the given storage is currently unavailable.`),c(...a)},d,e);let m=()=>{let a=g.partialize({...d()});return l.setItem(g.name,{state:a,version:g.version})},n=e.setState;e.setState=(a,b)=>(n(a,b),m());let o=a((...a)=>(c(...a),m()),d,e);e.getInitialState=()=>o;let p=()=>{var a,b;if(!l)return;let e=++i;h=!1,j.forEach(a=>{var b;return a(null!=(b=d())?b:o)});let n=(null==(b=g.onRehydrateStorage)?void 0:b.call(g,null!=(a=d())?a:o))||void 0;return gc(l.getItem.bind(l))(g.name).then(a=>{if(a)if("number"!=typeof a.version||a.version===g.version)return[!1,a.state];else{if(g.migrate){let b=g.migrate(a.state,a.version);return b instanceof Promise?b.then(a=>[!0,a]):[!0,b]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(a=>{var b;if(e!==i)return;let[h,j]=a;if(c(f=g.merge(j,null!=(b=d())?b:o),!0),h)return m()}).then(()=>{e===i&&(null==n||n(f,void 0),f=d(),h=!0,k.forEach(a=>a(f)))}).catch(a=>{e===i&&(null==n||n(void 0,a))})};return e.persist={setOptions:a=>{g={...g,...a},a.storage&&(l=a.storage)},clearStorage:()=>{null==l||l.removeItem(g.name)},getOptions:()=>g,rehydrate:()=>p(),hasHydrated:()=>h,onHydrate:a=>(j.add(a),()=>{j.delete(a)}),onFinishHydration:a=>(k.add(a),()=>{k.delete(a)})},g.skipHydration||p(),f||o})((a,b)=>({currentProduct:null,scanHistory:[],favorites:[],consents:gd,isLoading:!1,error:null,hasCompletedOnboarding:!1,activeTab:"home",setCurrentProduct:b=>a({currentProduct:b}),addToHistory:c=>{let d=b().scanHistory,e=d.findIndex(a=>a.upc===c.upc);if(e>=0){let b=[...d];b[e]={...c,lastScannedAt:new Date},a({scanHistory:b})}else a({scanHistory:[{...c,lastScannedAt:new Date},...d].slice(0,100)})},toggleFavorite:c=>{let d=b().scanHistory,e=b().favorites,f=d.find(a=>a.id===c);f&&(e.some(a=>a.id===c)?a({favorites:e.filter(a=>a.id!==c)}):a({favorites:[...e,{...f,isFavorite:!0}]}))},setConsent:(c,d)=>{let e=b().consents;a({consents:{...e,[c]:{...e[c],granted:d,grantedAt:d?new Date:void 0,withdrawnAt:d?void 0:new Date}}})},setLoading:b=>a({isLoading:b}),setError:b=>a({error:b}),completeOnboarding:()=>a({hasCompletedOnboarding:!0}),setActiveTab:b=>a({activeTab:b}),clearHistory:()=>a({scanHistory:[]})}),{name:"mthfr-scanner-storage",partialize:a=>({scanHistory:a.scanHistory,favorites:a.favorites,consents:a.consents,hasCompletedOnboarding:a.hasCompletedOnboarding})}));var gf=c(352);let gg=Symbol.for("Dexie"),gh=globalThis[gg]||(globalThis[gg]=gf);if(gf.semVer!==gh.semVer)throw Error(`Two different versions of Dexie loaded in the same app: ${gf.semVer} and ${gh.semVer}`);let{liveQuery:gi,mergeRanges:gj,rangesOverlap:gk,RangeSet:gl,cmp:gm,Entity:gn,PropModification:go,replacePrefix:gp,add:gq,remove:gr,DexieYProvider:gs}=gh,gt=gh;class gu extends gt{constructor(){super("MTHFRFoodScanner"),this.version(1).stores({products:"++id, upc, name, brand, sourceProvenance, createdAt, isFavorite, lastScannedAt",canonicalIngredients:"++id, canonicalName, *synonyms, safetyStatus, category",maskingTerms:"++id, term, riskLevel",classificationRules:"++id, ingredientPattern, safetyStatus, version",userConsents:"++id, consentType, granted",scanHistory:"++id, productId, scannedAt, upc"})}}let gv=new gu;async function gw(){0===await gv.canonicalIngredients.count()&&await gx(),0===await gv.maskingTerms.count()&&await gy(),0===await gv.classificationRules.count()&&await gz()}async function gx(){await gv.canonicalIngredients.bulkAdd([{canonicalName:"folic acid",synonyms:["folacin","vitamin b9","pteroylglutamic acid","synthetic folate"],safetyStatus:"unsafe",safetyReason:"Synthetic folic acid can interfere with methylation in individuals with MTHFR variants. It may block folate receptors and inhibit natural folate metabolism.",evidence:"Research indicates that unmetabolized folic acid may compete with natural folates for cellular uptake.",category:"vitamins"},{canonicalName:"methylfolate",synonyms:["5-mthf","l-methylfolate","5-methyltetrahydrofolate","metafolin","quatrefolic","active folate"],safetyStatus:"safe",safetyReason:"Methylfolate is the bioactive form of folate that bypasses the MTHFR enzyme, making it suitable for individuals with MTHFR variants.",evidence:"Methylfolate does not require conversion by the MTHFR enzyme.",category:"vitamins"},{canonicalName:"cyanocobalamin",synonyms:["vitamin b12 (cyanocobalamin)","synthetic b12"],safetyStatus:"unsafe",safetyReason:"Cyanocobalamin is a synthetic form of B12 that requires conversion and contains a cyanide molecule. May not be efficiently processed by those with MTHFR variants.",evidence:"The body must convert cyanocobalamin to methylcobalamin or adenosylcobalamin for use.",category:"vitamins"},{canonicalName:"methylcobalamin",synonyms:["methyl b12","active b12","coenzyme b12"],safetyStatus:"safe",safetyReason:"Methylcobalamin is the bioactive methylated form of vitamin B12 that supports methylation directly.",evidence:"Already in active form, no conversion needed.",category:"vitamins"},{canonicalName:"hydroxocobalamin",synonyms:["hydroxycobalamin","b12a"],safetyStatus:"safe",safetyReason:"Hydroxocobalamin is a natural form of B12 that the body can convert to active forms.",evidence:"Natural form found in food, easily converted.",category:"vitamins"},{canonicalName:"adenosylcobalamin",synonyms:["dibencozide","cobamamide","coenzyme b12"],safetyStatus:"safe",safetyReason:"Adenosylcobalamin is a bioactive form of B12 used directly in cellular energy production.",evidence:"Active coenzyme form of B12.",category:"vitamins"},{canonicalName:"pyridoxine hydrochloride",synonyms:["vitamin b6 (pyridoxine)","pyridoxine hcl","synthetic b6"],safetyStatus:"unknown",safetyReason:"While generally usable, some individuals with MTHFR variants may benefit from pyridoxal-5-phosphate instead.",category:"vitamins"},{canonicalName:"pyridoxal-5-phosphate",synonyms:["p5p","plp","active b6","pyridoxal phosphate"],safetyStatus:"safe",safetyReason:"P5P is the active coenzyme form of vitamin B6 that supports methylation reactions.",category:"vitamins"},{canonicalName:"riboflavin",synonyms:["vitamin b2","riboflavin-5-phosphate"],safetyStatus:"safe",safetyReason:"Riboflavin is essential for MTHFR enzyme function and supports methylation.",evidence:"B2 is a cofactor for the MTHFR enzyme.",category:"vitamins"},{canonicalName:"monosodium glutamate",synonyms:["msg","glutamate","e621","sodium glutamate"],safetyStatus:"unsafe",safetyReason:"MSG is an excitotoxin that may affect neurological function and can be problematic for some with MTHFR variants.",category:"additives"},{canonicalName:"aspartame",synonyms:["e951","nutrasweet","equal","canderel"],safetyStatus:"unsafe",safetyReason:"Aspartame breaks down into phenylalanine and can affect neurotransmitter balance. May be problematic for methylation.",category:"sweeteners"},{canonicalName:"high fructose corn syrup",synonyms:["hfcs","glucose-fructose syrup","isoglucose","corn sugar"],safetyStatus:"unsafe",safetyReason:"HFCS may deplete nutrients needed for methylation and contribute to inflammation.",category:"sweeteners"},{canonicalName:"sodium nitrite",synonyms:["nitrite","e250","curing salt"],safetyStatus:"unsafe",safetyReason:"Nitrites can form nitrosamines and may interfere with oxygen transport and methylation processes.",category:"preservatives"},{canonicalName:"sodium nitrate",synonyms:["nitrate","e251","chile saltpeter"],safetyStatus:"unsafe",safetyReason:"Nitrates convert to nitrites in the body and may affect methylation and overall health.",category:"preservatives"},{canonicalName:"bht",synonyms:["butylated hydroxytoluene","e321"],safetyStatus:"unsafe",safetyReason:"BHT is a synthetic antioxidant that may affect hormones and cellular function.",category:"preservatives"},{canonicalName:"bha",synonyms:["butylated hydroxyanisole","e320"],safetyStatus:"unsafe",safetyReason:"BHA is a synthetic preservative with potential endocrine-disrupting effects.",category:"preservatives"},{canonicalName:"tbhq",synonyms:["tertiary butylhydroquinone","e319"],safetyStatus:"unsafe",safetyReason:"TBHQ is a synthetic preservative derived from petroleum that may affect immune function.",category:"preservatives"},{canonicalName:"carrageenan",synonyms:["e407","irish moss extract"],safetyStatus:"unknown",safetyReason:"Carrageenan may cause gut inflammation in some individuals, which can affect nutrient absorption.",category:"additives"},{canonicalName:"potassium bromate",synonyms:["bromate","e924"],safetyStatus:"unsafe",safetyReason:"Potassium bromate is a possible carcinogen and can affect thyroid function.",category:"additives"},{canonicalName:"sodium benzoate",synonyms:["benzoate","e211"],safetyStatus:"unsafe",safetyReason:"Sodium benzoate can form benzene when combined with vitamin C and may deplete glutathione.",category:"preservatives"},{canonicalName:"propyl gallate",synonyms:["e310","propyl 3,4,5-trihydroxybenzoate"],safetyStatus:"unsafe",safetyReason:"Propyl gallate is a synthetic antioxidant that may have estrogenic effects.",category:"preservatives"},{canonicalName:"water",synonyms:["purified water","filtered water","spring water","mineral water","aqua"],safetyStatus:"safe",safetyReason:"Water is essential and does not affect methylation.",category:"base"},{canonicalName:"salt",synonyms:["sodium chloride","sea salt","table salt","kosher salt","himalayan salt"],safetyStatus:"safe",safetyReason:"Natural salt in moderate amounts does not affect methylation.",category:"base"},{canonicalName:"sugar",synonyms:["cane sugar","beet sugar","sucrose","granulated sugar"],safetyStatus:"safe",safetyReason:"Natural sugar in moderate amounts is generally safe for methylation.",category:"sweeteners"},{canonicalName:"olive oil",synonyms:["extra virgin olive oil","evoo","virgin olive oil"],safetyStatus:"safe",safetyReason:"Olive oil is a healthy fat that does not interfere with methylation.",category:"fats"},{canonicalName:"coconut oil",synonyms:["virgin coconut oil","refined coconut oil"],safetyStatus:"safe",safetyReason:"Coconut oil is a healthy fat that supports cellular function.",category:"fats"}])}async function gy(){await gv.maskingTerms.bulkAdd([{term:"natural flavors",riskLevel:"high",reason:"Natural flavors can contain hundreds of undisclosed ingredients including MSG, preservatives, and synthetic additives. The term is loosely regulated and may hide problematic components.",verificationGuidance:"Contact the manufacturer to request a complete breakdown of natural flavor components. Ask specifically about MSG, glutamates, and any synthetic processing aids."},{term:"artificial flavors",riskLevel:"high",reason:"Artificial flavors are synthetic compounds that may contain excitotoxins, preservatives, or other additives that could affect methylation.",verificationGuidance:"Request the specific artificial flavor compounds from the manufacturer. Consider avoiding products with artificial flavors when possible."},{term:"spices",riskLevel:"medium",reason:'The term "spices" can hide MSG, anti-caking agents, or preservatives. While often benign, specifics are not disclosed.',verificationGuidance:"Ask the manufacturer for a complete spice breakdown. Look for products that list specific spices."},{term:"proprietary blend",riskLevel:"high",reason:"Proprietary blends hide exact ingredient amounts and may contain undisclosed fillers, flow agents, or synthetic additives.",verificationGuidance:"Contact manufacturer for complete ingredient disclosure. Be cautious of proprietary blends in supplements."},{term:"other ingredients",riskLevel:"high",reason:"This catch-all term may include unlisted additives, processing aids, or ingredients below labeling thresholds.",verificationGuidance:"Request complete ingredient list from manufacturer. Consider choosing products with full transparency."},{term:"processing aids",riskLevel:"medium",reason:"Processing aids may include enzymes, solvents, or chemicals used during manufacturing that remain in trace amounts.",verificationGuidance:"Ask manufacturer about specific processing aids used. Look for organic or minimally processed alternatives."},{term:"flavor enhancers",riskLevel:"high",reason:"Flavor enhancers often include MSG or similar glutamate compounds that may affect those with MTHFR variants.",verificationGuidance:"Request specific flavor enhancer identification. Look for E-numbers (E620-E625 are glutamates)."},{term:"yeast extract",riskLevel:"medium",reason:"Yeast extract naturally contains glutamates (similar to MSG) and may affect sensitive individuals.",verificationGuidance:"Contains free glutamic acid. May be problematic for MSG-sensitive individuals."},{term:"hydrolyzed protein",riskLevel:"high",reason:"Hydrolyzed proteins contain free glutamic acid (MSG) created during processing.",verificationGuidance:"Treat similarly to MSG. Includes hydrolyzed vegetable protein, hydrolyzed soy protein, etc."},{term:"autolyzed yeast",riskLevel:"medium",reason:"Autolyzed yeast contains naturally occurring MSG-like compounds.",verificationGuidance:"Contains free glutamates. Consider sensitivity if avoiding MSG."},{term:"natural colors",riskLevel:"low",reason:"While generally safer than artificial colors, natural colors may come from sources that cause reactions in some individuals.",verificationGuidance:"Ask for specific color sources. Common sources include carmine (insects), annatto (seeds), turmeric."},{term:"enzymes",riskLevel:"low",reason:"Enzymes are generally safe but may be derived from sources that concern some individuals (fungal, bacterial, or animal).",verificationGuidance:"Ask about enzyme sources if you have specific dietary restrictions."},{term:"modified food starch",riskLevel:"medium",reason:"Modified starches may be chemically treated and could contain residual processing chemicals.",verificationGuidance:"Ask about the type of modification and source (corn, wheat, tapioca)."},{term:"natural sweeteners",riskLevel:"low",reason:"Term may include various sweeteners with different safety profiles. Could contain stevia, monk fruit, or sugar alcohols.",verificationGuidance:"Ask for specific sweetener identification to verify individual safety."}])}async function gz(){let a=[{ingredientPattern:"folic acid",safetyStatus:"unsafe",reason:"Synthetic folic acid requires MTHFR enzyme conversion and may accumulate unmetabolized.",evidence:"MTHFR C677T and A1298C variants reduce conversion efficiency by 30-70%.",version:1,createdAt:new Date},{ingredientPattern:"cyanocobalamin",safetyStatus:"unsafe",reason:"Synthetic B12 form requires conversion and contains cyanide molecule.",evidence:"Methylcobalamin or adenosylcobalamin are preferred for MTHFR variants.",version:1,createdAt:new Date},{ingredientPattern:"enriched|fortified",safetyStatus:"unsafe",reason:"Enriched and fortified foods typically contain synthetic folic acid.",evidence:"US fortification mandate uses synthetic folic acid in grain products.",version:1,createdAt:new Date},{ingredientPattern:"methylfolate|5-mthf|l-methylfolate",safetyStatus:"safe",reason:"Active form of folate that bypasses MTHFR enzyme.",evidence:"Direct cellular uptake without conversion requirement.",version:1,createdAt:new Date},{ingredientPattern:"methylcobalamin|adenosylcobalamin|hydroxocobalamin",safetyStatus:"safe",reason:"Active or easily converted forms of vitamin B12.",evidence:"Preferred B12 forms for MTHFR-affected individuals.",version:1,createdAt:new Date},{ingredientPattern:"msg|monosodium glutamate|glutamate",safetyStatus:"unsafe",reason:"Excitotoxin that may affect neurological function.",evidence:"May deplete glutathione and affect detoxification pathways.",version:1,createdAt:new Date}];await gv.classificationRules.bulkAdd(a)}async function gA(){await gv.products.clear(),await gv.scanHistory.clear()}async function gB(){return JSON.stringify({products:await gv.products.toArray(),scanHistory:await gv.scanHistory.toArray(),consents:await gv.userConsents.toArray(),exportedAt:new Date().toISOString()},null,2)}let gC=[{name:"Open Food Facts",priority:1,fetchProduct:async function(a){try{let b=await fetch(`https://world.openfoodfacts.org/api/v2/product/${a}.json`,{headers:{"User-Agent":"MTHFRFoodScanner/1.0 (contact@example.com)"}});if(!b.ok)return null;let c=await b.json();if(1!==c.status||!c.product)return null;let d=c.product;return{upc:a,name:d.product_name||d.product_name_en||"Unknown Product",brand:d.brands||void 0,ingredients:d.ingredients_text||d.ingredients_text_en||void 0,imageUrl:d.image_front_url||d.image_url||void 0,source:"open_food_facts"}}catch(a){return console.error("Open Food Facts API error:",a),null}}},{name:"UPC Item DB",priority:2,fetchProduct:async function(a){try{let b=await fetch(`https://api.upcitemdb.com/prod/trial/lookup?upc=${a}`,{headers:{Accept:"application/json"}});if(!b.ok)return null;let c=await b.json();if(!c.items||0===c.items.length)return null;let d=c.items[0];return{upc:a,name:d.title||"Unknown Product",brand:d.brand||void 0,ingredients:d.description||void 0,imageUrl:d.images?.[0]||void 0,source:"upc_item_db"}}catch(a){return console.error("UPC Item DB API error:",a),null}}}];async function gD(a){let b=function(a){let b=a.replace(/[^0-9]/g,"");return 12===b.length?b:13===b.length&&b.startsWith("0")?b.substring(1):13===b.length?b:b.length<12?b.padStart(12,"0"):b}(a),c=[];for(let a of gC.sort((a,b)=>a.priority-b.priority)){c.push(a.name);try{let d=await a.fetchProduct(b);if(d)return{success:!0,product:d,source:"api",searchedAPIs:c}}catch(b){console.error(`Error fetching from ${a.name}:`,b)}}return{success:!1,product:null,source:"api",error:"Product not found in any database",searchedAPIs:c}}function gE(a){return Array.isArray?Array.isArray(a):"[object Array]"===gL(a)}let gF=1/0;function gG(a){return"string"==typeof a}function gH(a){return"number"==typeof a}function gI(a){return"object"==typeof a}function gJ(a){return null!=a}function gK(a){return!a.trim().length}function gL(a){return null==a?void 0===a?"[object Undefined]":"[object Null]":Object.prototype.toString.call(a)}let gM=Object.prototype.hasOwnProperty;class gN{constructor(a){this._keys=[],this._keyMap={};let b=0;a.forEach(a=>{let c=gO(a);this._keys.push(c),this._keyMap[c.id]=c,b+=c.weight}),this._keys.forEach(a=>{a.weight/=b})}get(a){return this._keyMap[a]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function gO(a){let b=null,c=null,d=null,e=1,f=null;if(gG(a)||gE(a))d=a,b=gP(a),c=gQ(a);else{if(!gM.call(a,"name"))throw Error("Missing name property in key");let g=a.name;if(d=g,gM.call(a,"weight")&&(e=a.weight)<=0)throw Error(`Property 'weight' in key '${g}' must be a positive integer`);b=gP(g),c=gQ(g),f=a.getFn}return{path:b,id:c,weight:e,src:d,getFn:f}}function gP(a){return gE(a)?a:a.split(".")}function gQ(a){return gE(a)?a.join("."):a}var gR={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(a,b)=>a.score===b.score?a.idx<b.idx?-1:1:a.score<b.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,useExtendedSearch:!1,getFn:function(a,b){let c=[],d=!1,e=(a,b,f)=>{if(gJ(a))if(b[f]){var g,h;let i=a[b[f]];if(!gJ(i))return;if(f===b.length-1&&(gG(i)||gH(i)||!0===(g=i)||!1===g||gI(h=g)&&null!==h&&"[object Boolean]"==gL(g)))c.push(null==i?"":function(a){if("string"==typeof a)return a;let b=a+"";return"0"==b&&1/a==-gF?"-0":b}(i));else if(gE(i)){d=!0;for(let a=0,c=i.length;a<c;a+=1)e(i[a],b,f+1)}else b.length&&e(i,b,f+1)}else c.push(a)};return e(a,gG(b)?b.split("."):b,0),d?c:c[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};let gS=/[^ ]+/g;class gT{constructor({getFn:a=gR.getFn,fieldNormWeight:b=gR.fieldNormWeight}={}){this.norm=function(a=1,b=3){let c=new Map,d=Math.pow(10,b);return{get(b){let e=b.match(gS).length;if(c.has(e))return c.get(e);let f=parseFloat(Math.round(1/Math.pow(e,.5*a)*d)/d);return c.set(e,f),f},clear(){c.clear()}}}(b,3),this.getFn=a,this.isCreated=!1,this.setIndexRecords()}setSources(a=[]){this.docs=a}setIndexRecords(a=[]){this.records=a}setKeys(a=[]){this.keys=a,this._keysMap={},a.forEach((a,b)=>{this._keysMap[a.id]=b})}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,gG(this.docs[0])?this.docs.forEach((a,b)=>{this._addString(a,b)}):this.docs.forEach((a,b)=>{this._addObject(a,b)}),this.norm.clear())}add(a){let b=this.size();gG(a)?this._addString(a,b):this._addObject(a,b)}removeAt(a){this.records.splice(a,1);for(let b=a,c=this.size();b<c;b+=1)this.records[b].i-=1}getValueForItemAtKeyId(a,b){return a[this._keysMap[b]]}size(){return this.records.length}_addString(a,b){if(!gJ(a)||gK(a))return;let c={v:a,i:b,n:this.norm.get(a)};this.records.push(c)}_addObject(a,b){let c={i:b,$:{}};this.keys.forEach((b,d)=>{let e=b.getFn?b.getFn(a):this.getFn(a,b.path);if(gJ(e)){if(gE(e)){let a=[],b=[{nestedArrIndex:-1,value:e}];for(;b.length;){let{nestedArrIndex:c,value:d}=b.pop();if(gJ(d))if(gG(d)&&!gK(d)){let b={v:d,i:c,n:this.norm.get(d)};a.push(b)}else gE(d)&&d.forEach((a,c)=>{b.push({nestedArrIndex:c,value:a})})}c.$[d]=a}else if(gG(e)&&!gK(e)){let a={v:e,n:this.norm.get(e)};c.$[d]=a}}}),this.records.push(c)}toJSON(){return{keys:this.keys,records:this.records}}}function gU(a,b,{getFn:c=gR.getFn,fieldNormWeight:d=gR.fieldNormWeight}={}){let e=new gT({getFn:c,fieldNormWeight:d});return e.setKeys(a.map(gO)),e.setSources(b),e.create(),e}function gV(a,{errors:b=0,currentLocation:c=0,expectedLocation:d=0,distance:e=gR.distance,ignoreLocation:f=gR.ignoreLocation}={}){let g=b/a.length;if(f)return g;let h=Math.abs(d-c);return e?g+h/e:h?1:g}let gW=String.prototype.normalize?a=>a.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):a=>a;class gX{constructor(a,{location:b=gR.location,threshold:c=gR.threshold,distance:d=gR.distance,includeMatches:e=gR.includeMatches,findAllMatches:f=gR.findAllMatches,minMatchCharLength:g=gR.minMatchCharLength,isCaseSensitive:h=gR.isCaseSensitive,ignoreDiacritics:i=gR.ignoreDiacritics,ignoreLocation:j=gR.ignoreLocation}={}){if(this.options={location:b,threshold:c,distance:d,includeMatches:e,findAllMatches:f,minMatchCharLength:g,isCaseSensitive:h,ignoreDiacritics:i,ignoreLocation:j},a=h?a:a.toLowerCase(),a=i?gW(a):a,this.pattern=a,this.chunks=[],!this.pattern.length)return;let k=(a,b)=>{this.chunks.push({pattern:a,alphabet:function(a){let b={};for(let c=0,d=a.length;c<d;c+=1){let e=a.charAt(c);b[e]=(b[e]||0)|1<<d-c-1}return b}(a),startIndex:b})},l=this.pattern.length;if(l>32){let a=0,b=l%32,c=l-b;for(;a<c;)k(this.pattern.substr(a,32),a),a+=32;if(b){let a=l-32;k(this.pattern.substr(a),a)}}else k(this.pattern,0)}searchIn(a){let{isCaseSensitive:b,ignoreDiacritics:c,includeMatches:d}=this.options;if(a=b?a:a.toLowerCase(),a=c?gW(a):a,this.pattern===a){let b={isMatch:!0,score:0};return d&&(b.indices=[[0,a.length-1]]),b}let{location:e,distance:f,threshold:g,findAllMatches:h,minMatchCharLength:i,ignoreLocation:j}=this.options,k=[],l=0,m=!1;this.chunks.forEach(({pattern:b,alphabet:c,startIndex:n})=>{let{isMatch:o,score:p,indices:q}=function(a,b,c,{location:d=gR.location,distance:e=gR.distance,threshold:f=gR.threshold,findAllMatches:g=gR.findAllMatches,minMatchCharLength:h=gR.minMatchCharLength,includeMatches:i=gR.includeMatches,ignoreLocation:j=gR.ignoreLocation}={}){let k;if(b.length>32)throw Error("Pattern length exceeds max of 32.");let l=b.length,m=a.length,n=Math.max(0,Math.min(d,m)),o=f,p=n,q=h>1||i,r=q?Array(m):[];for(;(k=a.indexOf(b,p))>-1;)if(o=Math.min(gV(b,{currentLocation:k,expectedLocation:n,distance:e,ignoreLocation:j}),o),p=k+l,q){let a=0;for(;a<l;)r[k+a]=1,a+=1}p=-1;let s=[],t=1,u=l+m,v=1<<l-1;for(let d=0;d<l;d+=1){let f=0,h=u;for(;f<h;)gV(b,{errors:d,currentLocation:n+h,expectedLocation:n,distance:e,ignoreLocation:j})<=o?f=h:u=h,h=Math.floor((u-f)/2+f);u=h;let i=Math.max(1,n-h+1),k=g?m:Math.min(n+h,m)+l,w=Array(k+2);w[k+1]=(1<<d)-1;for(let f=k;f>=i;f-=1){let g=f-1,h=c[a.charAt(g)];if(q&&(r[g]=+!!h),w[f]=(w[f+1]<<1|1)&h,d&&(w[f]|=(s[f+1]|s[f])<<1|1|s[f+1]),w[f]&v&&(t=gV(b,{errors:d,currentLocation:g,expectedLocation:n,distance:e,ignoreLocation:j}))<=o){if(o=t,(p=g)<=n)break;i=Math.max(1,2*n-p)}}if(gV(b,{errors:d+1,currentLocation:n,expectedLocation:n,distance:e,ignoreLocation:j})>o)break;s=w}let w={isMatch:p>=0,score:Math.max(.001,t)};if(q){let a=function(a=[],b=gR.minMatchCharLength){let c=[],d=-1,e=-1,f=0;for(let g=a.length;f<g;f+=1){let g=a[f];g&&-1===d?d=f:g||-1===d||((e=f-1)-d+1>=b&&c.push([d,e]),d=-1)}return a[f-1]&&f-d>=b&&c.push([d,f-1]),c}(r,h);a.length?i&&(w.indices=a):w.isMatch=!1}return w}(a,b,c,{location:e+n,distance:f,threshold:g,findAllMatches:h,minMatchCharLength:i,includeMatches:d,ignoreLocation:j});o&&(m=!0),l+=p,o&&q&&(k=[...k,...q])});let n={isMatch:m,score:m?l/this.chunks.length:1};return m&&d&&(n.indices=k),n}}class gY{constructor(a){this.pattern=a}static isMultiMatch(a){return gZ(a,this.multiRegex)}static isSingleMatch(a){return gZ(a,this.singleRegex)}search(){}}function gZ(a,b){let c=a.match(b);return c?c[1]:null}class g$ extends gY{constructor(a){super(a)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(a){let b=a===this.pattern;return{isMatch:b,score:+!b,indices:[0,this.pattern.length-1]}}}class g_ extends gY{constructor(a){super(a)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(a){let b=-1===a.indexOf(this.pattern);return{isMatch:b,score:+!b,indices:[0,a.length-1]}}}class g0 extends gY{constructor(a){super(a)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(a){let b=a.startsWith(this.pattern);return{isMatch:b,score:+!b,indices:[0,this.pattern.length-1]}}}class g1 extends gY{constructor(a){super(a)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(a){let b=!a.startsWith(this.pattern);return{isMatch:b,score:+!b,indices:[0,a.length-1]}}}class g2 extends gY{constructor(a){super(a)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(a){let b=a.endsWith(this.pattern);return{isMatch:b,score:+!b,indices:[a.length-this.pattern.length,a.length-1]}}}class g3 extends gY{constructor(a){super(a)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(a){let b=!a.endsWith(this.pattern);return{isMatch:b,score:+!b,indices:[0,a.length-1]}}}class g4 extends gY{constructor(a,{location:b=gR.location,threshold:c=gR.threshold,distance:d=gR.distance,includeMatches:e=gR.includeMatches,findAllMatches:f=gR.findAllMatches,minMatchCharLength:g=gR.minMatchCharLength,isCaseSensitive:h=gR.isCaseSensitive,ignoreDiacritics:i=gR.ignoreDiacritics,ignoreLocation:j=gR.ignoreLocation}={}){super(a),this._bitapSearch=new gX(a,{location:b,threshold:c,distance:d,includeMatches:e,findAllMatches:f,minMatchCharLength:g,isCaseSensitive:h,ignoreDiacritics:i,ignoreLocation:j})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(a){return this._bitapSearch.searchIn(a)}}class g5 extends gY{constructor(a){super(a)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(a){let b,c=0,d=[],e=this.pattern.length;for(;(b=a.indexOf(this.pattern,c))>-1;)c=b+e,d.push([b,c-1]);let f=!!d.length;return{isMatch:f,score:+!f,indices:d}}}let g6=[g$,g5,g0,g1,g3,g2,g_,g4],g7=g6.length,g8=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,g9=new Set([g4.type,g5.type]);class ha{constructor(a,{isCaseSensitive:b=gR.isCaseSensitive,ignoreDiacritics:c=gR.ignoreDiacritics,includeMatches:d=gR.includeMatches,minMatchCharLength:e=gR.minMatchCharLength,ignoreLocation:f=gR.ignoreLocation,findAllMatches:g=gR.findAllMatches,location:h=gR.location,threshold:i=gR.threshold,distance:j=gR.distance}={}){this.query=null,this.options={isCaseSensitive:b,ignoreDiacritics:c,includeMatches:d,minMatchCharLength:e,findAllMatches:g,ignoreLocation:f,location:h,threshold:i,distance:j},a=b?a:a.toLowerCase(),a=c?gW(a):a,this.pattern=a,this.query=function(a,b={}){return a.split("|").map(a=>{let c=a.trim().split(g8).filter(a=>a&&!!a.trim()),d=[];for(let a=0,e=c.length;a<e;a+=1){let e=c[a],f=!1,g=-1;for(;!f&&++g<g7;){let a=g6[g],c=a.isMultiMatch(e);c&&(d.push(new a(c,b)),f=!0)}if(!f)for(g=-1;++g<g7;){let a=g6[g],c=a.isSingleMatch(e);if(c){d.push(new a(c,b));break}}}return d})}(this.pattern,this.options)}static condition(a,b){return b.useExtendedSearch}searchIn(a){let b=this.query;if(!b)return{isMatch:!1,score:1};let{includeMatches:c,isCaseSensitive:d,ignoreDiacritics:e}=this.options;a=d?a:a.toLowerCase(),a=e?gW(a):a;let f=0,g=[],h=0;for(let d=0,e=b.length;d<e;d+=1){let e=b[d];g.length=0,f=0;for(let b=0,d=e.length;b<d;b+=1){let d=e[b],{isMatch:i,indices:j,score:k}=d.search(a);if(i){if(f+=1,h+=k,c){let a=d.constructor.type;g9.has(a)?g=[...g,...j]:g.push(j)}}else{h=0,f=0,g.length=0;break}}if(f){let a={isMatch:!0,score:h/f};return c&&(a.indices=g),a}}return{isMatch:!1,score:1}}}let hb=[];function hc(a,b){for(let c=0,d=hb.length;c<d;c+=1){let d=hb[c];if(d.condition(a,b))return new d(a,b)}return new gX(a,b)}let hd={AND:"$and",OR:"$or"},he={PATH:"$path",PATTERN:"$val"},hf=a=>!!(a[hd.AND]||a[hd.OR]),hg=a=>({[hd.AND]:Object.keys(a).map(b=>({[b]:a[b]}))});function hh(a,b,{auto:c=!0}={}){let d=a=>{let e=Object.keys(a),f=!!a[he.PATH];if(!f&&e.length>1&&!hf(a))return d(hg(a));if(!gE(a)&&gI(a)&&!hf(a)){let d=f?a[he.PATH]:e[0],g=f?a[he.PATTERN]:a[d];if(!gG(g))throw Error(`Invalid value for key ${d}`);let h={keyId:gQ(d),pattern:g};return c&&(h.searcher=hc(g,b)),h}let g={children:[],operator:e[0]};return e.forEach(b=>{let c=a[b];gE(c)&&c.forEach(a=>{g.children.push(d(a))})}),g};return hf(a)||(a=hg(a)),d(a)}function hi(a,b){let c=a.matches;b.matches=[],gJ(c)&&c.forEach(a=>{if(!gJ(a.indices)||!a.indices.length)return;let{indices:c,value:d}=a,e={indices:c,value:d};a.key&&(e.key=a.key.src),a.idx>-1&&(e.refIndex=a.idx),b.matches.push(e)})}function hj(a,b){b.score=a.score}class hk{constructor(a,b={},c){this.options={...gR,...b},this.options.useExtendedSearch,this._keyStore=new gN(this.options.keys),this.setCollection(a,c)}setCollection(a,b){if(this._docs=a,b&&!(b instanceof gT))throw Error("Incorrect 'index' type");this._myIndex=b||gU(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(a){gJ(a)&&(this._docs.push(a),this._myIndex.add(a))}remove(a=()=>!1){let b=[];for(let c=0,d=this._docs.length;c<d;c+=1){let e=this._docs[c];a(e,c)&&(this.removeAt(c),c-=1,d-=1,b.push(e))}return b}removeAt(a){this._docs.splice(a,1),this._myIndex.removeAt(a)}getIndex(){return this._myIndex}search(a,{limit:b=-1}={}){let{includeMatches:c,includeScore:d,shouldSort:e,sortFn:f,ignoreFieldNorm:g}=this.options,h=gG(a)?gG(this._docs[0])?this._searchStringList(a):this._searchObjectList(a):this._searchLogical(a);return!function(a,{ignoreFieldNorm:b=gR.ignoreFieldNorm}){a.forEach(a=>{let c=1;a.matches.forEach(({key:a,norm:d,score:e})=>{let f=a?a.weight:null;c*=Math.pow(0===e&&f?Number.EPSILON:e,(f||1)*(b?1:d))}),a.score=c})}(h,{ignoreFieldNorm:g}),e&&h.sort(f),gH(b)&&b>-1&&(h=h.slice(0,b)),function(a,b,{includeMatches:c=gR.includeMatches,includeScore:d=gR.includeScore}={}){let e=[];return c&&e.push(hi),d&&e.push(hj),a.map(a=>{let{idx:c}=a,d={item:b[c],refIndex:c};return e.length&&e.forEach(b=>{b(a,d)}),d})}(h,this._docs,{includeMatches:c,includeScore:d})}_searchStringList(a){let b=hc(a,this.options),{records:c}=this._myIndex,d=[];return c.forEach(({v:a,i:c,n:e})=>{if(!gJ(a))return;let{isMatch:f,score:g,indices:h}=b.searchIn(a);f&&d.push({item:a,idx:c,matches:[{score:g,value:a,norm:e,indices:h}]})}),d}_searchLogical(a){let b=hh(a,this.options),c=(a,b,d)=>{if(!a.children){let{keyId:c,searcher:e}=a,f=this._findMatches({key:this._keyStore.get(c),value:this._myIndex.getValueForItemAtKeyId(b,c),searcher:e});return f&&f.length?[{idx:d,item:b,matches:f}]:[]}let e=[];for(let f=0,g=a.children.length;f<g;f+=1){let g=c(a.children[f],b,d);if(g.length)e.push(...g);else if(a.operator===hd.AND)return[]}return e},d=this._myIndex.records,e={},f=[];return d.forEach(({$:a,i:d})=>{if(gJ(a)){let g=c(b,a,d);g.length&&(e[d]||(e[d]={idx:d,item:a,matches:[]},f.push(e[d])),g.forEach(({matches:a})=>{e[d].matches.push(...a)}))}}),f}_searchObjectList(a){let b=hc(a,this.options),{keys:c,records:d}=this._myIndex,e=[];return d.forEach(({$:a,i:d})=>{if(!gJ(a))return;let f=[];c.forEach((c,d)=>{f.push(...this._findMatches({key:c,value:a[d],searcher:b}))}),f.length&&e.push({idx:d,item:a,matches:f})}),e}_findMatches({key:a,value:b,searcher:c}){if(!gJ(b))return[];let d=[];if(gE(b))b.forEach(({v:b,i:e,n:f})=>{if(!gJ(b))return;let{isMatch:g,score:h,indices:i}=c.searchIn(b);g&&d.push({score:h,key:a,value:b,idx:e,norm:f,indices:i})});else{let{v:e,n:f}=b,{isMatch:g,score:h,indices:i}=c.searchIn(e);g&&d.push({score:h,key:a,value:e,norm:f,indices:i})}return d}}hk.version="7.1.0",hk.createIndex=gU,hk.parseIndex=function(a,{getFn:b=gR.getFn,fieldNormWeight:c=gR.fieldNormWeight}={}){let{keys:d,records:e}=a,f=new gT({getFn:b,fieldNormWeight:c});return f.setKeys(d),f.setIndexRecords(e),f},hk.config=gR,hk.parseQuery=hh,function(...a){hb.push(...a)}(ha);let hl=null,hm=new Map;async function hn(){let a=await gv.canonicalIngredients.toArray();for(let b of(hm.clear(),a))for(let a of(hm.set(b.canonicalName.toLowerCase(),b),b.synonyms))hm.set(a.toLowerCase(),b);hl=new hk(a.flatMap(a=>[{...a,searchName:a.canonicalName},...a.synonyms.map(b=>({...a,searchName:b}))]),{keys:["searchName"],threshold:.3,includeScore:!0,ignoreLocation:!0})}async function ho(a){let b=a.toLowerCase().trim().replace(/[^\w\s\-']/g," ").replace(/\s+/g," ").replace(/^\s+|\s+$/g,"").replace(/\d+(\.\d+)?\s*(mg|g|ml|mcg|iu|%)/gi,"").trim(),c=hm.get(b);if(c)return{originalText:a,normalizedName:b,canonicalName:c.canonicalName,confidence:1};if(hl){let c=hl.search(b);if(c.length>0&&void 0!==c[0].score){let d=1-c[0].score;if(d>=.7)return{originalText:a,normalizedName:b,canonicalName:c[0].item.canonicalName,confidence:d}}}return{originalText:a,normalizedName:b,canonicalName:b,confidence:.5}}async function hp(a){let b=function(a){if(!a||""===a.trim())return[];let b=a,c=(b=(b=(b=(b=(b=b.replace(/contains\s*(?:less\s*than\s*)?[\d.]+%\s*(?:of\s*)?:?/gi,",")).replace(/contains\s*(?:one\s*or\s*more\s*of\s*)?:?/gi,",")).replace(/may\s*contain:?/gi,",")).replace(/ingredients:?/gi,"")).replace(/\s*\([^()]*\)/g,a=>{let b=a.slice(1,-1);return b.includes(",")?` [${b}]`:a})).split(/,(?![^[]*\])/).map(a=>a.trim()).filter(Boolean),d=[];for(let a of c)if(a.includes("[")){let b=a.match(/^([^[]+)\s*\[([^\]]+)\]/);if(b){let a=b[1].trim(),c=b[2].split(",").map(a=>a.trim());for(let b of(d.push(a),c))d.push(`  ${b}`)}else d.push(a.replace(/[\[\]]/g,""))}else if(a.includes("(")){let b=a.match(/^([^(]+)\s*\(([^)]+)\)/);b?d.push(b[1].trim()):d.push(a)}else d.push(a);return d.map(a=>a.trim()).filter(a=>a.length>0)}(a),c=[];for(let a of b){let b=a.startsWith("  "),d=a.trim();if(d){let a=await ho(d);if(b){let b=c[c.length-1];b&&!b.subIngredients&&(b.subIngredients=[]),b&&b.subIngredients.push(a)}else c.push(a)}}return c}let hq=[],hr=[],hs=new Map;async function ht(){hq=await gv.classificationRules.toArray(),hr=await gv.maskingTerms.toArray();let a=await gv.canonicalIngredients.toArray();for(let b of(hs.clear(),a))for(let a of(hs.set(b.canonicalName.toLowerCase(),b),b.synonyms))hs.set(a.toLowerCase(),b)}function hu(a){let b=function a(b){let c=[];for(let d of b)c.push(d),d.subIngredients&&d.subIngredients.length>0&&c.push(...a(d.subIngredients));return c}(a),c=b.filter(a=>"safe"===a.safetyStatus).length,d=b.filter(a=>"unsafe"===a.safetyStatus).length,e=b.filter(a=>"unknown"===a.safetyStatus).length,f=b.length,g=b.filter(a=>"unsafe"===a.safetyStatus),h=b.filter(a=>a.isMasking);return{overallStatus:d>0?"unsafe":e>.5*f||h.some(a=>"high"===a.maskingRiskLevel)||e>0?"unknown":"safe",safeCount:c,unsafeCount:d,unknownCount:e,safePercentage:f>0?Math.round(c/f*100):0,unsafePercentage:f>0?Math.round(d/f*100):0,unknownPercentage:f>0?Math.round(e/f*100):0,unsafeIngredients:g,maskingIngredients:h,totalIngredients:f}}let hv=!1;async function hw(){hv||(await gw(),await hn(),await ht(),hv=!0)}async function hx(a,b=!1){await hw();let c=await gv.products.where("upc").equals(a).first();if(c){let b=hu(c.ingredients);return await gv.scanHistory.add({productId:c.id,scannedAt:new Date,upc:a}),{success:!0,product:{...c,lastScannedAt:new Date},safety:b,source:c.sourceProvenance}}let d=await gD(a);if(!d.success||!d.product)return b?hy(a,"Demo Product","Water, Enriched Wheat Flour (Wheat Flour, Niacin, Reduced Iron, Thiamine Mononitrate, Riboflavin, Folic Acid), Sugar, Natural Flavors, Salt, Yeast Extract, Citric Acid","Demo Brand",void 0,"manual"):{success:!1,product:null,safety:null,error:d.error||"Product not found",source:"api",notFound:!0};let e=d.product;return hy(e.upc,e.name,e.ingredients||"",e.brand,e.imageUrl,"api")}async function hy(a,b,c,d,e,f="manual"){await hw();try{let g=await hp(c),h=function(a,b="api"){return a.map(a=>(function a(b,c="api"){let d,e=b.canonicalName.toLowerCase(),f=b.originalText.toLowerCase(),g="unknown",h=hs.get(e);if(h)g=h.safetyStatus,d=h.safetyReason;else for(let a of hq){let b=RegExp(a.ingredientPattern,"i");if(b.test(f)||b.test(e)){g=a.safetyStatus,d=a.reason;break}}let i=function(a){let b=a.toLowerCase();for(let a of hr)if(b.includes(a.term.toLowerCase()))return{isMasking:!0,reason:a.reason,riskLevel:a.riskLevel,verificationGuidance:a.verificationGuidance};for(let b of[{pattern:/and\/or/i,reason:"Ingredient composition is variable and unspecified"},{pattern:/one or more of/i,reason:"Multiple possible ingredients, exact composition unknown"},{pattern:/may contain/i,reason:"Potential cross-contamination or variable formulation"},{pattern:/less than \d+%/i,reason:"Minor ingredients may not be fully disclosed"}])if(b.pattern.test(a))return{isMasking:!0,reason:b.reason,riskLevel:"medium"};return{isMasking:!1}}(f),j={originalText:b.originalText,canonicalName:b.canonicalName,normalizedName:b.normalizedName,confidence:b.confidence,safetyStatus:g,safetyReason:d,isMasking:i.isMasking,maskingReason:i.reason,maskingRiskLevel:i.riskLevel,sourceProvenance:c};if(b.subIngredients&&b.subIngredients.length>0&&(j.subIngredients=b.subIngredients.map(b=>a(b,c)),j.subIngredients.some(a=>"unsafe"===a.safetyStatus)&&"unsafe"!==g)){j.safetyStatus="unsafe";let a=j.subIngredients.filter(a=>"unsafe"===a.safetyStatus);j.safetyReason=`Contains unsafe sub-ingredients: ${a.map(a=>a.canonicalName).join(", ")}`}return j})(a,b))}(g,f),i=hu(h),j={upc:a,name:b,brand:d,imageUrl:e,ingredients:h,sourceProvenance:f,createdAt:new Date,updatedAt:new Date,lastScannedAt:new Date},k=await gv.products.add(j),l={...j,id:k};return void 0!==k&&await gv.scanHistory.add({productId:k,scannedAt:new Date,upc:a}),{success:!0,product:l,safety:i,source:f}}catch(a){return console.error("Error processing product:",a),{success:!1,product:null,safety:null,error:a instanceof Error?a.message:"Failed to process product",source:f}}}let hz=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim(),hA=a=>{let b=a.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,b,c)=>c?c.toUpperCase():b.toLowerCase());return b.charAt(0).toUpperCase()+b.slice(1)};var hB={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let hC=(0,z.forwardRef)(({color:a="currentColor",size:b=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:e="",children:f,iconNode:g,...h},i)=>(0,z.createElement)("svg",{ref:i,...hB,width:b,height:b,stroke:a,strokeWidth:d?24*Number(c)/Number(b):c,className:hz("lucide",e),...!f&&!(a=>{for(let b in a)if(b.startsWith("aria-")||"role"===b||"title"===b)return!0;return!1})(h)&&{"aria-hidden":"true"},...h},[...g.map(([a,b])=>(0,z.createElement)(a,b)),...Array.isArray(f)?f:[f]])),hD=(a,b)=>{let c=(0,z.forwardRef)(({className:c,...d},e)=>(0,z.createElement)(hC,{ref:e,iconNode:b,className:hz(`lucide-${hA(a).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${a}`,c),...d}));return c.displayName=hA(a),c},hE=hD("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]]),hF=hD("scan-barcode",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M8 7v10",key:"23sfjj"}],["path",{d:"M12 7v10",key:"jspqdw"}],["path",{d:"M17 7v10",key:"578dap"}]]),hG=hD("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),hH=hD("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);function hI(){for(var a,b,c=0,d="",e=arguments.length;c<e;c++)(a=arguments[c])&&(b=function a(b){var c,d,e="";if("string"==typeof b||"number"==typeof b)e+=b;else if("object"==typeof b)if(Array.isArray(b)){var f=b.length;for(c=0;c<f;c++)b[c]&&(d=a(b[c]))&&(e&&(e+=" "),e+=d)}else for(d in b)b[d]&&(e&&(e+=" "),e+=d);return e}(a))&&(d&&(d+=" "),d+=b);return d}let hJ=(a=new Map,b=null,c)=>({nextPart:a,validators:b,classGroupId:c}),hK=[],hL=(a,b,c)=>{if(0==a.length-b)return c.classGroupId;let d=a[b],e=c.nextPart.get(d);if(e){let c=hL(a,b+1,e);if(c)return c}let f=c.validators;if(null===f)return;let g=0===b?a.join("-"):a.slice(b).join("-"),h=f.length;for(let a=0;a<h;a++){let b=f[a];if(b.validator(g))return b.classGroupId}},hM=(a,b)=>{let c=hJ();for(let d in a)hN(a[d],c,d,b);return c},hN=(a,b,c,d)=>{let e=a.length;for(let f=0;f<e;f++)hO(a[f],b,c,d)},hO=(a,b,c,d)=>"string"==typeof a?void hP(a,b,c):"function"==typeof a?void hQ(a,b,c,d):void hR(a,b,c,d),hP=(a,b,c)=>{(""===a?b:hS(b,a)).classGroupId=c},hQ=(a,b,c,d)=>{if(hT(a))return void hN(a(d),b,c,d);null===b.validators&&(b.validators=[]),b.validators.push({classGroupId:c,validator:a})},hR=(a,b,c,d)=>{let e=Object.entries(a),f=e.length;for(let a=0;a<f;a++){let[f,g]=e[a];hN(g,hS(b,f),c,d)}},hS=(a,b)=>{let c=a,d=b.split("-"),e=d.length;for(let a=0;a<e;a++){let b=d[a],e=c.nextPart.get(b);e||(e=hJ(),c.nextPart.set(b,e)),c=e}return c},hT=a=>"isThemeGetter"in a&&!0===a.isThemeGetter,hU=[],hV=(a,b,c,d,e)=>({modifiers:a,hasImportantModifier:b,baseClassName:c,maybePostfixModifierPosition:d,isExternal:e}),hW=/\s+/,hX=a=>{let b;if("string"==typeof a)return a;let c="";for(let d=0;d<a.length;d++)a[d]&&(b=hX(a[d]))&&(c&&(c+=" "),c+=b);return c},hY=[],hZ=a=>{let b=b=>b[a]||hY;return b.isThemeGetter=!0,b},h$=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,h_=/^\((?:(\w[\w-]*):)?(.+)\)$/i,h0=/^\d+(?:\.\d+)?\/\d+(?:\.\d+)?$/,h1=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,h2=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,h3=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,h4=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,h5=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,h6=a=>h0.test(a),h7=a=>!!a&&!Number.isNaN(Number(a)),h8=a=>!!a&&Number.isInteger(Number(a)),h9=a=>a.endsWith("%")&&h7(a.slice(0,-1)),ia=a=>h1.test(a),ib=()=>!0,ic=a=>h2.test(a)&&!h3.test(a),id=()=>!1,ie=a=>h4.test(a),ig=a=>h5.test(a),ih=a=>!ij(a)&&!is(a),ii=a=>iA(a,iE,id),ij=a=>h$.test(a),ik=a=>iA(a,iF,ic),il=a=>iA(a,iG,h7),im=a=>iA(a,iI,ib),io=a=>iA(a,iH,id),ip=a=>iA(a,iC,id),iq=a=>iA(a,iD,ig),ir=a=>iA(a,iJ,ie),is=a=>h_.test(a),it=a=>iB(a,iF),iu=a=>iB(a,iH),iv=a=>iB(a,iC),iw=a=>iB(a,iE),ix=a=>iB(a,iD),iy=a=>iB(a,iJ,!0),iz=a=>iB(a,iI,!0),iA=(a,b,c)=>{let d=h$.exec(a);return!!d&&(d[1]?b(d[1]):c(d[2]))},iB=(a,b,c=!1)=>{let d=h_.exec(a);return!!d&&(d[1]?b(d[1]):c)},iC=a=>"position"===a||"percentage"===a,iD=a=>"image"===a||"url"===a,iE=a=>"length"===a||"size"===a||"bg-size"===a,iF=a=>"length"===a,iG=a=>"number"===a,iH=a=>"family-name"===a,iI=a=>"number"===a||"weight"===a,iJ=a=>"shadow"===a;Symbol.toStringTag;let iK=((a,...b)=>{let c,d,e,f,g=a=>{let b=d(a);if(b)return b;let f=((a,b)=>{let{parseClassName:c,getClassGroupId:d,getConflictingClassGroupIds:e,sortModifiers:f}=b,g=[],h=a.trim().split(hW),i="";for(let a=h.length-1;a>=0;a-=1){let b=h[a],{isExternal:j,modifiers:k,hasImportantModifier:l,baseClassName:m,maybePostfixModifierPosition:n}=c(b);if(j){i=b+(i.length>0?" "+i:i);continue}let o=!!n,p=d(o?m.substring(0,n):m);if(!p){if(!o||!(p=d(m))){i=b+(i.length>0?" "+i:i);continue}o=!1}let q=0===k.length?"":1===k.length?k[0]:f(k).join(":"),r=l?q+"!":q,s=r+p;if(g.indexOf(s)>-1)continue;g.push(s);let t=e(p,o);for(let a=0;a<t.length;++a){let b=t[a];g.push(r+b)}i=b+(i.length>0?" "+i:i)}return i})(a,c);return e(a,f),f};return f=h=>(d=(c=(a=>({cache:(a=>{if(a<1)return{get:()=>void 0,set:()=>{}};let b=0,c=Object.create(null),d=Object.create(null),e=(e,f)=>{c[e]=f,++b>a&&(b=0,d=c,c=Object.create(null))};return{get(a){let b=c[a];return void 0!==b?b:void 0!==(b=d[a])?(e(a,b),b):void 0},set(a,b){a in c?c[a]=b:e(a,b)}}})(a.cacheSize),parseClassName:(a=>{let{prefix:b,experimentalParseClassName:c}=a,d=a=>{let b,c=[],d=0,e=0,f=0,g=a.length;for(let h=0;h<g;h++){let g=a[h];if(0===d&&0===e){if(":"===g){c.push(a.slice(f,h)),f=h+1;continue}if("/"===g){b=h;continue}}"["===g?d++:"]"===g?d--:"("===g?e++:")"===g&&e--}let h=0===c.length?a:a.slice(f),i=h,j=!1;return h.endsWith("!")?(i=h.slice(0,-1),j=!0):h.startsWith("!")&&(i=h.slice(1),j=!0),hV(c,j,i,b&&b>f?b-f:void 0)};if(b){let a=b+":",c=d;d=b=>b.startsWith(a)?c(b.slice(a.length)):hV(hU,!1,b,void 0,!0)}if(c){let a=d;d=b=>c({className:b,parseClassName:a})}return d})(a),sortModifiers:(a=>{let b=new Map;return a.orderSensitiveModifiers.forEach((a,c)=>{b.set(a,1e6+c)}),a=>{let c=[],d=[];for(let e=0;e<a.length;e++){let f=a[e],g="["===f[0],h=b.has(f);g||h?(d.length>0&&(d.sort(),c.push(...d),d=[]),c.push(f)):d.push(f)}return d.length>0&&(d.sort(),c.push(...d)),c}})(a),...(a=>{let b=(a=>{let{theme:b,classGroups:c}=a;return hM(c,b)})(a),{conflictingClassGroups:c,conflictingClassGroupModifiers:d}=a;return{getClassGroupId:a=>{if(a.startsWith("[")&&a.endsWith("]"))return(a=>-1===a.slice(1,-1).indexOf(":")?void 0:(()=>{let b=a.slice(1,-1),c=b.indexOf(":"),d=b.slice(0,c);return d?"arbitrary.."+d:void 0})())(a);let c=a.split("-"),d=+(""===c[0]&&c.length>1);return hL(c,d,b)},getConflictingClassGroupIds:(a,b)=>{if(b){let b=d[a],e=c[a];return b?e?((a,b)=>{let c=Array(a.length+b.length);for(let b=0;b<a.length;b++)c[b]=a[b];for(let d=0;d<b.length;d++)c[a.length+d]=b[d];return c})(e,b):b:e||hK}return c[a]||hK}}})(a)}))(b.reduce((a,b)=>b(a),a()))).cache.get,e=c.cache.set,f=g,g(h)),(...a)=>f(((...a)=>{let b,c,d=0,e="";for(;d<a.length;)(b=a[d++])&&(c=hX(b))&&(e&&(e+=" "),e+=c);return e})(...a))})(()=>{let a=hZ("color"),b=hZ("font"),c=hZ("text"),d=hZ("font-weight"),e=hZ("tracking"),f=hZ("leading"),g=hZ("breakpoint"),h=hZ("container"),i=hZ("spacing"),j=hZ("radius"),k=hZ("shadow"),l=hZ("inset-shadow"),m=hZ("text-shadow"),n=hZ("drop-shadow"),o=hZ("blur"),p=hZ("perspective"),q=hZ("aspect"),r=hZ("ease"),s=hZ("animate"),t=()=>["auto","avoid","all","avoid-page","page","left","right","column"],u=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],v=()=>[...u(),is,ij],w=()=>["auto","hidden","clip","visible","scroll"],x=()=>["auto","contain","none"],y=()=>[is,ij,i],z=()=>[h6,"full","auto",...y()],A=()=>[h8,"none","subgrid",is,ij],B=()=>["auto",{span:["full",h8,is,ij]},h8,is,ij],C=()=>[h8,"auto",is,ij],D=()=>["auto","min","max","fr",is,ij],E=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],F=()=>["start","end","center","stretch","center-safe","end-safe"],G=()=>["auto",...y()],H=()=>[h6,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...y()],I=()=>[h6,"screen","full","dvw","lvw","svw","min","max","fit",...y()],J=()=>[h6,"screen","full","lh","dvh","lvh","svh","min","max","fit",...y()],K=()=>[a,is,ij],L=()=>[...u(),iv,ip,{position:[is,ij]}],M=()=>["no-repeat",{repeat:["","x","y","space","round"]}],N=()=>["auto","cover","contain",iw,ii,{size:[is,ij]}],O=()=>[h9,it,ik],P=()=>["","none","full",j,is,ij],Q=()=>["",h7,it,ik],R=()=>["solid","dashed","dotted","double"],S=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],T=()=>[h7,h9,iv,ip],U=()=>["","none",o,is,ij],V=()=>["none",h7,is,ij],W=()=>["none",h7,is,ij],X=()=>[h7,is,ij],Y=()=>[h6,"full",...y()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[ia],breakpoint:[ia],color:[ib],container:[ia],"drop-shadow":[ia],ease:["in","out","in-out"],font:[ih],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[ia],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[ia],shadow:[ia],spacing:["px",h7],text:[ia],"text-shadow":[ia],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",h6,ij,is,q]}],container:["container"],columns:[{columns:[h7,ij,is,h]}],"break-after":[{"break-after":t()}],"break-before":[{"break-before":t()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:v()}],overflow:[{overflow:w()}],"overflow-x":[{"overflow-x":w()}],"overflow-y":[{"overflow-y":w()}],overscroll:[{overscroll:x()}],"overscroll-x":[{"overscroll-x":x()}],"overscroll-y":[{"overscroll-y":x()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:z()}],"inset-x":[{"inset-x":z()}],"inset-y":[{"inset-y":z()}],start:[{"inset-s":z(),start:z()}],end:[{"inset-e":z(),end:z()}],"inset-bs":[{"inset-bs":z()}],"inset-be":[{"inset-be":z()}],top:[{top:z()}],right:[{right:z()}],bottom:[{bottom:z()}],left:[{left:z()}],visibility:["visible","invisible","collapse"],z:[{z:[h8,"auto",is,ij]}],basis:[{basis:[h6,"full","auto",h,...y()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[h7,h6,"auto","initial","none",ij]}],grow:[{grow:["",h7,is,ij]}],shrink:[{shrink:["",h7,is,ij]}],order:[{order:[h8,"first","last","none",is,ij]}],"grid-cols":[{"grid-cols":A()}],"col-start-end":[{col:B()}],"col-start":[{"col-start":C()}],"col-end":[{"col-end":C()}],"grid-rows":[{"grid-rows":A()}],"row-start-end":[{row:B()}],"row-start":[{"row-start":C()}],"row-end":[{"row-end":C()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":D()}],"auto-rows":[{"auto-rows":D()}],gap:[{gap:y()}],"gap-x":[{"gap-x":y()}],"gap-y":[{"gap-y":y()}],"justify-content":[{justify:[...E(),"normal"]}],"justify-items":[{"justify-items":[...F(),"normal"]}],"justify-self":[{"justify-self":["auto",...F()]}],"align-content":[{content:["normal",...E()]}],"align-items":[{items:[...F(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...F(),{baseline:["","last"]}]}],"place-content":[{"place-content":E()}],"place-items":[{"place-items":[...F(),"baseline"]}],"place-self":[{"place-self":["auto",...F()]}],p:[{p:y()}],px:[{px:y()}],py:[{py:y()}],ps:[{ps:y()}],pe:[{pe:y()}],pbs:[{pbs:y()}],pbe:[{pbe:y()}],pt:[{pt:y()}],pr:[{pr:y()}],pb:[{pb:y()}],pl:[{pl:y()}],m:[{m:G()}],mx:[{mx:G()}],my:[{my:G()}],ms:[{ms:G()}],me:[{me:G()}],mbs:[{mbs:G()}],mbe:[{mbe:G()}],mt:[{mt:G()}],mr:[{mr:G()}],mb:[{mb:G()}],ml:[{ml:G()}],"space-x":[{"space-x":y()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":y()}],"space-y-reverse":["space-y-reverse"],size:[{size:H()}],"inline-size":[{inline:["auto",...I()]}],"min-inline-size":[{"min-inline":["auto",...I()]}],"max-inline-size":[{"max-inline":["none",...I()]}],"block-size":[{block:["auto",...J()]}],"min-block-size":[{"min-block":["auto",...J()]}],"max-block-size":[{"max-block":["none",...J()]}],w:[{w:[h,"screen",...H()]}],"min-w":[{"min-w":[h,"screen","none",...H()]}],"max-w":[{"max-w":[h,"screen","none","prose",{screen:[g]},...H()]}],h:[{h:["screen","lh",...H()]}],"min-h":[{"min-h":["screen","lh","none",...H()]}],"max-h":[{"max-h":["screen","lh",...H()]}],"font-size":[{text:["base",c,it,ik]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[d,iz,im]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",h9,ij]}],"font-family":[{font:[iu,io,b]}],"font-features":[{"font-features":[ij]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[e,is,ij]}],"line-clamp":[{"line-clamp":[h7,"none",is,il]}],leading:[{leading:[f,...y()]}],"list-image":[{"list-image":["none",is,ij]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",is,ij]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:K()}],"text-color":[{text:K()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...R(),"wavy"]}],"text-decoration-thickness":[{decoration:[h7,"from-font","auto",is,ik]}],"text-decoration-color":[{decoration:K()}],"underline-offset":[{"underline-offset":[h7,"auto",is,ij]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:y()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",is,ij]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",is,ij]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:L()}],"bg-repeat":[{bg:M()}],"bg-size":[{bg:N()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},h8,is,ij],radial:["",is,ij],conic:[h8,is,ij]},ix,iq]}],"bg-color":[{bg:K()}],"gradient-from-pos":[{from:O()}],"gradient-via-pos":[{via:O()}],"gradient-to-pos":[{to:O()}],"gradient-from":[{from:K()}],"gradient-via":[{via:K()}],"gradient-to":[{to:K()}],rounded:[{rounded:P()}],"rounded-s":[{"rounded-s":P()}],"rounded-e":[{"rounded-e":P()}],"rounded-t":[{"rounded-t":P()}],"rounded-r":[{"rounded-r":P()}],"rounded-b":[{"rounded-b":P()}],"rounded-l":[{"rounded-l":P()}],"rounded-ss":[{"rounded-ss":P()}],"rounded-se":[{"rounded-se":P()}],"rounded-ee":[{"rounded-ee":P()}],"rounded-es":[{"rounded-es":P()}],"rounded-tl":[{"rounded-tl":P()}],"rounded-tr":[{"rounded-tr":P()}],"rounded-br":[{"rounded-br":P()}],"rounded-bl":[{"rounded-bl":P()}],"border-w":[{border:Q()}],"border-w-x":[{"border-x":Q()}],"border-w-y":[{"border-y":Q()}],"border-w-s":[{"border-s":Q()}],"border-w-e":[{"border-e":Q()}],"border-w-bs":[{"border-bs":Q()}],"border-w-be":[{"border-be":Q()}],"border-w-t":[{"border-t":Q()}],"border-w-r":[{"border-r":Q()}],"border-w-b":[{"border-b":Q()}],"border-w-l":[{"border-l":Q()}],"divide-x":[{"divide-x":Q()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Q()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...R(),"hidden","none"]}],"divide-style":[{divide:[...R(),"hidden","none"]}],"border-color":[{border:K()}],"border-color-x":[{"border-x":K()}],"border-color-y":[{"border-y":K()}],"border-color-s":[{"border-s":K()}],"border-color-e":[{"border-e":K()}],"border-color-bs":[{"border-bs":K()}],"border-color-be":[{"border-be":K()}],"border-color-t":[{"border-t":K()}],"border-color-r":[{"border-r":K()}],"border-color-b":[{"border-b":K()}],"border-color-l":[{"border-l":K()}],"divide-color":[{divide:K()}],"outline-style":[{outline:[...R(),"none","hidden"]}],"outline-offset":[{"outline-offset":[h7,is,ij]}],"outline-w":[{outline:["",h7,it,ik]}],"outline-color":[{outline:K()}],shadow:[{shadow:["","none",k,iy,ir]}],"shadow-color":[{shadow:K()}],"inset-shadow":[{"inset-shadow":["none",l,iy,ir]}],"inset-shadow-color":[{"inset-shadow":K()}],"ring-w":[{ring:Q()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:K()}],"ring-offset-w":[{"ring-offset":[h7,ik]}],"ring-offset-color":[{"ring-offset":K()}],"inset-ring-w":[{"inset-ring":Q()}],"inset-ring-color":[{"inset-ring":K()}],"text-shadow":[{"text-shadow":["none",m,iy,ir]}],"text-shadow-color":[{"text-shadow":K()}],opacity:[{opacity:[h7,is,ij]}],"mix-blend":[{"mix-blend":[...S(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":S()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[h7]}],"mask-image-linear-from-pos":[{"mask-linear-from":T()}],"mask-image-linear-to-pos":[{"mask-linear-to":T()}],"mask-image-linear-from-color":[{"mask-linear-from":K()}],"mask-image-linear-to-color":[{"mask-linear-to":K()}],"mask-image-t-from-pos":[{"mask-t-from":T()}],"mask-image-t-to-pos":[{"mask-t-to":T()}],"mask-image-t-from-color":[{"mask-t-from":K()}],"mask-image-t-to-color":[{"mask-t-to":K()}],"mask-image-r-from-pos":[{"mask-r-from":T()}],"mask-image-r-to-pos":[{"mask-r-to":T()}],"mask-image-r-from-color":[{"mask-r-from":K()}],"mask-image-r-to-color":[{"mask-r-to":K()}],"mask-image-b-from-pos":[{"mask-b-from":T()}],"mask-image-b-to-pos":[{"mask-b-to":T()}],"mask-image-b-from-color":[{"mask-b-from":K()}],"mask-image-b-to-color":[{"mask-b-to":K()}],"mask-image-l-from-pos":[{"mask-l-from":T()}],"mask-image-l-to-pos":[{"mask-l-to":T()}],"mask-image-l-from-color":[{"mask-l-from":K()}],"mask-image-l-to-color":[{"mask-l-to":K()}],"mask-image-x-from-pos":[{"mask-x-from":T()}],"mask-image-x-to-pos":[{"mask-x-to":T()}],"mask-image-x-from-color":[{"mask-x-from":K()}],"mask-image-x-to-color":[{"mask-x-to":K()}],"mask-image-y-from-pos":[{"mask-y-from":T()}],"mask-image-y-to-pos":[{"mask-y-to":T()}],"mask-image-y-from-color":[{"mask-y-from":K()}],"mask-image-y-to-color":[{"mask-y-to":K()}],"mask-image-radial":[{"mask-radial":[is,ij]}],"mask-image-radial-from-pos":[{"mask-radial-from":T()}],"mask-image-radial-to-pos":[{"mask-radial-to":T()}],"mask-image-radial-from-color":[{"mask-radial-from":K()}],"mask-image-radial-to-color":[{"mask-radial-to":K()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":u()}],"mask-image-conic-pos":[{"mask-conic":[h7]}],"mask-image-conic-from-pos":[{"mask-conic-from":T()}],"mask-image-conic-to-pos":[{"mask-conic-to":T()}],"mask-image-conic-from-color":[{"mask-conic-from":K()}],"mask-image-conic-to-color":[{"mask-conic-to":K()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:L()}],"mask-repeat":[{mask:M()}],"mask-size":[{mask:N()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",is,ij]}],filter:[{filter:["","none",is,ij]}],blur:[{blur:U()}],brightness:[{brightness:[h7,is,ij]}],contrast:[{contrast:[h7,is,ij]}],"drop-shadow":[{"drop-shadow":["","none",n,iy,ir]}],"drop-shadow-color":[{"drop-shadow":K()}],grayscale:[{grayscale:["",h7,is,ij]}],"hue-rotate":[{"hue-rotate":[h7,is,ij]}],invert:[{invert:["",h7,is,ij]}],saturate:[{saturate:[h7,is,ij]}],sepia:[{sepia:["",h7,is,ij]}],"backdrop-filter":[{"backdrop-filter":["","none",is,ij]}],"backdrop-blur":[{"backdrop-blur":U()}],"backdrop-brightness":[{"backdrop-brightness":[h7,is,ij]}],"backdrop-contrast":[{"backdrop-contrast":[h7,is,ij]}],"backdrop-grayscale":[{"backdrop-grayscale":["",h7,is,ij]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h7,is,ij]}],"backdrop-invert":[{"backdrop-invert":["",h7,is,ij]}],"backdrop-opacity":[{"backdrop-opacity":[h7,is,ij]}],"backdrop-saturate":[{"backdrop-saturate":[h7,is,ij]}],"backdrop-sepia":[{"backdrop-sepia":["",h7,is,ij]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":y()}],"border-spacing-x":[{"border-spacing-x":y()}],"border-spacing-y":[{"border-spacing-y":y()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",is,ij]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[h7,"initial",is,ij]}],ease:[{ease:["linear","initial",r,is,ij]}],delay:[{delay:[h7,is,ij]}],animate:[{animate:["none",s,is,ij]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[p,is,ij]}],"perspective-origin":[{"perspective-origin":v()}],rotate:[{rotate:V()}],"rotate-x":[{"rotate-x":V()}],"rotate-y":[{"rotate-y":V()}],"rotate-z":[{"rotate-z":V()}],scale:[{scale:W()}],"scale-x":[{"scale-x":W()}],"scale-y":[{"scale-y":W()}],"scale-z":[{"scale-z":W()}],"scale-3d":["scale-3d"],skew:[{skew:X()}],"skew-x":[{"skew-x":X()}],"skew-y":[{"skew-y":X()}],transform:[{transform:[is,ij,"","none","gpu","cpu"]}],"transform-origin":[{origin:v()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Y()}],"translate-x":[{"translate-x":Y()}],"translate-y":[{"translate-y":Y()}],"translate-z":[{"translate-z":Y()}],"translate-none":["translate-none"],accent:[{accent:K()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:K()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",is,ij]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":y()}],"scroll-mx":[{"scroll-mx":y()}],"scroll-my":[{"scroll-my":y()}],"scroll-ms":[{"scroll-ms":y()}],"scroll-me":[{"scroll-me":y()}],"scroll-mbs":[{"scroll-mbs":y()}],"scroll-mbe":[{"scroll-mbe":y()}],"scroll-mt":[{"scroll-mt":y()}],"scroll-mr":[{"scroll-mr":y()}],"scroll-mb":[{"scroll-mb":y()}],"scroll-ml":[{"scroll-ml":y()}],"scroll-p":[{"scroll-p":y()}],"scroll-px":[{"scroll-px":y()}],"scroll-py":[{"scroll-py":y()}],"scroll-ps":[{"scroll-ps":y()}],"scroll-pe":[{"scroll-pe":y()}],"scroll-pbs":[{"scroll-pbs":y()}],"scroll-pbe":[{"scroll-pbe":y()}],"scroll-pt":[{"scroll-pt":y()}],"scroll-pr":[{"scroll-pr":y()}],"scroll-pb":[{"scroll-pb":y()}],"scroll-pl":[{"scroll-pl":y()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",is,ij]}],fill:[{fill:["none",...K()]}],"stroke-w":[{stroke:[h7,it,ik,il]}],stroke:[{stroke:["none",...K()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","inset-bs","inset-be","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pbs","pbe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mbs","mbe","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-bs","border-w-be","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-bs","border-color-be","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mbs","scroll-mbe","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pbs","scroll-pbe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}});function iL(...a){return iK(hI(a))}let iM=[{id:"home",label:"Home",icon:hE},{id:"scan",label:"Scan",icon:hF},{id:"history",label:"History",icon:hG},{id:"settings",label:"Settings",icon:hH}];function iN(){let{activeTab:a,setActiveTab:b}=ge();return(0,y.jsx)("nav",{"data-design-id":"bottom-nav",className:"fixed bottom-0 left-0 right-0 z-50 glass bg-card/90 border-t border-border",children:(0,y.jsx)("div",{className:"flex items-center justify-around h-16 max-w-lg mx-auto mobile-safe-area",children:iM.map(c=>{let d=a===c.id,e=c.icon;return(0,y.jsxs)("button",{"data-design-id":`nav-item-${c.id}`,onClick:()=>b(c.id),className:iL("relative flex flex-col items-center justify-center w-16 h-full transition-all duration-200","focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/50 rounded-lg",d?"text-primary":"text-muted-foreground hover:text-foreground"),children:[d&&(0,y.jsx)(f1.div,{layoutId:"nav-indicator",className:"absolute -top-0.5 w-8 h-1 rounded-full safe-bg",transition:{type:"spring",stiffness:500,damping:35}}),(0,y.jsx)(f1.div,{animate:{scale:d?1.1:1},transition:{type:"spring",stiffness:400,damping:20},children:(0,y.jsx)(e,{className:"w-5 h-5",strokeWidth:d?2.5:2})}),(0,y.jsx)("span",{className:iL("text-[10px] mt-0.5 font-medium",d?"font-semibold":""),children:c.label})]},c.id)})})})}let iO=hD("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]),iP=hD("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),iQ=hD("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),iR=hD("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),iS=hD("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);function iT(a,b){if("function"==typeof a)return a(b);null!=a&&(a.current=b)}function iU(...a){return b=>{let c=!1,d=a.map(a=>{let d=iT(a,b);return c||"function"!=typeof d||(c=!0),d});if(c)return()=>{for(let b=0;b<d.length;b++){let c=d[b];"function"==typeof c?c():iT(a[b],null)}}}}function iV(...a){return z.useCallback(iU(...a),a)}var iW=Symbol.for("react.lazy"),iX=A[" use ".trim().toString()];function iY(a){var b;return null!=a&&"object"==typeof a&&"$$typeof"in a&&a.$$typeof===iW&&"_payload"in a&&"object"==typeof(b=a._payload)&&null!==b&&"then"in b}function iZ(a){let b=function(a){let b=z.forwardRef((a,b)=>{let{children:c,...d}=a;if(iY(c)&&"function"==typeof iX&&(c=iX(c._payload)),z.isValidElement(c)){var e;let a,f,g=(e=c,(f=(a=Object.getOwnPropertyDescriptor(e.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.ref:(f=(a=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.props.ref:e.props.ref||e.ref),h=function(a,b){let c={...b};for(let d in b){let e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...a)=>{let b=f(...a);return e(...a),b}:e&&(c[d]=e):"style"===d?c[d]={...e,...f}:"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return{...a,...c}}(d,c.props);return c.type!==z.Fragment&&(h.ref=b?iU(b,g):g),z.cloneElement(c,h)}return z.Children.count(c)>1?z.Children.only(null):null});return b.displayName=`${a}.SlotClone`,b}(a),c=z.forwardRef((a,c)=>{let{children:d,...e}=a;iY(d)&&"function"==typeof iX&&(d=iX(d._payload));let f=z.Children.toArray(d),g=f.find(i0);if(g){let a=g.props.children,d=f.map(b=>b!==g?b:z.Children.count(a)>1?z.Children.only(null):z.isValidElement(a)?a.props.children:null);return(0,y.jsx)(b,{...e,ref:c,children:z.isValidElement(a)?z.cloneElement(a,void 0,d):null})}return(0,y.jsx)(b,{...e,ref:c,children:d})});return c.displayName=`${a}.Slot`,c}var i$=iZ("Slot"),i_=Symbol("radix.slottable");function i0(a){return z.isValidElement(a)&&"function"==typeof a.type&&"__radixId"in a.type&&a.type.__radixId===i_}let i1=a=>"boolean"==typeof a?`${a}`:0===a?"0":a,i2=(a,b)=>c=>{var d;if((null==b?void 0:b.variants)==null)return hI(a,null==c?void 0:c.class,null==c?void 0:c.className);let{variants:e,defaultVariants:f}=b,g=Object.keys(e).map(a=>{let b=null==c?void 0:c[a],d=null==f?void 0:f[a];if(null===b)return null;let g=i1(b)||i1(d);return e[a][g]}),h=c&&Object.entries(c).reduce((a,b)=>{let[c,d]=b;return void 0===d||(a[c]=d),a},{});return hI(a,g,null==b||null==(d=b.compoundVariants)?void 0:d.reduce((a,b)=>{let{class:c,className:d,...e}=b;return Object.entries(e).every(a=>{let[b,c]=a;return Array.isArray(c)?c.includes({...f,...h}[b]):({...f,...h})[b]===c})?[...a,c,d]:a},[]),null==c?void 0:c.class,null==c?void 0:c.className)},i3=i2("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),i4=z.forwardRef(({className:a,variant:b,size:c,asChild:d=!1,...e},f)=>(0,y.jsx)(d?i$:"button",{className:iL(i3({variant:b,size:c,className:a})),ref:f,...e}));i4.displayName="Button";let i5=[{id:"welcome",title:"Welcome to MTHFR Scanner",description:"Your personal guide to finding foods that support healthy methylation. Scan products and get instant safety analysis.",icon:iO,iconBg:"bg-gradient-to-br from-emerald-400 to-teal-500",iconColor:"text-white"},{id:"scan",title:"Scan or Enter Products",description:"Use your camera to scan barcodes or manually enter product information. We'll look up ingredients from trusted databases.",icon:hF,iconBg:"bg-gradient-to-br from-blue-400 to-indigo-500",iconColor:"text-white"},{id:"analyze",title:"MTHFR Safety Analysis",description:"Each ingredient is evaluated against MTHFR-safe criteria. We identify synthetic vitamins, additives, and other problematic components.",icon:iP,iconBg:"bg-gradient-to-br from-purple-400 to-pink-500",iconColor:"text-white"},{id:"masking",title:"Detect Hidden Ingredients",description:'We flag vague terms like "natural flavors" that may mask hazardous ingredients, helping you make informed decisions.',icon:iQ,iconBg:"bg-gradient-to-br from-amber-400 to-orange-500",iconColor:"text-white"}];function i6(){let[a,b]=(0,z.useState)(0),{completeOnboarding:c}=ge(),d=i5[a],e=a===i5.length-1,f=d.icon;return(0,y.jsxs)("div",{"data-design-id":"onboarding-flow",className:"fixed inset-0 bg-background z-50 flex flex-col",children:[(0,y.jsx)("div",{"data-design-id":"onboarding-header",className:"p-4 flex justify-end",children:(0,y.jsx)(i4,{"data-design-id":"onboarding-skip",variant:"ghost",size:"sm",onClick:()=>{c()},className:"text-muted-foreground",children:"Skip"})}),(0,y.jsx)("div",{className:"flex-1 flex flex-col items-center justify-center px-8",children:(0,y.jsx)(f9,{mode:"wait",children:(0,y.jsxs)(f1.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3},className:"flex flex-col items-center text-center max-w-sm",children:[(0,y.jsx)(f1.div,{"data-design-id":`onboarding-icon-${d.id}`,initial:{scale:.8,rotate:-10},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:300,damping:20},className:`w-28 h-28 rounded-3xl ${d.iconBg} flex items-center justify-center mb-8 shadow-xl`,children:(0,y.jsx)(f,{className:`w-14 h-14 ${d.iconColor}`})}),(0,y.jsx)("h1",{"data-design-id":`onboarding-title-${d.id}`,className:"text-2xl font-bold mb-4",children:d.title}),(0,y.jsx)("p",{"data-design-id":`onboarding-desc-${d.id}`,className:"text-muted-foreground leading-relaxed",children:d.description})]},d.id)})}),(0,y.jsx)("div",{"data-design-id":"onboarding-progress",className:"flex justify-center gap-2 mb-8",children:i5.map((b,c)=>(0,y.jsx)(f1.div,{"data-design-id":`onboarding-dot-${c}`,className:`h-2 rounded-full transition-all duration-300 ${c===a?"w-8 bg-primary":c<a?"w-2 bg-primary/50":"w-2 bg-muted"}`},c))}),(0,y.jsxs)("div",{"data-design-id":"onboarding-actions",className:"p-6 flex gap-3",children:[a>0&&(0,y.jsxs)(i4,{"data-design-id":"onboarding-prev",variant:"outline",size:"lg",onClick:()=>{a>0&&b(a=>a-1)},className:"flex-1",children:[(0,y.jsx)(iR,{className:"w-4 h-4 mr-1"}),"Back"]}),(0,y.jsx)(i4,{"data-design-id":"onboarding-next",size:"lg",onClick:()=>{e?c():b(a=>a+1)},className:`${0===a?"w-full":"flex-1"}`,children:e?(0,y.jsxs)(y.Fragment,{children:["Get Started",(0,y.jsx)(iO,{className:"w-4 h-4 ml-2"})]}):(0,y.jsxs)(y.Fragment,{children:["Next",(0,y.jsx)(iS,{className:"w-4 h-4 ml-1"})]})})]})]})}let i7=hD("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),i8=hD("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),i9=hD("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),ja=hD("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]]),jb=hD("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 6v6l4 2",key:"mmk7yg"}]]),jc=z.forwardRef(({className:a,type:b,...c},d)=>(0,y.jsx)("input",{type:b,className:iL("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:d,...c}));jc.displayName="Input";let jd=z.forwardRef(({className:a,...b},c)=>(0,y.jsx)("div",{ref:c,className:iL("rounded-xl border bg-card text-card-foreground shadow",a),...b}));jd.displayName="Card";let je=z.forwardRef(({className:a,...b},c)=>(0,y.jsx)("div",{ref:c,className:iL("flex flex-col space-y-1.5 p-6",a),...b}));je.displayName="CardHeader";let jf=z.forwardRef(({className:a,...b},c)=>(0,y.jsx)("div",{ref:c,className:iL("font-semibold leading-none tracking-tight",a),...b}));jf.displayName="CardTitle";let jg=z.forwardRef(({className:a,...b},c)=>(0,y.jsx)("div",{ref:c,className:iL("text-sm text-muted-foreground",a),...b}));jg.displayName="CardDescription";let jh=z.forwardRef(({className:a,...b},c)=>(0,y.jsx)("div",{ref:c,className:iL("p-6 pt-0",a),...b}));jh.displayName="CardContent",z.forwardRef(({className:a,...b},c)=>(0,y.jsx)("div",{ref:c,className:iL("flex items-center p-6 pt-0",a),...b})).displayName="CardFooter";var ji=c(7516),jj=c.n(ji);let jk=hD("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),jl=hD("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),jm=hD("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),jn=hD("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),jo=hD("shield-alert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]),jp=hD("shield-question-mark",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),jq=hD("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),jr=hD("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),js=hD("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),jt={safe:{icon:iP,label:"MTHFR Safe",color:"text-emerald-600 dark:text-emerald-400",bgColor:"bg-emerald-50 dark:bg-emerald-950/50",borderColor:"border-emerald-200 dark:border-emerald-800"},unsafe:{icon:jo,label:"Contains Unsafe Ingredients",color:"text-red-600 dark:text-red-400",bgColor:"bg-red-50 dark:bg-red-950/50",borderColor:"border-red-200 dark:border-red-800"},unknown:{icon:jp,label:"Requires Review",color:"text-amber-600 dark:text-amber-400",bgColor:"bg-amber-50 dark:bg-amber-950/50",borderColor:"border-amber-200 dark:border-amber-800"}};function ju({summary:a,compact:b=!1}){let c=jt[a.overallStatus],d=c.icon;return b?(0,y.jsxs)("div",{"data-design-id":"safety-summary-compact",className:iL("flex items-center gap-2 px-3 py-1.5 rounded-full border",c.bgColor,c.borderColor),children:[(0,y.jsx)(d,{className:iL("w-4 h-4",c.color)}),(0,y.jsx)("span",{className:iL("text-sm font-medium",c.color),children:"safe"===a.overallStatus?"Safe":"unsafe"===a.overallStatus?`${a.unsafeCount} Unsafe`:"Review Needed"})]}):(0,y.jsxs)(f1.div,{"data-design-id":"safety-summary",initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:iL("rounded-2xl border-2 p-5 space-y-4",c.bgColor,c.borderColor),children:[(0,y.jsxs)("div",{"data-design-id":"safety-summary-header",className:"flex items-center gap-3",children:[(0,y.jsx)("div",{className:iL("w-14 h-14 rounded-xl flex items-center justify-center","safe"===a.overallStatus?"bg-emerald-500":"unsafe"===a.overallStatus?"bg-red-500":"bg-amber-500"),children:(0,y.jsx)(d,{className:"w-7 h-7 text-white"})}),(0,y.jsxs)("div",{children:[(0,y.jsx)("h3",{"data-design-id":"safety-summary-title",className:iL("text-lg font-bold",c.color),children:c.label}),(0,y.jsxs)("p",{"data-design-id":"safety-summary-subtitle",className:"text-sm text-muted-foreground",children:[a.totalIngredients," ingredients analyzed"]})]})]}),(0,y.jsxs)("div",{"data-design-id":"safety-summary-bars",className:"space-y-2",children:[(0,y.jsxs)("div",{className:"h-3 rounded-full bg-muted overflow-hidden flex",children:[(0,y.jsx)(f1.div,{"data-design-id":"safety-bar-safe",initial:{width:0},animate:{width:`${a.safePercentage}%`},transition:{duration:.5,delay:.1},className:"h-full bg-emerald-500"}),(0,y.jsx)(f1.div,{"data-design-id":"safety-bar-unknown",initial:{width:0},animate:{width:`${a.unknownPercentage}%`},transition:{duration:.5,delay:.2},className:"h-full bg-amber-500"}),(0,y.jsx)(f1.div,{"data-design-id":"safety-bar-unsafe",initial:{width:0},animate:{width:`${a.unsafePercentage}%`},transition:{duration:.5,delay:.3},className:"h-full bg-red-500"})]}),(0,y.jsxs)("div",{"data-design-id":"safety-summary-legend",className:"flex justify-between text-xs",children:[(0,y.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,y.jsx)(jq,{className:"w-3.5 h-3.5 text-emerald-500"}),(0,y.jsxs)("span",{children:[a.safeCount," Safe (",a.safePercentage,"%)"]})]}),(0,y.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,y.jsx)(jr,{className:"w-3.5 h-3.5 text-amber-500"}),(0,y.jsxs)("span",{children:[a.unknownCount," Unknown (",a.unknownPercentage,"%)"]})]}),(0,y.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,y.jsx)(js,{className:"w-3.5 h-3.5 text-red-500"}),(0,y.jsxs)("span",{children:[a.unsafeCount," Unsafe (",a.unsafePercentage,"%)"]})]})]})]}),a.unsafeIngredients.length>0&&(0,y.jsxs)("div",{"data-design-id":"unsafe-ingredients-list",className:"space-y-2",children:[(0,y.jsxs)("h4",{className:"text-sm font-semibold text-red-600 dark:text-red-400 flex items-center gap-2",children:[(0,y.jsx)(js,{className:"w-4 h-4"}),"Unsafe Ingredients"]}),(0,y.jsxs)("div",{className:"space-y-1.5",children:[a.unsafeIngredients.slice(0,5).map((a,b)=>(0,y.jsxs)("div",{"data-design-id":`unsafe-ingredient-${b}`,className:"flex items-start gap-2 text-sm bg-red-100 dark:bg-red-900/30 rounded-lg px-3 py-2",children:[(0,y.jsx)(iQ,{className:"w-4 h-4 text-red-500 mt-0.5 flex-shrink-0"}),(0,y.jsxs)("div",{children:[(0,y.jsx)("span",{className:"font-medium text-red-700 dark:text-red-300",children:a.canonicalName}),a.safetyReason&&(0,y.jsx)("p",{className:"text-xs text-red-600/80 dark:text-red-400/80 mt-0.5",children:a.safetyReason})]})]},b)),a.unsafeIngredients.length>5&&(0,y.jsxs)("p",{className:"text-xs text-red-500 pl-6",children:["+",a.unsafeIngredients.length-5," more unsafe ingredients"]})]})]}),a.maskingIngredients.length>0&&(0,y.jsxs)("div",{"data-design-id":"masking-ingredients-list",className:"space-y-2",children:[(0,y.jsxs)("h4",{className:"text-sm font-semibold text-violet-600 dark:text-violet-400 flex items-center gap-2",children:[(0,y.jsx)(iQ,{className:"w-4 h-4"}),"Masking Ingredients"]}),(0,y.jsx)("div",{className:"space-y-1.5",children:a.maskingIngredients.slice(0,3).map((a,b)=>(0,y.jsxs)("div",{"data-design-id":`masking-ingredient-${b}`,className:"flex items-start gap-2 text-sm bg-violet-100 dark:bg-violet-900/30 rounded-lg px-3 py-2",children:[(0,y.jsx)(iQ,{className:"w-4 h-4 text-violet-500 mt-0.5 flex-shrink-0"}),(0,y.jsxs)("div",{children:[(0,y.jsx)("span",{className:"font-medium text-violet-700 dark:text-violet-300",children:a.canonicalName}),a.maskingReason&&(0,y.jsx)("p",{className:"text-xs text-violet-600/80 dark:text-violet-400/80 mt-0.5",children:a.maskingReason})]})]},b))})]})]})}let jv=i2("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function jw({className:a,variant:b,...c}){return(0,y.jsx)("div",{className:iL(jv({variant:b}),a),...c})}let jx={api:jk,ocr:jl,review:jm,manual:jn,community:jn},jy={api:"Product Database",ocr:"Photo OCR",review:"Review Data",manual:"Manual Entry",community:"Community"};function jz({product:a,onSelect:b,onToggleFavorite:c,compact:d=!1,showDetails:e=!1}){let f=hu(a.ingredients),g=jx[a.sourceProvenance];return d?(0,y.jsxs)(f1.button,{"data-design-id":`product-card-compact-${a.upc}`,onClick:b,whileTap:{scale:.98},className:"w-full flex items-center gap-4 p-4 bg-card rounded-xl border border-border hover:border-primary/30 hover:shadow-sm transition-all text-left",children:[a.imageUrl?(0,y.jsx)("div",{"data-design-id":`product-image-${a.upc}`,className:"w-14 h-14 rounded-lg overflow-hidden bg-muted flex-shrink-0",children:(0,y.jsx)(jj(),{src:a.imageUrl,alt:a.name,width:56,height:56,className:"w-full h-full object-cover"})}):(0,y.jsx)("div",{"data-design-id":`product-placeholder-${a.upc}`,className:"w-14 h-14 rounded-lg bg-muted flex items-center justify-center flex-shrink-0",children:(0,y.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCE6"})}),(0,y.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,y.jsx)("h3",{"data-design-id":`product-name-${a.upc}`,className:"font-semibold text-sm truncate",children:a.name}),a.brand&&(0,y.jsx)("p",{"data-design-id":`product-brand-${a.upc}`,className:"text-xs text-muted-foreground truncate",children:a.brand}),(0,y.jsx)("div",{className:"flex items-center gap-2 mt-1",children:(0,y.jsx)(ju,{summary:f,compact:!0})})]}),(0,y.jsx)(iS,{className:"w-5 h-5 text-muted-foreground flex-shrink-0"})]}):(0,y.jsxs)(f1.div,{"data-design-id":`product-card-${a.upc}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-card rounded-2xl border border-border overflow-hidden",children:[(0,y.jsxs)("div",{"data-design-id":`product-header-${a.upc}`,className:"relative",children:[a.imageUrl?(0,y.jsx)("div",{className:"aspect-video bg-muted",children:(0,y.jsx)(jj(),{src:a.imageUrl,alt:a.name,fill:!0,className:"object-contain"})}):(0,y.jsx)("div",{className:"aspect-video bg-gradient-to-br from-muted to-muted/50 flex items-center justify-center",children:(0,y.jsx)("span",{className:"text-6xl",children:"\uD83D\uDCE6"})}),c&&(0,y.jsx)(i4,{"data-design-id":`favorite-btn-${a.upc}`,variant:"ghost",size:"icon",onClick:a=>{a.stopPropagation(),c()},className:"absolute top-3 right-3 glass bg-white/80 dark:bg-black/50 hover:bg-white dark:hover:bg-black/70",children:(0,y.jsx)(ja,{className:iL("w-5 h-5 transition-colors",a.isFavorite?"fill-red-500 text-red-500":"text-muted-foreground")})}),(0,y.jsx)("div",{"data-design-id":`source-badge-${a.upc}`,className:"absolute bottom-3 left-3",children:(0,y.jsxs)(jw,{variant:"secondary",className:"glass bg-white/90 dark:bg-black/70",children:[(0,y.jsx)(g,{className:"w-3 h-3 mr-1"}),jy[a.sourceProvenance]]})})]}),(0,y.jsxs)("div",{"data-design-id":`product-content-${a.upc}`,className:"p-5 space-y-4",children:[(0,y.jsxs)("div",{children:[(0,y.jsx)("h2",{"data-design-id":`product-title-${a.upc}`,className:"text-xl font-bold",children:a.name}),a.brand&&(0,y.jsx)("p",{"data-design-id":`product-brand-full-${a.upc}`,className:"text-muted-foreground",children:a.brand}),(0,y.jsxs)("p",{"data-design-id":`product-upc-${a.upc}`,className:"text-xs text-muted-foreground mt-1 font-mono",children:["UPC: ",a.upc]})]}),(0,y.jsx)(ju,{summary:f}),a.lastScannedAt&&(0,y.jsxs)("div",{"data-design-id":`last-scanned-${a.upc}`,className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,y.jsx)(jb,{className:"w-3.5 h-3.5"}),"Last scanned: ",new Date(a.lastScannedAt).toLocaleDateString()]}),e&&b&&(0,y.jsxs)(i4,{"data-design-id":`view-details-btn-${a.upc}`,onClick:b,className:"w-full",children:["View Full Details",(0,y.jsx)(iS,{className:"w-4 h-4 ml-1"})]})]})]})}var jA=c(3312),jB=Symbol("radix.slottable");function jC(a){return z.isValidElement(a)&&"function"==typeof a.type&&"__radixId"in a.type&&a.type.__radixId===jB}var jD=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,b)=>{let c=function(a){let b=function(a){let b=z.forwardRef((a,b)=>{let{children:c,...d}=a;if(z.isValidElement(c)){var e;let a,f,g=(e=c,(f=(a=Object.getOwnPropertyDescriptor(e.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.ref:(f=(a=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.props.ref:e.props.ref||e.ref),h=function(a,b){let c={...b};for(let d in b){let e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...a)=>{let b=f(...a);return e(...a),b}:e&&(c[d]=e):"style"===d?c[d]={...e,...f}:"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return{...a,...c}}(d,c.props);return c.type!==z.Fragment&&(h.ref=b?iU(b,g):g),z.cloneElement(c,h)}return z.Children.count(c)>1?z.Children.only(null):null});return b.displayName=`${a}.SlotClone`,b}(a),c=z.forwardRef((a,c)=>{let{children:d,...e}=a,f=z.Children.toArray(d),g=f.find(jC);if(g){let a=g.props.children,d=f.map(b=>b!==g?b:z.Children.count(a)>1?z.Children.only(null):z.isValidElement(a)?a.props.children:null);return(0,y.jsx)(b,{...e,ref:c,children:z.isValidElement(a)?z.cloneElement(a,void 0,d):null})}return(0,y.jsx)(b,{...e,ref:c,children:d})});return c.displayName=`${a}.Slot`,c}(`Primitive.${b}`),d=z.forwardRef((a,d)=>{let{asChild:e,...f}=a;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,y.jsx)(e?c:b,{...f,ref:d})});return d.displayName=`Primitive.${b}`,{...a,[b]:d}},{});function jE(a,b){a&&jA.flushSync(()=>a.dispatchEvent(b))}var jF=globalThis?.document?z.useLayoutEffect:()=>{},jG=a=>{let{present:b,children:c}=a,d=function(a){var b,c;let[d,e]=z.useState(),f=z.useRef(null),g=z.useRef(a),h=z.useRef("none"),[i,j]=(b=a?"mounted":"unmounted",c={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},z.useReducer((a,b)=>c[a][b]??a,b));return z.useEffect(()=>{let a=jH(f.current);h.current="mounted"===i?a:"none"},[i]),jF(()=>{let b=f.current,c=g.current;if(c!==a){let d=h.current,e=jH(b);a?j("MOUNT"):"none"===e||b?.display==="none"?j("UNMOUNT"):c&&d!==e?j("ANIMATION_OUT"):j("UNMOUNT"),g.current=a}},[a,j]),jF(()=>{if(d){let a,b=d.ownerDocument.defaultView??window,c=c=>{let e=jH(f.current).includes(CSS.escape(c.animationName));if(c.target===d&&e&&(j("ANIMATION_END"),!g.current)){let c=d.style.animationFillMode;d.style.animationFillMode="forwards",a=b.setTimeout(()=>{"forwards"===d.style.animationFillMode&&(d.style.animationFillMode=c)})}},e=a=>{a.target===d&&(h.current=jH(f.current))};return d.addEventListener("animationstart",e),d.addEventListener("animationcancel",c),d.addEventListener("animationend",c),()=>{b.clearTimeout(a),d.removeEventListener("animationstart",e),d.removeEventListener("animationcancel",c),d.removeEventListener("animationend",c)}}j("ANIMATION_END")},[d,j]),{isPresent:["mounted","unmountSuspended"].includes(i),ref:z.useCallback(a=>{f.current=a?getComputedStyle(a):null,e(a)},[])}}(b),e="function"==typeof c?c({present:d.isPresent}):z.Children.only(c),f=iV(d.ref,function(a){let b=Object.getOwnPropertyDescriptor(a.props,"ref")?.get,c=b&&"isReactWarning"in b&&b.isReactWarning;return c?a.ref:(c=(b=Object.getOwnPropertyDescriptor(a,"ref")?.get)&&"isReactWarning"in b&&b.isReactWarning)?a.props.ref:a.props.ref||a.ref}(e));return"function"==typeof c||d.isPresent?z.cloneElement(e,{ref:f}):null};function jH(a){return a?.animationName||"none"}function jI(a,b=[]){let c=[],d=()=>{let b=c.map(a=>z.createContext(a));return function(c){let d=c?.[a]||b;return z.useMemo(()=>({[`__scope${a}`]:{...c,[a]:d}}),[c,d])}};return d.scopeName=a,[function(b,d){let e=z.createContext(d),f=c.length;c=[...c,d];let g=b=>{let{scope:c,children:d,...g}=b,h=c?.[a]?.[f]||e,i=z.useMemo(()=>g,Object.values(g));return(0,y.jsx)(h.Provider,{value:i,children:d})};return g.displayName=b+"Provider",[g,function(c,g){let h=g?.[a]?.[f]||e,i=z.useContext(h);if(i)return i;if(void 0!==d)return d;throw Error(`\`${c}\` must be used within \`${b}\``)}]},function(...a){let b=a[0];if(1===a.length)return b;let c=()=>{let c=a.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(a){let d=c.reduce((b,{useScope:c,scopeName:d})=>{let e=c(a)[`__scope${d}`];return{...b,...e}},{});return z.useMemo(()=>({[`__scope${b.scopeName}`]:d}),[d])}};return c.scopeName=b.scopeName,c}(d,...b)]}function jJ(a){let b=z.useRef(a);return z.useEffect(()=>{b.current=a}),z.useMemo(()=>(...a)=>b.current?.(...a),[])}jG.displayName="Presence";var jK=z.createContext(void 0);function jL(a){let b=z.useContext(jK);return a||b||"ltr"}function jM(a,b,{checkForDefaultPrevented:c=!0}={}){return function(d){if(a?.(d),!1===c||!d.defaultPrevented)return b?.(d)}}"undefined"!=typeof window&&window.document&&window.document.createElement;var jN="ScrollArea",[jO,jP]=jI(jN),[jQ,jR]=jO(jN),jS=z.forwardRef((a,b)=>{let{__scopeScrollArea:c,type:d="hover",dir:e,scrollHideDelay:f=600,...g}=a,[h,i]=z.useState(null),[j,k]=z.useState(null),[l,m]=z.useState(null),[n,o]=z.useState(null),[p,q]=z.useState(null),[r,s]=z.useState(0),[t,u]=z.useState(0),[v,w]=z.useState(!1),[x,A]=z.useState(!1),B=iV(b,a=>i(a)),C=jL(e);return(0,y.jsx)(jQ,{scope:c,type:d,dir:C,scrollHideDelay:f,scrollArea:h,viewport:j,onViewportChange:k,content:l,onContentChange:m,scrollbarX:n,onScrollbarXChange:o,scrollbarXEnabled:v,onScrollbarXEnabledChange:w,scrollbarY:p,onScrollbarYChange:q,scrollbarYEnabled:x,onScrollbarYEnabledChange:A,onCornerWidthChange:s,onCornerHeightChange:u,children:(0,y.jsx)(jD.div,{dir:C,...g,ref:B,style:{position:"relative","--radix-scroll-area-corner-width":r+"px","--radix-scroll-area-corner-height":t+"px",...a.style}})})});jS.displayName=jN;var jT="ScrollAreaViewport",jU=z.forwardRef((a,b)=>{let{__scopeScrollArea:c,children:d,nonce:e,...f}=a,g=jR(jT,c),h=iV(b,z.useRef(null),g.onViewportChange);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:e}),(0,y.jsx)(jD.div,{"data-radix-scroll-area-viewport":"",...f,ref:h,style:{overflowX:g.scrollbarXEnabled?"scroll":"hidden",overflowY:g.scrollbarYEnabled?"scroll":"hidden",...a.style},children:(0,y.jsx)("div",{ref:g.onContentChange,style:{minWidth:"100%",display:"table"},children:d})})]})});jU.displayName=jT;var jV="ScrollAreaScrollbar",jW=z.forwardRef((a,b)=>{let{forceMount:c,...d}=a,e=jR(jV,a.__scopeScrollArea),{onScrollbarXEnabledChange:f,onScrollbarYEnabledChange:g}=e,h="horizontal"===a.orientation;return z.useEffect(()=>(h?f(!0):g(!0),()=>{h?f(!1):g(!1)}),[h,f,g]),"hover"===e.type?(0,y.jsx)(jX,{...d,ref:b,forceMount:c}):"scroll"===e.type?(0,y.jsx)(jY,{...d,ref:b,forceMount:c}):"auto"===e.type?(0,y.jsx)(jZ,{...d,ref:b,forceMount:c}):"always"===e.type?(0,y.jsx)(j$,{...d,ref:b}):null});jW.displayName=jV;var jX=z.forwardRef((a,b)=>{let{forceMount:c,...d}=a,e=jR(jV,a.__scopeScrollArea),[f,g]=z.useState(!1);return z.useEffect(()=>{let a=e.scrollArea,b=0;if(a){let c=()=>{window.clearTimeout(b),g(!0)},d=()=>{b=window.setTimeout(()=>g(!1),e.scrollHideDelay)};return a.addEventListener("pointerenter",c),a.addEventListener("pointerleave",d),()=>{window.clearTimeout(b),a.removeEventListener("pointerenter",c),a.removeEventListener("pointerleave",d)}}},[e.scrollArea,e.scrollHideDelay]),(0,y.jsx)(jG,{present:c||f,children:(0,y.jsx)(jZ,{"data-state":f?"visible":"hidden",...d,ref:b})})}),jY=z.forwardRef((a,b)=>{var c;let{forceMount:d,...e}=a,f=jR(jV,a.__scopeScrollArea),g="horizontal"===a.orientation,h=kg(()=>j("SCROLL_END"),100),[i,j]=(c={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},z.useReducer((a,b)=>c[a][b]??a,"hidden"));return z.useEffect(()=>{if("idle"===i){let a=window.setTimeout(()=>j("HIDE"),f.scrollHideDelay);return()=>window.clearTimeout(a)}},[i,f.scrollHideDelay,j]),z.useEffect(()=>{let a=f.viewport,b=g?"scrollLeft":"scrollTop";if(a){let c=a[b],d=()=>{let d=a[b];c!==d&&(j("SCROLL"),h()),c=d};return a.addEventListener("scroll",d),()=>a.removeEventListener("scroll",d)}},[f.viewport,g,j,h]),(0,y.jsx)(jG,{present:d||"hidden"!==i,children:(0,y.jsx)(j$,{"data-state":"hidden"===i?"hidden":"visible",...e,ref:b,onPointerEnter:jM(a.onPointerEnter,()=>j("POINTER_ENTER")),onPointerLeave:jM(a.onPointerLeave,()=>j("POINTER_LEAVE"))})})}),jZ=z.forwardRef((a,b)=>{let c=jR(jV,a.__scopeScrollArea),{forceMount:d,...e}=a,[f,g]=z.useState(!1),h="horizontal"===a.orientation,i=kg(()=>{if(c.viewport){let a=c.viewport.offsetWidth<c.viewport.scrollWidth,b=c.viewport.offsetHeight<c.viewport.scrollHeight;g(h?a:b)}},10);return kh(c.viewport,i),kh(c.content,i),(0,y.jsx)(jG,{present:d||f,children:(0,y.jsx)(j$,{"data-state":f?"visible":"hidden",...e,ref:b})})}),j$=z.forwardRef((a,b)=>{let{orientation:c="vertical",...d}=a,e=jR(jV,a.__scopeScrollArea),f=z.useRef(null),g=z.useRef(0),[h,i]=z.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),j=kb(h.viewport,h.content),k={...d,sizes:h,onSizesChange:i,hasThumb:!!(j>0&&j<1),onThumbChange:a=>f.current=a,onThumbPointerUp:()=>g.current=0,onThumbPointerDown:a=>g.current=a};function l(a,b){return function(a,b,c,d="ltr"){let e=kc(c),f=b||e/2,g=c.scrollbar.paddingStart+f,h=c.scrollbar.size-c.scrollbar.paddingEnd-(e-f),i=c.content-c.viewport;return ke([g,h],"ltr"===d?[0,i]:[-1*i,0])(a)}(a,g.current,h,b)}return"horizontal"===c?(0,y.jsx)(j_,{...k,ref:b,onThumbPositionChange:()=>{if(e.viewport&&f.current){let a=kd(e.viewport.scrollLeft,h,e.dir);f.current.style.transform=`translate3d(${a}px, 0, 0)`}},onWheelScroll:a=>{e.viewport&&(e.viewport.scrollLeft=a)},onDragScroll:a=>{e.viewport&&(e.viewport.scrollLeft=l(a,e.dir))}}):"vertical"===c?(0,y.jsx)(j0,{...k,ref:b,onThumbPositionChange:()=>{if(e.viewport&&f.current){let a=kd(e.viewport.scrollTop,h);f.current.style.transform=`translate3d(0, ${a}px, 0)`}},onWheelScroll:a=>{e.viewport&&(e.viewport.scrollTop=a)},onDragScroll:a=>{e.viewport&&(e.viewport.scrollTop=l(a))}}):null}),j_=z.forwardRef((a,b)=>{let{sizes:c,onSizesChange:d,...e}=a,f=jR(jV,a.__scopeScrollArea),[g,h]=z.useState(),i=z.useRef(null),j=iV(b,i,f.onScrollbarXChange);return z.useEffect(()=>{i.current&&h(getComputedStyle(i.current))},[i]),(0,y.jsx)(j3,{"data-orientation":"horizontal",...e,ref:j,sizes:c,style:{bottom:0,left:"rtl"===f.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===f.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":kc(c)+"px",...a.style},onThumbPointerDown:b=>a.onThumbPointerDown(b.x),onDragScroll:b=>a.onDragScroll(b.x),onWheelScroll:(b,c)=>{if(f.viewport){let d=f.viewport.scrollLeft+b.deltaX;a.onWheelScroll(d),function(a,b){return a>0&&a<b}(d,c)&&b.preventDefault()}},onResize:()=>{i.current&&f.viewport&&g&&d({content:f.viewport.scrollWidth,viewport:f.viewport.offsetWidth,scrollbar:{size:i.current.clientWidth,paddingStart:ka(g.paddingLeft),paddingEnd:ka(g.paddingRight)}})}})}),j0=z.forwardRef((a,b)=>{let{sizes:c,onSizesChange:d,...e}=a,f=jR(jV,a.__scopeScrollArea),[g,h]=z.useState(),i=z.useRef(null),j=iV(b,i,f.onScrollbarYChange);return z.useEffect(()=>{i.current&&h(getComputedStyle(i.current))},[i]),(0,y.jsx)(j3,{"data-orientation":"vertical",...e,ref:j,sizes:c,style:{top:0,right:"ltr"===f.dir?0:void 0,left:"rtl"===f.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":kc(c)+"px",...a.style},onThumbPointerDown:b=>a.onThumbPointerDown(b.y),onDragScroll:b=>a.onDragScroll(b.y),onWheelScroll:(b,c)=>{if(f.viewport){let d=f.viewport.scrollTop+b.deltaY;a.onWheelScroll(d),function(a,b){return a>0&&a<b}(d,c)&&b.preventDefault()}},onResize:()=>{i.current&&f.viewport&&g&&d({content:f.viewport.scrollHeight,viewport:f.viewport.offsetHeight,scrollbar:{size:i.current.clientHeight,paddingStart:ka(g.paddingTop),paddingEnd:ka(g.paddingBottom)}})}})}),[j1,j2]=jO(jV),j3=z.forwardRef((a,b)=>{let{__scopeScrollArea:c,sizes:d,hasThumb:e,onThumbChange:f,onThumbPointerUp:g,onThumbPointerDown:h,onThumbPositionChange:i,onDragScroll:j,onWheelScroll:k,onResize:l,...m}=a,n=jR(jV,c),[o,p]=z.useState(null),q=iV(b,a=>p(a)),r=z.useRef(null),s=z.useRef(""),t=n.viewport,u=d.content-d.viewport,v=jJ(k),w=jJ(i),x=kg(l,10);function A(a){r.current&&j({x:a.clientX-r.current.left,y:a.clientY-r.current.top})}return z.useEffect(()=>{let a=a=>{let b=a.target;o?.contains(b)&&v(a,u)};return document.addEventListener("wheel",a,{passive:!1}),()=>document.removeEventListener("wheel",a,{passive:!1})},[t,o,u,v]),z.useEffect(w,[d,w]),kh(o,x),kh(n.content,x),(0,y.jsx)(j1,{scope:c,scrollbar:o,hasThumb:e,onThumbChange:jJ(f),onThumbPointerUp:jJ(g),onThumbPositionChange:w,onThumbPointerDown:jJ(h),children:(0,y.jsx)(jD.div,{...m,ref:q,style:{position:"absolute",...m.style},onPointerDown:jM(a.onPointerDown,a=>{0===a.button&&(a.target.setPointerCapture(a.pointerId),r.current=o.getBoundingClientRect(),s.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",n.viewport&&(n.viewport.style.scrollBehavior="auto"),A(a))}),onPointerMove:jM(a.onPointerMove,A),onPointerUp:jM(a.onPointerUp,a=>{let b=a.target;b.hasPointerCapture(a.pointerId)&&b.releasePointerCapture(a.pointerId),document.body.style.webkitUserSelect=s.current,n.viewport&&(n.viewport.style.scrollBehavior=""),r.current=null})})})}),j4="ScrollAreaThumb",j5=z.forwardRef((a,b)=>{let{forceMount:c,...d}=a,e=j2(j4,a.__scopeScrollArea);return(0,y.jsx)(jG,{present:c||e.hasThumb,children:(0,y.jsx)(j6,{ref:b,...d})})}),j6=z.forwardRef((a,b)=>{let{__scopeScrollArea:c,style:d,...e}=a,f=jR(j4,c),g=j2(j4,c),{onThumbPositionChange:h}=g,i=iV(b,a=>g.onThumbChange(a)),j=z.useRef(void 0),k=kg(()=>{j.current&&(j.current(),j.current=void 0)},100);return z.useEffect(()=>{let a=f.viewport;if(a){let b=()=>{k(),j.current||(j.current=kf(a,h),h())};return h(),a.addEventListener("scroll",b),()=>a.removeEventListener("scroll",b)}},[f.viewport,k,h]),(0,y.jsx)(jD.div,{"data-state":g.hasThumb?"visible":"hidden",...e,ref:i,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...d},onPointerDownCapture:jM(a.onPointerDownCapture,a=>{let b=a.target.getBoundingClientRect(),c=a.clientX-b.left,d=a.clientY-b.top;g.onThumbPointerDown({x:c,y:d})}),onPointerUp:jM(a.onPointerUp,g.onThumbPointerUp)})});j5.displayName=j4;var j7="ScrollAreaCorner",j8=z.forwardRef((a,b)=>{let c=jR(j7,a.__scopeScrollArea),d=!!(c.scrollbarX&&c.scrollbarY);return"scroll"!==c.type&&d?(0,y.jsx)(j9,{...a,ref:b}):null});j8.displayName=j7;var j9=z.forwardRef((a,b)=>{let{__scopeScrollArea:c,...d}=a,e=jR(j7,c),[f,g]=z.useState(0),[h,i]=z.useState(0),j=!!(f&&h);return kh(e.scrollbarX,()=>{let a=e.scrollbarX?.offsetHeight||0;e.onCornerHeightChange(a),i(a)}),kh(e.scrollbarY,()=>{let a=e.scrollbarY?.offsetWidth||0;e.onCornerWidthChange(a),g(a)}),j?(0,y.jsx)(jD.div,{...d,ref:b,style:{width:f,height:h,position:"absolute",right:"ltr"===e.dir?0:void 0,left:"rtl"===e.dir?0:void 0,bottom:0,...a.style}}):null});function ka(a){return a?parseInt(a,10):0}function kb(a,b){let c=a/b;return isNaN(c)?0:c}function kc(a){let b=kb(a.viewport,a.content),c=a.scrollbar.paddingStart+a.scrollbar.paddingEnd;return Math.max((a.scrollbar.size-c)*b,18)}function kd(a,b,c="ltr"){let d=kc(b),e=b.scrollbar.paddingStart+b.scrollbar.paddingEnd,f=b.scrollbar.size-e,g=b.content-b.viewport,h=function(a,[b,c]){return Math.min(c,Math.max(b,a))}(a,"ltr"===c?[0,g]:[-1*g,0]);return ke([0,g],[0,f-d])(h)}function ke(a,b){return c=>{if(a[0]===a[1]||b[0]===b[1])return b[0];let d=(b[1]-b[0])/(a[1]-a[0]);return b[0]+d*(c-a[0])}}var kf=(a,b=()=>{})=>{let c={left:a.scrollLeft,top:a.scrollTop},d=0;return!function e(){let f={left:a.scrollLeft,top:a.scrollTop},g=c.left!==f.left,h=c.top!==f.top;(g||h)&&b(),c=f,d=window.requestAnimationFrame(e)}(),()=>window.cancelAnimationFrame(d)};function kg(a,b){let c=jJ(a),d=z.useRef(0);return z.useEffect(()=>()=>window.clearTimeout(d.current),[]),z.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(c,b)},[c,b])}function kh(a,b){let c=jJ(b);jF(()=>{let b=0;if(a){let d=new ResizeObserver(()=>{cancelAnimationFrame(b),b=window.requestAnimationFrame(c)});return d.observe(a),()=>{window.cancelAnimationFrame(b),d.unobserve(a)}}},[a,c])}let ki=z.forwardRef(({className:a,children:b,...c},d)=>(0,y.jsxs)(jS,{ref:d,className:iL("relative overflow-hidden",a),...c,children:[(0,y.jsx)(jU,{className:"h-full w-full rounded-[inherit]",children:b}),(0,y.jsx)(kj,{}),(0,y.jsx)(j8,{})]}));ki.displayName=jS.displayName;let kj=z.forwardRef(({className:a,orientation:b="vertical",...c},d)=>(0,y.jsx)(jW,{ref:d,orientation:b,className:iL("flex touch-none select-none transition-colors","vertical"===b&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===b&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...c,children:(0,y.jsx)(j5,{className:"relative flex-1 rounded-full bg-border"})}));function kk(){let{scanHistory:a,favorites:b,setActiveTab:c,setCurrentProduct:d}=ge(),[e,f]=(0,z.useState)(""),[g,h]=(0,z.useState)(""),i=a.slice(0,5),j=e?a.filter(a=>a.name.toLowerCase().includes(e.toLowerCase())||a.brand?.toLowerCase().includes(e.toLowerCase())||a.upc.includes(e)):[];return(0,y.jsx)(ki,{className:"h-full",children:(0,y.jsxs)("div",{"data-design-id":"home-screen",className:"pb-24 px-5 pt-4 space-y-6",children:[(0,y.jsxs)(f1.div,{"data-design-id":"home-header",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"space-y-1",children:[(0,y.jsx)("h1",{"data-design-id":"home-greeting",className:"text-2xl font-bold",children:g}),(0,y.jsx)("p",{"data-design-id":"home-subtitle",className:"text-muted-foreground",children:"Ready to scan your next product?"})]}),(0,y.jsxs)(f1.div,{"data-design-id":"home-search",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},className:"relative",children:[(0,y.jsx)(i7,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,y.jsx)(jc,{"data-design-id":"home-search-input",placeholder:"Search scanned products...",value:e,onChange:a=>f(a.target.value),className:"pl-10 h-12 rounded-xl"})]}),e&&j.length>0&&(0,y.jsxs)(f1.div,{"data-design-id":"search-results",initial:{opacity:0},animate:{opacity:1},className:"space-y-3",children:[(0,y.jsx)("h3",{className:"font-semibold text-sm text-muted-foreground",children:"Search Results"}),(0,y.jsx)("div",{className:"space-y-2",children:j.map(a=>(0,y.jsx)(jz,{product:a,compact:!0,onSelect:()=>{d(a),c("history")}},a.id))})]}),!e&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(f1.div,{"data-design-id":"quick-actions",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"grid grid-cols-2 gap-3",children:[(0,y.jsxs)(i4,{"data-design-id":"action-scan",onClick:()=>c("scan"),className:"h-28 flex-col gap-2 rounded-2xl bg-gradient-to-br from-primary to-emerald-600 hover:from-primary/90 hover:to-emerald-600/90 shadow-lg shadow-primary/20",children:[(0,y.jsx)(hF,{className:"w-8 h-8"}),(0,y.jsx)("span",{className:"font-semibold",children:"Scan Product"})]}),(0,y.jsxs)(i4,{"data-design-id":"action-manual",variant:"outline",onClick:()=>c("scan"),className:"h-28 flex-col gap-2 rounded-2xl border-2 hover:bg-secondary/50",children:[(0,y.jsx)(i8,{className:"w-8 h-8"}),(0,y.jsx)("span",{className:"font-semibold",children:"Add Manually"})]})]}),(0,y.jsxs)(f1.div,{"data-design-id":"stats-section",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},className:"grid grid-cols-3 gap-3",children:[(0,y.jsx)(jd,{"data-design-id":"stat-scanned",className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-950/50 dark:to-blue-900/30 border-blue-200 dark:border-blue-800",children:(0,y.jsxs)(jh,{className:"p-4 text-center",children:[(0,y.jsx)(i9,{className:"w-5 h-5 mx-auto mb-1 text-blue-600 dark:text-blue-400"}),(0,y.jsx)("p",{"data-design-id":"stat-scanned-value",className:"text-2xl font-bold text-blue-700 dark:text-blue-300",children:a.length}),(0,y.jsx)("p",{className:"text-xs text-blue-600/80 dark:text-blue-400/80",children:"Scanned"})]})}),(0,y.jsx)(jd,{"data-design-id":"stat-favorites",className:"bg-gradient-to-br from-pink-50 to-pink-100 dark:from-pink-950/50 dark:to-pink-900/30 border-pink-200 dark:border-pink-800",children:(0,y.jsxs)(jh,{className:"p-4 text-center",children:[(0,y.jsx)(ja,{className:"w-5 h-5 mx-auto mb-1 text-pink-600 dark:text-pink-400"}),(0,y.jsx)("p",{"data-design-id":"stat-favorites-value",className:"text-2xl font-bold text-pink-700 dark:text-pink-300",children:b.length}),(0,y.jsx)("p",{className:"text-xs text-pink-600/80 dark:text-pink-400/80",children:"Favorites"})]})}),(0,y.jsx)(jd,{"data-design-id":"stat-safe",className:"bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-emerald-950/50 dark:to-emerald-900/30 border-emerald-200 dark:border-emerald-800",children:(0,y.jsxs)(jh,{className:"p-4 text-center",children:[(0,y.jsx)(iO,{className:"w-5 h-5 mx-auto mb-1 text-emerald-600 dark:text-emerald-400"}),(0,y.jsx)("p",{"data-design-id":"stat-safe-value",className:"text-2xl font-bold text-emerald-700 dark:text-emerald-300",children:a.filter(a=>a.ingredients.every(a=>"safe"===a.safetyStatus)).length}),(0,y.jsx)("p",{className:"text-xs text-emerald-600/80 dark:text-emerald-400/80",children:"Safe"})]})})]}),i.length>0&&(0,y.jsxs)(f1.div,{"data-design-id":"recent-scans",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},className:"space-y-3",children:[(0,y.jsxs)("div",{className:"flex items-center justify-between",children:[(0,y.jsxs)("h3",{"data-design-id":"recent-title",className:"font-semibold flex items-center gap-2",children:[(0,y.jsx)(jb,{className:"w-4 h-4"}),"Recent Scans"]}),(0,y.jsxs)(i4,{"data-design-id":"view-all-btn",variant:"ghost",size:"sm",onClick:()=>c("history"),className:"text-primary",children:["View All",(0,y.jsx)(iS,{className:"w-4 h-4 ml-1"})]})]}),(0,y.jsx)("div",{className:"space-y-2",children:i.map((a,b)=>(0,y.jsx)(f1.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5+.1*b},children:(0,y.jsx)(jz,{product:a,compact:!0,onSelect:()=>{d(a),c("history")}})},a.id))})]}),0===i.length&&(0,y.jsxs)(f1.div,{"data-design-id":"empty-state",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"text-center py-12",children:[(0,y.jsx)("div",{className:"w-20 h-20 rounded-full bg-muted flex items-center justify-center mx-auto mb-4",children:(0,y.jsx)(hF,{className:"w-10 h-10 text-muted-foreground"})}),(0,y.jsx)("h3",{"data-design-id":"empty-title",className:"font-semibold mb-2",children:"No products scanned yet"}),(0,y.jsx)("p",{"data-design-id":"empty-desc",className:"text-sm text-muted-foreground mb-4",children:"Start by scanning a product barcode or adding one manually"}),(0,y.jsxs)(i4,{"data-design-id":"empty-cta",onClick:()=>c("scan"),children:[(0,y.jsx)(hF,{className:"w-4 h-4 mr-2"}),"Scan Your First Product"]})]})]})]})})}kj.displayName=jW.displayName;let kl=hD("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),km=hD("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),kn=hD("package-search",[["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}],["circle",{cx:"18.5",cy:"15.5",r:"2.5",key:"b5zd12"}],["path",{d:"M20.27 17.27 22 19",key:"1l4muz"}]]),ko=hD("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),kp=hD("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),kq=hD("keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),kr=hD("flashlight",[["path",{d:"M12 13v1",key:"176q98"}],["path",{d:"M17 2a1 1 0 0 1 1 1v4a3 3 0 0 1-.6 1.8l-.6.8A4 4 0 0 0 16 12v8a2 2 0 0 1-2 2H10a2 2 0 0 1-2-2v-8a4 4 0 0 0-.8-2.4l-.6-.8A3 3 0 0 1 6 7V3a1 1 0 0 1 1-1z",key:"17vh7j"}],["path",{d:"M6 6h12",key:"n6hhss"}]]),ks=hD("flashlight-off",[["path",{d:"M11.652 6H18",key:"voqkpr"}],["path",{d:"M12 13v1",key:"176q98"}],["path",{d:"M16 16v4a2 2 0 0 1-2 2h-4a2 2 0 0 1-2-2v-8a4 4 0 0 0-.8-2.4l-.6-.8A3 3 0 0 1 6 7V6",key:"dzyf92"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M7.649 2H17a1 1 0 0 1 1 1v4a3 3 0 0 1-.6 1.8l-.6.8a4 4 0 0 0-.55 1.007",key:"1hvcfn"}]]),kt=hD("camera-off",[["path",{d:"M14.564 14.558a3 3 0 1 1-4.122-4.121",key:"1rnrzw"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M20 20H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 .819-.175",key:"1x3arw"}],["path",{d:"M9.695 4.024A2 2 0 0 1 10.004 4h3.993a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v7.344",key:"1i84u0"}]]);var ku=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),kv=function(a){function b(b,c){var d,e,f,g,h=this.constructor,i=a.call(this,b,c)||this;return Object.defineProperty(i,"name",{value:h.name,enumerable:!1,configurable:!0}),d=h.prototype,(e=Object.setPrototypeOf)?e(i,d):i.__proto__=d,void 0===f&&(f=i.constructor),(g=Error.captureStackTrace)&&g(i,f),i}return ku(b,a),b}(Error),kw=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),kx=function(a){function b(b){void 0===b&&(b=void 0);var c=a.call(this,b)||this;return c.message=b,c}return kw(b,a),b.prototype.getKind=function(){return this.constructor.kind},b.kind="Exception",b}(kv),ky=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),kz=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return ky(b,a),b.kind="ArgumentException",b}(kx),kA=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),kB=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return kA(b,a),b.kind="IllegalArgumentException",b}(kx),kC=function(){function a(a){if(this.binarizer=a,null===a)throw new kB("Binarizer must be non-null.")}return a.prototype.getWidth=function(){return this.binarizer.getWidth()},a.prototype.getHeight=function(){return this.binarizer.getHeight()},a.prototype.getBlackRow=function(a,b){return this.binarizer.getBlackRow(a,b)},a.prototype.getBlackMatrix=function(){return(null===this.matrix||void 0===this.matrix)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},a.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},a.prototype.crop=function(b,c,d,e){var f=this.binarizer.getLuminanceSource().crop(b,c,d,e);return new a(this.binarizer.createBinarizer(f))},a.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},a.prototype.rotateCounterClockwise=function(){var b=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new a(this.binarizer.createBinarizer(b))},a.prototype.rotateCounterClockwise45=function(){var b=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new a(this.binarizer.createBinarizer(b))},a.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch(a){return""}},a}(),kD=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),kE=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return kD(b,a),b.getChecksumInstance=function(){return new b},b.kind="ChecksumException",b}(kx),kF=function(){function a(a){this.source=a}return a.prototype.getLuminanceSource=function(){return this.source},a.prototype.getWidth=function(){return this.source.getWidth()},a.prototype.getHeight=function(){return this.source.getHeight()},a}(),kG=function(){function a(){}return a.arraycopy=function(a,b,c,d,e){for(;e--;)c[d++]=a[b++]},a.currentTimeMillis=function(){return Date.now()},a}(),kH=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),kI=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return kH(b,a),b.kind="IndexOutOfBoundsException",b}(kx),kJ=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),kK=function(a){function b(b,c){void 0===b&&(b=void 0),void 0===c&&(c=void 0);var d=a.call(this,c)||this;return d.index=b,d.message=c,d}return kJ(b,a),b.kind="ArrayIndexOutOfBoundsException",b}(kI),kL=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},kM=function(){function a(){}return a.fill=function(a,b){for(var c=0,d=a.length;c<d;c++)a[c]=b},a.fillWithin=function(b,c,d,e){a.rangeCheck(b.length,c,d);for(var f=c;f<d;f++)b[f]=e},a.rangeCheck=function(a,b,c){if(b>c)throw new kB("fromIndex("+b+") > toIndex("+c+")");if(b<0)throw new kK(b);if(c>a)throw new kK(c)},a.asList=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return a},a.create=function(a,b,c){return Array.from({length:a}).map(function(a){return Array.from({length:b}).fill(c)})},a.createInt32Array=function(a,b,c){return Array.from({length:a}).map(function(a){return Int32Array.from({length:b}).fill(c)})},a.equals=function(a,b){if(!a||!b||!a.length||!b.length||a.length!==b.length)return!1;for(var c=0,d=a.length;c<d;c++)if(a[c]!==b[c])return!1;return!0},a.hashCode=function(a){if(null===a)return 0;var b,c,d=1;try{for(var e=kL(a),f=e.next();!f.done;f=e.next()){var g=f.value;d=31*d+g}}catch(a){b={error:a}}finally{try{f&&!f.done&&(c=e.return)&&c.call(e)}finally{if(b)throw b.error}}return d},a.fillUint8Array=function(a,b){for(var c=0;c!==a.length;c++)a[c]=b},a.copyOf=function(a,b){return a.slice(0,b)},a.copyOfUint8Array=function(a,b){if(a.length<=b){var c=new Uint8Array(b);return c.set(a),c}return a.slice(0,b)},a.copyOfRange=function(a,b,c){var d=c-b,e=new Int32Array(d);return kG.arraycopy(a,b,e,0,d),e},a.binarySearch=function(b,c,d){void 0===d&&(d=a.numberComparator);for(var e=0,f=b.length-1;e<=f;){var g=f+e>>1,h=d(c,b[g]);if(h>0)e=g+1;else{if(!(h<0))return g;f=g-1}}return-e-1},a.numberComparator=function(a,b){return a-b},a}(),kN=function(){function a(){}return a.numberOfTrailingZeros=function(a){if(0===a)return 32;var b,c=31;return 0!=(b=a<<16)&&(c-=16,a=b),0!=(b=a<<8)&&(c-=8,a=b),0!=(b=a<<4)&&(c-=4,a=b),0!=(b=a<<2)&&(c-=2,a=b),c-(a<<1>>>31)},a.numberOfLeadingZeros=function(a){if(0===a)return 32;var b=1;return a>>>16==0&&(b+=16,a<<=16),a>>>24==0&&(b+=8,a<<=8),a>>>28==0&&(b+=4,a<<=4),a>>>30==0&&(b+=2,a<<=2),b-=a>>>31},a.toHexString=function(a){return a.toString(16)},a.toBinaryString=function(a){return String(parseInt(String(a),2))},a.bitCount=function(a){return a-=a>>>1&0x55555555,a=(a=(0x33333333&a)+(a>>>2&0x33333333))+(a>>>4)&0xf0f0f0f,a+=a>>>8,63&(a+=a>>>16)},a.truncDivision=function(a,b){return Math.trunc(a/b)},a.parseInt=function(a,b){return void 0===b&&(b=void 0),parseInt(a,b)},a.MIN_VALUE_32_BITS=-0x80000000,a.MAX_VALUE=Number.MAX_SAFE_INTEGER,a}(),kO=function(){function a(b,c){void 0===b?(this.size=0,this.bits=new Int32Array(1)):(this.size=b,null==c?this.bits=a.makeArray(b):this.bits=c)}return a.prototype.getSize=function(){return this.size},a.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},a.prototype.ensureCapacity=function(b){if(b>32*this.bits.length){var c=a.makeArray(b);kG.arraycopy(this.bits,0,c,0,this.bits.length),this.bits=c}},a.prototype.get=function(a){return(this.bits[Math.floor(a/32)]&1<<(31&a))!=0},a.prototype.set=function(a){this.bits[Math.floor(a/32)]|=1<<(31&a)},a.prototype.flip=function(a){this.bits[Math.floor(a/32)]^=1<<(31&a)},a.prototype.getNextSet=function(a){var b=this.size;if(a>=b)return b;var c=this.bits,d=Math.floor(a/32),e=c[d];e&=~((1<<(31&a))-1);for(var f=c.length;0===e;){if(++d===f)return b;e=c[d]}var g=32*d+kN.numberOfTrailingZeros(e);return g>b?b:g},a.prototype.getNextUnset=function(a){var b=this.size;if(a>=b)return b;var c=this.bits,d=Math.floor(a/32),e=~c[d];e&=~((1<<(31&a))-1);for(var f=c.length;0===e;){if(++d===f)return b;e=~c[d]}var g=32*d+kN.numberOfTrailingZeros(e);return g>b?b:g},a.prototype.setBulk=function(a,b){this.bits[Math.floor(a/32)]=b},a.prototype.setRange=function(a,b){if(b<a||a<0||b>this.size)throw new kB;if(b!==a)for(var c=Math.floor(a/32),d=Math.floor(--b/32),e=this.bits,f=c;f<=d;f++){var g=f>c?0:31&a,h=(2<<(f<d?31:31&b))-(1<<g);e[f]|=h}},a.prototype.clear=function(){for(var a=this.bits.length,b=this.bits,c=0;c<a;c++)b[c]=0},a.prototype.isRange=function(a,b,c){if(b<a||a<0||b>this.size)throw new kB;if(b===a)return!0;for(var d=Math.floor(a/32),e=Math.floor(--b/32),f=this.bits,g=d;g<=e;g++){var h=g>d?0:31&a,i=(2<<(g<e?31:31&b))-(1<<h)|0;if((f[g]&i)!==(c?i:0))return!1}return!0},a.prototype.appendBit=function(a){this.ensureCapacity(this.size+1),a&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++},a.prototype.appendBits=function(a,b){if(b<0||b>32)throw new kB("Num bits must be between 0 and 32");this.ensureCapacity(this.size+b);for(var c=b;c>0;c--)this.appendBit((a>>c-1&1)==1)},a.prototype.appendBitArray=function(a){var b=a.size;this.ensureCapacity(this.size+b);for(var c=0;c<b;c++)this.appendBit(a.get(c))},a.prototype.xor=function(a){if(this.size!==a.size)throw new kB("Sizes don't match");for(var b=this.bits,c=0,d=b.length;c<d;c++)b[c]^=a.bits[c]},a.prototype.toBytes=function(a,b,c,d){for(var e=0;e<d;e++){for(var f=0,g=0;g<8;g++)this.get(a)&&(f|=1<<7-g),a++;b[c+e]=f}},a.prototype.getBitArray=function(){return this.bits},a.prototype.reverse=function(){for(var a=new Int32Array(this.bits.length),b=Math.floor((this.size-1)/32),c=b+1,d=this.bits,e=0;e<c;e++){var f=d[e];f=(f=(f=(f=(f=f>>1&0x55555555|(0x55555555&f)<<1)>>2&0x33333333|(0x33333333&f)<<2)>>4&0xf0f0f0f|(0xf0f0f0f&f)<<4)>>8&0xff00ff|(0xff00ff&f)<<8)>>16&65535|(65535&f)<<16,a[b-e]=f}if(this.size!==32*c){for(var g=32*c-this.size,h=a[0]>>>g,e=1;e<c;e++){var i=a[e];h|=i<<32-g,a[e-1]=h,h=i>>>g}a[c-1]=h}this.bits=a},a.makeArray=function(a){return new Int32Array(Math.floor((a+31)/32))},a.prototype.equals=function(b){return b instanceof a&&this.size===b.size&&kM.equals(this.bits,b.bits)},a.prototype.hashCode=function(){return 31*this.size+kM.hashCode(this.bits)},a.prototype.toString=function(){for(var a="",b=0,c=this.size;b<c;b++)(7&b)==0&&(a+=" "),a+=this.get(b)?"X":".";return a},a.prototype.clone=function(){return new a(this.size,this.bits.slice())},a.prototype.toArray=function(){for(var a=[],b=0,c=this.size;b<c;b++)a.push(this.get(b));return a},a}();!function(a){a[a.OTHER=0]="OTHER",a[a.PURE_BARCODE=1]="PURE_BARCODE",a[a.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",a[a.TRY_HARDER=3]="TRY_HARDER",a[a.CHARACTER_SET=4]="CHARACTER_SET",a[a.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",a[a.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",a[a.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",a[a.ASSUME_GS1=8]="ASSUME_GS1",a[a.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",a[a.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",a[a.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"}(h||(h={}));let kP=h;var kQ=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),kR=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return kQ(b,a),b.getFormatInstance=function(){return new b},b.kind="FormatException",b}(kx),kS=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")};!function(a){a[a.Cp437=0]="Cp437",a[a.ISO8859_1=1]="ISO8859_1",a[a.ISO8859_2=2]="ISO8859_2",a[a.ISO8859_3=3]="ISO8859_3",a[a.ISO8859_4=4]="ISO8859_4",a[a.ISO8859_5=5]="ISO8859_5",a[a.ISO8859_6=6]="ISO8859_6",a[a.ISO8859_7=7]="ISO8859_7",a[a.ISO8859_8=8]="ISO8859_8",a[a.ISO8859_9=9]="ISO8859_9",a[a.ISO8859_10=10]="ISO8859_10",a[a.ISO8859_11=11]="ISO8859_11",a[a.ISO8859_13=12]="ISO8859_13",a[a.ISO8859_14=13]="ISO8859_14",a[a.ISO8859_15=14]="ISO8859_15",a[a.ISO8859_16=15]="ISO8859_16",a[a.SJIS=16]="SJIS",a[a.Cp1250=17]="Cp1250",a[a.Cp1251=18]="Cp1251",a[a.Cp1252=19]="Cp1252",a[a.Cp1256=20]="Cp1256",a[a.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",a[a.UTF8=22]="UTF8",a[a.ASCII=23]="ASCII",a[a.Big5=24]="Big5",a[a.GB18030=25]="GB18030",a[a.EUC_KR=26]="EUC_KR"}(i||(i={}));var kT=function(){function a(b,c,d){for(var e,f,g=[],h=3;h<arguments.length;h++)g[h-3]=arguments[h];this.valueIdentifier=b,this.name=d,"number"==typeof c?this.values=Int32Array.from([c]):this.values=c,this.otherEncodingNames=g,a.VALUE_IDENTIFIER_TO_ECI.set(b,this),a.NAME_TO_ECI.set(d,this);for(var i=this.values,j=0,k=i.length;j!==k;j++){var l=i[j];a.VALUES_TO_ECI.set(l,this)}try{for(var m=kS(g),n=m.next();!n.done;n=m.next()){var o=n.value;a.NAME_TO_ECI.set(o,this)}}catch(a){e={error:a}}finally{try{n&&!n.done&&(f=m.return)&&f.call(m)}finally{if(e)throw e.error}}}return a.prototype.getValueIdentifier=function(){return this.valueIdentifier},a.prototype.getName=function(){return this.name},a.prototype.getValue=function(){return this.values[0]},a.getCharacterSetECIByValue=function(b){if(b<0||b>=900)throw new kR("incorect value");var c=a.VALUES_TO_ECI.get(b);if(void 0===c)throw new kR("incorect value");return c},a.getCharacterSetECIByName=function(b){var c=a.NAME_TO_ECI.get(b);if(void 0===c)throw new kR("incorect value");return c},a.prototype.equals=function(b){return b instanceof a&&this.getName()===b.getName()},a.VALUE_IDENTIFIER_TO_ECI=new Map,a.VALUES_TO_ECI=new Map,a.NAME_TO_ECI=new Map,a.Cp437=new a(i.Cp437,Int32Array.from([0,2]),"Cp437"),a.ISO8859_1=new a(i.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),a.ISO8859_2=new a(i.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),a.ISO8859_3=new a(i.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),a.ISO8859_4=new a(i.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),a.ISO8859_5=new a(i.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),a.ISO8859_6=new a(i.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),a.ISO8859_7=new a(i.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),a.ISO8859_8=new a(i.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),a.ISO8859_9=new a(i.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),a.ISO8859_10=new a(i.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),a.ISO8859_11=new a(i.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),a.ISO8859_13=new a(i.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),a.ISO8859_14=new a(i.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),a.ISO8859_15=new a(i.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),a.ISO8859_16=new a(i.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),a.SJIS=new a(i.SJIS,20,"SJIS","Shift_JIS"),a.Cp1250=new a(i.Cp1250,21,"Cp1250","windows-1250"),a.Cp1251=new a(i.Cp1251,22,"Cp1251","windows-1251"),a.Cp1252=new a(i.Cp1252,23,"Cp1252","windows-1252"),a.Cp1256=new a(i.Cp1256,24,"Cp1256","windows-1256"),a.UnicodeBigUnmarked=new a(i.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),a.UTF8=new a(i.UTF8,26,"UTF8","UTF-8"),a.ASCII=new a(i.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),a.Big5=new a(i.Big5,28,"Big5"),a.GB18030=new a(i.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),a.EUC_KR=new a(i.EUC_KR,30,"EUC_KR","EUC-KR"),a}(),kU=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),kV=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return kU(b,a),b.kind="UnsupportedOperationException",b}(kx),kW=function(){function a(){}return a.decode=function(a,b){var c=this.encodingName(b);return this.customDecoder?this.customDecoder(a,c):"undefined"==typeof TextDecoder||this.shouldDecodeOnFallback(c)?this.decodeFallback(a,c):new TextDecoder(c).decode(a)},a.shouldDecodeOnFallback=function(b){return!a.isBrowser()&&"ISO-8859-1"===b},a.encode=function(a,b){var c=this.encodingName(b);return this.customEncoder?this.customEncoder(a,c):"undefined"==typeof TextEncoder?this.encodeFallback(a):new TextEncoder().encode(a)},a.isBrowser=function(){return"undefined"!=typeof window&&"[object Window]"===({}).toString.call(window)},a.encodingName=function(a){return"string"==typeof a?a:a.getName()},a.encodingCharacterSet=function(a){return a instanceof kT?a:kT.getCharacterSetECIByName(a)},a.decodeFallback=function(b,c){var d=this.encodingCharacterSet(c);if(a.isDecodeFallbackSupported(d)){for(var e="",f=0,g=b.length;f<g;f++){var h=b[f].toString(16);h.length<2&&(h="0"+h),e+="%"+h}return decodeURIComponent(e)}if(d.equals(kT.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(b.buffer));throw new kV("Encoding "+this.encodingName(c)+" not supported by fallback.")},a.isDecodeFallbackSupported=function(a){return a.equals(kT.UTF8)||a.equals(kT.ISO8859_1)||a.equals(kT.ASCII)},a.encodeFallback=function(a){for(var b=btoa(unescape(encodeURIComponent(a))).split(""),c=[],d=0;d<b.length;d++)c.push(b[d].charCodeAt(0));return new Uint8Array(c)},a}(),kX=function(){function a(){}return a.castAsNonUtf8Char=function(a,b){void 0===b&&(b=null);var c=b?b.getName():this.ISO88591;return kW.decode(new Uint8Array([a]),c)},a.guessEncoding=function(b,c){if(null!=c&&void 0!==c.get(kP.CHARACTER_SET))return c.get(kP.CHARACTER_SET).toString();for(var d=b.length,e=!0,f=!0,g=!0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=b.length>3&&239===b[0]&&187===b[1]&&191===b[2],t=0;t<d&&(e||f||g);t++){var u=255&b[t];g&&(h>0?(128&u)==0?g=!1:h--:(128&u)!=0&&((64&u)==0?g=!1:(h++,(32&u)==0?i++:(h++,(16&u)==0?j++:(h++,(8&u)==0?k++:g=!1))))),e&&(u>127&&u<160?e=!1:u>159&&(u<192||215===u||247===u)&&r++),f&&(l>0?u<64||127===u||u>252?f=!1:l--:128===u||160===u||u>239?f=!1:u>160&&u<224?(m++,o=0,++n>p&&(p=n)):u>127?(l++,n=0,++o>q&&(q=o)):(n=0,o=0))}return(g&&h>0&&(g=!1),f&&l>0&&(f=!1),g&&(s||i+j+k>0))?a.UTF8:f&&(a.ASSUME_SHIFT_JIS||p>=3||q>=3)?a.SHIFT_JIS:e&&f?2===p&&2===m||10*r>=d?a.SHIFT_JIS:a.ISO88591:e?a.ISO88591:f?a.SHIFT_JIS:g?a.UTF8:a.PLATFORM_DEFAULT_ENCODING},a.format=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];var d=-1;return a.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function(a,c,e,f,g,h){if("%%"===a)return"%";if(void 0!==b[++d]){a=f?parseInt(f.substr(1)):void 0;var i,j=g?parseInt(g.substr(1)):void 0;switch(h){case"s":i=b[d];break;case"c":i=b[d][0];break;case"f":i=parseFloat(b[d]).toFixed(a);break;case"p":i=parseFloat(b[d]).toPrecision(a);break;case"e":i=parseFloat(b[d]).toExponential(a);break;case"x":i=parseInt(b[d]).toString(j||16);break;case"d":i=parseFloat(parseInt(b[d],j||10).toPrecision(a)).toFixed(0)}i="object"==typeof i?JSON.stringify(i):(+i).toString(j);for(var k=parseInt(e),l=e&&e[0]+""=="0"?"0":" ";i.length<k;)i=void 0!==c?i+l:l+i;return i}})},a.getBytes=function(a,b){return kW.encode(a,b)},a.getCharCode=function(a,b){return void 0===b&&(b=0),a.charCodeAt(b)},a.getCharAt=function(a){return String.fromCharCode(a)},a.SHIFT_JIS=kT.SJIS.getName(),a.GB2312="GB2312",a.ISO88591=kT.ISO8859_1.getName(),a.EUC_JP="EUC_JP",a.UTF8=kT.UTF8.getName(),a.PLATFORM_DEFAULT_ENCODING=a.UTF8,a.ASSUME_SHIFT_JIS=!1,a}(),kY=function(){function a(a){void 0===a&&(a=""),this.value=a}return a.prototype.enableDecoding=function(a){return this.encoding=a,this},a.prototype.append=function(a){return"string"==typeof a?this.value+=a.toString():this.encoding?this.value+=kX.castAsNonUtf8Char(a,this.encoding):this.value+=String.fromCharCode(a),this},a.prototype.appendChars=function(a,b,c){for(var d=b;b<b+c;d++)this.append(a[d]);return this},a.prototype.length=function(){return this.value.length},a.prototype.charAt=function(a){return this.value.charAt(a)},a.prototype.deleteCharAt=function(a){this.value=this.value.substr(0,a)+this.value.substring(a+1)},a.prototype.setCharAt=function(a,b){this.value=this.value.substr(0,a)+b+this.value.substr(a+1)},a.prototype.substring=function(a,b){return this.value.substring(a,b)},a.prototype.setLengthToZero=function(){this.value=""},a.prototype.toString=function(){return this.value},a.prototype.insert=function(a,b){this.value=this.value.substring(0,a)+b+this.value.substring(a)},a}(),kZ=function(){function a(a,b,c,d){if(this.width=a,this.height=b,this.rowSize=c,this.bits=d,null==b&&(b=a),this.height=b,a<1||b<1)throw new kB("Both dimensions must be greater than 0");null==c&&(c=Math.floor((a+31)/32)),this.rowSize=c,null==d&&(this.bits=new Int32Array(this.rowSize*this.height))}return a.parseFromBooleanArray=function(b){for(var c=b.length,d=b[0].length,e=new a(d,c),f=0;f<c;f++)for(var g=b[f],h=0;h<d;h++)g[h]&&e.set(h,f);return e},a.parseFromString=function(b,c,d){if(null===b)throw new kB("stringRepresentation cannot be null");for(var e=Array(b.length),f=0,g=0,h=-1,i=0,j=0;j<b.length;)if("\n"===b.charAt(j)||"\r"===b.charAt(j)){if(f>g){if(-1===h)h=f-g;else if(f-g!==h)throw new kB("row lengths do not match");g=f,i++}j++}else if(b.substring(j,j+c.length)===c)j+=c.length,e[f]=!0,f++;else if(b.substring(j,j+d.length)===d)j+=d.length,e[f]=!1,f++;else throw new kB("illegal character encountered: "+b.substring(j));if(f>g){if(-1===h)h=f-g;else if(f-g!==h)throw new kB("row lengths do not match");i++}for(var k=new a(h,i),l=0;l<f;l++)e[l]&&k.set(Math.floor(l%h),Math.floor(l/h));return k},a.prototype.get=function(a,b){var c=b*this.rowSize+Math.floor(a/32);return(this.bits[c]>>>(31&a)&1)!=0},a.prototype.set=function(a,b){var c=b*this.rowSize+Math.floor(a/32);this.bits[c]|=1<<(31&a)},a.prototype.unset=function(a,b){var c=b*this.rowSize+Math.floor(a/32);this.bits[c]&=~(1<<(31&a))},a.prototype.flip=function(a,b){var c=b*this.rowSize+Math.floor(a/32);this.bits[c]^=1<<(31&a)},a.prototype.xor=function(a){if(this.width!==a.getWidth()||this.height!==a.getHeight()||this.rowSize!==a.getRowSize())throw new kB("input matrix dimensions do not match");for(var b=new kO(Math.floor(this.width/32)+1),c=this.rowSize,d=this.bits,e=0,f=this.height;e<f;e++)for(var g=e*c,h=a.getRow(e,b).getBitArray(),i=0;i<c;i++)d[g+i]^=h[i]},a.prototype.clear=function(){for(var a=this.bits,b=a.length,c=0;c<b;c++)a[c]=0},a.prototype.setRegion=function(a,b,c,d){if(b<0||a<0)throw new kB("Left and top must be nonnegative");if(d<1||c<1)throw new kB("Height and width must be at least 1");var e=a+c,f=b+d;if(f>this.height||e>this.width)throw new kB("The region must fit inside the matrix");for(var g=this.rowSize,h=this.bits,i=b;i<f;i++)for(var j=i*g,k=a;k<e;k++)h[j+Math.floor(k/32)]|=1<<(31&k)},a.prototype.getRow=function(a,b){null==b||b.getSize()<this.width?b=new kO(this.width):b.clear();for(var c=this.rowSize,d=this.bits,e=a*c,f=0;f<c;f++)b.setBulk(32*f,d[e+f]);return b},a.prototype.setRow=function(a,b){kG.arraycopy(b.getBitArray(),0,this.bits,a*this.rowSize,this.rowSize)},a.prototype.rotate180=function(){for(var a=this.getWidth(),b=this.getHeight(),c=new kO(a),d=new kO(a),e=0,f=Math.floor((b+1)/2);e<f;e++)c=this.getRow(e,c),d=this.getRow(b-1-e,d),c.reverse(),d.reverse(),this.setRow(e,d),this.setRow(b-1-e,c)},a.prototype.getEnclosingRectangle=function(){for(var a=this.width,b=this.height,c=this.rowSize,d=this.bits,e=a,f=b,g=-1,h=-1,i=0;i<b;i++)for(var j=0;j<c;j++){var k=d[i*c+j];if(0!==k){if(i<f&&(f=i),i>h&&(h=i),32*j<e){for(var l=0;k<<31-l==0;)l++;32*j+l<e&&(e=32*j+l)}if(32*j+31>g){for(var l=31;k>>>l==0;)l--;32*j+l>g&&(g=32*j+l)}}}return g<e||h<f?null:Int32Array.from([e,f,g-e+1,h-f+1])},a.prototype.getTopLeftOnBit=function(){for(var a=this.rowSize,b=this.bits,c=0;c<b.length&&0===b[c];)c++;if(c===b.length)return null;for(var d=c/a,e=c%a*32,f=b[c],g=0;f<<31-g==0;)g++;return e+=g,Int32Array.from([e,d])},a.prototype.getBottomRightOnBit=function(){for(var a=this.rowSize,b=this.bits,c=b.length-1;c>=0&&0===b[c];)c--;if(c<0)return null;for(var d=Math.floor(c/a),e=32*Math.floor(c%a),f=b[c],g=31;f>>>g==0;)g--;return e+=g,Int32Array.from([e,d])},a.prototype.getWidth=function(){return this.width},a.prototype.getHeight=function(){return this.height},a.prototype.getRowSize=function(){return this.rowSize},a.prototype.equals=function(b){return b instanceof a&&this.width===b.width&&this.height===b.height&&this.rowSize===b.rowSize&&kM.equals(this.bits,b.bits)},a.prototype.hashCode=function(){var a=this.width;return 31*(a=31*(a=31*(a=31*a+this.width)+this.height)+this.rowSize)+kM.hashCode(this.bits)},a.prototype.toString=function(a,b,c){return void 0===a&&(a="X "),void 0===b&&(b="  "),void 0===c&&(c="\n"),this.buildToString(a,b,c)},a.prototype.buildToString=function(a,b,c){for(var d=new kY,e=0,f=this.height;e<f;e++){for(var g=0,h=this.width;g<h;g++)d.append(this.get(g,e)?a:b);d.append(c)}return d.toString()},a.prototype.clone=function(){return new a(this.width,this.height,this.rowSize,this.bits.slice())},a}(),k$=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),k_=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return k$(b,a),b.getNotFoundInstance=function(){return new b},b.kind="NotFoundException",b}(kx),k0=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),k1=function(a){function b(c){var d=a.call(this,c)||this;return d.luminances=b.EMPTY,d.buckets=new Int32Array(b.LUMINANCE_BUCKETS),d}return k0(b,a),b.prototype.getBlackRow=function(a,c){var d=this.getLuminanceSource(),e=d.getWidth();null==c||c.getSize()<e?c=new kO(e):c.clear(),this.initArrays(e);for(var f=d.getRow(a,this.luminances),g=this.buckets,h=0;h<e;h++)g[(255&f[h])>>b.LUMINANCE_SHIFT]++;var i=b.estimateBlackPoint(g);if(e<3)for(var h=0;h<e;h++)(255&f[h])<i&&c.set(h);else for(var j=255&f[0],k=255&f[1],h=1;h<e-1;h++){var l=255&f[h+1];(4*k-j-l)/2<i&&c.set(h),j=k,k=l}return c},b.prototype.getBlackMatrix=function(){var a=this.getLuminanceSource(),c=a.getWidth(),d=a.getHeight(),e=new kZ(c,d);this.initArrays(c);for(var f=this.buckets,g=1;g<5;g++)for(var h=Math.floor(d*g/5),i=a.getRow(h,this.luminances),j=Math.floor(4*c/5),k=Math.floor(c/5);k<j;k++){var l=255&i[k];f[l>>b.LUMINANCE_SHIFT]++}for(var m=b.estimateBlackPoint(f),n=a.getMatrix(),g=0;g<d;g++)for(var o=g*c,k=0;k<c;k++){var l=255&n[o+k];l<m&&e.set(k,g)}return e},b.prototype.createBinarizer=function(a){return new b(a)},b.prototype.initArrays=function(a){this.luminances.length<a&&(this.luminances=new Uint8ClampedArray(a));for(var c=this.buckets,d=0;d<b.LUMINANCE_BUCKETS;d++)c[d]=0},b.estimateBlackPoint=function(a){for(var c=a.length,d=0,e=0,f=0,g=0;g<c;g++)a[g]>f&&(e=g,f=a[g]),a[g]>d&&(d=a[g]);for(var h=0,i=0,g=0;g<c;g++){var j=g-e,k=a[g]*j*j;k>i&&(h=g,i=k)}if(e>h){var l=e;e=h,h=l}if(h-e<=c/16)throw new k_;for(var m=h-1,n=-1,g=h-1;g>e;g--){var o=g-e,k=o*o*(h-g)*(d-a[g]);k>n&&(m=g,n=k)}return m<<b.LUMINANCE_SHIFT},b.LUMINANCE_BITS=5,b.LUMINANCE_SHIFT=8-b.LUMINANCE_BITS,b.LUMINANCE_BUCKETS=1<<b.LUMINANCE_BITS,b.EMPTY=Uint8ClampedArray.from([0]),b}(kF),k2=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),k3=function(a){function b(b){var c=a.call(this,b)||this;return c.matrix=null,c}return k2(b,a),b.prototype.getBlackMatrix=function(){if(null!==this.matrix)return this.matrix;var c=this.getLuminanceSource(),d=c.getWidth(),e=c.getHeight();if(d>=b.MINIMUM_DIMENSION&&e>=b.MINIMUM_DIMENSION){var f=c.getMatrix(),g=d>>b.BLOCK_SIZE_POWER;(d&b.BLOCK_SIZE_MASK)!=0&&g++;var h=e>>b.BLOCK_SIZE_POWER;(e&b.BLOCK_SIZE_MASK)!=0&&h++;var i=b.calculateBlackPoints(f,g,h,d,e),j=new kZ(d,e);b.calculateThresholdForBlock(f,g,h,d,e,i,j),this.matrix=j}else this.matrix=a.prototype.getBlackMatrix.call(this);return this.matrix},b.prototype.createBinarizer=function(a){return new b(a)},b.calculateThresholdForBlock=function(a,c,d,e,f,g,h){for(var i=f-b.BLOCK_SIZE,j=e-b.BLOCK_SIZE,k=0;k<d;k++){var l=k<<b.BLOCK_SIZE_POWER;l>i&&(l=i);for(var m=b.cap(k,2,d-3),n=0;n<c;n++){var o=n<<b.BLOCK_SIZE_POWER;o>j&&(o=j);for(var p=b.cap(n,2,c-3),q=0,r=-2;r<=2;r++){var s=g[m+r];q+=s[p-2]+s[p-1]+s[p]+s[p+1]+s[p+2]}var t=q/25;b.thresholdBlock(a,o,l,t,e,h)}}},b.cap=function(a,b,c){return a<b?b:a>c?c:a},b.thresholdBlock=function(a,c,d,e,f,g){for(var h=0,i=d*f+c;h<b.BLOCK_SIZE;h++,i+=f)for(var j=0;j<b.BLOCK_SIZE;j++)(255&a[i+j])<=e&&g.set(c+j,d+h)},b.calculateBlackPoints=function(a,c,d,e,f){for(var g=f-b.BLOCK_SIZE,h=e-b.BLOCK_SIZE,i=Array(d),j=0;j<d;j++){i[j]=new Int32Array(c);var k=j<<b.BLOCK_SIZE_POWER;k>g&&(k=g);for(var l=0;l<c;l++){var m=l<<b.BLOCK_SIZE_POWER;m>h&&(m=h);for(var n=0,o=255,p=0,q=0,r=k*e+m;q<b.BLOCK_SIZE;q++,r+=e){for(var s=0;s<b.BLOCK_SIZE;s++){var t=255&a[r+s];n+=t,t<o&&(o=t),t>p&&(p=t)}if(p-o>b.MIN_DYNAMIC_RANGE)for(q++,r+=e;q<b.BLOCK_SIZE;q++,r+=e)for(var s=0;s<b.BLOCK_SIZE;s++)n+=255&a[r+s]}var u=n>>2*b.BLOCK_SIZE_POWER;if(p-o<=b.MIN_DYNAMIC_RANGE&&(u=o/2,j>0&&l>0)){var v=(i[j-1][l]+2*i[j][l-1]+i[j-1][l-1])/4;o<v&&(u=v)}i[j][l]=u}}return i},b.BLOCK_SIZE_POWER=3,b.BLOCK_SIZE=1<<b.BLOCK_SIZE_POWER,b.BLOCK_SIZE_MASK=b.BLOCK_SIZE-1,b.MINIMUM_DIMENSION=5*b.BLOCK_SIZE,b.MIN_DYNAMIC_RANGE=24,b}(k1),k4=function(){function a(a,b){this.width=a,this.height=b}return a.prototype.getWidth=function(){return this.width},a.prototype.getHeight=function(){return this.height},a.prototype.isCropSupported=function(){return!1},a.prototype.crop=function(a,b,c,d){throw new kV("This luminance source does not support cropping.")},a.prototype.isRotateSupported=function(){return!1},a.prototype.rotateCounterClockwise=function(){throw new kV("This luminance source does not support rotation by 90 degrees.")},a.prototype.rotateCounterClockwise45=function(){throw new kV("This luminance source does not support rotation by 45 degrees.")},a.prototype.toString=function(){for(var a=new Uint8ClampedArray(this.width),b=new kY,c=0;c<this.height;c++){for(var d=this.getRow(c,a),e=0;e<this.width;e++){var f=255&d[e],g=void 0;g=f<64?"#":f<128?"+":f<192?".":" ",b.append(g)}b.append("\n")}return b.toString()},a}(),k5=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),k6=function(a){function b(b){var c=a.call(this,b.getWidth(),b.getHeight())||this;return c.delegate=b,c}return k5(b,a),b.prototype.getRow=function(a,b){for(var c=this.delegate.getRow(a,b),d=this.getWidth(),e=0;e<d;e++)c[e]=255-(255&c[e]);return c},b.prototype.getMatrix=function(){for(var a=this.delegate.getMatrix(),b=this.getWidth()*this.getHeight(),c=new Uint8ClampedArray(b),d=0;d<b;d++)c[d]=255-(255&a[d]);return c},b.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},b.prototype.crop=function(a,c,d,e){return new b(this.delegate.crop(a,c,d,e))},b.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},b.prototype.invert=function(){return this.delegate},b.prototype.rotateCounterClockwise=function(){return new b(this.delegate.rotateCounterClockwise())},b.prototype.rotateCounterClockwise45=function(){return new b(this.delegate.rotateCounterClockwise45())},b}(k4),k7=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),k8=function(a){function b(c,d){void 0===d&&(d=!1);var e=a.call(this,c.width,c.height)||this;return e.canvas=c,e.tempCanvasElement=null,e.buffer=b.makeBufferFromCanvasImageData(c,d),e}return k7(b,a),b.makeBufferFromCanvasImageData=function(a,c){void 0===c&&(c=!1);var d=a.getContext("2d").getImageData(0,0,a.width,a.height);return b.toGrayscaleBuffer(d.data,a.width,a.height,c)},b.toGrayscaleBuffer=function(a,c,d,e){void 0===e&&(e=!1);var f=new Uint8ClampedArray(c*d);if(b.FRAME_INDEX=!b.FRAME_INDEX,b.FRAME_INDEX||!e)for(var g=0,h=0,i=a.length;g<i;g+=4,h++){var j=void 0,k=a[g+3];if(0===k)j=255;else{var l=a[g],m=a[g+1],n=a[g+2];j=306*l+601*m+117*n+512>>10}f[h]=j}else for(var g=0,h=0,o=a.length;g<o;g+=4,h++){var j=void 0,k=a[g+3];if(0===k)j=255;else{var l=a[g],m=a[g+1],n=a[g+2];j=306*l+601*m+117*n+512>>10}f[h]=255-j}return f},b.prototype.getRow=function(a,b){if(a<0||a>=this.getHeight())throw new kB("Requested row is outside the image: "+a);var c=this.getWidth(),d=a*c;return null===b?b=this.buffer.slice(d,d+c):(b.length<c&&(b=new Uint8ClampedArray(c)),b.set(this.buffer.slice(d,d+c))),b},b.prototype.getMatrix=function(){return this.buffer},b.prototype.isCropSupported=function(){return!0},b.prototype.crop=function(b,c,d,e){return a.prototype.crop.call(this,b,c,d,e),this},b.prototype.isRotateSupported=function(){return!0},b.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},b.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},b.prototype.getTempCanvasElement=function(){if(null===this.tempCanvasElement){var a=this.canvas.ownerDocument.createElement("canvas");a.width=this.canvas.width,a.height=this.canvas.height,this.tempCanvasElement=a}return this.tempCanvasElement},b.prototype.rotate=function(a){var c=this.getTempCanvasElement(),d=c.getContext("2d"),e=a*b.DEGREE_TO_RADIANS,f=this.canvas.width,g=this.canvas.height,h=Math.ceil(Math.abs(Math.cos(e))*f+Math.abs(Math.sin(e))*g),i=Math.ceil(Math.abs(Math.sin(e))*f+Math.abs(Math.cos(e))*g);return c.width=h,c.height=i,d.translate(h/2,i/2),d.rotate(e),d.drawImage(this.canvas,-(f/2),-(g/2)),this.buffer=b.makeBufferFromCanvasImageData(c),this},b.prototype.invert=function(){return new k6(this)},b.DEGREE_TO_RADIANS=Math.PI/180,b.FRAME_INDEX=!0,b}(k4),k9=function(){function a(a,b,c){this.deviceId=a,this.label=b,this.kind="videoinput",this.groupId=c||void 0}return a.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},a}(),la=function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})},lb=function(a,b){var c,d,e,f,g={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return f={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function h(f){return function(h){var i=[f,h];if(c)throw TypeError("Generator is already executing.");for(;g;)try{if(c=1,d&&(e=2&i[0]?d.return:i[0]?d.throw||((e=d.return)&&e.call(d),0):d.next)&&!(e=e.call(d,i[1])).done)return e;switch(d=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return g.label++,{value:i[1],done:!1};case 5:g.label++,d=i[1],i=[0];continue;case 7:i=g.ops.pop(),g.trys.pop();continue;default:if(!(e=(e=g.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){g=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){g.label=i[1];break}if(6===i[0]&&g.label<e[1]){g.label=e[1],e=i;break}if(e&&g.label<e[2]){g.label=e[2],g.ops.push(i);break}e[2]&&g.ops.pop(),g.trys.pop();continue}i=b.call(a,g)}catch(a){i=[6,a],d=0}finally{c=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}}},lc=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},ld=function(){function a(a,b,c){void 0===b&&(b=500),this.reader=a,this.timeBetweenScansMillis=b,this._hints=c,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(a.prototype,"hasNavigator",{get:function(){return"undefined"!=typeof navigator},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(a){this._timeBetweenDecodingAttempts=a<0?0:a},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"hints",{get:function(){return this._hints},set:function(a){this._hints=a||null},enumerable:!1,configurable:!0}),a.prototype.listVideoInputDevices=function(){return la(this,void 0,void 0,function(){var a,b,c,d,e,f,g,h,i,j,k,l;return lb(this,function(m){switch(m.label){case 0:if(!this.hasNavigator)throw Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:a=m.sent(),b=[];try{for(d=(c=lc(a)).next();!d.done;d=c.next())e=d.value,f="video"===e.kind?"videoinput":e.kind,"videoinput"===f&&(g=e.deviceId||e.id,h=e.label||"Video device "+(b.length+1),i=e.groupId,j={deviceId:g,label:h,kind:f,groupId:i},b.push(j))}catch(a){k={error:a}}finally{try{d&&!d.done&&(l=c.return)&&l.call(c)}finally{if(k)throw k.error}}return[2,b]}})})},a.prototype.getVideoInputDevices=function(){return la(this,void 0,void 0,function(){return lb(this,function(a){switch(a.label){case 0:return[4,this.listVideoInputDevices()];case 1:return[2,a.sent().map(function(a){return new k9(a.deviceId,a.label)})]}})})},a.prototype.findDeviceById=function(a){return la(this,void 0,void 0,function(){var b;return lb(this,function(c){switch(c.label){case 0:return[4,this.listVideoInputDevices()];case 1:if(!(b=c.sent()))return[2,null];return[2,b.find(function(b){return b.deviceId===a})]}})})},a.prototype.decodeFromInputVideoDevice=function(a,b){return la(this,void 0,void 0,function(){return lb(this,function(c){switch(c.label){case 0:return[4,this.decodeOnceFromVideoDevice(a,b)];case 1:return[2,c.sent()]}})})},a.prototype.decodeOnceFromVideoDevice=function(a,b){return la(this,void 0,void 0,function(){var c;return lb(this,function(d){switch(d.label){case 0:return this.reset(),c={video:a?{deviceId:{exact:a}}:{facingMode:"environment"}},[4,this.decodeOnceFromConstraints(c,b)];case 1:return[2,d.sent()]}})})},a.prototype.decodeOnceFromConstraints=function(a,b){return la(this,void 0,void 0,function(){var c;return lb(this,function(d){switch(d.label){case 0:return[4,navigator.mediaDevices.getUserMedia(a)];case 1:return c=d.sent(),[4,this.decodeOnceFromStream(c,b)];case 2:return[2,d.sent()]}})})},a.prototype.decodeOnceFromStream=function(a,b){return la(this,void 0,void 0,function(){var c;return lb(this,function(d){switch(d.label){case 0:return this.reset(),[4,this.attachStreamToVideo(a,b)];case 1:return c=d.sent(),[4,this.decodeOnce(c)];case 2:return[2,d.sent()]}})})},a.prototype.decodeFromInputVideoDeviceContinuously=function(a,b,c){return la(this,void 0,void 0,function(){return lb(this,function(d){switch(d.label){case 0:return[4,this.decodeFromVideoDevice(a,b,c)];case 1:return[2,d.sent()]}})})},a.prototype.decodeFromVideoDevice=function(a,b,c){return la(this,void 0,void 0,function(){var d;return lb(this,function(e){switch(e.label){case 0:return d={video:a?{deviceId:{exact:a}}:{facingMode:"environment"}},[4,this.decodeFromConstraints(d,b,c)];case 1:return[2,e.sent()]}})})},a.prototype.decodeFromConstraints=function(a,b,c){return la(this,void 0,void 0,function(){var d;return lb(this,function(e){switch(e.label){case 0:return[4,navigator.mediaDevices.getUserMedia(a)];case 1:return d=e.sent(),[4,this.decodeFromStream(d,b,c)];case 2:return[2,e.sent()]}})})},a.prototype.decodeFromStream=function(a,b,c){return la(this,void 0,void 0,function(){var d;return lb(this,function(e){switch(e.label){case 0:return this.reset(),[4,this.attachStreamToVideo(a,b)];case 1:return d=e.sent(),[4,this.decodeContinuously(d,c)];case 2:return[2,e.sent()]}})})},a.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},a.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},a.prototype.attachStreamToVideo=function(a,b){return la(this,void 0,void 0,function(){var c;return lb(this,function(d){switch(d.label){case 0:return c=this.prepareVideoElement(b),this.addVideoSource(c,a),this.videoElement=c,this.stream=a,[4,this.playVideoOnLoadAsync(c)];case 1:return d.sent(),[2,c]}})})},a.prototype.playVideoOnLoadAsync=function(a){var b=this;return new Promise(function(c,d){return b.playVideoOnLoad(a,function(){return c()})})},a.prototype.playVideoOnLoad=function(a,b){var c=this;this.videoEndedListener=function(){return c.stopStreams()},this.videoCanPlayListener=function(){return c.tryPlayVideo(a)},a.addEventListener("ended",this.videoEndedListener),a.addEventListener("canplay",this.videoCanPlayListener),a.addEventListener("playing",b),this.tryPlayVideo(a)},a.prototype.isVideoPlaying=function(a){return a.currentTime>0&&!a.paused&&!a.ended&&a.readyState>2},a.prototype.tryPlayVideo=function(a){return la(this,void 0,void 0,function(){return lb(this,function(b){switch(b.label){case 0:if(this.isVideoPlaying(a))return console.warn("Trying to play video that is already playing."),[2];b.label=1;case 1:return b.trys.push([1,3,,4]),[4,a.play()];case 2:return b.sent(),[3,4];case 3:return b.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},a.prototype.getMediaElement=function(a,b){var c=document.getElementById(a);if(!c)throw new kz("element with id '"+a+"' not found");if(c.nodeName.toLowerCase()!==b.toLowerCase())throw new kz("element with id '"+a+"' must be an "+b+" element");return c},a.prototype.decodeFromImage=function(a,b){if(!a&&!b)throw new kz("either imageElement with a src set or an url must be provided");return b&&!a?this.decodeFromImageUrl(b):this.decodeFromImageElement(a)},a.prototype.decodeFromVideo=function(a,b){if(!a&&!b)throw new kz("Either an element with a src set or an URL must be provided");return b&&!a?this.decodeFromVideoUrl(b):this.decodeFromVideoElement(a)},a.prototype.decodeFromVideoContinuously=function(a,b,c){if(void 0===a&&void 0===b)throw new kz("Either an element with a src set or an URL must be provided");return b&&!a?this.decodeFromVideoUrlContinuously(b,c):this.decodeFromVideoElementContinuously(a,c)},a.prototype.decodeFromImageElement=function(a){if(!a)throw new kz("An image element must be provided.");this.reset();var b=this.prepareImageElement(a);return this.imageElement=b,this.isImageLoaded(b)?this.decodeOnce(b,!1,!0):this._decodeOnLoadImage(b)},a.prototype.decodeFromVideoElement=function(a){var b=this._decodeFromVideoElementSetup(a);return this._decodeOnLoadVideo(b)},a.prototype.decodeFromVideoElementContinuously=function(a,b){var c=this._decodeFromVideoElementSetup(a);return this._decodeOnLoadVideoContinuously(c,b)},a.prototype._decodeFromVideoElementSetup=function(a){if(!a)throw new kz("A video element must be provided.");this.reset();var b=this.prepareVideoElement(a);return this.videoElement=b,b},a.prototype.decodeFromImageUrl=function(a){if(!a)throw new kz("An URL must be provided.");this.reset();var b=this.prepareImageElement();this.imageElement=b;var c=this._decodeOnLoadImage(b);return b.src=a,c},a.prototype.decodeFromVideoUrl=function(a){if(!a)throw new kz("An URL must be provided.");this.reset();var b=this.prepareVideoElement(),c=this.decodeFromVideoElement(b);return b.src=a,c},a.prototype.decodeFromVideoUrlContinuously=function(a,b){if(!a)throw new kz("An URL must be provided.");this.reset();var c=this.prepareVideoElement(),d=this.decodeFromVideoElementContinuously(c,b);return c.src=a,d},a.prototype._decodeOnLoadImage=function(a){var b=this;return new Promise(function(c,d){b.imageLoadedListener=function(){return b.decodeOnce(a,!1,!0).then(c,d)},a.addEventListener("load",b.imageLoadedListener)})},a.prototype._decodeOnLoadVideo=function(a){return la(this,void 0,void 0,function(){return lb(this,function(b){switch(b.label){case 0:return[4,this.playVideoOnLoadAsync(a)];case 1:return b.sent(),[4,this.decodeOnce(a)];case 2:return[2,b.sent()]}})})},a.prototype._decodeOnLoadVideoContinuously=function(a,b){return la(this,void 0,void 0,function(){return lb(this,function(c){switch(c.label){case 0:return[4,this.playVideoOnLoadAsync(a)];case 1:return c.sent(),this.decodeContinuously(a,b),[2]}})})},a.prototype.isImageLoaded=function(a){return!!a.complete&&0!==a.naturalWidth},a.prototype.prepareImageElement=function(a){var b;return void 0===a&&((b=document.createElement("img")).width=200,b.height=200),"string"==typeof a&&(b=this.getMediaElement(a,"img")),a instanceof HTMLImageElement&&(b=a),b},a.prototype.prepareVideoElement=function(a){var b;return a||"undefined"==typeof document||((b=document.createElement("video")).width=200,b.height=200),"string"==typeof a&&(b=this.getMediaElement(a,"video")),a instanceof HTMLVideoElement&&(b=a),b.setAttribute("autoplay","true"),b.setAttribute("muted","true"),b.setAttribute("playsinline","true"),b},a.prototype.decodeOnce=function(a,b,c){var d=this;void 0===b&&(b=!0),void 0===c&&(c=!0),this._stopAsyncDecode=!1;var e=function(f,g){if(d._stopAsyncDecode){g(new k_("Video stream has ended before any code could be detected.")),d._stopAsyncDecode=void 0;return}try{var h=d.decode(a);f(h)}catch(a){var i=b&&a instanceof k_,j=(a instanceof kE||a instanceof kR)&&c;if(i||j)return setTimeout(e,d._timeBetweenDecodingAttempts,f,g);g(a)}};return new Promise(function(a,b){return e(a,b)})},a.prototype.decodeContinuously=function(a,b){var c=this;this._stopContinuousDecode=!1;var d=function(){if(c._stopContinuousDecode){c._stopContinuousDecode=void 0;return}try{var e=c.decode(a);b(e,null),setTimeout(d,c.timeBetweenScansMillis)}catch(a){b(null,a);var f=a instanceof kE||a instanceof kR,g=a instanceof k_;(f||g)&&setTimeout(d,c._timeBetweenDecodingAttempts)}};d()},a.prototype.decode=function(a){var b=this.createBinaryBitmap(a);return this.decodeBitmap(b)},a.prototype.createBinaryBitmap=function(a){this.getCaptureCanvasContext(a);var b=!1;return a instanceof HTMLVideoElement?(this.drawFrameOnCanvas(a),b=!0):this.drawImageOnCanvas(a),new kC(new k3(new k8(this.getCaptureCanvas(a),b)))},a.prototype.getCaptureCanvasContext=function(a){if(!this.captureCanvasContext){var b=this.getCaptureCanvas(a),c=void 0;try{c=b.getContext("2d",{willReadFrequently:!0})}catch(a){c=b.getContext("2d")}this.captureCanvasContext=c}return this.captureCanvasContext},a.prototype.getCaptureCanvas=function(a){if(!this.captureCanvas){var b=this.createCaptureCanvas(a);this.captureCanvas=b}return this.captureCanvas},a.prototype.drawFrameOnCanvas=function(a,b,c){void 0===b&&(b={sx:0,sy:0,sWidth:a.videoWidth,sHeight:a.videoHeight,dx:0,dy:0,dWidth:a.videoWidth,dHeight:a.videoHeight}),void 0===c&&(c=this.captureCanvasContext),c.drawImage(a,b.sx,b.sy,b.sWidth,b.sHeight,b.dx,b.dy,b.dWidth,b.dHeight)},a.prototype.drawImageOnCanvas=function(a,b,c){void 0===b&&(b={sx:0,sy:0,sWidth:a.naturalWidth,sHeight:a.naturalHeight,dx:0,dy:0,dWidth:a.naturalWidth,dHeight:a.naturalHeight}),void 0===c&&(c=this.captureCanvasContext),c.drawImage(a,b.sx,b.sy,b.sWidth,b.sHeight,b.dx,b.dy,b.dWidth,b.dHeight)},a.prototype.decodeBitmap=function(a){return this.reader.decode(a,this._hints)},a.prototype.createCaptureCanvas=function(a){if("undefined"==typeof document)return this._destroyCaptureCanvas(),null;var b,c,d=document.createElement("canvas");return void 0!==a&&(a instanceof HTMLVideoElement?(b=a.videoWidth,c=a.videoHeight):a instanceof HTMLImageElement&&(b=a.naturalWidth||a.width,c=a.naturalHeight||a.height)),d.style.width=b+"px",d.style.height=c+"px",d.width=b,d.height=c,d},a.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(a){return a.stop()}),this.stream=void 0),!1===this._stopAsyncDecode&&this.stopAsyncDecode(),!1===this._stopContinuousDecode&&this.stopContinuousDecode()},a.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},a.prototype._destroyVideoElement=function(){this.videoElement&&(void 0!==this.videoEndedListener&&this.videoElement.removeEventListener("ended",this.videoEndedListener),void 0!==this.videoPlayingEventListener&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),void 0!==this.videoCanPlayListener&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},a.prototype._destroyImageElement=function(){this.imageElement&&(void 0!==this.imageLoadedListener&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},a.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},a.prototype.addVideoSource=function(a,b){try{a.srcObject=b}catch(c){a.src=URL.createObjectURL(b)}},a.prototype.cleanVideoSource=function(a){try{a.srcObject=null}catch(b){a.src=""}this.videoElement.removeAttribute("src")},a}(),le=function(){function a(a,b,c,d,e,f){void 0===c&&(c=null==b?0:8*b.length),void 0===f&&(f=kG.currentTimeMillis()),this.text=a,this.rawBytes=b,this.numBits=c,this.resultPoints=d,this.format=e,this.timestamp=f,this.text=a,this.rawBytes=b,null==c?this.numBits=null==b?0:8*b.length:this.numBits=c,this.resultPoints=d,this.format=e,this.resultMetadata=null,null==f?this.timestamp=kG.currentTimeMillis():this.timestamp=f}return a.prototype.getText=function(){return this.text},a.prototype.getRawBytes=function(){return this.rawBytes},a.prototype.getNumBits=function(){return this.numBits},a.prototype.getResultPoints=function(){return this.resultPoints},a.prototype.getBarcodeFormat=function(){return this.format},a.prototype.getResultMetadata=function(){return this.resultMetadata},a.prototype.putMetadata=function(a,b){null===this.resultMetadata&&(this.resultMetadata=new Map),this.resultMetadata.set(a,b)},a.prototype.putAllMetadata=function(a){null!==a&&(null===this.resultMetadata?this.resultMetadata=a:this.resultMetadata=new Map(a))},a.prototype.addResultPoints=function(a){var b=this.resultPoints;if(null===b)this.resultPoints=a;else if(null!==a&&a.length>0){var c=Array(b.length+a.length);kG.arraycopy(b,0,c,0,b.length),kG.arraycopy(a,0,c,b.length,a.length),this.resultPoints=c}},a.prototype.getTimestamp=function(){return this.timestamp},a.prototype.toString=function(){return this.text},a}();!function(a){a[a.AZTEC=0]="AZTEC",a[a.CODABAR=1]="CODABAR",a[a.CODE_39=2]="CODE_39",a[a.CODE_93=3]="CODE_93",a[a.CODE_128=4]="CODE_128",a[a.DATA_MATRIX=5]="DATA_MATRIX",a[a.EAN_8=6]="EAN_8",a[a.EAN_13=7]="EAN_13",a[a.ITF=8]="ITF",a[a.MAXICODE=9]="MAXICODE",a[a.PDF_417=10]="PDF_417",a[a.QR_CODE=11]="QR_CODE",a[a.RSS_14=12]="RSS_14",a[a.RSS_EXPANDED=13]="RSS_EXPANDED",a[a.UPC_A=14]="UPC_A",a[a.UPC_E=15]="UPC_E",a[a.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"}(j||(j={}));let lf=j;!function(a){a[a.OTHER=0]="OTHER",a[a.ORIENTATION=1]="ORIENTATION",a[a.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",a[a.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",a[a.ISSUE_NUMBER=4]="ISSUE_NUMBER",a[a.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",a[a.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",a[a.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",a[a.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",a[a.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",a[a.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"}(k||(k={}));let lg=k;var lh=function(){function a(a,b,c,d,e,f){void 0===e&&(e=-1),void 0===f&&(f=-1),this.rawBytes=a,this.text=b,this.byteSegments=c,this.ecLevel=d,this.structuredAppendSequenceNumber=e,this.structuredAppendParity=f,this.numBits=null==a?0:8*a.length}return a.prototype.getRawBytes=function(){return this.rawBytes},a.prototype.getNumBits=function(){return this.numBits},a.prototype.setNumBits=function(a){this.numBits=a},a.prototype.getText=function(){return this.text},a.prototype.getByteSegments=function(){return this.byteSegments},a.prototype.getECLevel=function(){return this.ecLevel},a.prototype.getErrorsCorrected=function(){return this.errorsCorrected},a.prototype.setErrorsCorrected=function(a){this.errorsCorrected=a},a.prototype.getErasures=function(){return this.erasures},a.prototype.setErasures=function(a){this.erasures=a},a.prototype.getOther=function(){return this.other},a.prototype.setOther=function(a){this.other=a},a.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},a.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},a.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},a}(),li=function(){function a(){}return a.prototype.exp=function(a){return this.expTable[a]},a.prototype.log=function(a){if(0===a)throw new kB;return this.logTable[a]},a.addOrSubtract=function(a,b){return a^b},a}(),lj=function(){function a(a,b){if(0===b.length)throw new kB;this.field=a;var c=b.length;if(c>1&&0===b[0]){for(var d=1;d<c&&0===b[d];)d++;d===c?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(c-d),kG.arraycopy(b,d,this.coefficients,0,this.coefficients.length))}else this.coefficients=b}return a.prototype.getCoefficients=function(){return this.coefficients},a.prototype.getDegree=function(){return this.coefficients.length-1},a.prototype.isZero=function(){return 0===this.coefficients[0]},a.prototype.getCoefficient=function(a){return this.coefficients[this.coefficients.length-1-a]},a.prototype.evaluateAt=function(a){if(0===a)return this.getCoefficient(0);var b,c=this.coefficients;if(1===a){b=0;for(var d=0,e=c.length;d!==e;d++){var f=c[d];b=li.addOrSubtract(b,f)}return b}b=c[0];for(var g=c.length,h=this.field,d=1;d<g;d++)b=li.addOrSubtract(h.multiply(a,b),c[d]);return b},a.prototype.addOrSubtract=function(b){if(!this.field.equals(b.field))throw new kB("GenericGFPolys do not have same GenericGF field");if(this.isZero())return b;if(b.isZero())return this;var c=this.coefficients,d=b.coefficients;if(c.length>d.length){var e=c;c=d,d=e}var f=new Int32Array(d.length),g=d.length-c.length;kG.arraycopy(d,0,f,0,g);for(var h=g;h<d.length;h++)f[h]=li.addOrSubtract(c[h-g],d[h]);return new a(this.field,f)},a.prototype.multiply=function(b){if(!this.field.equals(b.field))throw new kB("GenericGFPolys do not have same GenericGF field");if(this.isZero()||b.isZero())return this.field.getZero();for(var c=this.coefficients,d=c.length,e=b.coefficients,f=e.length,g=new Int32Array(d+f-1),h=this.field,i=0;i<d;i++)for(var j=c[i],k=0;k<f;k++)g[i+k]=li.addOrSubtract(g[i+k],h.multiply(j,e[k]));return new a(h,g)},a.prototype.multiplyScalar=function(b){if(0===b)return this.field.getZero();if(1===b)return this;for(var c=this.coefficients.length,d=this.field,e=new Int32Array(c),f=this.coefficients,g=0;g<c;g++)e[g]=d.multiply(f[g],b);return new a(d,e)},a.prototype.multiplyByMonomial=function(b,c){if(b<0)throw new kB;if(0===c)return this.field.getZero();for(var d=this.coefficients,e=d.length,f=new Int32Array(e+b),g=this.field,h=0;h<e;h++)f[h]=g.multiply(d[h],c);return new a(g,f)},a.prototype.divide=function(a){if(!this.field.equals(a.field))throw new kB("GenericGFPolys do not have same GenericGF field");if(a.isZero())throw new kB("Divide by 0");for(var b=this.field,c=b.getZero(),d=this,e=a.getCoefficient(a.getDegree()),f=b.inverse(e);d.getDegree()>=a.getDegree()&&!d.isZero();){var g=d.getDegree()-a.getDegree(),h=b.multiply(d.getCoefficient(d.getDegree()),f),i=a.multiplyByMonomial(g,h),j=b.buildMonomial(g,h);c=c.addOrSubtract(j),d=d.addOrSubtract(i)}return[c,d]},a.prototype.toString=function(){for(var a="",b=this.getDegree();b>=0;b--){var c=this.getCoefficient(b);if(0!==c){if(c<0?(a+=" - ",c=-c):a.length>0&&(a+=" + "),0===b||1!==c){var d=this.field.log(c);0===d?a+="1":1===d?a+="a":(a+="a^",a+=d)}0!==b&&(1===b?a+="x":(a+="x^",a+=b))}}return a},a}(),lk=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),ll=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return lk(b,a),b.kind="ArithmeticException",b}(kx),lm=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),ln=function(a){function b(b,c,d){var e=a.call(this)||this;e.primitive=b,e.size=c,e.generatorBase=d;for(var f=new Int32Array(c),g=1,h=0;h<c;h++)f[h]=g,(g*=2)>=c&&(g^=b,g&=c-1);e.expTable=f;for(var i=new Int32Array(c),h=0;h<c-1;h++)i[f[h]]=h;return e.logTable=i,e.zero=new lj(e,Int32Array.from([0])),e.one=new lj(e,Int32Array.from([1])),e}return lm(b,a),b.prototype.getZero=function(){return this.zero},b.prototype.getOne=function(){return this.one},b.prototype.buildMonomial=function(a,b){if(a<0)throw new kB;if(0===b)return this.zero;var c=new Int32Array(a+1);return c[0]=b,new lj(this,c)},b.prototype.inverse=function(a){if(0===a)throw new ll;return this.expTable[this.size-this.logTable[a]-1]},b.prototype.multiply=function(a,b){return 0===a||0===b?0:this.expTable[(this.logTable[a]+this.logTable[b])%(this.size-1)]},b.prototype.getSize=function(){return this.size},b.prototype.getGeneratorBase=function(){return this.generatorBase},b.prototype.toString=function(){return"GF(0x"+kN.toHexString(this.primitive)+","+this.size+")"},b.prototype.equals=function(a){return a===this},b.AZTEC_DATA_12=new b(4201,4096,1),b.AZTEC_DATA_10=new b(1033,1024,1),b.AZTEC_DATA_6=new b(67,64,1),b.AZTEC_PARAM=new b(19,16,1),b.QR_CODE_FIELD_256=new b(285,256,0),b.DATA_MATRIX_FIELD_256=new b(301,256,1),b.AZTEC_DATA_8=b.DATA_MATRIX_FIELD_256,b.MAXICODE_FIELD_64=b.AZTEC_DATA_6,b}(li),lo=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),lp=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return lo(b,a),b.kind="ReedSolomonException",b}(kx),lq=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),lr=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return lq(b,a),b.kind="IllegalStateException",b}(kx),ls=function(){function a(a){this.field=a}return a.prototype.decode=function(a,b){for(var c=this.field,d=new lj(c,a),e=new Int32Array(b),f=!0,g=0;g<b;g++){var h=d.evaluateAt(c.exp(g+c.getGeneratorBase()));e[e.length-1-g]=h,0!==h&&(f=!1)}if(!f)for(var i=new lj(c,e),j=this.runEuclideanAlgorithm(c.buildMonomial(b,1),i,b),k=j[0],l=j[1],m=this.findErrorLocations(k),n=this.findErrorMagnitudes(l,m),g=0;g<m.length;g++){var o=a.length-1-c.log(m[g]);if(o<0)throw new lp("Bad error location");a[o]=ln.addOrSubtract(a[o],n[g])}},a.prototype.runEuclideanAlgorithm=function(a,b,c){if(a.getDegree()<b.getDegree()){var d=a;a=b,b=d}for(var e=this.field,f=a,g=b,h=e.getZero(),i=e.getOne();g.getDegree()>=(c/2|0);){var j=f,k=h;if(f=g,h=i,f.isZero())throw new lp("r_{i-1} was zero");g=j;for(var l=e.getZero(),m=f.getCoefficient(f.getDegree()),n=e.inverse(m);g.getDegree()>=f.getDegree()&&!g.isZero();){var o=g.getDegree()-f.getDegree(),p=e.multiply(g.getCoefficient(g.getDegree()),n);l=l.addOrSubtract(e.buildMonomial(o,p)),g=g.addOrSubtract(f.multiplyByMonomial(o,p))}if(i=l.multiply(h).addOrSubtract(k),g.getDegree()>=f.getDegree())throw new lr("Division algorithm failed to reduce polynomial?")}var q=i.getCoefficient(0);if(0===q)throw new lp("sigmaTilde(0) was zero");var r=e.inverse(q);return[i.multiplyScalar(r),g.multiplyScalar(r)]},a.prototype.findErrorLocations=function(a){var b=a.getDegree();if(1===b)return Int32Array.from([a.getCoefficient(1)]);for(var c=new Int32Array(b),d=0,e=this.field,f=1;f<e.getSize()&&d<b;f++)0===a.evaluateAt(f)&&(c[d]=e.inverse(f),d++);if(d!==b)throw new lp("Error locator degree does not match number of roots");return c},a.prototype.findErrorMagnitudes=function(a,b){for(var c=b.length,d=new Int32Array(c),e=this.field,f=0;f<c;f++){for(var g=e.inverse(b[f]),h=1,i=0;i<c;i++)if(f!==i){var j=e.multiply(b[i],g),k=(1&j)==0?1|j:-2&j;h=e.multiply(h,k)}d[f]=e.multiply(a.evaluateAt(g),e.inverse(h)),0!==e.getGeneratorBase()&&(d[f]=e.multiply(d[f],g))}return d},a}();!function(a){a[a.UPPER=0]="UPPER",a[a.LOWER=1]="LOWER",a[a.MIXED=2]="MIXED",a[a.DIGIT=3]="DIGIT",a[a.PUNCT=4]="PUNCT",a[a.BINARY=5]="BINARY"}(l||(l={}));var lt=function(){function a(){}return a.prototype.decode=function(b){this.ddata=b;var c=b.getBits(),d=this.extractBits(c),e=this.correctBits(d),f=new lh(a.convertBoolArrayToByteArray(e),a.getEncodedData(e),null,null);return f.setNumBits(e.length),f},a.highLevelDecode=function(a){return this.getEncodedData(a)},a.getEncodedData=function(b){for(var c=b.length,d=l.UPPER,e=l.UPPER,f="",g=0;g<c;)if(e===l.BINARY){if(c-g<5)break;var h=a.readCode(b,g,5);if(g+=5,0===h){if(c-g<11)break;h=a.readCode(b,g,11)+31,g+=11}for(var i=0;i<h;i++){if(c-g<8){g=c;break}var j=a.readCode(b,g,8);f+=kX.castAsNonUtf8Char(j),g+=8}e=d}else{var k=e===l.DIGIT?4:5;if(c-g<k)break;var j=a.readCode(b,g,k);g+=k;var m=a.getCharacter(e,j);m.startsWith("CTRL_")?(d=e,e=a.getTable(m.charAt(5)),"L"===m.charAt(6)&&(d=e)):(f+=m,e=d)}return f},a.getTable=function(a){switch(a){case"L":return l.LOWER;case"P":return l.PUNCT;case"M":return l.MIXED;case"D":return l.DIGIT;case"B":return l.BINARY;default:return l.UPPER}},a.getCharacter=function(b,c){switch(b){case l.UPPER:return a.UPPER_TABLE[c];case l.LOWER:return a.LOWER_TABLE[c];case l.MIXED:return a.MIXED_TABLE[c];case l.PUNCT:return a.PUNCT_TABLE[c];case l.DIGIT:return a.DIGIT_TABLE[c];default:throw new lr("Bad table")}},a.prototype.correctBits=function(b){2>=this.ddata.getNbLayers()?(d=6,c=ln.AZTEC_DATA_6):8>=this.ddata.getNbLayers()?(d=8,c=ln.AZTEC_DATA_8):22>=this.ddata.getNbLayers()?(d=10,c=ln.AZTEC_DATA_10):(d=12,c=ln.AZTEC_DATA_12);var c,d,e=this.ddata.getNbDatablocks(),f=b.length/d;if(f<e)throw new kR;for(var g=b.length%d,h=new Int32Array(f),i=0;i<f;i++,g+=d)h[i]=a.readCode(b,g,d);try{new ls(c).decode(h,f-e)}catch(a){throw new kR(a)}for(var j=(1<<d)-1,k=0,i=0;i<e;i++){var l=h[i];if(0===l||l===j)throw new kR;(1===l||l===j-1)&&k++}for(var m=Array(e*d-k),n=0,i=0;i<e;i++){var l=h[i];if(1===l||l===j-1)m.fill(l>1,n,n+d-1),n+=d-1;else for(var o=d-1;o>=0;--o)m[n++]=(l&1<<o)!=0}return m},a.prototype.extractBits=function(a){var b=this.ddata.isCompact(),c=this.ddata.getNbLayers(),d=(b?11:14)+4*c,e=new Int32Array(d),f=Array(this.totalBitsInLayer(c,b));if(b)for(var g=0;g<e.length;g++)e[g]=g;else for(var h=d+1+2*kN.truncDivision(kN.truncDivision(d,2)-1,15),i=d/2,j=kN.truncDivision(h,2),g=0;g<i;g++){var k=g+kN.truncDivision(g,15);e[i-g-1]=j-k-1,e[i+g]=j+k+1}for(var g=0,l=0;g<c;g++){for(var m=(c-g)*4+(b?9:12),n=2*g,o=d-1-n,p=0;p<m;p++)for(var q=2*p,r=0;r<2;r++)f[l+q+r]=a.get(e[n+r],e[n+p]),f[l+2*m+q+r]=a.get(e[n+p],e[o-r]),f[l+4*m+q+r]=a.get(e[o-r],e[o-p]),f[l+6*m+q+r]=a.get(e[o-p],e[n+r]);l+=8*m}return f},a.readCode=function(a,b,c){for(var d=0,e=b;e<b+c;e++)d<<=1,a[e]&&(d|=1);return d},a.readByte=function(b,c){var d=b.length-c;return d>=8?a.readCode(b,c,8):a.readCode(b,c,d)<<8-d},a.convertBoolArrayToByteArray=function(b){for(var c=new Uint8Array((b.length+7)/8),d=0;d<c.length;d++)c[d]=a.readByte(b,8*d);return c},a.prototype.totalBitsInLayer=function(a,b){return((b?88:112)+16*a)*a},a.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],a.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],a.MIXED_TABLE=["CTRL_PS"," ","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","	","\n","\v","\f","\r","\x1b","\x1c","\x1d","\x1e","\x1f","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],a.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],a.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],a}(),lu=function(){function a(){}return a.round=function(a){return isNaN(a)?0:a<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:a>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:a+(a<0?-.5:.5)|0},a.distance=function(a,b,c,d){var e=a-c,f=b-d;return Math.sqrt(e*e+f*f)},a.sum=function(a){for(var b=0,c=0,d=a.length;c!==d;c++)b+=a[c];return b},a}(),lv=function(){function a(){}return a.floatToIntBits=function(a){return a},a.MAX_VALUE=Number.MAX_SAFE_INTEGER,a}(),lw=function(){function a(a,b){this.x=a,this.y=b}return a.prototype.getX=function(){return this.x},a.prototype.getY=function(){return this.y},a.prototype.equals=function(b){return b instanceof a&&this.x===b.x&&this.y===b.y},a.prototype.hashCode=function(){return 31*lv.floatToIntBits(this.x)+lv.floatToIntBits(this.y)},a.prototype.toString=function(){return"("+this.x+","+this.y+")"},a.orderBestPatterns=function(a){var b,c,d,e=this.distance(a[0],a[1]),f=this.distance(a[1],a[2]),g=this.distance(a[0],a[2]);if(f>=e&&f>=g?(c=a[0],b=a[1],d=a[2]):g>=f&&g>=e?(c=a[1],b=a[0],d=a[2]):(c=a[2],b=a[0],d=a[1]),0>this.crossProductZ(b,c,d)){var h=b;b=d,d=h}a[0]=b,a[1]=c,a[2]=d},a.distance=function(a,b){return lu.distance(a.x,a.y,b.x,b.y)},a.crossProductZ=function(a,b,c){var d=b.x,e=b.y;return(c.x-d)*(a.y-e)-(c.y-e)*(a.x-d)},a}(),lx=function(){function a(a,b){this.bits=a,this.points=b}return a.prototype.getBits=function(){return this.bits},a.prototype.getPoints=function(){return this.points},a}(),ly=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),lz=function(a){function b(b,c,d,e,f){var g=a.call(this,b,c)||this;return g.compact=d,g.nbDatablocks=e,g.nbLayers=f,g}return ly(b,a),b.prototype.getNbLayers=function(){return this.nbLayers},b.prototype.getNbDatablocks=function(){return this.nbDatablocks},b.prototype.isCompact=function(){return this.compact},b}(lx),lA=function(){function a(b,c,d,e){this.image=b,this.height=b.getHeight(),this.width=b.getWidth(),null==c&&(c=a.INIT_SIZE),null==d&&(d=b.getWidth()/2|0),null==e&&(e=b.getHeight()/2|0);var f=c/2|0;if(this.leftInit=d-f,this.rightInit=d+f,this.upInit=e-f,this.downInit=e+f,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new k_}return a.prototype.detect=function(){for(var a=this.leftInit,b=this.rightInit,c=this.upInit,d=this.downInit,e=!1,f=!0,g=!1,h=!1,i=!1,j=!1,k=!1,l=this.width,m=this.height;f;){f=!1;for(var n=!0;(n||!h)&&b<l;)(n=this.containsBlackPoint(c,d,b,!1))?(b++,f=!0,h=!0):!h&&b++;if(b>=l){e=!0;break}for(var o=!0;(o||!i)&&d<m;)(o=this.containsBlackPoint(a,b,d,!0))?(d++,f=!0,i=!0):!i&&d++;if(d>=m){e=!0;break}for(var p=!0;(p||!j)&&a>=0;)(p=this.containsBlackPoint(c,d,a,!1))?(a--,f=!0,j=!0):!j&&a--;if(a<0){e=!0;break}for(var q=!0;(q||!k)&&c>=0;)(q=this.containsBlackPoint(a,b,c,!0))?(c--,f=!0,k=!0):!k&&c--;if(c<0){e=!0;break}f&&(g=!0)}if(!e&&g){for(var r=b-a,s=null,t=1;null===s&&t<r;t++)s=this.getBlackPointOnSegment(a,d-t,a+t,d);if(null==s)throw new k_;for(var u=null,t=1;null===u&&t<r;t++)u=this.getBlackPointOnSegment(a,c+t,a+t,c);if(null==u)throw new k_;for(var v=null,t=1;null===v&&t<r;t++)v=this.getBlackPointOnSegment(b,c+t,b-t,c);if(null==v)throw new k_;for(var w=null,t=1;null===w&&t<r;t++)w=this.getBlackPointOnSegment(b,d-t,b-t,d);if(null==w)throw new k_;return this.centerEdges(w,s,v,u)}throw new k_},a.prototype.getBlackPointOnSegment=function(a,b,c,d){for(var e=lu.round(lu.distance(a,b,c,d)),f=(c-a)/e,g=(d-b)/e,h=this.image,i=0;i<e;i++){var j=lu.round(a+i*f),k=lu.round(b+i*g);if(h.get(j,k))return new lw(j,k)}return null},a.prototype.centerEdges=function(b,c,d,e){var f=b.getX(),g=b.getY(),h=c.getX(),i=c.getY(),j=d.getX(),k=d.getY(),l=e.getX(),m=e.getY(),n=a.CORR;return f<this.width/2?[new lw(l-n,m+n),new lw(h+n,i+n),new lw(j-n,k-n),new lw(f+n,g-n)]:[new lw(l+n,m+n),new lw(h+n,i-n),new lw(j-n,k+n),new lw(f-n,g-n)]},a.prototype.containsBlackPoint=function(a,b,c,d){var e=this.image;if(d){for(var f=a;f<=b;f++)if(e.get(f,c))return!0}else for(var g=a;g<=b;g++)if(e.get(c,g))return!0;return!1},a.INIT_SIZE=10,a.CORR=1,a}(),lB=function(){function a(){}return a.checkAndNudgePoints=function(a,b){for(var c=a.getWidth(),d=a.getHeight(),e=!0,f=0;f<b.length&&e;f+=2){var g=Math.floor(b[f]),h=Math.floor(b[f+1]);if(g<-1||g>c||h<-1||h>d)throw new k_;e=!1,-1===g?(b[f]=0,e=!0):g===c&&(b[f]=c-1,e=!0),-1===h?(b[f+1]=0,e=!0):h===d&&(b[f+1]=d-1,e=!0)}e=!0;for(var f=b.length-2;f>=0&&e;f-=2){var g=Math.floor(b[f]),h=Math.floor(b[f+1]);if(g<-1||g>c||h<-1||h>d)throw new k_;e=!1,-1===g?(b[f]=0,e=!0):g===c&&(b[f]=c-1,e=!0),-1===h?(b[f+1]=0,e=!0):h===d&&(b[f+1]=d-1,e=!0)}},a}(),lC=function(){function a(a,b,c,d,e,f,g,h,i){this.a11=a,this.a21=b,this.a31=c,this.a12=d,this.a22=e,this.a32=f,this.a13=g,this.a23=h,this.a33=i}return a.quadrilateralToQuadrilateral=function(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=a.quadrilateralToSquare(b,c,d,e,f,g,h,i);return a.squareToQuadrilateral(j,k,l,m,n,o,p,q).times(r)},a.prototype.transformPoints=function(a){for(var b=a.length,c=this.a11,d=this.a12,e=this.a13,f=this.a21,g=this.a22,h=this.a23,i=this.a31,j=this.a32,k=this.a33,l=0;l<b;l+=2){var m=a[l],n=a[l+1],o=e*m+h*n+k;a[l]=(c*m+f*n+i)/o,a[l+1]=(d*m+g*n+j)/o}},a.prototype.transformPointsWithValues=function(a,b){for(var c=this.a11,d=this.a12,e=this.a13,f=this.a21,g=this.a22,h=this.a23,i=this.a31,j=this.a32,k=this.a33,l=a.length,m=0;m<l;m++){var n=a[m],o=b[m],p=e*n+h*o+k;a[m]=(c*n+f*o+i)/p,b[m]=(d*n+g*o+j)/p}},a.squareToQuadrilateral=function(b,c,d,e,f,g,h,i){var j=b-d+f-h,k=c-e+g-i;if(0===j&&0===k)return new a(d-b,f-d,b,e-c,g-e,c,0,0,1);var l=d-f,m=h-f,n=e-g,o=i-g,p=l*o-m*n,q=(j*o-m*k)/p,r=(l*k-j*n)/p;return new a(d-b+q*d,h-b+r*h,b,e-c+q*e,i-c+r*i,c,q,r,1)},a.quadrilateralToSquare=function(b,c,d,e,f,g,h,i){return a.squareToQuadrilateral(b,c,d,e,f,g,h,i).buildAdjoint()},a.prototype.buildAdjoint=function(){return new a(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},a.prototype.times=function(b){return new a(this.a11*b.a11+this.a21*b.a12+this.a31*b.a13,this.a11*b.a21+this.a21*b.a22+this.a31*b.a23,this.a11*b.a31+this.a21*b.a32+this.a31*b.a33,this.a12*b.a11+this.a22*b.a12+this.a32*b.a13,this.a12*b.a21+this.a22*b.a22+this.a32*b.a23,this.a12*b.a31+this.a22*b.a32+this.a32*b.a33,this.a13*b.a11+this.a23*b.a12+this.a33*b.a13,this.a13*b.a21+this.a23*b.a22+this.a33*b.a23,this.a13*b.a31+this.a23*b.a32+this.a33*b.a33)},a}(),lD=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),lE=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return lD(b,a),b.prototype.sampleGrid=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t=lC.quadrilateralToQuadrilateral(d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s);return this.sampleGridWithTransform(a,b,c,t)},b.prototype.sampleGridWithTransform=function(a,b,c,d){if(b<=0||c<=0)throw new k_;for(var e=new kZ(b,c),f=new Float32Array(2*b),g=0;g<c;g++){for(var h=f.length,i=g+.5,j=0;j<h;j+=2)f[j]=j/2+.5,f[j+1]=i;d.transformPoints(f),lB.checkAndNudgePoints(a,f);try{for(var j=0;j<h;j+=2)a.get(Math.floor(f[j]),Math.floor(f[j+1]))&&e.set(j/2,g)}catch(a){throw new k_}}return e},b}(lB),lF=function(){function a(){}return a.setGridSampler=function(b){a.gridSampler=b},a.getInstance=function(){return a.gridSampler},a.gridSampler=new lE,a}(),lG=function(){function a(a,b){this.x=a,this.y=b}return a.prototype.toResultPoint=function(){return new lw(this.getX(),this.getY())},a.prototype.getX=function(){return this.x},a.prototype.getY=function(){return this.y},a}(),lH=function(){function a(a){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=a}return a.prototype.detect=function(){return this.detectMirror(!1)},a.prototype.detectMirror=function(a){var b=this.getMatrixCenter(),c=this.getBullsEyeCorners(b);if(a){var d=c[0];c[0]=c[2],c[2]=d}return this.extractParameters(c),new lz(this.sampleGrid(this.image,c[this.shift%4],c[(this.shift+1)%4],c[(this.shift+2)%4],c[(this.shift+3)%4]),this.getMatrixCornerPoints(c),this.compact,this.nbDataBlocks,this.nbLayers)},a.prototype.extractParameters=function(a){if(!this.isValidPoint(a[0])||!this.isValidPoint(a[1])||!this.isValidPoint(a[2])||!this.isValidPoint(a[3]))throw new k_;var b=2*this.nbCenterLayers,c=new Int32Array([this.sampleLine(a[0],a[1],b),this.sampleLine(a[1],a[2],b),this.sampleLine(a[2],a[3],b),this.sampleLine(a[3],a[0],b)]);this.shift=this.getRotation(c,b);for(var d=0,e=0;e<4;e++){var f=c[(this.shift+e)%4];this.compact?(d<<=7,d+=f>>1&127):(d<<=10,d+=(f>>2&992)+(f>>1&31))}var g=this.getCorrectedParameterData(d,this.compact);this.compact?(this.nbLayers=(g>>6)+1,this.nbDataBlocks=(63&g)+1):(this.nbLayers=(g>>11)+1,this.nbDataBlocks=(2047&g)+1)},a.prototype.getRotation=function(a,b){var c=0;a.forEach(function(a,d,e){c=(c<<3)+((a>>b-2<<1)+(1&a))}),c=((1&c)<<11)+(c>>1);for(var d=0;d<4;d++)if(2>=kN.bitCount(c^this.EXPECTED_CORNER_BITS[d]))return d;throw new k_},a.prototype.getCorrectedParameterData=function(a,b){b?(c=7,d=2):(c=10,d=4);for(var c,d,e=c-d,f=new Int32Array(c),g=c-1;g>=0;--g)f[g]=15&a,a>>=4;try{new ls(ln.AZTEC_PARAM).decode(f,e)}catch(a){throw new k_}for(var h=0,g=0;g<d;g++)h=(h<<4)+f[g];return h},a.prototype.getBullsEyeCorners=function(a){var b=a,c=a,d=a,e=a,f=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var g=this.getFirstDifferent(b,f,1,-1),h=this.getFirstDifferent(c,f,1,1),i=this.getFirstDifferent(d,f,-1,1),j=this.getFirstDifferent(e,f,-1,-1);if(this.nbCenterLayers>2){var k=this.distancePoint(j,g)*this.nbCenterLayers/(this.distancePoint(e,b)*(this.nbCenterLayers+2));if(k<.75||k>1.25||!this.isWhiteOrBlackRectangle(g,h,i,j))break}b=g,c=h,d=i,e=j,f=!f}if(5!==this.nbCenterLayers&&7!==this.nbCenterLayers)throw new k_;this.compact=5===this.nbCenterLayers;var l=new lw(b.getX()+.5,b.getY()-.5),m=new lw(c.getX()+.5,c.getY()+.5),n=new lw(d.getX()-.5,d.getY()+.5),o=new lw(e.getX()-.5,e.getY()-.5);return this.expandSquare([l,m,n,o],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},a.prototype.getMatrixCenter=function(){try{var a,b,c,d,e=new lA(this.image).detect();a=e[0],b=e[1],c=e[2],d=e[3]}catch(e){var f=this.image.getWidth()/2,g=this.image.getHeight()/2;a=this.getFirstDifferent(new lG(f+7,g-7),!1,1,-1).toResultPoint(),b=this.getFirstDifferent(new lG(f+7,g+7),!1,1,1).toResultPoint(),c=this.getFirstDifferent(new lG(f-7,g+7),!1,-1,1).toResultPoint(),d=this.getFirstDifferent(new lG(f-7,g-7),!1,-1,-1).toResultPoint()}var h=lu.round((a.getX()+d.getX()+b.getX()+c.getX())/4),i=lu.round((a.getY()+d.getY()+b.getY()+c.getY())/4);try{var e=new lA(this.image,15,h,i).detect();a=e[0],b=e[1],c=e[2],d=e[3]}catch(e){a=this.getFirstDifferent(new lG(h+7,i-7),!1,1,-1).toResultPoint(),b=this.getFirstDifferent(new lG(h+7,i+7),!1,1,1).toResultPoint(),c=this.getFirstDifferent(new lG(h-7,i+7),!1,-1,1).toResultPoint(),d=this.getFirstDifferent(new lG(h-7,i-7),!1,-1,-1).toResultPoint()}return new lG(h=lu.round((a.getX()+d.getX()+b.getX()+c.getX())/4),i=lu.round((a.getY()+d.getY()+b.getY()+c.getY())/4))},a.prototype.getMatrixCornerPoints=function(a){return this.expandSquare(a,2*this.nbCenterLayers,this.getDimension())},a.prototype.sampleGrid=function(a,b,c,d,e){var f=lF.getInstance(),g=this.getDimension(),h=g/2-this.nbCenterLayers,i=g/2+this.nbCenterLayers;return f.sampleGrid(a,g,g,h,h,i,h,i,i,h,i,b.getX(),b.getY(),c.getX(),c.getY(),d.getX(),d.getY(),e.getX(),e.getY())},a.prototype.sampleLine=function(a,b,c){for(var d=0,e=this.distanceResultPoint(a,b),f=e/c,g=a.getX(),h=a.getY(),i=f*(b.getX()-a.getX())/e,j=f*(b.getY()-a.getY())/e,k=0;k<c;k++)this.image.get(lu.round(g+k*i),lu.round(h+k*j))&&(d|=1<<c-k-1);return d},a.prototype.isWhiteOrBlackRectangle=function(a,b,c,d){a=new lG(a.getX()-3,a.getY()+3),b=new lG(b.getX()-3,b.getY()-3),c=new lG(c.getX()+3,c.getY()-3),d=new lG(d.getX()+3,d.getY()+3);var e=this.getColor(d,a);if(0===e)return!1;var f=this.getColor(a,b);return f===e&&(f=this.getColor(b,c))===e&&(f=this.getColor(c,d))===e},a.prototype.getColor=function(a,b){for(var c=this.distancePoint(a,b),d=(b.getX()-a.getX())/c,e=(b.getY()-a.getY())/c,f=0,g=a.getX(),h=a.getY(),i=this.image.get(a.getX(),a.getY()),j=Math.ceil(c),k=0;k<j;k++)g+=d,h+=e,this.image.get(lu.round(g),lu.round(h))!==i&&f++;var l=f/c;return l>.1&&l<.9?0:l<=.1===i?1:-1},a.prototype.getFirstDifferent=function(a,b,c,d){for(var e=a.getX()+c,f=a.getY()+d;this.isValid(e,f)&&this.image.get(e,f)===b;)e+=c,f+=d;for(e-=c,f-=d;this.isValid(e,f)&&this.image.get(e,f)===b;)e+=c;for(e-=c;this.isValid(e,f)&&this.image.get(e,f)===b;)f+=d;return new lG(e,f-=d)},a.prototype.expandSquare=function(a,b,c){var d=c/(2*b),e=a[0].getX()-a[2].getX(),f=a[0].getY()-a[2].getY(),g=(a[0].getX()+a[2].getX())/2,h=(a[0].getY()+a[2].getY())/2,i=new lw(g+d*e,h+d*f),j=new lw(g-d*e,h-d*f);return e=a[1].getX()-a[3].getX(),f=a[1].getY()-a[3].getY(),[i,new lw((g=(a[1].getX()+a[3].getX())/2)+d*e,(h=(a[1].getY()+a[3].getY())/2)+d*f),j,new lw(g-d*e,h-d*f)]},a.prototype.isValid=function(a,b){return a>=0&&a<this.image.getWidth()&&b>0&&b<this.image.getHeight()},a.prototype.isValidPoint=function(a){var b=lu.round(a.getX()),c=lu.round(a.getY());return this.isValid(b,c)},a.prototype.distancePoint=function(a,b){return lu.distance(a.getX(),a.getY(),b.getX(),b.getY())},a.prototype.distanceResultPoint=function(a,b){return lu.distance(a.getX(),a.getY(),b.getX(),b.getY())},a.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(kN.truncDivision(this.nbLayers-4,8)+1)+15},a}(),lI=function(){function a(){}return a.prototype.decode=function(a,b){void 0===b&&(b=null);var c=null,d=new lH(a.getBlackMatrix()),e=null,f=null;try{var g=d.detectMirror(!1);e=g.getPoints(),this.reportFoundResultPoints(b,e),f=new lt().decode(g)}catch(a){c=a}if(null==f)try{var g=d.detectMirror(!0);e=g.getPoints(),this.reportFoundResultPoints(b,e),f=new lt().decode(g)}catch(a){if(null!=c)throw c;throw a}var h=new le(f.getText(),f.getRawBytes(),f.getNumBits(),e,lf.AZTEC,kG.currentTimeMillis()),i=f.getByteSegments();null!=i&&h.putMetadata(lg.BYTE_SEGMENTS,i);var j=f.getECLevel();return null!=j&&h.putMetadata(lg.ERROR_CORRECTION_LEVEL,j),h},a.prototype.reportFoundResultPoints=function(a,b){if(null!=a){var c=a.get(kP.NEED_RESULT_POINT_CALLBACK);null!=c&&b.forEach(function(a,b,d){c.foundPossibleResultPoint(a)})}},a.prototype.reset=function(){},a}(),lJ=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();!function(a){lJ(function(b){return void 0===b&&(b=500),a.call(this,new lI,b)||this},a)}(ld);var lK=function(){function a(){}return a.prototype.decode=function(a,b){try{return this.doDecode(a,b)}catch(j){if(b&&!0===b.get(kP.TRY_HARDER)&&a.isRotateSupported()){var c=a.rotateCounterClockwise(),d=this.doDecode(c,b),e=d.getResultMetadata(),f=270;null!==e&&!0===e.get(lg.ORIENTATION)&&(f+=e.get(lg.ORIENTATION)%360),d.putMetadata(lg.ORIENTATION,f);var g=d.getResultPoints();if(null!==g)for(var h=c.getHeight(),i=0;i<g.length;i++)g[i]=new lw(h-g[i].getY()-1,g[i].getX());return d}throw new k_}},a.prototype.reset=function(){},a.prototype.doDecode=function(a,b){var c,d=a.getWidth(),e=a.getHeight(),f=new kO(d),g=b&&!0===b.get(kP.TRY_HARDER),h=Math.max(1,e>>(g?8:5));c=g?e:15;for(var i=Math.trunc(e/2),j=0;j<c;j++){var k=Math.trunc((j+1)/2),l=i+h*((1&j)==0?k:-k);if(l<0||l>=e)break;try{f=a.getBlackRow(l,f)}catch(a){continue}for(var m=this,n=0;n<2;n++){var o=function(a){if(1===a&&(f.reverse(),b&&!0===b.get(kP.NEED_RESULT_POINT_CALLBACK))){var c=new Map;b.forEach(function(a,b){return c.set(b,a)}),c.delete(kP.NEED_RESULT_POINT_CALLBACK),b=c}try{var e=m.decodeRow(l,f,b);if(1===a){e.putMetadata(lg.ORIENTATION,180);var g=e.getResultPoints();null!==g&&(g[0]=new lw(d-g[0].getX()-1,g[0].getY()),g[1]=new lw(d-g[1].getX()-1,g[1].getY()))}return{value:e}}catch(a){}}(n);if("object"==typeof o)return o.value}}throw new k_},a.recordPattern=function(a,b,c){for(var d=c.length,e=0;e<d;e++)c[e]=0;var f=a.getSize();if(b>=f)throw new k_;for(var g=!a.get(b),h=0,i=b;i<f;){if(a.get(i)!==g)c[h]++;else if(++h===d)break;else c[h]=1,g=!g;i++}if(h!==d&&(h!==d-1||i!==f))throw new k_},a.recordPatternInReverse=function(b,c,d){for(var e=d.length,f=b.get(c);c>0&&e>=0;)b.get(--c)!==f&&(e--,f=!f);if(e>=0)throw new k_;a.recordPattern(b,c+1,d)},a.patternMatchVariance=function(a,b,c){for(var d=a.length,e=0,f=0,g=0;g<d;g++)e+=a[g],f+=b[g];if(e<f)return 1/0;var h=e/f;c*=h;for(var i=0,j=0;j<d;j++){var k=a[j],l=b[j]*h,m=k>l?k-l:l-k;if(m>c)return 1/0;i+=m}return i/e},a}(),lL=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),lM=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return lL(b,a),b.findStartPattern=function(a){for(var c=a.getSize(),d=a.getNextSet(0),e=0,f=Int32Array.from([0,0,0,0,0,0]),g=d,h=!1,i=d;i<c;i++)if(a.get(i)!==h)f[e]++;else{if(5===e){for(var j=b.MAX_AVG_VARIANCE,k=-1,l=b.CODE_START_A;l<=b.CODE_START_C;l++){var m=lK.patternMatchVariance(f,b.CODE_PATTERNS[l],b.MAX_INDIVIDUAL_VARIANCE);m<j&&(j=m,k=l)}if(k>=0&&a.isRange(Math.max(0,g-(i-g)/2),g,!1))return Int32Array.from([g,i,k]);g+=f[0]+f[1],(f=f.slice(2,f.length))[e-1]=0,f[e]=0,e--}else e++;f[e]=1,h=!h}throw new k_},b.decodeCode=function(a,c,d){lK.recordPattern(a,d,c);for(var e=b.MAX_AVG_VARIANCE,f=-1,g=0;g<b.CODE_PATTERNS.length;g++){var h=b.CODE_PATTERNS[g],i=this.patternMatchVariance(c,h,b.MAX_INDIVIDUAL_VARIANCE);i<e&&(e=i,f=g)}if(f>=0)return f;throw new k_},b.prototype.decodeRow=function(a,c,d){var e,f=d&&!0===d.get(kP.ASSUME_GS1),g=b.findStartPattern(c),h=g[2],i=0,j=new Uint8Array(20);switch(j[i++]=h,h){case b.CODE_START_A:e=b.CODE_CODE_A;break;case b.CODE_START_B:e=b.CODE_CODE_B;break;case b.CODE_START_C:e=b.CODE_CODE_C;break;default:throw new kR}for(var k=!1,l=!1,m="",n=g[0],o=g[1],p=Int32Array.from([0,0,0,0,0,0]),q=0,r=0,s=h,t=0,u=!0,v=!1,w=!1;!k;){var x=l;switch(l=!1,q=r,r=b.decodeCode(c,p,o),j[i++]=r,r!==b.CODE_STOP&&(u=!0),r!==b.CODE_STOP&&(s+=++t*r),n=o,o+=p.reduce(function(a,b){return a+b},0),r){case b.CODE_START_A:case b.CODE_START_B:case b.CODE_START_C:throw new kR}switch(e){case b.CODE_CODE_A:if(r<64)w===v?m+=String.fromCharCode(32+r):m+=String.fromCharCode(32+r+128),w=!1;else if(r<96)w===v?m+=String.fromCharCode(r-64):m+=String.fromCharCode(r+64),w=!1;else switch(r!==b.CODE_STOP&&(u=!1),r){case b.CODE_FNC_1:f&&(0===m.length?m+="]C1":m+="\x1d");break;case b.CODE_FNC_2:case b.CODE_FNC_3:break;case b.CODE_FNC_4_A:!v&&w?(v=!0,w=!1):v&&w?(v=!1,w=!1):w=!0;break;case b.CODE_SHIFT:l=!0,e=b.CODE_CODE_B;break;case b.CODE_CODE_B:e=b.CODE_CODE_B;break;case b.CODE_CODE_C:e=b.CODE_CODE_C;break;case b.CODE_STOP:k=!0}break;case b.CODE_CODE_B:if(r<96)w===v?m+=String.fromCharCode(32+r):m+=String.fromCharCode(32+r+128),w=!1;else switch(r!==b.CODE_STOP&&(u=!1),r){case b.CODE_FNC_1:f&&(0===m.length?m+="]C1":m+="\x1d");break;case b.CODE_FNC_2:case b.CODE_FNC_3:break;case b.CODE_FNC_4_B:!v&&w?(v=!0,w=!1):v&&w?(v=!1,w=!1):w=!0;break;case b.CODE_SHIFT:l=!0,e=b.CODE_CODE_A;break;case b.CODE_CODE_A:e=b.CODE_CODE_A;break;case b.CODE_CODE_C:e=b.CODE_CODE_C;break;case b.CODE_STOP:k=!0}break;case b.CODE_CODE_C:if(r<100)r<10&&(m+="0"),m+=r;else switch(r!==b.CODE_STOP&&(u=!1),r){case b.CODE_FNC_1:f&&(0===m.length?m+="]C1":m+="\x1d");break;case b.CODE_CODE_A:e=b.CODE_CODE_A;break;case b.CODE_CODE_B:e=b.CODE_CODE_B;break;case b.CODE_STOP:k=!0}}x&&(e=e===b.CODE_CODE_A?b.CODE_CODE_B:b.CODE_CODE_A)}var y=o-n;if(o=c.getNextUnset(o),!c.isRange(o,Math.min(c.getSize(),o+(o-n)/2),!1))throw new k_;if((s-=t*q)%103!==q)throw new kE;var z=m.length;if(0===z)throw new k_;z>0&&u&&(m=e===b.CODE_CODE_C?m.substring(0,z-2):m.substring(0,z-1));for(var A=(g[1]+g[0])/2,B=n+y/2,C=j.length,D=new Uint8Array(C),E=0;E<C;E++)D[E]=j[E];return new le(m,D,0,[new lw(A,a),new lw(B,a)],lf.CODE_128,new Date().getTime())},b.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],b.MAX_AVG_VARIANCE=.25,b.MAX_INDIVIDUAL_VARIANCE=.7,b.CODE_SHIFT=98,b.CODE_CODE_C=99,b.CODE_CODE_B=100,b.CODE_CODE_A=101,b.CODE_FNC_1=102,b.CODE_FNC_2=97,b.CODE_FNC_3=96,b.CODE_FNC_4_A=101,b.CODE_FNC_4_B=100,b.CODE_START_A=103,b.CODE_START_B=104,b.CODE_START_C=105,b.CODE_STOP=106,b}(lK),lN=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),lO=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},lP=function(a){function b(b,c){void 0===b&&(b=!1),void 0===c&&(c=!1);var d=a.call(this)||this;return d.usingCheckDigit=b,d.extendedMode=c,d.decodeRowResult="",d.counters=new Int32Array(9),d}return lN(b,a),b.prototype.decodeRow=function(a,c,d){var e,f,g,h,i,j,k,l=this.counters;l.fill(0),this.decodeRowResult="";var m=b.findAsteriskPattern(c,l),n=c.getNextSet(m[1]),o=c.getSize();do{b.recordPattern(c,n,l);var p=b.toNarrowWidePattern(l);if(p<0)throw new k_;i=b.patternToChar(p),this.decodeRowResult+=i,j=n;try{for(var q=(e=void 0,lO(l)),r=q.next();!r.done;r=q.next()){var s=r.value;n+=s}}catch(a){e={error:a}}finally{try{r&&!r.done&&(f=q.return)&&f.call(q)}finally{if(e)throw e.error}}n=c.getNextSet(n)}while("*"!==i);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var t=0;try{for(var u=lO(l),v=u.next();!v.done;v=u.next()){var s=v.value;t+=s}}catch(a){g={error:a}}finally{try{v&&!v.done&&(h=u.return)&&h.call(u)}finally{if(g)throw g.error}}var w=n-j-t;if(n!==o&&2*w<t)throw new k_;if(this.usingCheckDigit){for(var x=this.decodeRowResult.length-1,y=0,z=0;z<x;z++)y+=b.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(z));if(this.decodeRowResult.charAt(x)!==b.ALPHABET_STRING.charAt(y%43))throw new kE;this.decodeRowResult=this.decodeRowResult.substring(0,x)}if(0===this.decodeRowResult.length)throw new k_;k=this.extendedMode?b.decodeExtended(this.decodeRowResult):this.decodeRowResult;var A=(m[1]+m[0])/2,B=j+t/2;return new le(k,null,0,[new lw(A,a),new lw(B,a)],lf.CODE_39,new Date().getTime())},b.findAsteriskPattern=function(a,c){for(var d=a.getSize(),e=a.getNextSet(0),f=0,g=e,h=!1,i=c.length,j=e;j<d;j++)if(a.get(j)!==h)c[f]++;else{if(f===i-1){if(this.toNarrowWidePattern(c)===b.ASTERISK_ENCODING&&a.isRange(Math.max(0,g-Math.floor((j-g)/2)),g,!1))return[g,j];g+=c[0]+c[1],c.copyWithin(0,2,2+f-1),c[f-1]=0,c[f]=0,f--}else f++;c[f]=1,h=!h}throw new k_},b.toNarrowWidePattern=function(a){var b,c,d,e=a.length,f=0;do{var g=0x7fffffff;try{for(var h=(b=void 0,lO(a)),i=h.next();!i.done;i=h.next()){var j=i.value;j<g&&j>f&&(g=j)}}catch(a){b={error:a}}finally{try{i&&!i.done&&(c=h.return)&&c.call(h)}finally{if(b)throw b.error}}f=g,d=0;for(var k=0,l=0,m=0;m<e;m++){var j=a[m];j>f&&(l|=1<<e-1-m,d++,k+=j)}if(3===d){for(var m=0;m<e&&d>0;m++){var j=a[m];if(j>f&&(d--,2*j>=k))return -1}return l}}while(d>3);return -1},b.patternToChar=function(a){for(var c=0;c<b.CHARACTER_ENCODINGS.length;c++)if(b.CHARACTER_ENCODINGS[c]===a)return b.ALPHABET_STRING.charAt(c);if(a===b.ASTERISK_ENCODING)return"*";throw new k_},b.decodeExtended=function(a){for(var b=a.length,c="",d=0;d<b;d++){var e=a.charAt(d);if("+"===e||"$"===e||"%"===e||"/"===e){var f=a.charAt(d+1),g="\0";switch(e){case"+":if(f>="A"&&f<="Z")g=String.fromCharCode(f.charCodeAt(0)+32);else throw new kR;break;case"$":if(f>="A"&&f<="Z")g=String.fromCharCode(f.charCodeAt(0)-64);else throw new kR;break;case"%":if(f>="A"&&f<="E")g=String.fromCharCode(f.charCodeAt(0)-38);else if(f>="F"&&f<="J")g=String.fromCharCode(f.charCodeAt(0)-11);else if(f>="K"&&f<="O")g=String.fromCharCode(f.charCodeAt(0)+16);else if(f>="P"&&f<="T")g=String.fromCharCode(f.charCodeAt(0)+43);else if("U"===f)g="\0";else if("V"===f)g="@";else if("W"===f)g="`";else if("X"===f||"Y"===f||"Z"===f)g="";else throw new kR;break;case"/":if(f>="A"&&f<="O")g=String.fromCharCode(f.charCodeAt(0)-32);else if("Z"===f)g=":";else throw new kR}c+=g,d++}else c+=e}return c},b.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",b.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],b.ASTERISK_ENCODING=148,b}(lK),lQ=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),lR=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},lS=function(a){function b(){var b=a.call(this)||this;return b.decodeRowResult="",b.counters=new Int32Array(6),b}return lQ(b,a),b.prototype.decodeRow=function(a,c,d){var e,f,g,h,i,j,k=this.findAsteriskPattern(c),l=c.getNextSet(k[1]),m=c.getSize(),n=this.counters;n.fill(0),this.decodeRowResult="";do{b.recordPattern(c,l,n);var o=this.toPattern(n);if(o<0)throw new k_;i=this.patternToChar(o),this.decodeRowResult+=i,j=l;try{for(var p=(e=void 0,lR(n)),q=p.next();!q.done;q=p.next()){var r=q.value;l+=r}}catch(a){e={error:a}}finally{try{q&&!q.done&&(f=p.return)&&f.call(p)}finally{if(e)throw e.error}}l=c.getNextSet(l)}while("*"!==i);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var s=0;try{for(var t=lR(n),u=t.next();!u.done;u=t.next()){var r=u.value;s+=r}}catch(a){g={error:a}}finally{try{u&&!u.done&&(h=t.return)&&h.call(t)}finally{if(g)throw g.error}}if(l===m||!c.get(l)||this.decodeRowResult.length<2)throw new k_;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var v=this.decodeExtended(this.decodeRowResult),w=(k[1]+k[0])/2,x=j+s/2;return new le(v,null,0,[new lw(w,a),new lw(x,a)],lf.CODE_93,new Date().getTime())},b.prototype.findAsteriskPattern=function(a){var c=a.getSize(),d=a.getNextSet(0);this.counters.fill(0);for(var e=this.counters,f=d,g=!1,h=e.length,i=0,j=d;j<c;j++)if(a.get(j)!==g)e[i]++;else{if(i===h-1){if(this.toPattern(e)===b.ASTERISK_ENCODING)return new Int32Array([f,j]);f+=e[0]+e[1],e.copyWithin(0,2,2+i-1),e[i-1]=0,e[i]=0,i--}else i++;e[i]=1,g=!g}throw new k_},b.prototype.toPattern=function(a){var b,c,d=0;try{for(var e=lR(a),f=e.next();!f.done;f=e.next()){var g=f.value;d+=g}}catch(a){b={error:a}}finally{try{f&&!f.done&&(c=e.return)&&c.call(e)}finally{if(b)throw b.error}}for(var h=0,i=a.length,j=0;j<i;j++){var k=Math.round(9*a[j]/d);if(k<1||k>4)return -1;if((1&j)==0)for(var l=0;l<k;l++)h=h<<1|1;else h<<=k}return h},b.prototype.patternToChar=function(a){for(var c=0;c<b.CHARACTER_ENCODINGS.length;c++)if(b.CHARACTER_ENCODINGS[c]===a)return b.ALPHABET_STRING.charAt(c);throw new k_},b.prototype.decodeExtended=function(a){for(var b=a.length,c="",d=0;d<b;d++){var e=a.charAt(d);if(e>="a"&&e<="d"){if(d>=b-1)throw new kR;var f=a.charAt(d+1),g="\0";switch(e){case"d":if(f>="A"&&f<="Z")g=String.fromCharCode(f.charCodeAt(0)+32);else throw new kR;break;case"a":if(f>="A"&&f<="Z")g=String.fromCharCode(f.charCodeAt(0)-64);else throw new kR;break;case"b":if(f>="A"&&f<="E")g=String.fromCharCode(f.charCodeAt(0)-38);else if(f>="F"&&f<="J")g=String.fromCharCode(f.charCodeAt(0)-11);else if(f>="K"&&f<="O")g=String.fromCharCode(f.charCodeAt(0)+16);else if(f>="P"&&f<="T")g=String.fromCharCode(f.charCodeAt(0)+43);else if("U"===f)g="\0";else if("V"===f)g="@";else if("W"===f)g="`";else if(f>="X"&&f<="Z")g="";else throw new kR;break;case"c":if(f>="A"&&f<="O")g=String.fromCharCode(f.charCodeAt(0)-32);else if("Z"===f)g=":";else throw new kR}c+=g,d++}else c+=e}return c},b.prototype.checkChecksums=function(a){var b=a.length;this.checkOneChecksum(a,b-2,20),this.checkOneChecksum(a,b-1,15)},b.prototype.checkOneChecksum=function(a,c,d){for(var e=1,f=0,g=c-1;g>=0;g--)f+=e*b.ALPHABET_STRING.indexOf(a.charAt(g)),++e>d&&(e=1);if(a.charAt(c)!==b.ALPHABET_STRING[f%47])throw new kE},b.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",b.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],b.ASTERISK_ENCODING=b.CHARACTER_ENCODINGS[47],b}(lK),lT=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),lU=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},lV=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.narrowLineWidth=-1,b}return lT(b,a),b.prototype.decodeRow=function(a,c,d){var e,f,g=this.decodeStart(c),h=this.decodeEnd(c),i=new kY;b.decodeMiddle(c,g[1],h[0],i);var j=i.toString(),k=null;null!=d&&(k=d.get(kP.ALLOWED_LENGTHS)),null==k&&(k=b.DEFAULT_ALLOWED_LENGTHS);var l=j.length,m=!1,n=0;try{for(var o=lU(k),p=o.next();!p.done;p=o.next()){var q=p.value;if(l===q){m=!0;break}q>n&&(n=q)}}catch(a){e={error:a}}finally{try{p&&!p.done&&(f=o.return)&&f.call(o)}finally{if(e)throw e.error}}if(!m&&l>n&&(m=!0),!m)throw new kR;return new le(j,null,0,[new lw(g[1],a),new lw(h[0],a)],lf.ITF,new Date().getTime())},b.decodeMiddle=function(a,c,d,e){var f=new Int32Array(10),g=new Int32Array(5),h=new Int32Array(5);for(f.fill(0),g.fill(0),h.fill(0);c<d;){lK.recordPattern(a,c,f);for(var i=0;i<5;i++){var j=2*i;g[i]=f[j],h[i]=f[j+1]}var k=b.decodeDigit(g);e.append(k.toString()),k=this.decodeDigit(h),e.append(k.toString()),f.forEach(function(a){c+=a})}},b.prototype.decodeStart=function(a){var c=b.skipWhiteSpace(a),d=b.findGuardPattern(a,c,b.START_PATTERN);return this.narrowLineWidth=(d[1]-d[0])/4,this.validateQuietZone(a,d[0]),d},b.prototype.validateQuietZone=function(a,b){var c=10*this.narrowLineWidth;c=c<b?c:b;for(var d=b-1;c>0&&d>=0&&!a.get(d);d--)c--;if(0!==c)throw new k_},b.skipWhiteSpace=function(a){var b=a.getSize(),c=a.getNextSet(0);if(c===b)throw new k_;return c},b.prototype.decodeEnd=function(a){a.reverse();try{var c=b.skipWhiteSpace(a),d=void 0;try{d=b.findGuardPattern(a,c,b.END_PATTERN_REVERSED[0])}catch(e){e instanceof k_&&(d=b.findGuardPattern(a,c,b.END_PATTERN_REVERSED[1]))}this.validateQuietZone(a,d[0]);var e=d[0];return d[0]=a.getSize()-d[1],d[1]=a.getSize()-e,d}finally{a.reverse()}},b.findGuardPattern=function(a,c,d){var e=d.length,f=new Int32Array(e),g=a.getSize(),h=!1,i=0,j=c;f.fill(0);for(var k=c;k<g;k++)if(a.get(k)!==h)f[i]++;else{if(i===e-1){if(lK.patternMatchVariance(f,d,b.MAX_INDIVIDUAL_VARIANCE)<b.MAX_AVG_VARIANCE)return[j,k];j+=f[0]+f[1],kG.arraycopy(f,2,f,0,i-1),f[i-1]=0,f[i]=0,i--}else i++;f[i]=1,h=!h}throw new k_},b.decodeDigit=function(a){for(var c=b.MAX_AVG_VARIANCE,d=-1,e=b.PATTERNS.length,f=0;f<e;f++){var g=b.PATTERNS[f],h=lK.patternMatchVariance(a,g,b.MAX_INDIVIDUAL_VARIANCE);h<c?(c=h,d=f):h===c&&(d=-1)}if(d>=0)return d%10;throw new k_},b.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],b.MAX_AVG_VARIANCE=.38,b.MAX_INDIVIDUAL_VARIANCE=.5,b.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],b.START_PATTERN=Int32Array.from([1,1,1,1]),b.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],b}(lK),lW=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),lX=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.decodeRowStringBuffer="",b}return lW(b,a),b.findStartGuardPattern=function(a){for(var c,d=!1,e=0,f=Int32Array.from([0,0,0]);!d;){f=Int32Array.from([0,0,0]);var g=(c=b.findGuardPattern(a,e,!1,this.START_END_PATTERN,f))[0],h=g-((e=c[1])-g);h>=0&&(d=a.isRange(h,g,!1))}return c},b.checkChecksum=function(a){return b.checkStandardUPCEANChecksum(a)},b.checkStandardUPCEANChecksum=function(a){var c=a.length;if(0===c)return!1;var d=parseInt(a.charAt(c-1),10);return b.getStandardUPCEANChecksum(a.substring(0,c-1))===d},b.getStandardUPCEANChecksum=function(a){for(var b=a.length,c=0,d=b-1;d>=0;d-=2){var e=a.charAt(d).charCodeAt(0)-48;if(e<0||e>9)throw new kR;c+=e}c*=3;for(var d=b-2;d>=0;d-=2){var e=a.charAt(d).charCodeAt(0)-48;if(e<0||e>9)throw new kR;c+=e}return(1e3-c)%10},b.decodeEnd=function(a,c){return b.findGuardPattern(a,c,!1,b.START_END_PATTERN,new Int32Array(b.START_END_PATTERN.length).fill(0))},b.findGuardPatternWithoutCounters=function(a,b,c,d){return this.findGuardPattern(a,b,c,d,new Int32Array(d.length))},b.findGuardPattern=function(a,c,d,e,f){var g=a.getSize();c=d?a.getNextUnset(c):a.getNextSet(c);for(var h=0,i=c,j=e.length,k=d,l=c;l<g;l++)if(a.get(l)!==k)f[h]++;else{if(h===j-1){if(lK.patternMatchVariance(f,e,b.MAX_INDIVIDUAL_VARIANCE)<b.MAX_AVG_VARIANCE)return Int32Array.from([i,l]);i+=f[0]+f[1];for(var m=f.slice(2,f.length),n=0;n<h-1;n++)f[n]=m[n];f[h-1]=0,f[h]=0,h--}else h++;f[h]=1,k=!k}throw new k_},b.decodeDigit=function(a,c,d,e){this.recordPattern(a,d,c);for(var f=this.MAX_AVG_VARIANCE,g=-1,h=e.length,i=0;i<h;i++){var j=e[i],k=lK.patternMatchVariance(c,j,b.MAX_INDIVIDUAL_VARIANCE);k<f&&(f=k,g=i)}if(g>=0)return g;throw new k_},b.MAX_AVG_VARIANCE=.48,b.MAX_INDIVIDUAL_VARIANCE=.7,b.START_END_PATTERN=Int32Array.from([1,1,1]),b.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),b.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),b.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],b}(lK),lY=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},lZ=function(){function a(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return a.prototype.decodeRow=function(b,c,d){var e=this.decodeRowStringBuffer,f=this.decodeMiddle(c,d,e),g=e.toString(),h=a.parseExtensionString(g),i=new le(g,null,0,[new lw((d[0]+d[1])/2,b),new lw(f,b)],lf.UPC_EAN_EXTENSION,new Date().getTime());return null!=h&&i.putAllMetadata(h),i},a.prototype.decodeMiddle=function(b,c,d){var e,f,g=this.decodeMiddleCounters;g[0]=0,g[1]=0,g[2]=0,g[3]=0;for(var h=b.getSize(),i=c[1],j=0,k=0;k<5&&i<h;k++){var l=lX.decodeDigit(b,g,i,lX.L_AND_G_PATTERNS);d+=String.fromCharCode(48+l%10);try{for(var m=(e=void 0,lY(g)),n=m.next();!n.done;n=m.next()){var o=n.value;i+=o}}catch(a){e={error:a}}finally{try{n&&!n.done&&(f=m.return)&&f.call(m)}finally{if(e)throw e.error}}l>=10&&(j|=1<<4-k),4!==k&&(i=b.getNextSet(i),i=b.getNextUnset(i))}if(5!==d.length)throw new k_;var p=this.determineCheckDigit(j);if(a.extensionChecksum(d.toString())!==p)throw new k_;return i},a.extensionChecksum=function(a){for(var b=a.length,c=0,d=b-2;d>=0;d-=2)c+=a.charAt(d).charCodeAt(0)-48;c*=3;for(var d=b-1;d>=0;d-=2)c+=a.charAt(d).charCodeAt(0)-48;return(c*=3)%10},a.prototype.determineCheckDigit=function(a){for(var b=0;b<10;b++)if(a===this.CHECK_DIGIT_ENCODINGS[b])return b;throw new k_},a.parseExtensionString=function(b){if(5!==b.length)return null;var c=a.parseExtension5String(b);return null==c?null:new Map([[lg.SUGGESTED_PRICE,c]])},a.parseExtension5String=function(a){switch(a.charAt(0)){case"0":b="\xa3";break;case"5":b="$";break;case"9":switch(a){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}b="";break;default:b=""}var b,c=parseInt(a.substring(1)),d=(c/100).toString(),e=c%100;return b+d+"."+(e<10?"0"+e:e.toString())},a}(),l$=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},l_=function(){function a(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return a.prototype.decodeRow=function(b,c,d){var e=this.decodeRowStringBuffer,f=this.decodeMiddle(c,d,e),g=e.toString(),h=a.parseExtensionString(g),i=new le(g,null,0,[new lw((d[0]+d[1])/2,b),new lw(f,b)],lf.UPC_EAN_EXTENSION,new Date().getTime());return null!=h&&i.putAllMetadata(h),i},a.prototype.decodeMiddle=function(a,b,c){var d,e,f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;for(var g=a.getSize(),h=b[1],i=0,j=0;j<2&&h<g;j++){var k=lX.decodeDigit(a,f,h,lX.L_AND_G_PATTERNS);c+=String.fromCharCode(48+k%10);try{for(var l=(d=void 0,l$(f)),m=l.next();!m.done;m=l.next()){var n=m.value;h+=n}}catch(a){d={error:a}}finally{try{m&&!m.done&&(e=l.return)&&e.call(l)}finally{if(d)throw d.error}}k>=10&&(i|=1<<1-j),1!==j&&(h=a.getNextSet(h),h=a.getNextUnset(h))}if(2!==c.length||parseInt(c.toString())%4!==i)throw new k_;return h},a.parseExtensionString=function(a){return 2!==a.length?null:new Map([[lg.ISSUE_NUMBER,parseInt(a)]])},a}(),l0=function(){function a(){}return a.decodeRow=function(a,b,c){var d=lX.findGuardPattern(b,c,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new lZ().decodeRow(a,b,d)}catch(c){return new l_().decodeRow(a,b,d)}},a.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),a}(),l1=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),l2=function(a){function b(){var c=a.call(this)||this;c.decodeRowStringBuffer="",b.L_AND_G_PATTERNS=b.L_PATTERNS.map(function(a){return Int32Array.from(a)});for(var d=10;d<20;d++){for(var e=b.L_PATTERNS[d-10],f=new Int32Array(e.length),g=0;g<e.length;g++)f[g]=e[e.length-g-1];b.L_AND_G_PATTERNS[d]=f}return c}return l1(b,a),b.prototype.decodeRow=function(a,c,d){var e=b.findStartGuardPattern(c),f=null==d?null:d.get(kP.NEED_RESULT_POINT_CALLBACK);if(null!=f){var g=new lw((e[0]+e[1])/2,a);f.foundPossibleResultPoint(g)}var h=this.decodeMiddle(c,e,this.decodeRowStringBuffer),i=h.rowOffset,j=h.resultString;if(null!=f){var k=new lw(i,a);f.foundPossibleResultPoint(k)}var l=b.decodeEnd(c,i);if(null!=f){var m=new lw((l[0]+l[1])/2,a);f.foundPossibleResultPoint(m)}var n=l[1],o=n+(n-l[0]);if(o>=c.getSize()||!c.isRange(n,o,!1))throw new k_;var p=j.toString();if(p.length<8)throw new kR;if(!b.checkChecksum(p))throw new kE;var q=(e[1]+e[0])/2,r=(l[1]+l[0])/2,s=this.getBarcodeFormat(),t=new le(p,null,0,[new lw(q,a),new lw(r,a)],s,new Date().getTime()),u=0;try{var v=l0.decodeRow(a,c,l[1]);t.putMetadata(lg.UPC_EAN_EXTENSION,v.getText()),t.putAllMetadata(v.getResultMetadata()),t.addResultPoints(v.getResultPoints()),u=v.getText().length}catch(a){}var w=null==d?null:d.get(kP.ALLOWED_EAN_EXTENSIONS);if(null!=w){var x=!1;for(var y in w)if(u.toString()===y){x=!0;break}if(!x)throw new k_}return s===lf.EAN_13||lf.UPC_A,t},b.checkChecksum=function(a){return b.checkStandardUPCEANChecksum(a)},b.checkStandardUPCEANChecksum=function(a){var c=a.length;if(0===c)return!1;var d=parseInt(a.charAt(c-1),10);return b.getStandardUPCEANChecksum(a.substring(0,c-1))===d},b.getStandardUPCEANChecksum=function(a){for(var b=a.length,c=0,d=b-1;d>=0;d-=2){var e=a.charAt(d).charCodeAt(0)-48;if(e<0||e>9)throw new kR;c+=e}c*=3;for(var d=b-2;d>=0;d-=2){var e=a.charAt(d).charCodeAt(0)-48;if(e<0||e>9)throw new kR;c+=e}return(1e3-c)%10},b.decodeEnd=function(a,c){return b.findGuardPattern(a,c,!1,b.START_END_PATTERN,new Int32Array(b.START_END_PATTERN.length).fill(0))},b}(lX),l3=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),l4=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},l5=function(a){function b(){var b=a.call(this)||this;return b.decodeMiddleCounters=Int32Array.from([0,0,0,0]),b}return l3(b,a),b.prototype.decodeMiddle=function(a,c,d){var e,f,g,h,i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var j=a.getSize(),k=c[1],l=0,m=0;m<6&&k<j;m++){var n=l2.decodeDigit(a,i,k,l2.L_AND_G_PATTERNS);d+=String.fromCharCode(48+n%10);try{for(var o=(e=void 0,l4(i)),p=o.next();!p.done;p=o.next()){var q=p.value;k+=q}}catch(a){e={error:a}}finally{try{p&&!p.done&&(f=o.return)&&f.call(o)}finally{if(e)throw e.error}}n>=10&&(l|=1<<5-m)}d=b.determineFirstDigit(d,l),k=l2.findGuardPattern(a,k,!0,l2.MIDDLE_PATTERN,new Int32Array(l2.MIDDLE_PATTERN.length).fill(0))[1];for(var m=0;m<6&&k<j;m++){var n=l2.decodeDigit(a,i,k,l2.L_PATTERNS);d+=String.fromCharCode(48+n);try{for(var r=(g=void 0,l4(i)),s=r.next();!s.done;s=r.next()){var q=s.value;k+=q}}catch(a){g={error:a}}finally{try{s&&!s.done&&(h=r.return)&&h.call(r)}finally{if(g)throw g.error}}}return{rowOffset:k,resultString:d}},b.prototype.getBarcodeFormat=function(){return lf.EAN_13},b.determineFirstDigit=function(a,b){for(var c=0;c<10;c++)if(b===this.FIRST_DIGIT_ENCODINGS[c])return String.fromCharCode(48+c)+a;throw new k_},b.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],b}(l2),l6=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),l7=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},l8=function(a){function b(){var b=a.call(this)||this;return b.decodeMiddleCounters=Int32Array.from([0,0,0,0]),b}return l6(b,a),b.prototype.decodeMiddle=function(a,b,c){var d,e,f,g,h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;for(var i=a.getSize(),j=b[1],k=0;k<4&&j<i;k++){var l=l2.decodeDigit(a,h,j,l2.L_PATTERNS);c+=String.fromCharCode(48+l);try{for(var m=(d=void 0,l7(h)),n=m.next();!n.done;n=m.next()){var o=n.value;j+=o}}catch(a){d={error:a}}finally{try{n&&!n.done&&(e=m.return)&&e.call(m)}finally{if(d)throw d.error}}}j=l2.findGuardPattern(a,j,!0,l2.MIDDLE_PATTERN,new Int32Array(l2.MIDDLE_PATTERN.length).fill(0))[1];for(var k=0;k<4&&j<i;k++){var l=l2.decodeDigit(a,h,j,l2.L_PATTERNS);c+=String.fromCharCode(48+l);try{for(var p=(f=void 0,l7(h)),q=p.next();!q.done;q=p.next()){var o=q.value;j+=o}}catch(a){f={error:a}}finally{try{q&&!q.done&&(g=p.return)&&g.call(p)}finally{if(f)throw f.error}}}return{rowOffset:j,resultString:c}},b.prototype.getBarcodeFormat=function(){return lf.EAN_8},b}(l2),l9=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),ma=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.ean13Reader=new l5,b}return l9(b,a),b.prototype.getBarcodeFormat=function(){return lf.UPC_A},b.prototype.decode=function(a,b){return this.maybeReturnResult(this.ean13Reader.decode(a))},b.prototype.decodeRow=function(a,b,c){return this.maybeReturnResult(this.ean13Reader.decodeRow(a,b,c))},b.prototype.decodeMiddle=function(a,b,c){return this.ean13Reader.decodeMiddle(a,b,c)},b.prototype.maybeReturnResult=function(a){var b=a.getText();if("0"===b.charAt(0)){var c=new le(b.substring(1),null,null,a.getResultPoints(),lf.UPC_A);return null!=a.getResultMetadata()&&c.putAllMetadata(a.getResultMetadata()),c}throw new k_},b.prototype.reset=function(){this.ean13Reader.reset()},b}(l2),mb=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),mc=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},md=function(a){function b(){var b=a.call(this)||this;return b.decodeMiddleCounters=new Int32Array(4),b}return mb(b,a),b.prototype.decodeMiddle=function(a,c,d){var e,f,g=this.decodeMiddleCounters.map(function(a){return a});g[0]=0,g[1]=0,g[2]=0,g[3]=0;for(var h=a.getSize(),i=c[1],j=0,k=0;k<6&&i<h;k++){var l=b.decodeDigit(a,g,i,b.L_AND_G_PATTERNS);d+=String.fromCharCode(48+l%10);try{for(var m=(e=void 0,mc(g)),n=m.next();!n.done;n=m.next()){var o=n.value;i+=o}}catch(a){e={error:a}}finally{try{n&&!n.done&&(f=m.return)&&f.call(m)}finally{if(e)throw e.error}}l>=10&&(j|=1<<5-k)}return b.determineNumSysAndCheckDigit(new kY(d),j),i},b.prototype.decodeEnd=function(a,c){return b.findGuardPatternWithoutCounters(a,c,!0,b.MIDDLE_END_PATTERN)},b.prototype.checkChecksum=function(a){return l2.checkChecksum(b.convertUPCEtoUPCA(a))},b.determineNumSysAndCheckDigit=function(a,b){for(var c=0;c<=1;c++)for(var d=0;d<10;d++)if(b===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[c][d]){a.insert(0,"0"+c),a.append("0"+d);return}throw k_.getNotFoundInstance()},b.prototype.getBarcodeFormat=function(){return lf.UPC_E},b.convertUPCEtoUPCA=function(a){var b=a.slice(1,7).split("").map(function(a){return a.charCodeAt(0)}),c=new kY;c.append(a.charAt(0));var d=b[5];switch(d){case 0:case 1:case 2:c.appendChars(b,0,2),c.append(d),c.append("0000"),c.appendChars(b,2,3);break;case 3:c.appendChars(b,0,3),c.append("00000"),c.appendChars(b,3,2);break;case 4:c.appendChars(b,0,4),c.append("00000"),c.append(b[4]);break;default:c.appendChars(b,0,5),c.append("0000"),c.append(d)}return a.length>=8&&c.append(a.charAt(7)),c.toString()},b.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),b.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],b}(l2),me=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),mf=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},mg=function(a){function b(b){var c=a.call(this)||this,d=null==b?null:b.get(kP.POSSIBLE_FORMATS),e=[];return null!=d&&(d.indexOf(lf.EAN_13)>-1&&e.push(new l5),d.indexOf(lf.UPC_A)>-1&&e.push(new ma),d.indexOf(lf.EAN_8)>-1&&e.push(new l8),d.indexOf(lf.UPC_E)>-1&&e.push(new md)),0===e.length&&(e.push(new l5),e.push(new ma),e.push(new l8),e.push(new md)),c.readers=e,c}return me(b,a),b.prototype.decodeRow=function(a,b,c){var d,e;try{for(var f=mf(this.readers),g=f.next();!g.done;g=f.next()){var h=g.value;try{var i=h.decodeRow(a,b,c),j=i.getBarcodeFormat()===lf.EAN_13&&"0"===i.getText().charAt(0),k=null==c?null:c.get(kP.POSSIBLE_FORMATS),l=null==k||k.includes(lf.UPC_A);if(j&&l){var m=i.getRawBytes(),n=new le(i.getText().substring(1),m,m?m.length:null,i.getResultPoints(),lf.UPC_A);return n.putAllMetadata(i.getResultMetadata()),n}return i}catch(a){}}}catch(a){d={error:a}}finally{try{g&&!g.done&&(e=f.return)&&e.call(f)}finally{if(d)throw d.error}}throw new k_},b.prototype.reset=function(){var a,b;try{for(var c=mf(this.readers),d=c.next();!d.done;d=c.next())d.value.reset()}catch(b){a={error:b}}finally{try{d&&!d.done&&(b=c.return)&&b.call(c)}finally{if(a)throw a.error}}},b}(lK),mh=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),mi=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},b}return mh(b,a),b.prototype.decodeRow=function(a,b,c){var d=this.getValidRowData(b);if(!d)throw new k_;var e=this.codaBarDecodeRow(d.row);if(!e)throw new k_;return new le(e,null,0,[new lw(d.left,a),new lw(d.right,a)],lf.CODABAR,new Date().getTime())},b.prototype.getValidRowData=function(a){var b=a.toArray(),c=b.indexOf(!0);if(-1===c)return null;var d=b.lastIndexOf(!0);if(d<=c)return null;b=b.slice(c,d+1);for(var e=[],f=b[0],g=1,h=1;h<b.length;h++)b[h]===f?g++:(f=b[h],e.push(g),g=1);return(e.push(g),e.length<23&&(e.length+1)%8!=0)?null:{row:e,left:c,right:d}},b.prototype.codaBarDecodeRow=function(a){for(var b=[],c=Math.ceil(a.reduce(function(a,b){return(a+b)/2},0));a.length>0;){var d=a.splice(0,8).splice(0,7).map(function(a){return a<c?"n":"w"}).join("");if(void 0===this.CODA_BAR_CHAR_SET[d])return null;b.push(this.CODA_BAR_CHAR_SET[d])}var e=b.join("");return this.validCodaBarString(e)?e:null},b.prototype.validCodaBarString=function(a){return/^[A-D].{1,}[A-D]$/.test(a)},b}(lK),mj=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),mk=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},ml=function(a){function b(){var b=a.call(this)||this;return b.decodeFinderCounters=new Int32Array(4),b.dataCharacterCounters=new Int32Array(8),b.oddRoundingErrors=[,,,,],b.evenRoundingErrors=[,,,,],b.oddCounts=Array(b.dataCharacterCounters.length/2),b.evenCounts=Array(b.dataCharacterCounters.length/2),b}return mj(b,a),b.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},b.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},b.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},b.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},b.prototype.getOddCounts=function(){return this.oddCounts},b.prototype.getEvenCounts=function(){return this.evenCounts},b.prototype.parseFinderValue=function(a,c){for(var d=0;d<c.length;d++)if(lK.patternMatchVariance(a,c[d],b.MAX_INDIVIDUAL_VARIANCE)<b.MAX_AVG_VARIANCE)return d;throw new k_},b.count=function(a){return lu.sum(new Int32Array(a))},b.increment=function(a,b){for(var c=0,d=b[0],e=1;e<a.length;e++)b[e]>d&&(d=b[e],c=e);a[c]++},b.decrement=function(a,b){for(var c=0,d=b[0],e=1;e<a.length;e++)b[e]<d&&(d=b[e],c=e);a[c]--},b.isFinderPattern=function(a){var c,d,e=a[0]+a[1],f=e+a[2]+a[3],g=e/f;if(g>=b.MIN_FINDER_PATTERN_RATIO&&g<=b.MAX_FINDER_PATTERN_RATIO){var h=Number.MAX_SAFE_INTEGER,i=Number.MIN_SAFE_INTEGER;try{for(var j=mk(a),k=j.next();!k.done;k=j.next()){var l=k.value;l>i&&(i=l),l<h&&(h=l)}}catch(a){c={error:a}}finally{try{k&&!k.done&&(d=j.return)&&d.call(j)}finally{if(c)throw c.error}}return i<10*h}return!1},b.MAX_AVG_VARIANCE=.2,b.MAX_INDIVIDUAL_VARIANCE=.45,b.MIN_FINDER_PATTERN_RATIO=9.5/12,b.MAX_FINDER_PATTERN_RATIO=12.5/14,b}(lK),mm=function(){function a(a,b){this.value=a,this.checksumPortion=b}return a.prototype.getValue=function(){return this.value},a.prototype.getChecksumPortion=function(){return this.checksumPortion},a.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},a.prototype.equals=function(b){return b instanceof a&&this.value===b.value&&this.checksumPortion===b.checksumPortion},a.prototype.hashCode=function(){return this.value^this.checksumPortion},a}(),mn=function(){function a(a,b,c,d,e){this.value=a,this.startEnd=b,this.value=a,this.startEnd=b,this.resultPoints=[],this.resultPoints.push(new lw(c,e)),this.resultPoints.push(new lw(d,e))}return a.prototype.getValue=function(){return this.value},a.prototype.getStartEnd=function(){return this.startEnd},a.prototype.getResultPoints=function(){return this.resultPoints},a.prototype.equals=function(b){return b instanceof a&&this.value===b.value},a.prototype.hashCode=function(){return this.value},a}(),mo=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},mp=function(){function a(){}return a.getRSSvalue=function(b,c,d){var e,f,g=0;try{for(var h=mo(b),i=h.next();!i.done;i=h.next()){var j=i.value;g+=j}}catch(a){e={error:a}}finally{try{i&&!i.done&&(f=h.return)&&f.call(h)}finally{if(e)throw e.error}}for(var k=0,l=0,m=b.length,n=0;n<m-1;n++){var o=void 0;for(o=1,l|=1<<n;o<b[n];o++,l&=~(1<<n)){var p=a.combins(g-o-1,m-n-2);if(d&&0===l&&g-o-(m-n-1)>=m-n-1&&(p-=a.combins(g-o-(m-n),m-n-2)),m-n-1>1){for(var q=0,r=g-o-(m-n-2);r>c;r--)q+=a.combins(g-o-r-1,m-n-3);p-=q*(m-1-n)}else g-o>c&&p--;k+=p}g-=o}return k},a.combins=function(a,b){a-b>b?(d=b,c=a-b):(d=a-b,c=b);for(var c,d,e=1,f=1,g=a;g>c;g--)e*=g,f<=d&&(e/=f,f++);for(;f<=d;)e/=f,f++;return e},a}(),mq=function(){function a(){}return a.buildBitArray=function(a){var b=2*a.length-1;null==a[a.length-1].getRightChar()&&(b-=1);for(var c=new kO(12*b),d=0,e=a[0].getRightChar().getValue(),f=11;f>=0;--f)(e&1<<f)!=0&&c.set(d),d++;for(var f=1;f<a.length;++f){for(var g=a[f],h=g.getLeftChar().getValue(),i=11;i>=0;--i)(h&1<<i)!=0&&c.set(d),d++;if(null!==g.getRightChar())for(var j=g.getRightChar().getValue(),i=11;i>=0;--i)(j&1<<i)!=0&&c.set(d),d++}return c},a}(),mr=function(){function a(a,b){b?this.decodedInformation=null:(this.finished=a,this.decodedInformation=b)}return a.prototype.getDecodedInformation=function(){return this.decodedInformation},a.prototype.isFinished=function(){return this.finished},a}(),ms=function(){function a(a){this.newPosition=a}return a.prototype.getNewPosition=function(){return this.newPosition},a}(),mt=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),mu=function(a){function b(b,c){var d=a.call(this,b)||this;return d.value=c,d}return mt(b,a),b.prototype.getValue=function(){return this.value},b.prototype.isFNC1=function(){return this.value===b.FNC1},b.FNC1="$",b}(ms),mv=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),mw=function(a){function b(b,c,d){var e=a.call(this,b)||this;return d?(e.remaining=!0,e.remainingValue=e.remainingValue):(e.remaining=!1,e.remainingValue=0),e.newString=c,e}return mv(b,a),b.prototype.getNewString=function(){return this.newString},b.prototype.isRemaining=function(){return this.remaining},b.prototype.getRemainingValue=function(){return this.remainingValue},b}(ms),mx=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),my=function(a){function b(b,c,d){var e=a.call(this,b)||this;if(c<0||c>10||d<0||d>10)throw new kR;return e.firstDigit=c,e.secondDigit=d,e}return mx(b,a),b.prototype.getFirstDigit=function(){return this.firstDigit},b.prototype.getSecondDigit=function(){return this.secondDigit},b.prototype.getValue=function(){return 10*this.firstDigit+this.secondDigit},b.prototype.isFirstDigitFNC1=function(){return this.firstDigit===b.FNC1},b.prototype.isSecondDigitFNC1=function(){return this.secondDigit===b.FNC1},b.prototype.isAnyFNC1=function(){return this.firstDigit===b.FNC1||this.secondDigit===b.FNC1},b.FNC1=10,b}(ms),mz=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},mA=function(){function a(){}return a.parseFieldsInGeneralPurpose=function(b){if(!b)return null;if(b.length<2)throw new k_;var c,d,e,f,g,h,i,j,k=b.substring(0,2);try{for(var l=mz(a.TWO_DIGIT_DATA_LENGTH),m=l.next();!m.done;m=l.next()){var n=m.value;if(n[0]===k){if(n[1]===a.VARIABLE_LENGTH)return a.processVariableAI(2,n[2],b);return a.processFixedAI(2,n[1],b)}}}catch(a){c={error:a}}finally{try{m&&!m.done&&(d=l.return)&&d.call(l)}finally{if(c)throw c.error}}if(b.length<3)throw new k_;var o=b.substring(0,3);try{for(var p=mz(a.THREE_DIGIT_DATA_LENGTH),q=p.next();!q.done;q=p.next()){var n=q.value;if(n[0]===o){if(n[1]===a.VARIABLE_LENGTH)return a.processVariableAI(3,n[2],b);return a.processFixedAI(3,n[1],b)}}}catch(a){e={error:a}}finally{try{q&&!q.done&&(f=p.return)&&f.call(p)}finally{if(e)throw e.error}}try{for(var r=mz(a.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),s=r.next();!s.done;s=r.next()){var n=s.value;if(n[0]===o){if(n[1]===a.VARIABLE_LENGTH)return a.processVariableAI(4,n[2],b);return a.processFixedAI(4,n[1],b)}}}catch(a){g={error:a}}finally{try{s&&!s.done&&(h=r.return)&&h.call(r)}finally{if(g)throw g.error}}if(b.length<4)throw new k_;var t=b.substring(0,4);try{for(var u=mz(a.FOUR_DIGIT_DATA_LENGTH),v=u.next();!v.done;v=u.next()){var n=v.value;if(n[0]===t){if(n[1]===a.VARIABLE_LENGTH)return a.processVariableAI(4,n[2],b);return a.processFixedAI(4,n[1],b)}}}catch(a){i={error:a}}finally{try{v&&!v.done&&(j=u.return)&&j.call(u)}finally{if(i)throw i.error}}throw new k_},a.processFixedAI=function(b,c,d){if(d.length<b)throw new k_;var e=d.substring(0,b);if(d.length<b+c)throw new k_;var f=d.substring(b,b+c),g=d.substring(b+c),h="("+e+")"+f,i=a.parseFieldsInGeneralPurpose(g);return null==i?h:h+i},a.processVariableAI=function(b,c,d){var e,f=d.substring(0,b);e=d.length<b+c?d.length:b+c;var g=d.substring(b,e),h=d.substring(e),i="("+f+")"+g,j=a.parseFieldsInGeneralPurpose(h);return null==j?i:i+j},a.VARIABLE_LENGTH=[],a.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",a.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",a.VARIABLE_LENGTH,20],["22",a.VARIABLE_LENGTH,29],["30",a.VARIABLE_LENGTH,8],["37",a.VARIABLE_LENGTH,8],["90",a.VARIABLE_LENGTH,30],["91",a.VARIABLE_LENGTH,30],["92",a.VARIABLE_LENGTH,30],["93",a.VARIABLE_LENGTH,30],["94",a.VARIABLE_LENGTH,30],["95",a.VARIABLE_LENGTH,30],["96",a.VARIABLE_LENGTH,30],["97",a.VARIABLE_LENGTH,3],["98",a.VARIABLE_LENGTH,30],["99",a.VARIABLE_LENGTH,30]],a.THREE_DIGIT_DATA_LENGTH=[["240",a.VARIABLE_LENGTH,30],["241",a.VARIABLE_LENGTH,30],["242",a.VARIABLE_LENGTH,6],["250",a.VARIABLE_LENGTH,30],["251",a.VARIABLE_LENGTH,30],["253",a.VARIABLE_LENGTH,17],["254",a.VARIABLE_LENGTH,20],["400",a.VARIABLE_LENGTH,30],["401",a.VARIABLE_LENGTH,30],["402",17],["403",a.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",a.VARIABLE_LENGTH,20],["421",a.VARIABLE_LENGTH,15],["422",3],["423",a.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],a.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",a.VARIABLE_LENGTH,15],["391",a.VARIABLE_LENGTH,18],["392",a.VARIABLE_LENGTH,15],["393",a.VARIABLE_LENGTH,18],["703",a.VARIABLE_LENGTH,30]],a.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",a.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",a.VARIABLE_LENGTH,20],["8003",a.VARIABLE_LENGTH,30],["8004",a.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",a.VARIABLE_LENGTH,30],["8008",a.VARIABLE_LENGTH,12],["8018",18],["8020",a.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",a.VARIABLE_LENGTH,70],["8200",a.VARIABLE_LENGTH,70]],a}(),mB=function(){function a(a){this.buffer=new kY,this.information=a}return a.prototype.decodeAllCodes=function(a,b){for(var c=b,d=null;;){var e=this.decodeGeneralPurposeField(c,d),f=mA.parseFieldsInGeneralPurpose(e.getNewString());if(null!=f&&a.append(f),d=e.isRemaining()?""+e.getRemainingValue():null,c===e.getNewPosition())break;c=e.getNewPosition()}return a.toString()},a.prototype.isStillNumeric=function(a){if(a+7>this.information.getSize())return a+4<=this.information.getSize();for(var b=a;b<a+3;++b)if(this.information.get(b))return!0;return this.information.get(a+3)},a.prototype.decodeNumeric=function(a){if(a+7>this.information.getSize()){var b=this.extractNumericValueFromBitArray(a,4);return 0===b?new my(this.information.getSize(),my.FNC1,my.FNC1):new my(this.information.getSize(),b-1,my.FNC1)}var c=this.extractNumericValueFromBitArray(a,7);return new my(a+7,(c-8)/11,(c-8)%11)},a.prototype.extractNumericValueFromBitArray=function(b,c){return a.extractNumericValueFromBitArray(this.information,b,c)},a.extractNumericValueFromBitArray=function(a,b,c){for(var d=0,e=0;e<c;++e)a.get(b+e)&&(d|=1<<c-e-1);return d},a.prototype.decodeGeneralPurposeField=function(a,b){this.buffer.setLengthToZero(),null!=b&&this.buffer.append(b),this.current.setPosition(a);var c=this.parseBlocks();return null!=c&&c.isRemaining()?new mw(this.current.getPosition(),this.buffer.toString(),c.getRemainingValue()):new mw(this.current.getPosition(),this.buffer.toString())},a.prototype.parseBlocks=function(){do{var a,b,c=this.current.getPosition();if(a=this.current.isAlpha()?(b=this.parseAlphaBlock()).isFinished():this.current.isIsoIec646()?(b=this.parseIsoIec646Block()).isFinished():(b=this.parseNumericBlock()).isFinished(),c===this.current.getPosition()&&!a)break}while(!a);return b.getDecodedInformation()},a.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var a=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(a.getNewPosition()),a.isFirstDigitFNC1()){var b=void 0;return new mr(!0,b=a.isSecondDigitFNC1()?new mw(this.current.getPosition(),this.buffer.toString()):new mw(this.current.getPosition(),this.buffer.toString(),a.getSecondDigit()))}if(this.buffer.append(a.getFirstDigit()),a.isSecondDigitFNC1()){var b=new mw(this.current.getPosition(),this.buffer.toString());return new mr(!0,b)}this.buffer.append(a.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new mr(!1)},a.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var a=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(a.getNewPosition()),a.isFNC1())return new mr(!0,new mw(this.current.getPosition(),this.buffer.toString()));this.buffer.append(a.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new mr(!1)},a.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var a=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(a.getNewPosition()),a.isFNC1())return new mr(!0,new mw(this.current.getPosition(),this.buffer.toString()));this.buffer.append(a.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new mr(!1)},a.prototype.isStillIsoIec646=function(a){if(a+5>this.information.getSize())return!1;var b=this.extractNumericValueFromBitArray(a,5);if(b>=5&&b<16)return!0;if(a+7>this.information.getSize())return!1;var c=this.extractNumericValueFromBitArray(a,7);if(c>=64&&c<116)return!0;if(a+8>this.information.getSize())return!1;var d=this.extractNumericValueFromBitArray(a,8);return d>=232&&d<253},a.prototype.decodeIsoIec646=function(a){var b,c=this.extractNumericValueFromBitArray(a,5);if(15===c)return new mu(a+5,mu.FNC1);if(c>=5&&c<15)return new mu(a+5,"0"+(c-5));var d=this.extractNumericValueFromBitArray(a,7);if(d>=64&&d<90)return new mu(a+7,""+(d+1));if(d>=90&&d<116)return new mu(a+7,""+(d+7));switch(this.extractNumericValueFromBitArray(a,8)){case 232:b="!";break;case 233:b='"';break;case 234:b="%";break;case 235:b="&";break;case 236:b="'";break;case 237:b="(";break;case 238:b=")";break;case 239:b="*";break;case 240:b="+";break;case 241:b=",";break;case 242:b="-";break;case 243:b=".";break;case 244:b="/";break;case 245:b=":";break;case 246:b=";";break;case 247:b="<";break;case 248:b="=";break;case 249:b=">";break;case 250:b="?";break;case 251:b="_";break;case 252:b=" ";break;default:throw new kR}return new mu(a+8,b)},a.prototype.isStillAlpha=function(a){if(a+5>this.information.getSize())return!1;var b=this.extractNumericValueFromBitArray(a,5);if(b>=5&&b<16)return!0;if(a+6>this.information.getSize())return!1;var c=this.extractNumericValueFromBitArray(a,6);return c>=16&&c<63},a.prototype.decodeAlphanumeric=function(a){var b,c=this.extractNumericValueFromBitArray(a,5);if(15===c)return new mu(a+5,mu.FNC1);if(c>=5&&c<15)return new mu(a+5,"0"+(c-5));var d=this.extractNumericValueFromBitArray(a,6);if(d>=32&&d<58)return new mu(a+6,""+(d+33));switch(d){case 58:b="*";break;case 59:b=",";break;case 60:b="-";break;case 61:b=".";break;case 62:b="/";break;default:throw new lr("Decoding invalid alphanumeric value: "+d)}return new mu(a+6,b)},a.prototype.isAlphaTo646ToAlphaLatch=function(a){if(a+1>this.information.getSize())return!1;for(var b=0;b<5&&b+a<this.information.getSize();++b)if(2===b){if(!this.information.get(a+2))return!1}else if(this.information.get(a+b))return!1;return!0},a.prototype.isAlphaOr646ToNumericLatch=function(a){if(a+3>this.information.getSize())return!1;for(var b=a;b<a+3;++b)if(this.information.get(b))return!1;return!0},a.prototype.isNumericToAlphaNumericLatch=function(a){if(a+1>this.information.getSize())return!1;for(var b=0;b<4&&b+a<this.information.getSize();++b)if(this.information.get(a+b))return!1;return!0},a}(),mC=function(){function a(a){this.information=a,this.generalDecoder=new mB(a)}return a.prototype.getInformation=function(){return this.information},a.prototype.getGeneralDecoder=function(){return this.generalDecoder},a}(),mD=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),mE=function(a){function b(b){return a.call(this,b)||this}return mD(b,a),b.prototype.encodeCompressedGtin=function(a,b){a.append("(01)");var c=a.length();a.append("9"),this.encodeCompressedGtinWithoutAI(a,b,c)},b.prototype.encodeCompressedGtinWithoutAI=function(a,c,d){for(var e=0;e<4;++e){var f=this.getGeneralDecoder().extractNumericValueFromBitArray(c+10*e,10);f/100==0&&a.append("0"),f/10==0&&a.append("0"),a.append(f)}b.appendCheckDigit(a,d)},b.appendCheckDigit=function(a,b){for(var c=0,d=0;d<13;d++){var e=a.charAt(d+b).charCodeAt(0)-48;c+=(1&d)==0?3*e:e}10==(c=10-c%10)&&(c=0),a.append(c)},b.GTIN_SIZE=40,b}(mC),mF=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),mG=function(a){function b(b){return a.call(this,b)||this}return mF(b,a),b.prototype.parseInformation=function(){var a=new kY;a.append("(01)");var c=a.length(),d=this.getGeneralDecoder().extractNumericValueFromBitArray(b.HEADER_SIZE,4);return a.append(d),this.encodeCompressedGtinWithoutAI(a,b.HEADER_SIZE+4,c),this.getGeneralDecoder().decodeAllCodes(a,b.HEADER_SIZE+44)},b.HEADER_SIZE=4,b}(mE),mH=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),mI=function(a){function b(b){return a.call(this,b)||this}return mH(b,a),b.prototype.parseInformation=function(){var a=new kY;return this.getGeneralDecoder().decodeAllCodes(a,b.HEADER_SIZE)},b.HEADER_SIZE=5,b}(mC),mJ=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),mK=function(a){function b(b){return a.call(this,b)||this}return mJ(b,a),b.prototype.encodeCompressedWeight=function(a,b,c){var d=this.getGeneralDecoder().extractNumericValueFromBitArray(b,c);this.addWeightCode(a,d);for(var e=this.checkWeight(d),f=1e5,g=0;g<5;++g)e/f==0&&a.append("0"),f/=10;a.append(e)},b}(mE),mL=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),mM=function(a){function b(b){return a.call(this,b)||this}return mL(b,a),b.prototype.parseInformation=function(){if(this.getInformation().getSize()!==b.HEADER_SIZE+mK.GTIN_SIZE+b.WEIGHT_SIZE)throw new k_;var a=new kY;return this.encodeCompressedGtin(a,b.HEADER_SIZE),this.encodeCompressedWeight(a,b.HEADER_SIZE+mK.GTIN_SIZE,b.WEIGHT_SIZE),a.toString()},b.HEADER_SIZE=5,b.WEIGHT_SIZE=15,b}(mK),mN=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),mO=function(a){function b(b){return a.call(this,b)||this}return mN(b,a),b.prototype.addWeightCode=function(a,b){a.append("(3103)")},b.prototype.checkWeight=function(a){return a},b}(mM),mP=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),mQ=function(a){function b(b){return a.call(this,b)||this}return mP(b,a),b.prototype.addWeightCode=function(a,b){b<1e4?a.append("(3202)"):a.append("(3203)")},b.prototype.checkWeight=function(a){return a<1e4?a:a-1e4},b}(mM),mR=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),mS=function(a){function b(b){return a.call(this,b)||this}return mR(b,a),b.prototype.parseInformation=function(){if(this.getInformation().getSize()<b.HEADER_SIZE+mE.GTIN_SIZE)throw new k_;var a=new kY;this.encodeCompressedGtin(a,b.HEADER_SIZE);var c=this.getGeneralDecoder().extractNumericValueFromBitArray(b.HEADER_SIZE+mE.GTIN_SIZE,b.LAST_DIGIT_SIZE);a.append("(392"),a.append(c),a.append(")");var d=this.getGeneralDecoder().decodeGeneralPurposeField(b.HEADER_SIZE+mE.GTIN_SIZE+b.LAST_DIGIT_SIZE,null);return a.append(d.getNewString()),a.toString()},b.HEADER_SIZE=8,b.LAST_DIGIT_SIZE=2,b}(mE),mT=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),mU=function(a){function b(b){return a.call(this,b)||this}return mT(b,a),b.prototype.parseInformation=function(){if(this.getInformation().getSize()<b.HEADER_SIZE+mE.GTIN_SIZE)throw new k_;var a=new kY;this.encodeCompressedGtin(a,b.HEADER_SIZE);var c=this.getGeneralDecoder().extractNumericValueFromBitArray(b.HEADER_SIZE+mE.GTIN_SIZE,b.LAST_DIGIT_SIZE);a.append("(393"),a.append(c),a.append(")");var d=this.getGeneralDecoder().extractNumericValueFromBitArray(b.HEADER_SIZE+mE.GTIN_SIZE+b.LAST_DIGIT_SIZE,b.FIRST_THREE_DIGITS_SIZE);d/100==0&&a.append("0"),d/10==0&&a.append("0"),a.append(d);var e=this.getGeneralDecoder().decodeGeneralPurposeField(b.HEADER_SIZE+mE.GTIN_SIZE+b.LAST_DIGIT_SIZE+b.FIRST_THREE_DIGITS_SIZE,null);return a.append(e.getNewString()),a.toString()},b.HEADER_SIZE=8,b.LAST_DIGIT_SIZE=2,b.FIRST_THREE_DIGITS_SIZE=10,b}(mE),mV=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),mW=function(a){function b(b,c,d){var e=a.call(this,b)||this;return e.dateCode=d,e.firstAIdigits=c,e}return mV(b,a),b.prototype.parseInformation=function(){if(this.getInformation().getSize()!==b.HEADER_SIZE+b.GTIN_SIZE+b.WEIGHT_SIZE+b.DATE_SIZE)throw new k_;var a=new kY;return this.encodeCompressedGtin(a,b.HEADER_SIZE),this.encodeCompressedWeight(a,b.HEADER_SIZE+b.GTIN_SIZE,b.WEIGHT_SIZE),this.encodeCompressedDate(a,b.HEADER_SIZE+b.GTIN_SIZE+b.WEIGHT_SIZE),a.toString()},b.prototype.encodeCompressedDate=function(a,c){var d=this.getGeneralDecoder().extractNumericValueFromBitArray(c,b.DATE_SIZE);if(38400!==d){a.append("("),a.append(this.dateCode),a.append(")");var e=d%32,f=(d/=32)%12+1,g=d/=12;g/10==0&&a.append("0"),a.append(g),f/10==0&&a.append("0"),a.append(f),e/10==0&&a.append("0"),a.append(e)}},b.prototype.addWeightCode=function(a,b){a.append("("),a.append(this.firstAIdigits),a.append(b/1e5),a.append(")")},b.prototype.checkWeight=function(a){return a%1e5},b.HEADER_SIZE=8,b.WEIGHT_SIZE=20,b.DATE_SIZE=16,b}(mK),mX=function(){function a(a,b,c,d){this.leftchar=a,this.rightchar=b,this.finderpattern=c,this.maybeLast=d}return a.prototype.mayBeLast=function(){return this.maybeLast},a.prototype.getLeftChar=function(){return this.leftchar},a.prototype.getRightChar=function(){return this.rightchar},a.prototype.getFinderPattern=function(){return this.finderpattern},a.prototype.mustBeLast=function(){return null==this.rightchar},a.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(null==this.finderpattern?"null":this.finderpattern.getValue())+" ]"},a.equals=function(b,c){return b instanceof a&&a.equalsOrNull(b.leftchar,c.leftchar)&&a.equalsOrNull(b.rightchar,c.rightchar)&&a.equalsOrNull(b.finderpattern,c.finderpattern)},a.equalsOrNull=function(b,c){return null===b?null===c:a.equals(b,c)},a.prototype.hashCode=function(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()},a}(),mY=function(){function a(a,b,c){this.pairs=a,this.rowNumber=b,this.wasReversed=c}return a.prototype.getPairs=function(){return this.pairs},a.prototype.getRowNumber=function(){return this.rowNumber},a.prototype.isReversed=function(){return this.wasReversed},a.prototype.isEquivalent=function(a){return this.checkEqualitity(this,a)},a.prototype.toString=function(){return"{ "+this.pairs+" }"},a.prototype.equals=function(b,c){return b instanceof a&&this.checkEqualitity(b,c)&&b.wasReversed===c.wasReversed},a.prototype.checkEqualitity=function(a,b){var c;if(a&&b)return a.forEach(function(a,d){b.forEach(function(b){a.getLeftChar().getValue()===b.getLeftChar().getValue()&&a.getRightChar().getValue()===b.getRightChar().getValue()&&a.getFinderPatter().getValue()===b.getFinderPatter().getValue()&&(c=!0)})}),c},a}(),mZ=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),m$=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},m_=function(a){function b(){var c=null!==a&&a.apply(this,arguments)||this;return c.pairs=Array(b.MAX_PAIRS),c.rows=[],c.startEnd=[2],c}return mZ(b,a),b.prototype.decodeRow=function(a,c,d){this.pairs.length=0,this.startFromEven=!1;try{return b.constructResult(this.decodeRow2pairs(a,c))}catch(a){}return this.pairs.length=0,this.startFromEven=!0,b.constructResult(this.decodeRow2pairs(a,c))},b.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},b.prototype.decodeRow2pairs=function(a,b){for(var c,d=!1;!d;)try{this.pairs.push(this.retrieveNextPair(b,this.pairs,a))}catch(a){if(a instanceof k_){if(!this.pairs.length)throw new k_;d=!0}}if(this.checkChecksum())return this.pairs;if(c=!!this.rows.length,this.storeRow(a,!1),c){var e=this.checkRowsBoolean(!1);if(null!=e||null!=(e=this.checkRowsBoolean(!0)))return e}throw new k_},b.prototype.checkRowsBoolean=function(a){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,a&&(this.rows=this.rows.reverse());var b=null;try{b=this.checkRows([],0)}catch(a){console.log(a)}return a&&(this.rows=this.rows.reverse()),b},b.prototype.checkRows=function(a,c){for(var d,e,f=c;f<this.rows.length;f++){var g=this.rows[f];this.pairs.length=0;try{for(var h=(d=void 0,m$(a)),i=h.next();!i.done;i=h.next()){var j=i.value;this.pairs.push(j.getPairs())}}catch(a){d={error:a}}finally{try{i&&!i.done&&(e=h.return)&&e.call(h)}finally{if(d)throw d.error}}if(this.pairs.push(g.getPairs()),b.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var k=Array(a);k.push(g);try{return this.checkRows(k,f+1)}catch(a){console.log(a)}}}throw new k_},b.isValidSequence=function(a){var c,d;try{for(var e=m$(b.FINDER_PATTERN_SEQUENCES),f=e.next();!f.done;f=e.next()){var g=f.value;if(!(a.length>g.length)){for(var h=!0,i=0;i<a.length;i++)if(a[i].getFinderPattern().getValue()!==g[i]){h=!1;break}if(h)return!0}}}catch(a){c={error:a}}finally{try{f&&!f.done&&(d=e.return)&&d.call(e)}finally{if(c)throw c.error}}return!1},b.prototype.storeRow=function(a,c){for(var d=0,e=!1,f=!1;d<this.rows.length;){var g=this.rows[d];if(g.getRowNumber()>a){f=g.isEquivalent(this.pairs);break}e=g.isEquivalent(this.pairs),d++}f||e||b.isPartialRow(this.pairs,this.rows)||(this.rows.push(d,new mY(this.pairs,a,c)),this.removePartialRows(this.pairs,this.rows))},b.prototype.removePartialRows=function(a,b){var c,d,e,f,g,h;try{for(var i=m$(b),j=i.next();!j.done;j=i.next()){var k=j.value;if(k.getPairs().length!==a.length)try{for(var l=(e=void 0,m$(k.getPairs())),m=l.next();!m.done;m=l.next()){var n=m.value;try{for(var o=(g=void 0,m$(a)),p=o.next();!p.done;p=o.next()){var q=p.value;if(mX.equals(n,q))break}}catch(a){g={error:a}}finally{try{p&&!p.done&&(h=o.return)&&h.call(o)}finally{if(g)throw g.error}}}}catch(a){e={error:a}}finally{try{m&&!m.done&&(f=l.return)&&f.call(l)}finally{if(e)throw e.error}}}}catch(a){c={error:a}}finally{try{j&&!j.done&&(d=i.return)&&d.call(i)}finally{if(c)throw c.error}}},b.isPartialRow=function(a,b){var c,d,e,f,g,h;try{for(var i=m$(b),j=i.next();!j.done;j=i.next()){var k=j.value,l=!0;try{for(var m=(e=void 0,m$(a)),n=m.next();!n.done;n=m.next()){var o=n.value,p=!1;try{for(var q=(g=void 0,m$(k.getPairs())),r=q.next();!r.done;r=q.next()){var s=r.value;if(o.equals(s)){p=!0;break}}}catch(a){g={error:a}}finally{try{r&&!r.done&&(h=q.return)&&h.call(q)}finally{if(g)throw g.error}}if(!p){l=!1;break}}}catch(a){e={error:a}}finally{try{n&&!n.done&&(f=m.return)&&f.call(m)}finally{if(e)throw e.error}}if(l)return!0}}catch(a){c={error:a}}finally{try{j&&!j.done&&(d=i.return)&&d.call(i)}finally{if(c)throw c.error}}return!1},b.prototype.getRows=function(){return this.rows},b.constructResult=function(a){var b=(function(a){try{if(a.get(1))return new mG(a);if(!a.get(2))return new mI(a);switch(mB.extractNumericValueFromBitArray(a,1,4)){case 4:return new mO(a);case 5:return new mQ(a)}switch(mB.extractNumericValueFromBitArray(a,1,5)){case 12:return new mS(a);case 13:return new mU(a)}switch(mB.extractNumericValueFromBitArray(a,1,7)){case 56:return new mW(a,"310","11");case 57:return new mW(a,"320","11");case 58:return new mW(a,"310","13");case 59:return new mW(a,"320","13");case 60:return new mW(a,"310","15");case 61:return new mW(a,"320","15");case 62:return new mW(a,"310","17");case 63:return new mW(a,"320","17")}}catch(b){throw console.log(b),new lr("unknown decoder: "+a)}})(mq.buildBitArray(a)).parseInformation(),c=a[0].getFinderPattern().getResultPoints(),d=a[a.length-1].getFinderPattern().getResultPoints();return new le(b,null,null,[c[0],c[1],d[0],d[1]],lf.RSS_EXPANDED,null)},b.prototype.checkChecksum=function(){var a=this.pairs.get(0),b=a.getLeftChar(),c=a.getRightChar();if(null===c)return!1;for(var d=c.getChecksumPortion(),e=2,f=1;f<this.pairs.size();++f){var g=this.pairs.get(f);d+=g.getLeftChar().getChecksumPortion(),e++;var h=g.getRightChar();null!=h&&(d+=h.getChecksumPortion(),e++)}return 211*(e-4)+(d%=211)===b.getValue()},b.getNextSecondBar=function(a,b){var c;return a.get(b)?(c=a.getNextUnset(b),c=a.getNextSet(c)):(c=a.getNextSet(b),c=a.getNextUnset(c)),c},b.prototype.retrieveNextPair=function(a,c,d){var e,f,g=c.length%2==0;this.startFromEven&&(g=!g);var h=!0,i=-1;do this.findNextPair(a,c,i),null===(e=this.parseFoundFinderPattern(a,d,g))?i=b.getNextSecondBar(a,this.startEnd[0]):h=!1;while(h);var j=this.decodeDataCharacter(a,e,g,!0);if(!this.isEmptyPair(c)&&c[c.length-1].mustBeLast())throw new k_;try{f=this.decodeDataCharacter(a,e,g,!1)}catch(a){f=null,console.log(a)}return new mX(j,f,e,!0)},b.prototype.isEmptyPair=function(a){return 0===a.length},b.prototype.findNextPair=function(a,c,d){var e,f=this.getDecodeFinderCounters();f[0]=0,f[1]=0,f[2]=0,f[3]=0;var g=a.getSize();e=d>=0?d:this.isEmptyPair(c)?0:c[c.length-1].getFinderPattern().getStartEnd()[1];var h=c.length%2!=0;this.startFromEven&&(h=!h);for(var i=!1;e<g&&(i=!a.get(e));)e++;for(var j=0,k=e,l=e;l<g;l++)if(a.get(l)!==i)f[j]++;else{if(3===j){if(h&&b.reverseCounters(f),b.isFinderPattern(f)){this.startEnd[0]=k,this.startEnd[1]=l;return}h&&b.reverseCounters(f),k+=f[0]+f[1],f[0]=f[2],f[1]=f[3],f[2]=0,f[3]=0,j--}else j++;f[j]=1,i=!i}throw new k_},b.reverseCounters=function(a){for(var b=a.length,c=0;c<b/2;++c){var d=a[c];a[c]=a[b-c-1],a[b-c-1]=d}},b.prototype.parseFoundFinderPattern=function(a,c,d){if(d){for(var e,f,g,h,i=this.startEnd[0]-1;i>=0&&!a.get(i);)i--;i++,e=this.startEnd[0]-i,f=i,g=this.startEnd[1]}else f=this.startEnd[0],e=(g=a.getNextUnset(this.startEnd[1]+1))-this.startEnd[1];var j=this.getDecodeFinderCounters();kG.arraycopy(j,0,j,1,j.length-1),j[0]=e;try{h=this.parseFinderValue(j,b.FINDER_PATTERNS)}catch(a){return null}return new mn(h,[f,g],f,g,c)},b.prototype.decodeDataCharacter=function(a,c,d,e){for(var f=this.getDataCharacterCounters(),g=0;g<f.length;g++)f[g]=0;if(e)b.recordPatternInReverse(a,c.getStartEnd()[0],f);else{b.recordPattern(a,c.getStartEnd()[1],f);for(var h=0,i=f.length-1;h<i;h++,i--){var j=f[h];f[h]=f[i],f[i]=j}}var k=lu.sum(new Int32Array(f))/17,l=(c.getStartEnd()[1]-c.getStartEnd()[0])/15;if(Math.abs(k-l)/l>.3)throw new k_;for(var m=this.getOddCounts(),n=this.getEvenCounts(),o=this.getOddRoundingErrors(),p=this.getEvenRoundingErrors(),h=0;h<f.length;h++){var q=f[h]/k,r=q+.5;if(r<1){if(q<.3)throw new k_;r=1}else if(r>8){if(q>8.7)throw new k_;r=8}var s=h/2;(1&h)==0?(m[s]=r,o[s]=q-r):(n[s]=r,p[s]=q-r)}this.adjustOddEvenCounts(17);for(var t=4*c.getValue()+2*!d+ +!e-1,u=0,v=0,h=m.length-1;h>=0;h--){if(b.isNotA1left(c,d,e)){var w=b.WEIGHTS[t][2*h];v+=m[h]*w}u+=m[h]}for(var x=0,h=n.length-1;h>=0;h--)if(b.isNotA1left(c,d,e)){var w=b.WEIGHTS[t][2*h+1];x+=n[h]*w}var y=v+x;if((1&u)!=0||u>13||u<4)throw new k_;var z=(13-u)/2,A=b.SYMBOL_WIDEST[z],B=mp.getRSSvalue(m,A,!0),C=mp.getRSSvalue(n,9-A,!1);return new mm(B*b.EVEN_TOTAL_SUBSET[z]+C+b.GSUM[z],y)},b.isNotA1left=function(a,b,c){return!(0===a.getValue()&&b&&c)},b.prototype.adjustOddEvenCounts=function(a){var c=lu.sum(new Int32Array(this.getOddCounts())),d=lu.sum(new Int32Array(this.getEvenCounts())),e=!1,f=!1;c>13?f=!0:c<4&&(e=!0);var g=!1,h=!1;d>13?h=!0:d<4&&(g=!0);var i=c+d-a,j=(1&c)==1,k=(1&d)==0;if(1===i)if(j){if(k)throw new k_;f=!0}else{if(!k)throw new k_;h=!0}else if(-1===i)if(j){if(k)throw new k_;e=!0}else{if(!k)throw new k_;g=!0}else if(0===i){if(j){if(!k)throw new k_;c<d?(e=!0,h=!0):(f=!0,g=!0)}else if(k)throw new k_}else throw new k_;if(e){if(f)throw new k_;b.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&b.decrement(this.getOddCounts(),this.getOddRoundingErrors()),g){if(h)throw new k_;b.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&b.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},b.SYMBOL_WIDEST=[7,5,4,3,1],b.EVEN_TOTAL_SUBSET=[4,20,52,104,204],b.GSUM=[0,348,1388,2948,3988],b.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],b.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],b.FINDER_PAT_A=0,b.FINDER_PAT_B=1,b.FINDER_PAT_C=2,b.FINDER_PAT_D=3,b.FINDER_PAT_E=4,b.FINDER_PAT_F=5,b.FINDER_PATTERN_SEQUENCES=[[b.FINDER_PAT_A,b.FINDER_PAT_A],[b.FINDER_PAT_A,b.FINDER_PAT_B,b.FINDER_PAT_B],[b.FINDER_PAT_A,b.FINDER_PAT_C,b.FINDER_PAT_B,b.FINDER_PAT_D],[b.FINDER_PAT_A,b.FINDER_PAT_E,b.FINDER_PAT_B,b.FINDER_PAT_D,b.FINDER_PAT_C],[b.FINDER_PAT_A,b.FINDER_PAT_E,b.FINDER_PAT_B,b.FINDER_PAT_D,b.FINDER_PAT_D,b.FINDER_PAT_F],[b.FINDER_PAT_A,b.FINDER_PAT_E,b.FINDER_PAT_B,b.FINDER_PAT_D,b.FINDER_PAT_E,b.FINDER_PAT_F,b.FINDER_PAT_F],[b.FINDER_PAT_A,b.FINDER_PAT_A,b.FINDER_PAT_B,b.FINDER_PAT_B,b.FINDER_PAT_C,b.FINDER_PAT_C,b.FINDER_PAT_D,b.FINDER_PAT_D],[b.FINDER_PAT_A,b.FINDER_PAT_A,b.FINDER_PAT_B,b.FINDER_PAT_B,b.FINDER_PAT_C,b.FINDER_PAT_C,b.FINDER_PAT_D,b.FINDER_PAT_E,b.FINDER_PAT_E],[b.FINDER_PAT_A,b.FINDER_PAT_A,b.FINDER_PAT_B,b.FINDER_PAT_B,b.FINDER_PAT_C,b.FINDER_PAT_C,b.FINDER_PAT_D,b.FINDER_PAT_E,b.FINDER_PAT_F,b.FINDER_PAT_F],[b.FINDER_PAT_A,b.FINDER_PAT_A,b.FINDER_PAT_B,b.FINDER_PAT_B,b.FINDER_PAT_C,b.FINDER_PAT_D,b.FINDER_PAT_D,b.FINDER_PAT_E,b.FINDER_PAT_E,b.FINDER_PAT_F,b.FINDER_PAT_F]],b.MAX_PAIRS=11,b}(ml),m0=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),m1=function(a){function b(b,c,d){var e=a.call(this,b,c)||this;return e.count=0,e.finderPattern=d,e}return m0(b,a),b.prototype.getFinderPattern=function(){return this.finderPattern},b.prototype.getCount=function(){return this.count},b.prototype.incrementCount=function(){this.count++},b}(mm),m2=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),m3=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},m4=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.possibleLeftPairs=[],b.possibleRightPairs=[],b}return m2(b,a),b.prototype.decodeRow=function(a,c,d){var e,f,g,h,i=this.decodePair(c,!1,a,d);b.addOrTally(this.possibleLeftPairs,i),c.reverse();var j=this.decodePair(c,!0,a,d);b.addOrTally(this.possibleRightPairs,j),c.reverse();try{for(var k=m3(this.possibleLeftPairs),l=k.next();!l.done;l=k.next()){var m=l.value;if(m.getCount()>1)try{for(var n=(g=void 0,m3(this.possibleRightPairs)),o=n.next();!o.done;o=n.next()){var p=o.value;if(p.getCount()>1&&b.checkChecksum(m,p))return b.constructResult(m,p)}}catch(a){g={error:a}}finally{try{o&&!o.done&&(h=n.return)&&h.call(n)}finally{if(g)throw g.error}}}}catch(a){e={error:a}}finally{try{l&&!l.done&&(f=k.return)&&f.call(k)}finally{if(e)throw e.error}}throw new k_},b.addOrTally=function(a,b){if(null!=b){var c,d,e=!1;try{for(var f=m3(a),g=f.next();!g.done;g=f.next()){var h=g.value;if(h.getValue()===b.getValue()){h.incrementCount(),e=!0;break}}}catch(a){c={error:a}}finally{try{g&&!g.done&&(d=f.return)&&d.call(f)}finally{if(c)throw c.error}}e||a.push(b)}},b.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},b.constructResult=function(a,b){for(var c=new String(4537077*a.getValue()+b.getValue()).toString(),d=new kY,e=13-c.length;e>0;e--)d.append("0");d.append(c);for(var f=0,e=0;e<13;e++){var g=d.charAt(e).charCodeAt(0)-48;f+=(1&e)==0?3*g:g}10==(f=10-f%10)&&(f=0),d.append(f.toString());var h=a.getFinderPattern().getResultPoints(),i=b.getFinderPattern().getResultPoints();return new le(d.toString(),null,0,[h[0],h[1],i[0],i[1]],lf.RSS_14,new Date().getTime())},b.checkChecksum=function(a,b){var c=(a.getChecksumPortion()+16*b.getChecksumPortion())%79,d=9*a.getFinderPattern().getValue()+b.getFinderPattern().getValue();return d>72&&d--,d>8&&d--,c===d},b.prototype.decodePair=function(a,b,c,d){try{var e=this.findFinderPattern(a,b),f=this.parseFoundFinderPattern(a,c,b,e),g=null==d?null:d.get(kP.NEED_RESULT_POINT_CALLBACK);if(null!=g){var h=(e[0]+e[1])/2;b&&(h=a.getSize()-1-h),g.foundPossibleResultPoint(new lw(h,c))}var i=this.decodeDataCharacter(a,f,!0),j=this.decodeDataCharacter(a,f,!1);return new m1(1597*i.getValue()+j.getValue(),i.getChecksumPortion()+4*j.getChecksumPortion(),f)}catch(a){return null}},b.prototype.decodeDataCharacter=function(a,c,d){for(var e=this.getDataCharacterCounters(),f=0;f<e.length;f++)e[f]=0;if(d)lK.recordPatternInReverse(a,c.getStartEnd()[0],e);else{lK.recordPattern(a,c.getStartEnd()[1]+1,e);for(var g=0,h=e.length-1;g<h;g++,h--){var i=e[g];e[g]=e[h],e[h]=i}}for(var j=d?16:15,k=lu.sum(new Int32Array(e))/j,l=this.getOddCounts(),m=this.getEvenCounts(),n=this.getOddRoundingErrors(),o=this.getEvenRoundingErrors(),g=0;g<e.length;g++){var p=e[g]/k,q=Math.floor(p+.5);q<1?q=1:q>8&&(q=8);var r=Math.floor(g/2);(1&g)==0?(l[r]=q,n[r]=p-q):(m[r]=q,o[r]=p-q)}this.adjustOddEvenCounts(d,j);for(var s=0,t=0,g=l.length-1;g>=0;g--)t*=9,t+=l[g],s+=l[g];for(var u=0,v=0,g=m.length-1;g>=0;g--)u*=9,u+=m[g],v+=m[g];var w=t+3*u;if(d){if((1&s)!=0||s>12||s<4)throw new k_;var x=(12-s)/2,y=b.OUTSIDE_ODD_WIDEST[x],z=9-y,A=mp.getRSSvalue(l,y,!1),B=mp.getRSSvalue(m,z,!0),C=b.OUTSIDE_EVEN_TOTAL_SUBSET[x],D=b.OUTSIDE_GSUM[x];return new mm(A*C+B+D,w)}if((1&v)!=0||v>10||v<4)throw new k_;var x=(10-v)/2,y=b.INSIDE_ODD_WIDEST[x],z=9-y,A=mp.getRSSvalue(l,y,!0),B=mp.getRSSvalue(m,z,!1),E=b.INSIDE_ODD_TOTAL_SUBSET[x],D=b.INSIDE_GSUM[x];return new mm(B*E+A+D,w)},b.prototype.findFinderPattern=function(a,b){var c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;for(var d=a.getSize(),e=!1,f=0;f<d&&b!==(e=!a.get(f));)f++;for(var g=0,h=f,i=f;i<d;i++)if(a.get(i)!==e)c[g]++;else{if(3===g){if(ml.isFinderPattern(c))return[h,i];h+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,g--}else g++;c[g]=1,e=!e}throw new k_},b.prototype.parseFoundFinderPattern=function(a,c,d,e){for(var f=a.get(e[0]),g=e[0]-1;g>=0&&f!==a.get(g);)g--;g++;var h=e[0]-g,i=this.getDecodeFinderCounters(),j=new Int32Array(i.length);kG.arraycopy(i,0,j,1,i.length-1),j[0]=h;var k=this.parseFinderValue(j,b.FINDER_PATTERNS),l=g,m=e[1];return d&&(l=a.getSize()-1-l,m=a.getSize()-1-m),new mn(k,[g,e[1]],l,m,c)},b.prototype.adjustOddEvenCounts=function(a,b){var c=lu.sum(new Int32Array(this.getOddCounts())),d=lu.sum(new Int32Array(this.getEvenCounts())),e=!1,f=!1,g=!1,h=!1;a?(c>12?f=!0:c<4&&(e=!0),d>12?h=!0:d<4&&(g=!0)):(c>11?f=!0:c<5&&(e=!0),d>10?h=!0:d<4&&(g=!0));var i=c+d-b,j=(1&c)==+!!a,k=(1&d)==1;if(1===i)if(j){if(k)throw new k_;f=!0}else{if(!k)throw new k_;h=!0}else if(-1===i)if(j){if(k)throw new k_;e=!0}else{if(!k)throw new k_;g=!0}else if(0===i){if(j){if(!k)throw new k_;c<d?(e=!0,h=!0):(f=!0,g=!0)}else if(k)throw new k_}else throw new k_;if(e){if(f)throw new k_;ml.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&ml.decrement(this.getOddCounts(),this.getOddRoundingErrors()),g){if(h)throw new k_;ml.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&ml.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},b.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],b.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],b.OUTSIDE_GSUM=[0,161,961,2015,2715],b.INSIDE_GSUM=[0,336,1036,1516],b.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],b.INSIDE_ODD_WIDEST=[2,4,6,8],b.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],b}(ml),m5=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),m6=function(a){function b(b){var c=a.call(this)||this;c.readers=[];var d=b?b.get(kP.POSSIBLE_FORMATS):null,e=b&&void 0!==b.get(kP.ASSUME_CODE_39_CHECK_DIGIT),f=b&&void 0!==b.get(kP.ENABLE_CODE_39_EXTENDED_MODE);return d&&((d.includes(lf.EAN_13)||d.includes(lf.UPC_A)||d.includes(lf.EAN_8)||d.includes(lf.UPC_E))&&c.readers.push(new mg(b)),d.includes(lf.CODE_39)&&c.readers.push(new lP(e,f)),d.includes(lf.CODE_93)&&c.readers.push(new lS),d.includes(lf.CODE_128)&&c.readers.push(new lM),d.includes(lf.ITF)&&c.readers.push(new lV),d.includes(lf.CODABAR)&&c.readers.push(new mi),d.includes(lf.RSS_14)&&c.readers.push(new m4),d.includes(lf.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),c.readers.push(new m_))),0===c.readers.length&&(c.readers.push(new mg(b)),c.readers.push(new lP),c.readers.push(new lS),c.readers.push(new mg(b)),c.readers.push(new lM),c.readers.push(new lV),c.readers.push(new m4)),c}return m5(b,a),b.prototype.decodeRow=function(a,b,c){for(var d=0;d<this.readers.length;d++)try{return this.readers[d].decodeRow(a,b,c)}catch(a){}throw new k_},b.prototype.reset=function(){this.readers.forEach(function(a){return a.reset()})},b}(lK),m7=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();!function(a){m7(function(b,c){return void 0===b&&(b=500),a.call(this,new m6(c),b,c)||this},a)}(ld);var m8=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},m9=function(){function a(a,b,c){this.ecCodewords=a,this.ecBlocks=[b],c&&this.ecBlocks.push(c)}return a.prototype.getECCodewords=function(){return this.ecCodewords},a.prototype.getECBlocks=function(){return this.ecBlocks},a}(),na=function(){function a(a,b){this.count=a,this.dataCodewords=b}return a.prototype.getCount=function(){return this.count},a.prototype.getDataCodewords=function(){return this.dataCodewords},a}(),nb=function(){function a(a,b,c,d,e,f){this.versionNumber=a,this.symbolSizeRows=b,this.symbolSizeColumns=c,this.dataRegionSizeRows=d,this.dataRegionSizeColumns=e,this.ecBlocks=f;var g,h,i=0,j=f.getECCodewords(),k=f.getECBlocks();try{for(var l=m8(k),m=l.next();!m.done;m=l.next()){var n=m.value;i+=n.getCount()*(n.getDataCodewords()+j)}}catch(a){g={error:a}}finally{try{m&&!m.done&&(h=l.return)&&h.call(l)}finally{if(g)throw g.error}}this.totalCodewords=i}return a.prototype.getVersionNumber=function(){return this.versionNumber},a.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},a.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},a.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},a.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},a.prototype.getTotalCodewords=function(){return this.totalCodewords},a.prototype.getECBlocks=function(){return this.ecBlocks},a.getVersionForDimensions=function(b,c){var d,e;if((1&b)!=0||(1&c)!=0)throw new kR;try{for(var f=m8(a.VERSIONS),g=f.next();!g.done;g=f.next()){var h=g.value;if(h.symbolSizeRows===b&&h.symbolSizeColumns===c)return h}}catch(a){d={error:a}}finally{try{g&&!g.done&&(e=f.return)&&e.call(f)}finally{if(d)throw d.error}}throw new kR},a.prototype.toString=function(){return""+this.versionNumber},a.buildVersions=function(){return[new a(1,10,10,8,8,new m9(5,new na(1,3))),new a(2,12,12,10,10,new m9(7,new na(1,5))),new a(3,14,14,12,12,new m9(10,new na(1,8))),new a(4,16,16,14,14,new m9(12,new na(1,12))),new a(5,18,18,16,16,new m9(14,new na(1,18))),new a(6,20,20,18,18,new m9(18,new na(1,22))),new a(7,22,22,20,20,new m9(20,new na(1,30))),new a(8,24,24,22,22,new m9(24,new na(1,36))),new a(9,26,26,24,24,new m9(28,new na(1,44))),new a(10,32,32,14,14,new m9(36,new na(1,62))),new a(11,36,36,16,16,new m9(42,new na(1,86))),new a(12,40,40,18,18,new m9(48,new na(1,114))),new a(13,44,44,20,20,new m9(56,new na(1,144))),new a(14,48,48,22,22,new m9(68,new na(1,174))),new a(15,52,52,24,24,new m9(42,new na(2,102))),new a(16,64,64,14,14,new m9(56,new na(2,140))),new a(17,72,72,16,16,new m9(36,new na(4,92))),new a(18,80,80,18,18,new m9(48,new na(4,114))),new a(19,88,88,20,20,new m9(56,new na(4,144))),new a(20,96,96,22,22,new m9(68,new na(4,174))),new a(21,104,104,24,24,new m9(56,new na(6,136))),new a(22,120,120,18,18,new m9(68,new na(6,175))),new a(23,132,132,20,20,new m9(62,new na(8,163))),new a(24,144,144,22,22,new m9(62,new na(8,156),new na(2,155))),new a(25,8,18,6,16,new m9(7,new na(1,5))),new a(26,8,32,6,14,new m9(11,new na(1,10))),new a(27,12,26,10,24,new m9(14,new na(1,16))),new a(28,12,36,10,16,new m9(18,new na(1,22))),new a(29,16,36,14,16,new m9(24,new na(1,32))),new a(30,16,48,14,22,new m9(28,new na(1,49)))]},a.VERSIONS=a.buildVersions(),a}(),nc=function(){function a(b){var c=b.getHeight();if(c<8||c>144||(1&c)!=0)throw new kR;this.version=a.readVersion(b),this.mappingBitMatrix=this.extractDataRegion(b),this.readMappingMatrix=new kZ(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return a.prototype.getVersion=function(){return this.version},a.readVersion=function(a){var b=a.getHeight(),c=a.getWidth();return nb.getVersionForDimensions(b,c)},a.prototype.readCodewords=function(){var a=new Int8Array(this.version.getTotalCodewords()),b=0,c=4,d=0,e=this.mappingBitMatrix.getHeight(),f=this.mappingBitMatrix.getWidth(),g=!1,h=!1,i=!1,j=!1;do if(c!==e||0!==d||g)if(c!==e-2||0!==d||(3&f)==0||h)if(c!==e+4||2!==d||(7&f)!=0||i)if(c!==e-2||0!==d||(7&f)!=4||j){do c<e&&d>=0&&!this.readMappingMatrix.get(d,c)&&(a[b++]=255&this.readUtah(c,d,e,f)),c-=2,d+=2;while(c>=0&&d<f);c+=1,d+=3;do c>=0&&d<f&&!this.readMappingMatrix.get(d,c)&&(a[b++]=255&this.readUtah(c,d,e,f)),c+=2,d-=2;while(c<e&&d>=0);c+=3,d+=1}else a[b++]=255&this.readCorner4(e,f),c-=2,d+=2,j=!0;else a[b++]=255&this.readCorner3(e,f),c-=2,d+=2,i=!0;else a[b++]=255&this.readCorner2(e,f),c-=2,d+=2,h=!0;else a[b++]=255&this.readCorner1(e,f),c-=2,d+=2,g=!0;while(c<e||d<f);if(b!==this.version.getTotalCodewords())throw new kR;return a},a.prototype.readModule=function(a,b,c,d){return a<0&&(a+=c,b+=4-(c+4&7)),b<0&&(b+=d,a+=4-(d+4&7)),this.readMappingMatrix.set(b,a),this.mappingBitMatrix.get(b,a)},a.prototype.readUtah=function(a,b,c,d){var e=0;return this.readModule(a-2,b-2,c,d)&&(e|=1),e<<=1,this.readModule(a-2,b-1,c,d)&&(e|=1),e<<=1,this.readModule(a-1,b-2,c,d)&&(e|=1),e<<=1,this.readModule(a-1,b-1,c,d)&&(e|=1),e<<=1,this.readModule(a-1,b,c,d)&&(e|=1),e<<=1,this.readModule(a,b-2,c,d)&&(e|=1),e<<=1,this.readModule(a,b-1,c,d)&&(e|=1),e<<=1,this.readModule(a,b,c,d)&&(e|=1),e},a.prototype.readCorner1=function(a,b){var c=0;return this.readModule(a-1,0,a,b)&&(c|=1),c<<=1,this.readModule(a-1,1,a,b)&&(c|=1),c<<=1,this.readModule(a-1,2,a,b)&&(c|=1),c<<=1,this.readModule(0,b-2,a,b)&&(c|=1),c<<=1,this.readModule(0,b-1,a,b)&&(c|=1),c<<=1,this.readModule(1,b-1,a,b)&&(c|=1),c<<=1,this.readModule(2,b-1,a,b)&&(c|=1),c<<=1,this.readModule(3,b-1,a,b)&&(c|=1),c},a.prototype.readCorner2=function(a,b){var c=0;return this.readModule(a-3,0,a,b)&&(c|=1),c<<=1,this.readModule(a-2,0,a,b)&&(c|=1),c<<=1,this.readModule(a-1,0,a,b)&&(c|=1),c<<=1,this.readModule(0,b-4,a,b)&&(c|=1),c<<=1,this.readModule(0,b-3,a,b)&&(c|=1),c<<=1,this.readModule(0,b-2,a,b)&&(c|=1),c<<=1,this.readModule(0,b-1,a,b)&&(c|=1),c<<=1,this.readModule(1,b-1,a,b)&&(c|=1),c},a.prototype.readCorner3=function(a,b){var c=0;return this.readModule(a-1,0,a,b)&&(c|=1),c<<=1,this.readModule(a-1,b-1,a,b)&&(c|=1),c<<=1,this.readModule(0,b-3,a,b)&&(c|=1),c<<=1,this.readModule(0,b-2,a,b)&&(c|=1),c<<=1,this.readModule(0,b-1,a,b)&&(c|=1),c<<=1,this.readModule(1,b-3,a,b)&&(c|=1),c<<=1,this.readModule(1,b-2,a,b)&&(c|=1),c<<=1,this.readModule(1,b-1,a,b)&&(c|=1),c},a.prototype.readCorner4=function(a,b){var c=0;return this.readModule(a-3,0,a,b)&&(c|=1),c<<=1,this.readModule(a-2,0,a,b)&&(c|=1),c<<=1,this.readModule(a-1,0,a,b)&&(c|=1),c<<=1,this.readModule(0,b-2,a,b)&&(c|=1),c<<=1,this.readModule(0,b-1,a,b)&&(c|=1),c<<=1,this.readModule(1,b-1,a,b)&&(c|=1),c<<=1,this.readModule(2,b-1,a,b)&&(c|=1),c<<=1,this.readModule(3,b-1,a,b)&&(c|=1),c},a.prototype.extractDataRegion=function(a){var b=this.version.getSymbolSizeRows(),c=this.version.getSymbolSizeColumns();if(a.getHeight()!==b)throw new kB("Dimension of bitMatrix must match the version size");for(var d=this.version.getDataRegionSizeRows(),e=this.version.getDataRegionSizeColumns(),f=b/d|0,g=c/e|0,h=new kZ(g*e,f*d),i=0;i<f;++i)for(var j=i*d,k=0;k<g;++k)for(var l=k*e,m=0;m<d;++m)for(var n=i*(d+2)+1+m,o=j+m,p=0;p<e;++p){var q=k*(e+2)+1+p;if(a.get(q,n)){var r=l+p;h.set(r,o)}}return h},a}(),nd=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},ne=function(){function a(a,b){this.numDataCodewords=a,this.codewords=b}return a.getDataBlocks=function(b,c){var d,e,f,g,h=c.getECBlocks(),i=0,j=h.getECBlocks();try{for(var k=nd(j),l=k.next();!l.done;l=k.next()){var m=l.value;i+=m.getCount()}}catch(a){d={error:a}}finally{try{l&&!l.done&&(e=k.return)&&e.call(k)}finally{if(d)throw d.error}}var n=Array(i),o=0;try{for(var p=nd(j),q=p.next();!q.done;q=p.next())for(var m=q.value,r=0;r<m.getCount();r++){var s=m.getDataCodewords(),t=h.getECCodewords()+s;n[o++]=new a(s,new Uint8Array(t))}}catch(a){f={error:a}}finally{try{q&&!q.done&&(g=p.return)&&g.call(p)}finally{if(f)throw f.error}}for(var u=n[0].codewords.length-h.getECCodewords(),v=u-1,w=0,r=0;r<v;r++)for(var x=0;x<o;x++)n[x].codewords[r]=b[w++];for(var y=24===c.getVersionNumber(),z=y?8:o,x=0;x<z;x++)n[x].codewords[u-1]=b[w++];for(var A=n[0].codewords.length,r=u;r<A;r++)for(var x=0;x<o;x++){var B=y?(x+8)%o:x,C=y&&B>7?r-1:r;n[B].codewords[C]=b[w++]}if(w!==b.length)throw new kB;return n},a.prototype.getNumDataCodewords=function(){return this.numDataCodewords},a.prototype.getCodewords=function(){return this.codewords},a}(),nf=function(){function a(a){this.bytes=a,this.byteOffset=0,this.bitOffset=0}return a.prototype.getBitOffset=function(){return this.bitOffset},a.prototype.getByteOffset=function(){return this.byteOffset},a.prototype.readBits=function(a){if(a<1||a>32||a>this.available())throw new kB(""+a);var b=0,c=this.bitOffset,d=this.byteOffset,e=this.bytes;if(c>0){var f=8-c,g=a<f?a:f,h=f-g,i=255>>8-g<<h;b=(e[d]&i)>>h,a-=g,8===(c+=g)&&(c=0,d++)}if(a>0){for(;a>=8;)b=b<<8|255&e[d],d++,a-=8;if(a>0){var h=8-a,i=255>>h<<h;b=b<<a|(e[d]&i)>>h,c+=a}}return this.bitOffset=c,this.byteOffset=d,b},a.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},a}();!function(a){a[a.PAD_ENCODE=0]="PAD_ENCODE",a[a.ASCII_ENCODE=1]="ASCII_ENCODE",a[a.C40_ENCODE=2]="C40_ENCODE",a[a.TEXT_ENCODE=3]="TEXT_ENCODE",a[a.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",a[a.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",a[a.BASE256_ENCODE=6]="BASE256_ENCODE"}(m||(m={}));var ng=function(){function a(){}return a.decode=function(a){var b=new nf(a),c=new kY,d=new kY,e=[],f=m.ASCII_ENCODE;do if(f===m.ASCII_ENCODE)f=this.decodeAsciiSegment(b,c,d);else{switch(f){case m.C40_ENCODE:this.decodeC40Segment(b,c);break;case m.TEXT_ENCODE:this.decodeTextSegment(b,c);break;case m.ANSIX12_ENCODE:this.decodeAnsiX12Segment(b,c);break;case m.EDIFACT_ENCODE:this.decodeEdifactSegment(b,c);break;case m.BASE256_ENCODE:this.decodeBase256Segment(b,c,e);break;default:throw new kR}f=m.ASCII_ENCODE}while(f!==m.PAD_ENCODE&&b.available()>0);return d.length()>0&&c.append(d.toString()),new lh(a,c.toString(),0===e.length?null:e,null)},a.decodeAsciiSegment=function(a,b,c){var d=!1;do{var e=a.readBits(8);if(0===e)throw new kR;if(e<=128){d&&(e+=128),b.append(String.fromCharCode(e-1));break}if(129===e)return m.PAD_ENCODE;else if(e<=229){var f=e-130;f<10&&b.append("0"),b.append(""+f)}else switch(e){case 230:return m.C40_ENCODE;case 231:return m.BASE256_ENCODE;case 232:b.append("\x1d");break;case 233:case 234:case 241:break;case 235:d=!0;break;case 236:b.append("[)>\x1e05\x1d"),c.insert(0,"\x1e\x04");break;case 237:b.append("[)>\x1e06\x1d"),c.insert(0,"\x1e\x04");break;case 238:return m.ANSIX12_ENCODE;case 239:return m.TEXT_ENCODE;case 240:return m.EDIFACT_ENCODE;default:if(254!==e||0!==a.available())throw new kR}}while(a.available()>0);return m.ASCII_ENCODE},a.decodeC40Segment=function(a,b){var c=!1,d=[],e=0;do{if(8===a.available())return;var f=a.readBits(8);if(254===f)return;this.parseTwoBytes(f,a.readBits(8),d);for(var g=0;g<3;g++){var h=d[g];switch(e){case 0:if(h<3)e=h+1;else if(h<this.C40_BASIC_SET_CHARS.length){var i=this.C40_BASIC_SET_CHARS[h];c?(b.append(String.fromCharCode(i.charCodeAt(0)+128)),c=!1):b.append(i)}else throw new kR;break;case 1:c?(b.append(String.fromCharCode(h+128)),c=!1):b.append(String.fromCharCode(h)),e=0;break;case 2:if(h<this.C40_SHIFT2_SET_CHARS.length){var i=this.C40_SHIFT2_SET_CHARS[h];c?(b.append(String.fromCharCode(i.charCodeAt(0)+128)),c=!1):b.append(i)}else switch(h){case 27:b.append("\x1d");break;case 30:c=!0;break;default:throw new kR}e=0;break;case 3:c?(b.append(String.fromCharCode(h+224)),c=!1):b.append(String.fromCharCode(h+96)),e=0;break;default:throw new kR}}}while(a.available()>0)},a.decodeTextSegment=function(a,b){var c=!1,d=[],e=0;do{if(8===a.available())return;var f=a.readBits(8);if(254===f)return;this.parseTwoBytes(f,a.readBits(8),d);for(var g=0;g<3;g++){var h=d[g];switch(e){case 0:if(h<3)e=h+1;else if(h<this.TEXT_BASIC_SET_CHARS.length){var i=this.TEXT_BASIC_SET_CHARS[h];c?(b.append(String.fromCharCode(i.charCodeAt(0)+128)),c=!1):b.append(i)}else throw new kR;break;case 1:c?(b.append(String.fromCharCode(h+128)),c=!1):b.append(String.fromCharCode(h)),e=0;break;case 2:if(h<this.TEXT_SHIFT2_SET_CHARS.length){var i=this.TEXT_SHIFT2_SET_CHARS[h];c?(b.append(String.fromCharCode(i.charCodeAt(0)+128)),c=!1):b.append(i)}else switch(h){case 27:b.append("\x1d");break;case 30:c=!0;break;default:throw new kR}e=0;break;case 3:if(h<this.TEXT_SHIFT3_SET_CHARS.length){var i=this.TEXT_SHIFT3_SET_CHARS[h];c?(b.append(String.fromCharCode(i.charCodeAt(0)+128)),c=!1):b.append(i),e=0}else throw new kR;break;default:throw new kR}}}while(a.available()>0)},a.decodeAnsiX12Segment=function(a,b){var c=[];do{if(8===a.available())return;var d=a.readBits(8);if(254===d)return;this.parseTwoBytes(d,a.readBits(8),c);for(var e=0;e<3;e++){var f=c[e];switch(f){case 0:b.append("\r");break;case 1:b.append("*");break;case 2:b.append(">");break;case 3:b.append(" ");break;default:if(f<14)b.append(String.fromCharCode(f+44));else if(f<40)b.append(String.fromCharCode(f+51));else throw new kR}}}while(a.available()>0)},a.parseTwoBytes=function(a,b,c){var d=(a<<8)+b-1,e=Math.floor(d/1600);c[0]=e,d-=1600*e,e=Math.floor(d/40),c[1]=e,c[2]=d-40*e},a.decodeEdifactSegment=function(a,b){do{if(16>=a.available())return;for(var c=0;c<4;c++){var d=a.readBits(6);if(31===d){var e=8-a.getBitOffset();8!==e&&a.readBits(e);return}(32&d)==0&&(d|=64),b.append(String.fromCharCode(d))}}while(a.available()>0)},a.decodeBase256Segment=function(a,b,c){var d,e=1+a.getByteOffset(),f=this.unrandomize255State(a.readBits(8),e++);if((d=0===f?a.available()/8|0:f<250?f:250*(f-249)+this.unrandomize255State(a.readBits(8),e++))<0)throw new kR;for(var g=new Uint8Array(d),h=0;h<d;h++){if(8>a.available())throw new kR;g[h]=this.unrandomize255State(a.readBits(8),e++)}c.push(g);try{b.append(kW.decode(g,kX.ISO88591))}catch(a){throw new lr("Platform does not support required encoding: "+a.message)}},a.unrandomize255State=function(a,b){var c=a-(149*b%255+1);return c>=0?c:c+256},a.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],a.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],a.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],a.TEXT_SHIFT2_SET_CHARS=a.C40_SHIFT2_SET_CHARS,a.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],a}(),nh=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},ni=function(){function a(){this.rsDecoder=new ls(ln.DATA_MATRIX_FIELD_256)}return a.prototype.decode=function(a){var b,c,d=new nc(a),e=d.getVersion(),f=d.readCodewords(),g=ne.getDataBlocks(f,e),h=0;try{for(var i=nh(g),j=i.next();!j.done;j=i.next()){var k=j.value;h+=k.getNumDataCodewords()}}catch(a){b={error:a}}finally{try{j&&!j.done&&(c=i.return)&&c.call(i)}finally{if(b)throw b.error}}for(var l=new Uint8Array(h),m=g.length,n=0;n<m;n++){var o=g[n],p=o.getCodewords(),q=o.getNumDataCodewords();this.correctErrors(p,q);for(var r=0;r<q;r++)l[r*m+n]=p[r]}return ng.decode(l)},a.prototype.correctErrors=function(a,b){var c=new Int32Array(a);try{this.rsDecoder.decode(c,a.length-b)}catch(a){throw new kE}for(var d=0;d<b;d++)a[d]=c[d]},a}(),nj=function(){function a(a){this.image=a,this.rectangleDetector=new lA(this.image)}return a.prototype.detect=function(){var b=this.rectangleDetector.detect(),c=this.detectSolid1(b);if((c=this.detectSolid2(c))[3]=this.correctTopRight(c),!c[3])throw new k_;var d=(c=this.shiftToModuleCenter(c))[0],e=c[1],f=c[2],g=c[3],h=this.transitionsBetween(d,g)+1,i=this.transitionsBetween(f,g)+1;return(1&h)==1&&(h+=1),(1&i)==1&&(i+=1),4*h<7*i&&4*i<7*h&&(h=i=Math.max(h,i)),new lx(a.sampleGrid(this.image,d,e,f,g,h,i),[d,e,f,g])},a.shiftPoint=function(a,b,c){var d=(b.getX()-a.getX())/(c+1),e=(b.getY()-a.getY())/(c+1);return new lw(a.getX()+d,a.getY()+e)},a.moveAway=function(a,b,c){var d=a.getX(),e=a.getY();return d<b?d-=1:d+=1,e<c?e-=1:e+=1,new lw(d,e)},a.prototype.detectSolid1=function(a){var b=a[0],c=a[1],d=a[3],e=a[2],f=this.transitionsBetween(b,c),g=this.transitionsBetween(c,d),h=this.transitionsBetween(d,e),i=this.transitionsBetween(e,b),j=f,k=[e,b,c,d];return j>g&&(j=g,k[0]=b,k[1]=c,k[2]=d,k[3]=e),j>h&&(j=h,k[0]=c,k[1]=d,k[2]=e,k[3]=b),j>i&&(k[0]=d,k[1]=e,k[2]=b,k[3]=c),k},a.prototype.detectSolid2=function(b){var c=b[0],d=b[1],e=b[2],f=b[3],g=this.transitionsBetween(c,f),h=a.shiftPoint(d,e,(g+1)*4),i=a.shiftPoint(e,d,(g+1)*4);return this.transitionsBetween(h,c)<this.transitionsBetween(i,f)?(b[0]=c,b[1]=d,b[2]=e,b[3]=f):(b[0]=d,b[1]=e,b[2]=f,b[3]=c),b},a.prototype.correctTopRight=function(b){var c=b[0],d=b[1],e=b[2],f=b[3],g=this.transitionsBetween(c,f),h=this.transitionsBetween(d,f),i=a.shiftPoint(c,d,(h+1)*4),j=a.shiftPoint(e,d,(g+1)*4);g=this.transitionsBetween(i,f),h=this.transitionsBetween(j,f);var k=new lw(f.getX()+(e.getX()-d.getX())/(g+1),f.getY()+(e.getY()-d.getY())/(g+1)),l=new lw(f.getX()+(c.getX()-d.getX())/(h+1),f.getY()+(c.getY()-d.getY())/(h+1));return this.isValid(k)?this.isValid(l)?this.transitionsBetween(i,k)+this.transitionsBetween(j,k)>this.transitionsBetween(i,l)+this.transitionsBetween(j,l)?k:l:k:this.isValid(l)?l:null},a.prototype.shiftToModuleCenter=function(b){var c,d,e=b[0],f=b[1],g=b[2],h=b[3],i=this.transitionsBetween(e,h)+1,j=this.transitionsBetween(g,h)+1,k=a.shiftPoint(e,f,4*j),l=a.shiftPoint(g,f,4*i);i=this.transitionsBetween(k,h)+1,j=this.transitionsBetween(l,h)+1,(1&i)==1&&(i+=1),(1&j)==1&&(j+=1);var m=(e.getX()+f.getX()+g.getX()+h.getX())/4,n=(e.getY()+f.getY()+g.getY()+h.getY())/4;return e=a.moveAway(e,m,n),f=a.moveAway(f,m,n),g=a.moveAway(g,m,n),h=a.moveAway(h,m,n),k=a.shiftPoint(e,f,4*j),k=a.shiftPoint(k,h,4*i),c=a.shiftPoint(f,e,4*j),c=a.shiftPoint(c,g,4*i),l=a.shiftPoint(g,h,4*j),l=a.shiftPoint(l,f,4*i),d=a.shiftPoint(h,g,4*j),[k,c,l,d=a.shiftPoint(d,e,4*i)]},a.prototype.isValid=function(a){return a.getX()>=0&&a.getX()<this.image.getWidth()&&a.getY()>0&&a.getY()<this.image.getHeight()},a.sampleGrid=function(a,b,c,d,e,f,g){return lF.getInstance().sampleGrid(a,f,g,.5,.5,f-.5,.5,f-.5,g-.5,.5,g-.5,b.getX(),b.getY(),e.getX(),e.getY(),d.getX(),d.getY(),c.getX(),c.getY())},a.prototype.transitionsBetween=function(a,b){var c=Math.trunc(a.getX()),d=Math.trunc(a.getY()),e=Math.trunc(b.getX()),f=Math.trunc(b.getY()),g=Math.abs(f-d)>Math.abs(e-c);if(g){var h=c;c=d,d=h,h=e,e=f,f=h}for(var i=Math.abs(e-c),j=Math.abs(f-d),k=-i/2,l=d<f?1:-1,m=c<e?1:-1,n=0,o=this.image.get(g?d:c,g?c:d),p=c,q=d;p!==e;p+=m){var r=this.image.get(g?q:p,g?p:q);if(r!==o&&(n++,o=r),(k+=j)>0){if(q===f)break;q+=l,k-=i}}return n},a}(),nk=function(){function a(){this.decoder=new ni}return a.prototype.decode=function(b,c){if(void 0===c&&(c=null),null!=c&&c.has(kP.PURE_BARCODE)){var d,e,f=a.extractPureBits(b.getBlackMatrix());d=this.decoder.decode(f),e=a.NO_POINTS}else{var g=new nj(b.getBlackMatrix()).detect();d=this.decoder.decode(g.getBits()),e=g.getPoints()}var h=d.getRawBytes(),i=new le(d.getText(),h,8*h.length,e,lf.DATA_MATRIX,kG.currentTimeMillis()),j=d.getByteSegments();null!=j&&i.putMetadata(lg.BYTE_SEGMENTS,j);var k=d.getECLevel();return null!=k&&i.putMetadata(lg.ERROR_CORRECTION_LEVEL,k),i},a.prototype.reset=function(){},a.extractPureBits=function(a){var b=a.getTopLeftOnBit(),c=a.getBottomRightOnBit();if(null==b||null==c)throw new k_;var d=this.moduleSize(b,a),e=b[1],f=c[1],g=b[0],h=(c[0]-g+1)/d,i=(f-e+1)/d;if(h<=0||i<=0)throw new k_;var j=d/2;e+=j,g+=j;for(var k=new kZ(h,i),l=0;l<i;l++)for(var m=e+l*d,n=0;n<h;n++)a.get(g+n*d,m)&&k.set(n,l);return k},a.moduleSize=function(a,b){for(var c=b.getWidth(),d=a[0],e=a[1];d<c&&b.get(d,e);)d++;if(d===c)throw new k_;var f=d-a[0];if(0===f)throw new k_;return f},a.NO_POINTS=[],a}(),nl=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();!function(a){nl(function(b){return void 0===b&&(b=500),a.call(this,new nk,b)||this},a)}(ld),function(a){a[a.L=0]="L",a[a.M=1]="M",a[a.Q=2]="Q",a[a.H=3]="H"}(n||(n={}));var nm=function(){function a(b,c,d){this.value=b,this.stringValue=c,this.bits=d,a.FOR_BITS.set(d,this),a.FOR_VALUE.set(b,this)}return a.prototype.getValue=function(){return this.value},a.prototype.getBits=function(){return this.bits},a.fromString=function(b){switch(b){case"L":return a.L;case"M":return a.M;case"Q":return a.Q;case"H":return a.H;default:throw new kz(b+"not available")}},a.prototype.toString=function(){return this.stringValue},a.prototype.equals=function(b){return b instanceof a&&this.value===b.value},a.forBits=function(b){if(b<0||b>=a.FOR_BITS.size)throw new kB;return a.FOR_BITS.get(b)},a.FOR_BITS=new Map,a.FOR_VALUE=new Map,a.L=new a(n.L,"L",1),a.M=new a(n.M,"M",0),a.Q=new a(n.Q,"Q",3),a.H=new a(n.H,"H",2),a}(),nn=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},no=function(){function a(a){this.errorCorrectionLevel=nm.forBits(a>>3&3),this.dataMask=7&a}return a.numBitsDiffering=function(a,b){return kN.bitCount(a^b)},a.decodeFormatInformation=function(b,c){var d=a.doDecodeFormatInformation(b,c);return null!==d?d:a.doDecodeFormatInformation(b^a.FORMAT_INFO_MASK_QR,c^a.FORMAT_INFO_MASK_QR)},a.doDecodeFormatInformation=function(b,c){var d,e,f=Number.MAX_SAFE_INTEGER,g=0;try{for(var h=nn(a.FORMAT_INFO_DECODE_LOOKUP),i=h.next();!i.done;i=h.next()){var j=i.value,k=j[0];if(k===b||k===c)return new a(j[1]);var l=a.numBitsDiffering(b,k);l<f&&(g=j[1],f=l),b!==c&&(l=a.numBitsDiffering(c,k))<f&&(g=j[1],f=l)}}catch(a){d={error:a}}finally{try{i&&!i.done&&(e=h.return)&&e.call(h)}finally{if(d)throw d.error}}return f<=3?new a(g):null},a.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},a.prototype.getDataMask=function(){return this.dataMask},a.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},a.prototype.equals=function(b){return b instanceof a&&this.errorCorrectionLevel===b.errorCorrectionLevel&&this.dataMask===b.dataMask},a.FORMAT_INFO_MASK_QR=21522,a.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],a}(),np=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},nq=function(){function a(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];this.ecCodewordsPerBlock=a,this.ecBlocks=b}return a.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},a.prototype.getNumBlocks=function(){var a,b,c=0,d=this.ecBlocks;try{for(var e=np(d),f=e.next();!f.done;f=e.next()){var g=f.value;c+=g.getCount()}}catch(b){a={error:b}}finally{try{f&&!f.done&&(b=e.return)&&b.call(e)}finally{if(a)throw a.error}}return c},a.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},a.prototype.getECBlocks=function(){return this.ecBlocks},a}(),nr=function(){function a(a,b){this.count=a,this.dataCodewords=b}return a.prototype.getCount=function(){return this.count},a.prototype.getDataCodewords=function(){return this.dataCodewords},a}(),ns=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},nt=function(){function a(a,b){for(var c,d,e=[],f=2;f<arguments.length;f++)e[f-2]=arguments[f];this.versionNumber=a,this.alignmentPatternCenters=b,this.ecBlocks=e;var g=0,h=e[0].getECCodewordsPerBlock(),i=e[0].getECBlocks();try{for(var j=ns(i),k=j.next();!k.done;k=j.next()){var l=k.value;g+=l.getCount()*(l.getDataCodewords()+h)}}catch(a){c={error:a}}finally{try{k&&!k.done&&(d=j.return)&&d.call(j)}finally{if(c)throw c.error}}this.totalCodewords=g}return a.prototype.getVersionNumber=function(){return this.versionNumber},a.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},a.prototype.getTotalCodewords=function(){return this.totalCodewords},a.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},a.prototype.getECBlocksForLevel=function(a){return this.ecBlocks[a.getValue()]},a.getProvisionalVersionForDimension=function(a){if(a%4!=1)throw new kR;try{return this.getVersionForNumber((a-17)/4)}catch(a){throw new kR}},a.getVersionForNumber=function(b){if(b<1||b>40)throw new kB;return a.VERSIONS[b-1]},a.decodeVersionInformation=function(b){for(var c=Number.MAX_SAFE_INTEGER,d=0,e=0;e<a.VERSION_DECODE_INFO.length;e++){var f=a.VERSION_DECODE_INFO[e];if(f===b)return a.getVersionForNumber(e+7);var g=no.numBitsDiffering(b,f);g<c&&(d=e+7,c=g)}return c<=3?a.getVersionForNumber(d):null},a.prototype.buildFunctionPattern=function(){var a=this.getDimensionForVersion(),b=new kZ(a);b.setRegion(0,0,9,9),b.setRegion(a-8,0,8,9),b.setRegion(0,a-8,9,8);for(var c=this.alignmentPatternCenters.length,d=0;d<c;d++)for(var e=this.alignmentPatternCenters[d]-2,f=0;f<c;f++)(0!==d||0!==f&&f!==c-1)&&(d!==c-1||0!==f)&&b.setRegion(this.alignmentPatternCenters[f]-2,e,5,5);return b.setRegion(6,9,1,a-17),b.setRegion(9,6,a-17,1),this.versionNumber>6&&(b.setRegion(a-11,0,3,6),b.setRegion(0,a-11,6,3)),b},a.prototype.toString=function(){return""+this.versionNumber},a.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),a.VERSIONS=[new a(1,new Int32Array(0),new nq(7,new nr(1,19)),new nq(10,new nr(1,16)),new nq(13,new nr(1,13)),new nq(17,new nr(1,9))),new a(2,Int32Array.from([6,18]),new nq(10,new nr(1,34)),new nq(16,new nr(1,28)),new nq(22,new nr(1,22)),new nq(28,new nr(1,16))),new a(3,Int32Array.from([6,22]),new nq(15,new nr(1,55)),new nq(26,new nr(1,44)),new nq(18,new nr(2,17)),new nq(22,new nr(2,13))),new a(4,Int32Array.from([6,26]),new nq(20,new nr(1,80)),new nq(18,new nr(2,32)),new nq(26,new nr(2,24)),new nq(16,new nr(4,9))),new a(5,Int32Array.from([6,30]),new nq(26,new nr(1,108)),new nq(24,new nr(2,43)),new nq(18,new nr(2,15),new nr(2,16)),new nq(22,new nr(2,11),new nr(2,12))),new a(6,Int32Array.from([6,34]),new nq(18,new nr(2,68)),new nq(16,new nr(4,27)),new nq(24,new nr(4,19)),new nq(28,new nr(4,15))),new a(7,Int32Array.from([6,22,38]),new nq(20,new nr(2,78)),new nq(18,new nr(4,31)),new nq(18,new nr(2,14),new nr(4,15)),new nq(26,new nr(4,13),new nr(1,14))),new a(8,Int32Array.from([6,24,42]),new nq(24,new nr(2,97)),new nq(22,new nr(2,38),new nr(2,39)),new nq(22,new nr(4,18),new nr(2,19)),new nq(26,new nr(4,14),new nr(2,15))),new a(9,Int32Array.from([6,26,46]),new nq(30,new nr(2,116)),new nq(22,new nr(3,36),new nr(2,37)),new nq(20,new nr(4,16),new nr(4,17)),new nq(24,new nr(4,12),new nr(4,13))),new a(10,Int32Array.from([6,28,50]),new nq(18,new nr(2,68),new nr(2,69)),new nq(26,new nr(4,43),new nr(1,44)),new nq(24,new nr(6,19),new nr(2,20)),new nq(28,new nr(6,15),new nr(2,16))),new a(11,Int32Array.from([6,30,54]),new nq(20,new nr(4,81)),new nq(30,new nr(1,50),new nr(4,51)),new nq(28,new nr(4,22),new nr(4,23)),new nq(24,new nr(3,12),new nr(8,13))),new a(12,Int32Array.from([6,32,58]),new nq(24,new nr(2,92),new nr(2,93)),new nq(22,new nr(6,36),new nr(2,37)),new nq(26,new nr(4,20),new nr(6,21)),new nq(28,new nr(7,14),new nr(4,15))),new a(13,Int32Array.from([6,34,62]),new nq(26,new nr(4,107)),new nq(22,new nr(8,37),new nr(1,38)),new nq(24,new nr(8,20),new nr(4,21)),new nq(22,new nr(12,11),new nr(4,12))),new a(14,Int32Array.from([6,26,46,66]),new nq(30,new nr(3,115),new nr(1,116)),new nq(24,new nr(4,40),new nr(5,41)),new nq(20,new nr(11,16),new nr(5,17)),new nq(24,new nr(11,12),new nr(5,13))),new a(15,Int32Array.from([6,26,48,70]),new nq(22,new nr(5,87),new nr(1,88)),new nq(24,new nr(5,41),new nr(5,42)),new nq(30,new nr(5,24),new nr(7,25)),new nq(24,new nr(11,12),new nr(7,13))),new a(16,Int32Array.from([6,26,50,74]),new nq(24,new nr(5,98),new nr(1,99)),new nq(28,new nr(7,45),new nr(3,46)),new nq(24,new nr(15,19),new nr(2,20)),new nq(30,new nr(3,15),new nr(13,16))),new a(17,Int32Array.from([6,30,54,78]),new nq(28,new nr(1,107),new nr(5,108)),new nq(28,new nr(10,46),new nr(1,47)),new nq(28,new nr(1,22),new nr(15,23)),new nq(28,new nr(2,14),new nr(17,15))),new a(18,Int32Array.from([6,30,56,82]),new nq(30,new nr(5,120),new nr(1,121)),new nq(26,new nr(9,43),new nr(4,44)),new nq(28,new nr(17,22),new nr(1,23)),new nq(28,new nr(2,14),new nr(19,15))),new a(19,Int32Array.from([6,30,58,86]),new nq(28,new nr(3,113),new nr(4,114)),new nq(26,new nr(3,44),new nr(11,45)),new nq(26,new nr(17,21),new nr(4,22)),new nq(26,new nr(9,13),new nr(16,14))),new a(20,Int32Array.from([6,34,62,90]),new nq(28,new nr(3,107),new nr(5,108)),new nq(26,new nr(3,41),new nr(13,42)),new nq(30,new nr(15,24),new nr(5,25)),new nq(28,new nr(15,15),new nr(10,16))),new a(21,Int32Array.from([6,28,50,72,94]),new nq(28,new nr(4,116),new nr(4,117)),new nq(26,new nr(17,42)),new nq(28,new nr(17,22),new nr(6,23)),new nq(30,new nr(19,16),new nr(6,17))),new a(22,Int32Array.from([6,26,50,74,98]),new nq(28,new nr(2,111),new nr(7,112)),new nq(28,new nr(17,46)),new nq(30,new nr(7,24),new nr(16,25)),new nq(24,new nr(34,13))),new a(23,Int32Array.from([6,30,54,78,102]),new nq(30,new nr(4,121),new nr(5,122)),new nq(28,new nr(4,47),new nr(14,48)),new nq(30,new nr(11,24),new nr(14,25)),new nq(30,new nr(16,15),new nr(14,16))),new a(24,Int32Array.from([6,28,54,80,106]),new nq(30,new nr(6,117),new nr(4,118)),new nq(28,new nr(6,45),new nr(14,46)),new nq(30,new nr(11,24),new nr(16,25)),new nq(30,new nr(30,16),new nr(2,17))),new a(25,Int32Array.from([6,32,58,84,110]),new nq(26,new nr(8,106),new nr(4,107)),new nq(28,new nr(8,47),new nr(13,48)),new nq(30,new nr(7,24),new nr(22,25)),new nq(30,new nr(22,15),new nr(13,16))),new a(26,Int32Array.from([6,30,58,86,114]),new nq(28,new nr(10,114),new nr(2,115)),new nq(28,new nr(19,46),new nr(4,47)),new nq(28,new nr(28,22),new nr(6,23)),new nq(30,new nr(33,16),new nr(4,17))),new a(27,Int32Array.from([6,34,62,90,118]),new nq(30,new nr(8,122),new nr(4,123)),new nq(28,new nr(22,45),new nr(3,46)),new nq(30,new nr(8,23),new nr(26,24)),new nq(30,new nr(12,15),new nr(28,16))),new a(28,Int32Array.from([6,26,50,74,98,122]),new nq(30,new nr(3,117),new nr(10,118)),new nq(28,new nr(3,45),new nr(23,46)),new nq(30,new nr(4,24),new nr(31,25)),new nq(30,new nr(11,15),new nr(31,16))),new a(29,Int32Array.from([6,30,54,78,102,126]),new nq(30,new nr(7,116),new nr(7,117)),new nq(28,new nr(21,45),new nr(7,46)),new nq(30,new nr(1,23),new nr(37,24)),new nq(30,new nr(19,15),new nr(26,16))),new a(30,Int32Array.from([6,26,52,78,104,130]),new nq(30,new nr(5,115),new nr(10,116)),new nq(28,new nr(19,47),new nr(10,48)),new nq(30,new nr(15,24),new nr(25,25)),new nq(30,new nr(23,15),new nr(25,16))),new a(31,Int32Array.from([6,30,56,82,108,134]),new nq(30,new nr(13,115),new nr(3,116)),new nq(28,new nr(2,46),new nr(29,47)),new nq(30,new nr(42,24),new nr(1,25)),new nq(30,new nr(23,15),new nr(28,16))),new a(32,Int32Array.from([6,34,60,86,112,138]),new nq(30,new nr(17,115)),new nq(28,new nr(10,46),new nr(23,47)),new nq(30,new nr(10,24),new nr(35,25)),new nq(30,new nr(19,15),new nr(35,16))),new a(33,Int32Array.from([6,30,58,86,114,142]),new nq(30,new nr(17,115),new nr(1,116)),new nq(28,new nr(14,46),new nr(21,47)),new nq(30,new nr(29,24),new nr(19,25)),new nq(30,new nr(11,15),new nr(46,16))),new a(34,Int32Array.from([6,34,62,90,118,146]),new nq(30,new nr(13,115),new nr(6,116)),new nq(28,new nr(14,46),new nr(23,47)),new nq(30,new nr(44,24),new nr(7,25)),new nq(30,new nr(59,16),new nr(1,17))),new a(35,Int32Array.from([6,30,54,78,102,126,150]),new nq(30,new nr(12,121),new nr(7,122)),new nq(28,new nr(12,47),new nr(26,48)),new nq(30,new nr(39,24),new nr(14,25)),new nq(30,new nr(22,15),new nr(41,16))),new a(36,Int32Array.from([6,24,50,76,102,128,154]),new nq(30,new nr(6,121),new nr(14,122)),new nq(28,new nr(6,47),new nr(34,48)),new nq(30,new nr(46,24),new nr(10,25)),new nq(30,new nr(2,15),new nr(64,16))),new a(37,Int32Array.from([6,28,54,80,106,132,158]),new nq(30,new nr(17,122),new nr(4,123)),new nq(28,new nr(29,46),new nr(14,47)),new nq(30,new nr(49,24),new nr(10,25)),new nq(30,new nr(24,15),new nr(46,16))),new a(38,Int32Array.from([6,32,58,84,110,136,162]),new nq(30,new nr(4,122),new nr(18,123)),new nq(28,new nr(13,46),new nr(32,47)),new nq(30,new nr(48,24),new nr(14,25)),new nq(30,new nr(42,15),new nr(32,16))),new a(39,Int32Array.from([6,26,54,82,110,138,166]),new nq(30,new nr(20,117),new nr(4,118)),new nq(28,new nr(40,47),new nr(7,48)),new nq(30,new nr(43,24),new nr(22,25)),new nq(30,new nr(10,15),new nr(67,16))),new a(40,Int32Array.from([6,30,58,86,114,142,170]),new nq(30,new nr(19,118),new nr(6,119)),new nq(28,new nr(18,47),new nr(31,48)),new nq(30,new nr(34,24),new nr(34,25)),new nq(30,new nr(20,15),new nr(61,16)))],a}();!function(a){a[a.DATA_MASK_000=0]="DATA_MASK_000",a[a.DATA_MASK_001=1]="DATA_MASK_001",a[a.DATA_MASK_010=2]="DATA_MASK_010",a[a.DATA_MASK_011=3]="DATA_MASK_011",a[a.DATA_MASK_100=4]="DATA_MASK_100",a[a.DATA_MASK_101=5]="DATA_MASK_101",a[a.DATA_MASK_110=6]="DATA_MASK_110",a[a.DATA_MASK_111=7]="DATA_MASK_111"}(o||(o={}));var nu=function(){function a(a,b){this.value=a,this.isMasked=b}return a.prototype.unmaskBitMatrix=function(a,b){for(var c=0;c<b;c++)for(var d=0;d<b;d++)this.isMasked(c,d)&&a.flip(d,c)},a.values=new Map([[o.DATA_MASK_000,new a(o.DATA_MASK_000,function(a,b){return(a+b&1)==0})],[o.DATA_MASK_001,new a(o.DATA_MASK_001,function(a,b){return(1&a)==0})],[o.DATA_MASK_010,new a(o.DATA_MASK_010,function(a,b){return b%3==0})],[o.DATA_MASK_011,new a(o.DATA_MASK_011,function(a,b){return(a+b)%3==0})],[o.DATA_MASK_100,new a(o.DATA_MASK_100,function(a,b){return(Math.floor(a/2)+Math.floor(b/3)&1)==0})],[o.DATA_MASK_101,new a(o.DATA_MASK_101,function(a,b){return a*b%6==0})],[o.DATA_MASK_110,new a(o.DATA_MASK_110,function(a,b){return a*b%6<3})],[o.DATA_MASK_111,new a(o.DATA_MASK_111,function(a,b){return(a+b+a*b%3&1)==0})]]),a}(),nv=function(){function a(a){var b=a.getHeight();if(b<21||(3&b)!=1)throw new kR;this.bitMatrix=a}return a.prototype.readFormatInformation=function(){if(null!==this.parsedFormatInfo&&void 0!==this.parsedFormatInfo)return this.parsedFormatInfo;for(var a=0,b=0;b<6;b++)a=this.copyBit(b,8,a);a=this.copyBit(7,8,a),a=this.copyBit(8,8,a),a=this.copyBit(8,7,a);for(var c=5;c>=0;c--)a=this.copyBit(8,c,a);for(var d=this.bitMatrix.getHeight(),e=0,f=d-7,c=d-1;c>=f;c--)e=this.copyBit(8,c,e);for(var b=d-8;b<d;b++)e=this.copyBit(b,8,e);if(this.parsedFormatInfo=no.decodeFormatInformation(a,e),null!==this.parsedFormatInfo)return this.parsedFormatInfo;throw new kR},a.prototype.readVersion=function(){if(null!==this.parsedVersion&&void 0!==this.parsedVersion)return this.parsedVersion;var a=this.bitMatrix.getHeight(),b=Math.floor((a-17)/4);if(b<=6)return nt.getVersionForNumber(b);for(var c=0,d=a-11,e=5;e>=0;e--)for(var f=a-9;f>=d;f--)c=this.copyBit(f,e,c);var g=nt.decodeVersionInformation(c);if(null!==g&&g.getDimensionForVersion()===a)return this.parsedVersion=g,g;c=0;for(var f=5;f>=0;f--)for(var e=a-9;e>=d;e--)c=this.copyBit(f,e,c);if(null!==(g=nt.decodeVersionInformation(c))&&g.getDimensionForVersion()===a)return this.parsedVersion=g,g;throw new kR},a.prototype.copyBit=function(a,b,c){return(this.isMirror?this.bitMatrix.get(b,a):this.bitMatrix.get(a,b))?c<<1|1:c<<1},a.prototype.readCodewords=function(){var a=this.readFormatInformation(),b=this.readVersion(),c=nu.values.get(a.getDataMask()),d=this.bitMatrix.getHeight();c.unmaskBitMatrix(this.bitMatrix,d);for(var e=b.buildFunctionPattern(),f=!0,g=new Uint8Array(b.getTotalCodewords()),h=0,i=0,j=0,k=d-1;k>0;k-=2){6===k&&k--;for(var l=0;l<d;l++)for(var m=f?d-1-l:l,n=0;n<2;n++)e.get(k-n,m)||(j++,i<<=1,this.bitMatrix.get(k-n,m)&&(i|=1),8===j&&(g[h++]=i,j=0,i=0));f=!f}if(h!==b.getTotalCodewords())throw new kR;return g},a.prototype.remask=function(){if(null!==this.parsedFormatInfo){var a=nu.values.get(this.parsedFormatInfo.getDataMask()),b=this.bitMatrix.getHeight();a.unmaskBitMatrix(this.bitMatrix,b)}},a.prototype.setMirror=function(a){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=a},a.prototype.mirror=function(){for(var a=this.bitMatrix,b=0,c=a.getWidth();b<c;b++)for(var d=b+1,e=a.getHeight();d<e;d++)a.get(b,d)!==a.get(d,b)&&(a.flip(d,b),a.flip(b,d))},a}(),nw=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},nx=function(){function a(a,b){this.numDataCodewords=a,this.codewords=b}return a.getDataBlocks=function(b,c,d){if(b.length!==c.getTotalCodewords())throw new kB;var e,f,g,h,i=c.getECBlocksForLevel(d),j=0,k=i.getECBlocks();try{for(var l=nw(k),m=l.next();!m.done;m=l.next()){var n=m.value;j+=n.getCount()}}catch(a){e={error:a}}finally{try{m&&!m.done&&(f=l.return)&&f.call(l)}finally{if(e)throw e.error}}var o=Array(j),p=0;try{for(var q=nw(k),r=q.next();!r.done;r=q.next())for(var n=r.value,s=0;s<n.getCount();s++){var t=n.getDataCodewords(),u=i.getECCodewordsPerBlock()+t;o[p++]=new a(t,new Uint8Array(u))}}catch(a){g={error:a}}finally{try{r&&!r.done&&(h=q.return)&&h.call(q)}finally{if(g)throw g.error}}for(var v=o[0].codewords.length,w=o.length-1;w>=0&&o[w].codewords.length!==v;)w--;w++;for(var x=v-i.getECCodewordsPerBlock(),y=0,s=0;s<x;s++)for(var z=0;z<p;z++)o[z].codewords[s]=b[y++];for(var z=w;z<p;z++)o[z].codewords[x]=b[y++];for(var A=o[0].codewords.length,s=x;s<A;s++)for(var z=0;z<p;z++){var B=z<w?s:s+1;o[z].codewords[B]=b[y++]}return o},a.prototype.getNumDataCodewords=function(){return this.numDataCodewords},a.prototype.getCodewords=function(){return this.codewords},a}();!function(a){a[a.TERMINATOR=0]="TERMINATOR",a[a.NUMERIC=1]="NUMERIC",a[a.ALPHANUMERIC=2]="ALPHANUMERIC",a[a.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",a[a.BYTE=4]="BYTE",a[a.ECI=5]="ECI",a[a.KANJI=6]="KANJI",a[a.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",a[a.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",a[a.HANZI=9]="HANZI"}(p||(p={}));var ny=function(){function a(b,c,d,e){this.value=b,this.stringValue=c,this.characterCountBitsForVersions=d,this.bits=e,a.FOR_BITS.set(e,this),a.FOR_VALUE.set(b,this)}return a.forBits=function(b){var c=a.FOR_BITS.get(b);if(void 0===c)throw new kB;return c},a.prototype.getCharacterCountBits=function(a){var b,c=a.getVersionNumber();return b=c<=9?0:c<=26?1:2,this.characterCountBitsForVersions[b]},a.prototype.getValue=function(){return this.value},a.prototype.getBits=function(){return this.bits},a.prototype.equals=function(b){return b instanceof a&&this.value===b.value},a.prototype.toString=function(){return this.stringValue},a.FOR_BITS=new Map,a.FOR_VALUE=new Map,a.TERMINATOR=new a(p.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),a.NUMERIC=new a(p.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),a.ALPHANUMERIC=new a(p.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),a.STRUCTURED_APPEND=new a(p.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),a.BYTE=new a(p.BYTE,"BYTE",Int32Array.from([8,16,16]),4),a.ECI=new a(p.ECI,"ECI",Int32Array.from([0,0,0]),7),a.KANJI=new a(p.KANJI,"KANJI",Int32Array.from([8,10,12]),8),a.FNC1_FIRST_POSITION=new a(p.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),a.FNC1_SECOND_POSITION=new a(p.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),a.HANZI=new a(p.HANZI,"HANZI",Int32Array.from([8,10,12]),13),a}(),nz=function(){function a(){}return a.decode=function(b,c,d,e){var f=new nf(b),g=new kY,h=[],i=-1,j=-1;try{var k=null,l=!1,m=void 0;do{if(4>f.available())m=ny.TERMINATOR;else{var n=f.readBits(4);m=ny.forBits(n)}switch(m){case ny.TERMINATOR:break;case ny.FNC1_FIRST_POSITION:case ny.FNC1_SECOND_POSITION:l=!0;break;case ny.STRUCTURED_APPEND:if(16>f.available())throw new kR;i=f.readBits(8),j=f.readBits(8);break;case ny.ECI:var o=a.parseECIValue(f);if(k=kT.getCharacterSetECIByValue(o),null===k)throw new kR;break;case ny.HANZI:var p=f.readBits(4),q=f.readBits(m.getCharacterCountBits(c));p===a.GB2312_SUBSET&&a.decodeHanziSegment(f,g,q);break;default:var r=f.readBits(m.getCharacterCountBits(c));switch(m){case ny.NUMERIC:a.decodeNumericSegment(f,g,r);break;case ny.ALPHANUMERIC:a.decodeAlphanumericSegment(f,g,r,l);break;case ny.BYTE:a.decodeByteSegment(f,g,r,k,h,e);break;case ny.KANJI:a.decodeKanjiSegment(f,g,r);break;default:throw new kR}}}while(m!==ny.TERMINATOR)}catch(a){throw new kR}return new lh(b,g.toString(),0===h.length?null:h,null===d?null:d.toString(),i,j)},a.decodeHanziSegment=function(a,b,c){if(13*c>a.available())throw new kR;for(var d=new Uint8Array(2*c),e=0;c>0;){var f=a.readBits(13),g=f/96<<8|f%96;g<959?g+=41377:g+=42657,d[e]=g>>8&255,d[e+1]=255&g,e+=2,c--}try{b.append(kW.decode(d,kX.GB2312))}catch(a){throw new kR(a)}},a.decodeKanjiSegment=function(a,b,c){if(13*c>a.available())throw new kR;for(var d=new Uint8Array(2*c),e=0;c>0;){var f=a.readBits(13),g=f/192<<8|f%192;g<7936?g+=33088:g+=49472,d[e]=g>>8,d[e+1]=g,e+=2,c--}try{b.append(kW.decode(d,kX.SHIFT_JIS))}catch(a){throw new kR(a)}},a.decodeByteSegment=function(a,b,c,d,e,f){if(8*c>a.available())throw new kR;for(var g,h=new Uint8Array(c),i=0;i<c;i++)h[i]=a.readBits(8);g=null===d?kX.guessEncoding(h,f):d.getName();try{b.append(kW.decode(h,g))}catch(a){throw new kR(a)}e.push(h)},a.toAlphaNumericChar=function(b){if(b>=a.ALPHANUMERIC_CHARS.length)throw new kR;return a.ALPHANUMERIC_CHARS[b]},a.decodeAlphanumericSegment=function(b,c,d,e){for(var f=c.length();d>1;){if(11>b.available())throw new kR;var g=b.readBits(11);c.append(a.toAlphaNumericChar(Math.floor(g/45))),c.append(a.toAlphaNumericChar(g%45)),d-=2}if(1===d){if(6>b.available())throw new kR;c.append(a.toAlphaNumericChar(b.readBits(6)))}if(e)for(var h=f;h<c.length();h++)"%"===c.charAt(h)&&(h<c.length()-1&&"%"===c.charAt(h+1)?c.deleteCharAt(h+1):c.setCharAt(h,"\x1d"))},a.decodeNumericSegment=function(b,c,d){for(;d>=3;){if(10>b.available())throw new kR;var e=b.readBits(10);if(e>=1e3)throw new kR;c.append(a.toAlphaNumericChar(Math.floor(e/100))),c.append(a.toAlphaNumericChar(Math.floor(e/10)%10)),c.append(a.toAlphaNumericChar(e%10)),d-=3}if(2===d){if(7>b.available())throw new kR;var f=b.readBits(7);if(f>=100)throw new kR;c.append(a.toAlphaNumericChar(Math.floor(f/10))),c.append(a.toAlphaNumericChar(f%10))}else if(1===d){if(4>b.available())throw new kR;var g=b.readBits(4);if(g>=10)throw new kR;c.append(a.toAlphaNumericChar(g))}},a.parseECIValue=function(a){var b=a.readBits(8);if((128&b)==0)return 127&b;if((192&b)==128)return(63&b)<<8|a.readBits(8);if((224&b)==192)return(31&b)<<16|a.readBits(16);throw new kR},a.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",a.GB2312_SUBSET=1,a}(),nA=function(){function a(a){this.mirrored=a}return a.prototype.isMirrored=function(){return this.mirrored},a.prototype.applyMirroredCorrection=function(a){if(this.mirrored&&null!==a&&!(a.length<3)){var b=a[0];a[0]=a[2],a[2]=b}},a}(),nB=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},nC=function(){function a(){this.rsDecoder=new ls(ln.QR_CODE_FIELD_256)}return a.prototype.decodeBooleanArray=function(a,b){return this.decodeBitMatrix(kZ.parseFromBooleanArray(a),b)},a.prototype.decodeBitMatrix=function(a,b){var c=new nv(a),d=null;try{return this.decodeBitMatrixParser(c,b)}catch(a){d=a}try{c.remask(),c.setMirror(!0),c.readVersion(),c.readFormatInformation(),c.mirror();var e=this.decodeBitMatrixParser(c,b);return e.setOther(new nA(!0)),e}catch(a){if(null!==d)throw d;throw a}},a.prototype.decodeBitMatrixParser=function(a,b){var c,d,e,f,g=a.readVersion(),h=a.readFormatInformation().getErrorCorrectionLevel(),i=a.readCodewords(),j=nx.getDataBlocks(i,g,h),k=0;try{for(var l=nB(j),m=l.next();!m.done;m=l.next()){var n=m.value;k+=n.getNumDataCodewords()}}catch(a){c={error:a}}finally{try{m&&!m.done&&(d=l.return)&&d.call(l)}finally{if(c)throw c.error}}var o=new Uint8Array(k),p=0;try{for(var q=nB(j),r=q.next();!r.done;r=q.next()){var n=r.value,s=n.getCodewords(),t=n.getNumDataCodewords();this.correctErrors(s,t);for(var u=0;u<t;u++)o[p++]=s[u]}}catch(a){e={error:a}}finally{try{r&&!r.done&&(f=q.return)&&f.call(q)}finally{if(e)throw e.error}}return nz.decode(o,g,h,b)},a.prototype.correctErrors=function(a,b){var c=new Int32Array(a);try{this.rsDecoder.decode(c,a.length-b)}catch(a){throw new kE}for(var d=0;d<b;d++)a[d]=c[d]},a}(),nD=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),nE=function(a){function b(b,c,d){var e=a.call(this,b,c)||this;return e.estimatedModuleSize=d,e}return nD(b,a),b.prototype.aboutEquals=function(a,b,c){if(Math.abs(b-this.getY())<=a&&Math.abs(c-this.getX())<=a){var d=Math.abs(a-this.estimatedModuleSize);return d<=1||d<=this.estimatedModuleSize}return!1},b.prototype.combineEstimate=function(a,c,d){return new b((this.getX()+c)/2,(this.getY()+a)/2,(this.estimatedModuleSize+d)/2)},b}(lw),nF=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},nG=function(){function a(a,b,c,d,e,f,g){this.image=a,this.startX=b,this.startY=c,this.width=d,this.height=e,this.moduleSize=f,this.resultPointCallback=g,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return a.prototype.find=function(){for(var a=this.startX,b=this.height,c=a+this.width,d=this.startY+b/2,e=new Int32Array(3),f=this.image,g=0;g<b;g++){var h=d+((1&g)==0?Math.floor((g+1)/2):-Math.floor((g+1)/2));e[0]=0,e[1]=0,e[2]=0;for(var i=a;i<c&&!f.get(i,h);)i++;for(var j=0;i<c;){if(f.get(i,h))if(1===j)e[1]++;else if(2===j){if(this.foundPatternCross(e)){var k=this.handlePossibleCenter(e,h,i);if(null!==k)return k}e[0]=e[2],e[1]=1,e[2]=0,j=1}else e[++j]++;else 1===j&&j++,e[j]++;i++}if(this.foundPatternCross(e)){var k=this.handlePossibleCenter(e,h,c);if(null!==k)return k}}if(0!==this.possibleCenters.length)return this.possibleCenters[0];throw new k_},a.centerFromEnd=function(a,b){return b-a[2]-a[1]/2},a.prototype.foundPatternCross=function(a){for(var b=this.moduleSize,c=b/2,d=0;d<3;d++)if(Math.abs(b-a[d])>=c)return!1;return!0},a.prototype.crossCheckVertical=function(b,c,d,e){var f=this.image,g=f.getHeight(),h=this.crossCheckStateCount;h[0]=0,h[1]=0,h[2]=0;for(var i=b;i>=0&&f.get(c,i)&&h[1]<=d;)h[1]++,i--;if(i<0||h[1]>d)return NaN;for(;i>=0&&!f.get(c,i)&&h[0]<=d;)h[0]++,i--;if(h[0]>d)return NaN;for(i=b+1;i<g&&f.get(c,i)&&h[1]<=d;)h[1]++,i++;if(i===g||h[1]>d)return NaN;for(;i<g&&!f.get(c,i)&&h[2]<=d;)h[2]++,i++;return h[2]>d||5*Math.abs(h[0]+h[1]+h[2]-e)>=2*e?NaN:this.foundPatternCross(h)?a.centerFromEnd(h,i):NaN},a.prototype.handlePossibleCenter=function(b,c,d){var e,f,g=b[0]+b[1]+b[2],h=a.centerFromEnd(b,d),i=this.crossCheckVertical(c,h,2*b[1],g);if(!isNaN(i)){var j=(b[0]+b[1]+b[2])/3;try{for(var k=nF(this.possibleCenters),l=k.next();!l.done;l=k.next()){var m=l.value;if(m.aboutEquals(j,i,h))return m.combineEstimate(i,h,j)}}catch(a){e={error:a}}finally{try{l&&!l.done&&(f=k.return)&&f.call(k)}finally{if(e)throw e.error}}var n=new nE(h,i,j);this.possibleCenters.push(n),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(n)}return null},a}(),nH=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),nI=function(a){function b(b,c,d,e){var f=a.call(this,b,c)||this;return f.estimatedModuleSize=d,f.count=e,void 0===e&&(f.count=1),f}return nH(b,a),b.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},b.prototype.getCount=function(){return this.count},b.prototype.aboutEquals=function(a,b,c){if(Math.abs(b-this.getY())<=a&&Math.abs(c-this.getX())<=a){var d=Math.abs(a-this.estimatedModuleSize);return d<=1||d<=this.estimatedModuleSize}return!1},b.prototype.combineEstimate=function(a,c,d){var e=this.count+1;return new b((this.count*this.getX()+c)/e,(this.count*this.getY()+a)/e,(this.count*this.estimatedModuleSize+d)/e,e)},b}(lw),nJ=function(){function a(a){this.bottomLeft=a[0],this.topLeft=a[1],this.topRight=a[2]}return a.prototype.getBottomLeft=function(){return this.bottomLeft},a.prototype.getTopLeft=function(){return this.topLeft},a.prototype.getTopRight=function(){return this.topRight},a}(),nK=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},nL=function(){function a(a,b){this.image=a,this.resultPointCallback=b,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=b}return a.prototype.getImage=function(){return this.image},a.prototype.getPossibleCenters=function(){return this.possibleCenters},a.prototype.find=function(b){var c=null!=b&&void 0!==b.get(kP.TRY_HARDER),d=null!=b&&void 0!==b.get(kP.PURE_BARCODE),e=this.image,f=e.getHeight(),g=e.getWidth(),h=Math.floor(3*f/(4*a.MAX_MODULES));(h<a.MIN_SKIP||c)&&(h=a.MIN_SKIP);for(var i=!1,j=new Int32Array(5),k=h-1;k<f&&!i;k+=h){j[0]=0,j[1]=0,j[2]=0,j[3]=0,j[4]=0;for(var l=0,m=0;m<g;m++)if(e.get(m,k))(1&l)==1&&l++,j[l]++;else if((1&l)==0)if(4===l)if(a.foundPatternCross(j)){var n=this.handlePossibleCenter(j,k,m,d);if(!0===n)if(h=2,!0===this.hasSkipped)i=this.haveMultiplyConfirmedCenters();else{var o=this.findRowSkip();o>j[2]&&(k+=o-j[2]-h,m=g-1)}else{j[0]=j[2],j[1]=j[3],j[2]=j[4],j[3]=1,j[4]=0,l=3;continue}l=0,j[0]=0,j[1]=0,j[2]=0,j[3]=0,j[4]=0}else j[0]=j[2],j[1]=j[3],j[2]=j[4],j[3]=1,j[4]=0,l=3;else j[++l]++;else j[l]++;if(a.foundPatternCross(j)){var n=this.handlePossibleCenter(j,k,g,d);!0===n&&(h=j[0],this.hasSkipped&&(i=this.haveMultiplyConfirmedCenters()))}}var p=this.selectBestPatterns();return lw.orderBestPatterns(p),new nJ(p)},a.centerFromEnd=function(a,b){return b-a[4]-a[3]-a[2]/2},a.foundPatternCross=function(a){for(var b=0,c=0;c<5;c++){var d=a[c];if(0===d)return!1;b+=d}if(b<7)return!1;var e=b/7,f=e/2;return Math.abs(e-a[0])<f&&Math.abs(e-a[1])<f&&Math.abs(3*e-a[2])<3*f&&Math.abs(e-a[3])<f&&Math.abs(e-a[4])<f},a.prototype.getCrossCheckStateCount=function(){var a=this.crossCheckStateCount;return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a},a.prototype.crossCheckDiagonal=function(b,c,d,e){for(var f=this.getCrossCheckStateCount(),g=0,h=this.image;b>=g&&c>=g&&h.get(c-g,b-g);)f[2]++,g++;if(b<g||c<g)return!1;for(;b>=g&&c>=g&&!h.get(c-g,b-g)&&f[1]<=d;)f[1]++,g++;if(b<g||c<g||f[1]>d)return!1;for(;b>=g&&c>=g&&h.get(c-g,b-g)&&f[0]<=d;)f[0]++,g++;if(f[0]>d)return!1;var i=h.getHeight(),j=h.getWidth();for(g=1;b+g<i&&c+g<j&&h.get(c+g,b+g);)f[2]++,g++;if(b+g>=i||c+g>=j)return!1;for(;b+g<i&&c+g<j&&!h.get(c+g,b+g)&&f[3]<d;)f[3]++,g++;if(b+g>=i||c+g>=j||f[3]>=d)return!1;for(;b+g<i&&c+g<j&&h.get(c+g,b+g)&&f[4]<d;)f[4]++,g++;return!(f[4]>=d)&&Math.abs(f[0]+f[1]+f[2]+f[3]+f[4]-e)<2*e&&a.foundPatternCross(f)},a.prototype.crossCheckVertical=function(b,c,d,e){for(var f=this.image,g=f.getHeight(),h=this.getCrossCheckStateCount(),i=b;i>=0&&f.get(c,i);)h[2]++,i--;if(i<0)return NaN;for(;i>=0&&!f.get(c,i)&&h[1]<=d;)h[1]++,i--;if(i<0||h[1]>d)return NaN;for(;i>=0&&f.get(c,i)&&h[0]<=d;)h[0]++,i--;if(h[0]>d)return NaN;for(i=b+1;i<g&&f.get(c,i);)h[2]++,i++;if(i===g)return NaN;for(;i<g&&!f.get(c,i)&&h[3]<d;)h[3]++,i++;if(i===g||h[3]>=d)return NaN;for(;i<g&&f.get(c,i)&&h[4]<d;)h[4]++,i++;return h[4]>=d||5*Math.abs(h[0]+h[1]+h[2]+h[3]+h[4]-e)>=2*e?NaN:a.foundPatternCross(h)?a.centerFromEnd(h,i):NaN},a.prototype.crossCheckHorizontal=function(b,c,d,e){for(var f=this.image,g=f.getWidth(),h=this.getCrossCheckStateCount(),i=b;i>=0&&f.get(i,c);)h[2]++,i--;if(i<0)return NaN;for(;i>=0&&!f.get(i,c)&&h[1]<=d;)h[1]++,i--;if(i<0||h[1]>d)return NaN;for(;i>=0&&f.get(i,c)&&h[0]<=d;)h[0]++,i--;if(h[0]>d)return NaN;for(i=b+1;i<g&&f.get(i,c);)h[2]++,i++;if(i===g)return NaN;for(;i<g&&!f.get(i,c)&&h[3]<d;)h[3]++,i++;if(i===g||h[3]>=d)return NaN;for(;i<g&&f.get(i,c)&&h[4]<d;)h[4]++,i++;return h[4]>=d||5*Math.abs(h[0]+h[1]+h[2]+h[3]+h[4]-e)>=e?NaN:a.foundPatternCross(h)?a.centerFromEnd(h,i):NaN},a.prototype.handlePossibleCenter=function(b,c,d,e){var f=b[0]+b[1]+b[2]+b[3]+b[4],g=a.centerFromEnd(b,d),h=this.crossCheckVertical(c,Math.floor(g),b[2],f);if(!isNaN(h)&&!isNaN(g=this.crossCheckHorizontal(Math.floor(g),Math.floor(h),b[2],f))&&(!e||this.crossCheckDiagonal(Math.floor(h),Math.floor(g),b[2],f))){for(var i=f/7,j=!1,k=this.possibleCenters,l=0,m=k.length;l<m;l++){var n=k[l];if(n.aboutEquals(i,h,g)){k[l]=n.combineEstimate(h,g,i),j=!0;break}}if(!j){var o=new nI(g,h,i);k.push(o),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(o)}return!0}return!1},a.prototype.findRowSkip=function(){if(this.possibleCenters.length<=1)return 0;var b,c,d=null;try{for(var e=nK(this.possibleCenters),f=e.next();!f.done;f=e.next()){var g=f.value;if(g.getCount()>=a.CENTER_QUORUM)if(null!=d)return this.hasSkipped=!0,Math.floor((Math.abs(d.getX()-g.getX())-Math.abs(d.getY()-g.getY()))/2);else d=g}}catch(a){b={error:a}}finally{try{f&&!f.done&&(c=e.return)&&c.call(e)}finally{if(b)throw b.error}}return 0},a.prototype.haveMultiplyConfirmedCenters=function(){var b,c,d,e,f=0,g=0,h=this.possibleCenters.length;try{for(var i=nK(this.possibleCenters),j=i.next();!j.done;j=i.next()){var k=j.value;k.getCount()>=a.CENTER_QUORUM&&(f++,g+=k.getEstimatedModuleSize())}}catch(a){b={error:a}}finally{try{j&&!j.done&&(c=i.return)&&c.call(i)}finally{if(b)throw b.error}}if(f<3)return!1;var l=g/h,m=0;try{for(var n=nK(this.possibleCenters),o=n.next();!o.done;o=n.next()){var k=o.value;m+=Math.abs(k.getEstimatedModuleSize()-l)}}catch(a){d={error:a}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(d)throw d.error}}return m<=.05*g},a.prototype.selectBestPatterns=function(){var a,b,c,d,e,f=this.possibleCenters.length;if(f<3)throw new k_;var g=this.possibleCenters;if(f>3){var h=0,i=0;try{for(var j=nK(this.possibleCenters),k=j.next();!k.done;k=j.next()){var l=k.value.getEstimatedModuleSize();h+=l,i+=l*l}}catch(b){a={error:b}}finally{try{k&&!k.done&&(b=j.return)&&b.call(j)}finally{if(a)throw a.error}}e=h/f;var m=Math.sqrt(i/f-e*e);g.sort(function(a,b){var c=Math.abs(b.getEstimatedModuleSize()-e),d=Math.abs(a.getEstimatedModuleSize()-e);return c<d?-1:+(c>d)});for(var n=Math.max(.2*e,m),o=0;o<g.length&&g.length>3;o++)Math.abs(g[o].getEstimatedModuleSize()-e)>n&&(g.splice(o,1),o--)}if(g.length>3){var h=0;try{for(var p=nK(g),q=p.next();!q.done;q=p.next()){var r=q.value;h+=r.getEstimatedModuleSize()}}catch(a){c={error:a}}finally{try{q&&!q.done&&(d=p.return)&&d.call(p)}finally{if(c)throw c.error}}e=h/g.length,g.sort(function(a,b){if(b.getCount()!==a.getCount())return b.getCount()-a.getCount();var c=Math.abs(b.getEstimatedModuleSize()-e),d=Math.abs(a.getEstimatedModuleSize()-e);return c<d?1:c>d?-1:0}),g.splice(3)}return[g[0],g[1],g[2]]},a.CENTER_QUORUM=2,a.MIN_SKIP=3,a.MAX_MODULES=57,a}(),nM=function(){function a(a){this.image=a}return a.prototype.getImage=function(){return this.image},a.prototype.getResultPointCallback=function(){return this.resultPointCallback},a.prototype.detect=function(a){this.resultPointCallback=null==a?null:a.get(kP.NEED_RESULT_POINT_CALLBACK);var b=new nL(this.image,this.resultPointCallback).find(a);return this.processFinderPatternInfo(b)},a.prototype.processFinderPatternInfo=function(b){var c=b.getTopLeft(),d=b.getTopRight(),e=b.getBottomLeft(),f=this.calculateModuleSize(c,d,e);if(f<1)throw new k_("No pattern found in proccess finder.");var g=a.computeDimension(c,d,e,f),h=nt.getProvisionalVersionForDimension(g),i=h.getDimensionForVersion()-7,j=null;if(h.getAlignmentPatternCenters().length>0)for(var k=d.getX()-c.getX()+e.getX(),l=d.getY()-c.getY()+e.getY(),m=1-3/i,n=Math.floor(c.getX()+m*(k-c.getX())),o=Math.floor(c.getY()+m*(l-c.getY())),p=4;p<=16;p<<=1)try{j=this.findAlignmentInRegion(f,n,o,p);break}catch(a){if(!(a instanceof k_))throw a}var q=a.createTransform(c,d,e,j,g);return new lx(a.sampleGrid(this.image,q,g),null===j?[e,c,d]:[e,c,d,j])},a.createTransform=function(a,b,c,d,e){var f,g,h,i,j=e-3.5;return null!==d?(f=d.getX(),g=d.getY(),i=h=j-3):(f=b.getX()-a.getX()+c.getX(),g=b.getY()-a.getY()+c.getY(),h=j,i=j),lC.quadrilateralToQuadrilateral(3.5,3.5,j,3.5,h,i,3.5,j,a.getX(),a.getY(),b.getX(),b.getY(),f,g,c.getX(),c.getY())},a.sampleGrid=function(a,b,c){return lF.getInstance().sampleGridWithTransform(a,c,c,b)},a.computeDimension=function(a,b,c,d){var e=Math.floor((lu.round(lw.distance(a,b)/d)+lu.round(lw.distance(a,c)/d))/2)+7;switch(3&e){case 0:e++;break;case 2:e--;break;case 3:throw new k_("Dimensions could be not found.")}return e},a.prototype.calculateModuleSize=function(a,b,c){return(this.calculateModuleSizeOneWay(a,b)+this.calculateModuleSizeOneWay(a,c))/2},a.prototype.calculateModuleSizeOneWay=function(a,b){var c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(a.getX()),Math.floor(a.getY()),Math.floor(b.getX()),Math.floor(b.getY())),d=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(b.getX()),Math.floor(b.getY()),Math.floor(a.getX()),Math.floor(a.getY()));return isNaN(c)?d/7:isNaN(d)?c/7:(c+d)/14},a.prototype.sizeOfBlackWhiteBlackRunBothWays=function(a,b,c,d){var e=this.sizeOfBlackWhiteBlackRun(a,b,c,d),f=1,g=a-(c-a);g<0?(f=a/(a-g),g=0):g>=this.image.getWidth()&&(f=(this.image.getWidth()-1-a)/(g-a),g=this.image.getWidth()-1);var h=Math.floor(b-(d-b)*f);return f=1,h<0?(f=b/(b-h),h=0):h>=this.image.getHeight()&&(f=(this.image.getHeight()-1-b)/(h-b),h=this.image.getHeight()-1),g=Math.floor(a+(g-a)*f),(e+=this.sizeOfBlackWhiteBlackRun(a,b,g,h))-1},a.prototype.sizeOfBlackWhiteBlackRun=function(a,b,c,d){var e=Math.abs(d-b)>Math.abs(c-a);if(e){var f=a;a=b,b=f,f=c,c=d,d=f}for(var g=Math.abs(c-a),h=Math.abs(d-b),i=-g/2,j=a<c?1:-1,k=b<d?1:-1,l=0,m=c+j,n=a,o=b;n!==m;n+=j){var p=e?o:n,q=e?n:o;if(1===l===this.image.get(p,q)){if(2===l)return lu.distance(n,o,a,b);l++}if((i+=h)>0){if(o===d)break;o+=k,i-=g}}return 2===l?lu.distance(c+j,d,a,b):NaN},a.prototype.findAlignmentInRegion=function(a,b,c,d){var e=Math.floor(d*a),f=Math.max(0,b-e),g=Math.min(this.image.getWidth()-1,b+e);if(g-f<3*a)throw new k_("Alignment top exceeds estimated module size.");var h=Math.max(0,c-e),i=Math.min(this.image.getHeight()-1,c+e);if(i-h<3*a)throw new k_("Alignment bottom exceeds estimated module size.");return new nG(this.image,f,h,g-f,i-h,a,this.resultPointCallback).find()},a}(),nN=function(){function a(){this.decoder=new nC}return a.prototype.getDecoder=function(){return this.decoder},a.prototype.decode=function(b,c){if(null!=c&&void 0!==c.get(kP.PURE_BARCODE)){var d,e,f=a.extractPureBits(b.getBlackMatrix());d=this.decoder.decodeBitMatrix(f,c),e=a.NO_POINTS}else{var g=new nM(b.getBlackMatrix()).detect(c);d=this.decoder.decodeBitMatrix(g.getBits(),c),e=g.getPoints()}d.getOther()instanceof nA&&d.getOther().applyMirroredCorrection(e);var h=new le(d.getText(),d.getRawBytes(),void 0,e,lf.QR_CODE,void 0),i=d.getByteSegments();null!==i&&h.putMetadata(lg.BYTE_SEGMENTS,i);var j=d.getECLevel();return null!==j&&h.putMetadata(lg.ERROR_CORRECTION_LEVEL,j),d.hasStructuredAppend()&&(h.putMetadata(lg.STRUCTURED_APPEND_SEQUENCE,d.getStructuredAppendSequenceNumber()),h.putMetadata(lg.STRUCTURED_APPEND_PARITY,d.getStructuredAppendParity())),h},a.prototype.reset=function(){},a.extractPureBits=function(a){var b=a.getTopLeftOnBit(),c=a.getBottomRightOnBit();if(null===b||null===c)throw new k_;var d=this.moduleSize(b,a),e=b[1],f=c[1],g=b[0],h=c[0];if(g>=h||e>=f||f-e!=h-g&&(h=g+(f-e))>=a.getWidth())throw new k_;var i=Math.round((h-g+1)/d),j=Math.round((f-e+1)/d);if(i<=0||j<=0||j!==i)throw new k_;var k=Math.floor(d/2);e+=k;var l=(g+=k)+Math.floor((i-1)*d)-h;if(l>0){if(l>k)throw new k_;g-=l}var m=e+Math.floor((j-1)*d)-f;if(m>0){if(m>k)throw new k_;e-=m}for(var n=new kZ(i,j),o=0;o<j;o++)for(var p=e+Math.floor(o*d),q=0;q<i;q++)a.get(g+Math.floor(q*d),p)&&n.set(q,o);return n},a.moduleSize=function(a,b){for(var c=b.getHeight(),d=b.getWidth(),e=a[0],f=a[1],g=!0,h=0;e<d&&f<c;){if(g!==b.get(e,f)){if(5==++h)break;g=!g}e++,f++}if(e===d||f===c)throw new k_;return(e-a[0])/7},a.NO_POINTS=[],a}(),nO=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},nP=function(){function a(){}return a.prototype.PDF417Common=function(){},a.getBitCountSum=function(a){return lu.sum(a)},a.toIntArray=function(b){if(null==b||!b.length)return a.EMPTY_INT_ARRAY;var c,d,e=new Int32Array(b.length),f=0;try{for(var g=nO(b),h=g.next();!h.done;h=g.next()){var i=h.value;e[f++]=i}}catch(a){c={error:a}}finally{try{h&&!h.done&&(d=g.return)&&d.call(g)}finally{if(c)throw c.error}}return e},a.getCodeword=function(b){var c=kM.binarySearch(a.SYMBOL_TABLE,262143&b);return c<0?-1:(a.CODEWORD_TABLE[c]-1)%a.NUMBER_OF_CODEWORDS},a.NUMBER_OF_CODEWORDS=929,a.MAX_CODEWORDS_IN_BARCODE=a.NUMBER_OF_CODEWORDS-1,a.MIN_ROWS_IN_BARCODE=3,a.MAX_ROWS_IN_BARCODE=90,a.MODULES_IN_CODEWORD=17,a.MODULES_IN_STOP_PATTERN=18,a.BARS_IN_MODULE=8,a.EMPTY_INT_ARRAY=new Int32Array([]),a.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),a.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),a}(),nQ=function(){function a(a,b){this.bits=a,this.points=b}return a.prototype.getBits=function(){return this.bits},a.prototype.getPoints=function(){return this.points},a}(),nR=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},nS=function(){function a(){}return a.detectMultiple=function(b,c,d){var e=b.getBlackMatrix(),f=a.detect(d,e);return f.length||((e=e.clone()).rotate180(),f=a.detect(d,e)),new nQ(e,f)},a.detect=function(b,c){for(var d,e,f=[],g=0,h=0,i=!1;g<c.getHeight();){var j=a.findVertices(c,g,h);if(null==j[0]&&null==j[3]){if(!i)break;i=!1,h=0;try{for(var k=(d=void 0,nR(f)),l=k.next();!l.done;l=k.next()){var m=l.value;null!=m[1]&&(g=Math.trunc(Math.max(g,m[1].getY()))),null!=m[3]&&(g=Math.max(g,Math.trunc(m[3].getY())))}}catch(a){d={error:a}}finally{try{l&&!l.done&&(e=k.return)&&e.call(k)}finally{if(d)throw d.error}}g+=a.ROW_STEP;continue}if(i=!0,f.push(j),!b)break;null!=j[2]?(h=Math.trunc(j[2].getX()),g=Math.trunc(j[2].getY())):(h=Math.trunc(j[4].getX()),g=Math.trunc(j[4].getY()))}return f},a.findVertices=function(b,c,d){var e=b.getHeight(),f=b.getWidth(),g=Array(8);return a.copyToResult(g,a.findRowsWithPattern(b,e,f,c,d,a.START_PATTERN),a.INDEXES_START_PATTERN),null!=g[4]&&(d=Math.trunc(g[4].getX()),c=Math.trunc(g[4].getY())),a.copyToResult(g,a.findRowsWithPattern(b,e,f,c,d,a.STOP_PATTERN),a.INDEXES_STOP_PATTERN),g},a.copyToResult=function(a,b,c){for(var d=0;d<c.length;d++)a[c[d]]=b[d]},a.findRowsWithPattern=function(b,c,d,e,f,g){for(var h=[,,,,],i=!1,j=new Int32Array(g.length);e<c;e+=a.ROW_STEP){var k=a.findGuardPattern(b,f,e,d,!1,g,j);if(null!=k){for(;e>0;){var l=a.findGuardPattern(b,f,--e,d,!1,g,j);if(null!=l)k=l;else{e++;break}}h[0]=new lw(k[0],e),h[1]=new lw(k[1],e),i=!0;break}}var m=e+1;if(i){for(var n=0,l=Int32Array.from([Math.trunc(h[0].getX()),Math.trunc(h[1].getX())]);m<c;m++){var k=a.findGuardPattern(b,l[0],m,d,!1,g,j);if(null!=k&&Math.abs(l[0]-k[0])<a.MAX_PATTERN_DRIFT&&Math.abs(l[1]-k[1])<a.MAX_PATTERN_DRIFT)l=k,n=0;else if(n>a.SKIPPED_ROW_COUNT_MAX)break;else n++}m-=n+1,h[2]=new lw(l[0],m),h[3]=new lw(l[1],m)}return m-e<a.BARCODE_MIN_HEIGHT&&kM.fill(h,null),h},a.findGuardPattern=function(b,c,d,e,f,g,h){kM.fillWithin(h,0,h.length,0);for(var i=c,j=0;b.get(i,d)&&i>0&&j++<a.MAX_PIXEL_DRIFT;)i--;for(var k=i,l=0,m=g.length,n=f;k<e;k++)if(b.get(k,d)!==n)h[l]++;else{if(l===m-1){if(a.patternMatchVariance(h,g,a.MAX_INDIVIDUAL_VARIANCE)<a.MAX_AVG_VARIANCE)return new Int32Array([i,k]);i+=h[0]+h[1],kG.arraycopy(h,2,h,0,l-1),h[l-1]=0,h[l]=0,l--}else l++;h[l]=1,n=!n}return l===m-1&&a.patternMatchVariance(h,g,a.MAX_INDIVIDUAL_VARIANCE)<a.MAX_AVG_VARIANCE?new Int32Array([i,k-1]):null},a.patternMatchVariance=function(a,b,c){for(var d=a.length,e=0,f=0,g=0;g<d;g++)e+=a[g],f+=b[g];if(e<f)return 1/0;var h=e/f;c*=h;for(var i=0,j=0;j<d;j++){var k=a[j],l=b[j]*h,m=k>l?k-l:l-k;if(m>c)return 1/0;i+=m}return i/e},a.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),a.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),a.MAX_AVG_VARIANCE=.42,a.MAX_INDIVIDUAL_VARIANCE=.8,a.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),a.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),a.MAX_PIXEL_DRIFT=3,a.MAX_PATTERN_DRIFT=5,a.SKIPPED_ROW_COUNT_MAX=25,a.ROW_STEP=5,a.BARCODE_MIN_HEIGHT=10,a}(),nT=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},nU=function(){function a(a,b){if(0===b.length)throw new kB;this.field=a;var c=b.length;if(c>1&&0===b[0]){for(var d=1;d<c&&0===b[d];)d++;d===c?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(c-d),kG.arraycopy(b,d,this.coefficients,0,this.coefficients.length))}else this.coefficients=b}return a.prototype.getCoefficients=function(){return this.coefficients},a.prototype.getDegree=function(){return this.coefficients.length-1},a.prototype.isZero=function(){return 0===this.coefficients[0]},a.prototype.getCoefficient=function(a){return this.coefficients[this.coefficients.length-1-a]},a.prototype.evaluateAt=function(a){if(0===a)return this.getCoefficient(0);if(1===a){var b,c,d=0;try{for(var e=nT(this.coefficients),f=e.next();!f.done;f=e.next()){var g=f.value;d=this.field.add(d,g)}}catch(a){b={error:a}}finally{try{f&&!f.done&&(c=e.return)&&c.call(e)}finally{if(b)throw b.error}}return d}for(var h=this.coefficients[0],i=this.coefficients.length,j=1;j<i;j++)h=this.field.add(this.field.multiply(a,h),this.coefficients[j]);return h},a.prototype.add=function(b){if(!this.field.equals(b.field))throw new kB("ModulusPolys do not have same ModulusGF field");if(this.isZero())return b;if(b.isZero())return this;var c=this.coefficients,d=b.coefficients;if(c.length>d.length){var e=c;c=d,d=e}var f=new Int32Array(d.length),g=d.length-c.length;kG.arraycopy(d,0,f,0,g);for(var h=g;h<d.length;h++)f[h]=this.field.add(c[h-g],d[h]);return new a(this.field,f)},a.prototype.subtract=function(a){if(!this.field.equals(a.field))throw new kB("ModulusPolys do not have same ModulusGF field");return a.isZero()?this:this.add(a.negative())},a.prototype.multiply=function(b){return b instanceof a?this.multiplyOther(b):this.multiplyScalar(b)},a.prototype.multiplyOther=function(b){if(!this.field.equals(b.field))throw new kB("ModulusPolys do not have same ModulusGF field");if(this.isZero()||b.isZero())return new a(this.field,new Int32Array([0]));for(var c=this.coefficients,d=c.length,e=b.coefficients,f=e.length,g=new Int32Array(d+f-1),h=0;h<d;h++)for(var i=c[h],j=0;j<f;j++)g[h+j]=this.field.add(g[h+j],this.field.multiply(i,e[j]));return new a(this.field,g)},a.prototype.negative=function(){for(var b=this.coefficients.length,c=new Int32Array(b),d=0;d<b;d++)c[d]=this.field.subtract(0,this.coefficients[d]);return new a(this.field,c)},a.prototype.multiplyScalar=function(b){if(0===b)return new a(this.field,new Int32Array([0]));if(1===b)return this;for(var c=this.coefficients.length,d=new Int32Array(c),e=0;e<c;e++)d[e]=this.field.multiply(this.coefficients[e],b);return new a(this.field,d)},a.prototype.multiplyByMonomial=function(b,c){if(b<0)throw new kB;if(0===c)return new a(this.field,new Int32Array([0]));for(var d=this.coefficients.length,e=new Int32Array(d+b),f=0;f<d;f++)e[f]=this.field.multiply(this.coefficients[f],c);return new a(this.field,e)},a.prototype.toString=function(){for(var a=new kY,b=this.getDegree();b>=0;b--){var c=this.getCoefficient(b);0!==c&&(c<0?(a.append(" - "),c=-c):a.length()>0&&a.append(" + "),(0===b||1!==c)&&a.append(c),0!==b&&(1===b?a.append("x"):(a.append("x^"),a.append(b))))}return a.toString()},a}(),nV=function(){function a(){}return a.prototype.add=function(a,b){return(a+b)%this.modulus},a.prototype.subtract=function(a,b){return(this.modulus+a-b)%this.modulus},a.prototype.exp=function(a){return this.expTable[a]},a.prototype.log=function(a){if(0===a)throw new kB;return this.logTable[a]},a.prototype.inverse=function(a){if(0===a)throw new ll;return this.expTable[this.modulus-this.logTable[a]-1]},a.prototype.multiply=function(a,b){return 0===a||0===b?0:this.expTable[(this.logTable[a]+this.logTable[b])%(this.modulus-1)]},a.prototype.getSize=function(){return this.modulus},a.prototype.equals=function(a){return a===this},a}(),nW=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),nX=function(a){function b(b,c){var d=a.call(this)||this;d.modulus=b,d.expTable=new Int32Array(b),d.logTable=new Int32Array(b);for(var e=1,f=0;f<b;f++)d.expTable[f]=e,e=e*c%b;for(var f=0;f<b-1;f++)d.logTable[d.expTable[f]]=f;return d.zero=new nU(d,new Int32Array([0])),d.one=new nU(d,new Int32Array([1])),d}return nW(b,a),b.prototype.getZero=function(){return this.zero},b.prototype.getOne=function(){return this.one},b.prototype.buildMonomial=function(a,b){if(a<0)throw new kB;if(0===b)return this.zero;var c=new Int32Array(a+1);return c[0]=b,new nU(this,c)},b.PDF417_GF=new b(nP.NUMBER_OF_CODEWORDS,3),b}(nV),nY=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},nZ=function(){function a(){this.field=nX.PDF417_GF}return a.prototype.decode=function(a,b,c){for(var d,e,f=new nU(this.field,a),g=new Int32Array(b),h=!1,i=b;i>0;i--){var j=f.evaluateAt(this.field.exp(i));g[b-i]=j,0!==j&&(h=!0)}if(!h)return 0;var k=this.field.getOne();if(null!=c)try{for(var l=nY(c),m=l.next();!m.done;m=l.next()){var n=m.value,o=this.field.exp(a.length-1-n),p=new nU(this.field,new Int32Array([this.field.subtract(0,o),1]));k=k.multiply(p)}}catch(a){d={error:a}}finally{try{m&&!m.done&&(e=l.return)&&e.call(l)}finally{if(d)throw d.error}}for(var q=new nU(this.field,g),r=this.runEuclideanAlgorithm(this.field.buildMonomial(b,1),q,b),s=r[0],t=r[1],u=this.findErrorLocations(s),v=this.findErrorMagnitudes(t,s,u),i=0;i<u.length;i++){var w=a.length-1-this.field.log(u[i]);if(w<0)throw kE.getChecksumInstance();a[w]=this.field.subtract(a[w],v[i])}return u.length},a.prototype.runEuclideanAlgorithm=function(a,b,c){if(a.getDegree()<b.getDegree()){var d=a;a=b,b=d}for(var e=a,f=b,g=this.field.getZero(),h=this.field.getOne();f.getDegree()>=Math.round(c/2);){var i=e,j=g;if(e=f,g=h,e.isZero())throw kE.getChecksumInstance();f=i;for(var k=this.field.getZero(),l=e.getCoefficient(e.getDegree()),m=this.field.inverse(l);f.getDegree()>=e.getDegree()&&!f.isZero();){var n=f.getDegree()-e.getDegree(),o=this.field.multiply(f.getCoefficient(f.getDegree()),m);k=k.add(this.field.buildMonomial(n,o)),f=f.subtract(e.multiplyByMonomial(n,o))}h=k.multiply(g).subtract(j).negative()}var p=h.getCoefficient(0);if(0===p)throw kE.getChecksumInstance();var q=this.field.inverse(p);return[h.multiply(q),f.multiply(q)]},a.prototype.findErrorLocations=function(a){for(var b=a.getDegree(),c=new Int32Array(b),d=0,e=1;e<this.field.getSize()&&d<b;e++)0===a.evaluateAt(e)&&(c[d]=this.field.inverse(e),d++);if(d!==b)throw kE.getChecksumInstance();return c},a.prototype.findErrorMagnitudes=function(a,b,c){for(var d=b.getDegree(),e=new Int32Array(d),f=1;f<=d;f++)e[d-f]=this.field.multiply(f,b.getCoefficient(f));for(var g=new nU(this.field,e),h=c.length,i=new Int32Array(h),f=0;f<h;f++){var j=this.field.inverse(c[f]),k=this.field.subtract(0,a.evaluateAt(j)),l=this.field.inverse(g.evaluateAt(j));i[f]=this.field.multiply(k,l)}return i},a}(),n$=function(){function a(b,c,d,e,f){b instanceof a?this.constructor_2(b):this.constructor_1(b,c,d,e,f)}return a.prototype.constructor_1=function(a,b,c,d,e){var f=null==b||null==c,g=null==d||null==e;if(f&&g)throw new k_;f?(b=new lw(0,d.getY()),c=new lw(0,e.getY())):g&&(d=new lw(a.getWidth()-1,b.getY()),e=new lw(a.getWidth()-1,c.getY())),this.image=a,this.topLeft=b,this.bottomLeft=c,this.topRight=d,this.bottomRight=e,this.minX=Math.trunc(Math.min(b.getX(),c.getX())),this.maxX=Math.trunc(Math.max(d.getX(),e.getX())),this.minY=Math.trunc(Math.min(b.getY(),d.getY())),this.maxY=Math.trunc(Math.max(c.getY(),e.getY()))},a.prototype.constructor_2=function(a){this.image=a.image,this.topLeft=a.getTopLeft(),this.bottomLeft=a.getBottomLeft(),this.topRight=a.getTopRight(),this.bottomRight=a.getBottomRight(),this.minX=a.getMinX(),this.maxX=a.getMaxX(),this.minY=a.getMinY(),this.maxY=a.getMaxY()},a.merge=function(b,c){return null==b?c:null==c?b:new a(b.image,b.topLeft,b.bottomLeft,c.topRight,c.bottomRight)},a.prototype.addMissingRows=function(b,c,d){var e=this.topLeft,f=this.bottomLeft,g=this.topRight,h=this.bottomRight;if(b>0){var i=d?this.topLeft:this.topRight,j=Math.trunc(i.getY()-b);j<0&&(j=0);var k=new lw(i.getX(),j);d?e=k:g=k}if(c>0){var l=d?this.bottomLeft:this.bottomRight,m=Math.trunc(l.getY()+c);m>=this.image.getHeight()&&(m=this.image.getHeight()-1);var n=new lw(l.getX(),m);d?f=n:h=n}return new a(this.image,e,f,g,h)},a.prototype.getMinX=function(){return this.minX},a.prototype.getMaxX=function(){return this.maxX},a.prototype.getMinY=function(){return this.minY},a.prototype.getMaxY=function(){return this.maxY},a.prototype.getTopLeft=function(){return this.topLeft},a.prototype.getTopRight=function(){return this.topRight},a.prototype.getBottomLeft=function(){return this.bottomLeft},a.prototype.getBottomRight=function(){return this.bottomRight},a}(),n_=function(){function a(a,b,c,d){this.columnCount=a,this.errorCorrectionLevel=d,this.rowCountUpperPart=b,this.rowCountLowerPart=c,this.rowCount=b+c}return a.prototype.getColumnCount=function(){return this.columnCount},a.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},a.prototype.getRowCount=function(){return this.rowCount},a.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},a.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},a}(),n0=function(){function a(){this.buffer=""}return a.form=function(a,b){var c=-1;return a.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function(a,d,e,f,g,h){if("%%"===a)return"%";if(void 0!==b[++c]){a=f?parseInt(f.substr(1)):void 0;var i,j=g?parseInt(g.substr(1)):void 0;switch(h){case"s":i=b[c];break;case"c":i=b[c][0];break;case"f":i=parseFloat(b[c]).toFixed(a);break;case"p":i=parseFloat(b[c]).toPrecision(a);break;case"e":i=parseFloat(b[c]).toExponential(a);break;case"x":i=parseInt(b[c]).toString(j||16);break;case"d":i=parseFloat(parseInt(b[c],j||10).toPrecision(a)).toFixed(0)}i="object"==typeof i?JSON.stringify(i):(+i).toString(j);for(var k=parseInt(e),l=e&&e[0]+""=="0"?"0":" ";i.length<k;)i=void 0!==d?i+l:l+i;return i}})},a.prototype.format=function(b){for(var c=[],d=1;d<arguments.length;d++)c[d-1]=arguments[d];this.buffer+=a.form(b,c)},a.prototype.toString=function(){return this.buffer},a}(),n1=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},n2=function(){function a(a){this.boundingBox=new n$(a),this.codewords=Array(a.getMaxY()-a.getMinY()+1)}return a.prototype.getCodewordNearby=function(b){var c=this.getCodeword(b);if(null!=c)return c;for(var d=1;d<a.MAX_NEARBY_DISTANCE;d++){var e=this.imageRowToCodewordIndex(b)-d;if(e>=0&&null!=(c=this.codewords[e])||(e=this.imageRowToCodewordIndex(b)+d)<this.codewords.length&&null!=(c=this.codewords[e]))return c}return null},a.prototype.imageRowToCodewordIndex=function(a){return a-this.boundingBox.getMinY()},a.prototype.setCodeword=function(a,b){this.codewords[this.imageRowToCodewordIndex(a)]=b},a.prototype.getCodeword=function(a){return this.codewords[this.imageRowToCodewordIndex(a)]},a.prototype.getBoundingBox=function(){return this.boundingBox},a.prototype.getCodewords=function(){return this.codewords},a.prototype.toString=function(){var a,b,c=new n0,d=0;try{for(var e=n1(this.codewords),f=e.next();!f.done;f=e.next()){var g=f.value;if(null==g){c.format("%3d:    |   %n",d++);continue}c.format("%3d: %3d|%3d%n",d++,g.getRowNumber(),g.getValue())}}catch(b){a={error:b}}finally{try{f&&!f.done&&(b=e.return)&&b.call(e)}finally{if(a)throw a.error}}return c.toString()},a.MAX_NEARBY_DISTANCE=5,a}(),n3=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},n4=function(a,b){var c="function"==typeof Symbol&&a[Symbol.iterator];if(!c)return a;var d,e,f=c.call(a),g=[];try{for(;(void 0===b||b-- >0)&&!(d=f.next()).done;)g.push(d.value)}catch(a){e={error:a}}finally{try{d&&!d.done&&(c=f.return)&&c.call(f)}finally{if(e)throw e.error}}return g},n5=function(){function a(){this.values=new Map}return a.prototype.setValue=function(a){a=Math.trunc(a);var b=this.values.get(a);null==b&&(b=0),b++,this.values.set(a,b)},a.prototype.getValue=function(){var a,b,c=-1,d=[],e=function(a,b){var e=function(){return a},f=function(){return b};f()>c?(c=f(),(d=[]).push(e())):f()===c&&d.push(e())};try{for(var f=n3(this.values.entries()),g=f.next();!g.done;g=f.next()){var h=n4(g.value,2),i=h[0],j=h[1];e(i,j)}}catch(b){a={error:b}}finally{try{g&&!g.done&&(b=f.return)&&b.call(f)}finally{if(a)throw a.error}}return nP.toIntArray(d)},a.prototype.getConfidence=function(a){return this.values.get(a)},a}(),n6=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),n7=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},n8=function(a){function b(b,c){var d=a.call(this,b)||this;return d._isLeft=c,d}return n6(b,a),b.prototype.setRowNumbers=function(){var a,b;try{for(var c=n7(this.getCodewords()),d=c.next();!d.done;d=c.next()){var e=d.value;null!=e&&e.setRowNumberAsRowIndicatorColumn()}}catch(b){a={error:b}}finally{try{d&&!d.done&&(b=c.return)&&b.call(c)}finally{if(a)throw a.error}}},b.prototype.adjustCompleteIndicatorColumnRowNumbers=function(a){var b=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(b,a);for(var c=this.getBoundingBox(),d=this._isLeft?c.getTopLeft():c.getTopRight(),e=this._isLeft?c.getBottomLeft():c.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(d.getY())),g=this.imageRowToCodewordIndex(Math.trunc(e.getY())),h=-1,i=1,j=0,k=f;k<g;k++)if(null!=b[k]){var l=b[k],m=l.getRowNumber()-h;if(0===m)j++;else if(1===m)i=Math.max(i,j),j=1,h=l.getRowNumber();else if(m<0||l.getRowNumber()>=a.getRowCount()||m>k)b[k]=null;else{for(var n=void 0,o=(n=i>2?(i-2)*m:m)>=k,p=1;p<=n&&!o;p++)o=null!=b[k-p];o?b[k]=null:(h=l.getRowNumber(),j=1)}}},b.prototype.getRowHeights=function(){var a,b,c=this.getBarcodeMetadata();if(null==c)return null;this.adjustIncompleteIndicatorColumnRowNumbers(c);var d=new Int32Array(c.getRowCount());try{for(var e=n7(this.getCodewords()),f=e.next();!f.done;f=e.next()){var g=f.value;if(null!=g){var h=g.getRowNumber();if(h>=d.length)continue;d[h]++}}}catch(b){a={error:b}}finally{try{f&&!f.done&&(b=e.return)&&b.call(e)}finally{if(a)throw a.error}}return d},b.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(a){for(var b=this.getBoundingBox(),c=this._isLeft?b.getTopLeft():b.getTopRight(),d=this._isLeft?b.getBottomLeft():b.getBottomRight(),e=this.imageRowToCodewordIndex(Math.trunc(c.getY())),f=this.imageRowToCodewordIndex(Math.trunc(d.getY())),g=this.getCodewords(),h=-1,i=1,j=0,k=e;k<f;k++)if(null!=g[k]){var l=g[k];l.setRowNumberAsRowIndicatorColumn();var m=l.getRowNumber()-h;0===m?j++:1===m?(i=Math.max(i,j),j=1,h=l.getRowNumber()):l.getRowNumber()>=a.getRowCount()?g[k]=null:(h=l.getRowNumber(),j=1)}},b.prototype.getBarcodeMetadata=function(){var a,b,c=this.getCodewords(),d=new n5,e=new n5,f=new n5,g=new n5;try{for(var h=n7(c),i=h.next();!i.done;i=h.next()){var j=i.value;if(null!=j){j.setRowNumberAsRowIndicatorColumn();var k=j.getValue()%30,l=j.getRowNumber();switch(!this._isLeft&&(l+=2),l%3){case 0:e.setValue(3*k+1);break;case 1:g.setValue(k/3),f.setValue(k%3);break;case 2:d.setValue(k+1)}}}}catch(b){a={error:b}}finally{try{i&&!i.done&&(b=h.return)&&b.call(h)}finally{if(a)throw a.error}}if(0===d.getValue().length||0===e.getValue().length||0===f.getValue().length||0===g.getValue().length||d.getValue()[0]<1||e.getValue()[0]+f.getValue()[0]<nP.MIN_ROWS_IN_BARCODE||e.getValue()[0]+f.getValue()[0]>nP.MAX_ROWS_IN_BARCODE)return null;var m=new n_(d.getValue()[0],e.getValue()[0],f.getValue()[0],g.getValue()[0]);return this.removeIncorrectCodewords(c,m),m},b.prototype.removeIncorrectCodewords=function(a,b){for(var c=0;c<a.length;c++){var d=a[c];if(null!=a[c]){var e=d.getValue()%30,f=d.getRowNumber();if(f>b.getRowCount()){a[c]=null;continue}switch(!this._isLeft&&(f+=2),f%3){case 0:3*e+1!==b.getRowCountUpperPart()&&(a[c]=null);break;case 1:(Math.trunc(e/3)!==b.getErrorCorrectionLevel()||e%3!==b.getRowCountLowerPart())&&(a[c]=null);break;case 2:e+1!==b.getColumnCount()&&(a[c]=null)}}}},b.prototype.isLeft=function(){return this._isLeft},b.prototype.toString=function(){return"IsLeft: "+this._isLeft+"\n"+a.prototype.toString.call(this)},b}(n2),n9=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},oa=function(){function a(a,b){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=a,this.barcodeColumnCount=a.getColumnCount(),this.boundingBox=b,this.detectionResultColumns=Array(this.barcodeColumnCount+2)}return a.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var a,b=nP.MAX_CODEWORDS_IN_BARCODE;do a=b,b=this.adjustRowNumbersAndGetCount();while(b>0&&b<a);return this.detectionResultColumns},a.prototype.adjustIndicatorColumnRowNumbers=function(a){null!=a&&a.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},a.prototype.adjustRowNumbersAndGetCount=function(){var a=this.adjustRowNumbersByRow();if(0===a)return 0;for(var b=1;b<this.barcodeColumnCount+1;b++)for(var c=this.detectionResultColumns[b].getCodewords(),d=0;d<c.length;d++)null!=c[d]&&(c[d].hasValidRowNumber()||this.adjustRowNumbers(b,d,c));return a},a.prototype.adjustRowNumbersByRow=function(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()},a.prototype.adjustRowNumbersFromBothRI=function(){if(null!=this.detectionResultColumns[0]&&null!=this.detectionResultColumns[this.barcodeColumnCount+1]){for(var a=this.detectionResultColumns[0].getCodewords(),b=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),c=0;c<a.length;c++)if(null!=a[c]&&null!=b[c]&&a[c].getRowNumber()===b[c].getRowNumber())for(var d=1;d<=this.barcodeColumnCount;d++){var e=this.detectionResultColumns[d].getCodewords()[c];null!=e&&(e.setRowNumber(a[c].getRowNumber()),e.hasValidRowNumber()||(this.detectionResultColumns[d].getCodewords()[c]=null))}}},a.prototype.adjustRowNumbersFromRRI=function(){if(null==this.detectionResultColumns[this.barcodeColumnCount+1])return 0;for(var b=0,c=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),d=0;d<c.length;d++)if(null!=c[d])for(var e=c[d].getRowNumber(),f=0,g=this.barcodeColumnCount+1;g>0&&f<this.ADJUST_ROW_NUMBER_SKIP;g--){var h=this.detectionResultColumns[g].getCodewords()[d];null!=h&&(f=a.adjustRowNumberIfValid(e,f,h),!h.hasValidRowNumber()&&b++)}return b},a.prototype.adjustRowNumbersFromLRI=function(){if(null==this.detectionResultColumns[0])return 0;for(var b=0,c=this.detectionResultColumns[0].getCodewords(),d=0;d<c.length;d++)if(null!=c[d])for(var e=c[d].getRowNumber(),f=0,g=1;g<this.barcodeColumnCount+1&&f<this.ADJUST_ROW_NUMBER_SKIP;g++){var h=this.detectionResultColumns[g].getCodewords()[d];null!=h&&(f=a.adjustRowNumberIfValid(e,f,h),!h.hasValidRowNumber()&&b++)}return b},a.adjustRowNumberIfValid=function(a,b,c){return null==c||!c.hasValidRowNumber()&&(c.isValidRowNumber(a)?(c.setRowNumber(a),b=0):++b),b},a.prototype.adjustRowNumbers=function(b,c,d){if(null!=this.detectionResultColumns[b-1]){var e,f,g=d[c],h=this.detectionResultColumns[b-1].getCodewords(),i=h;null!=this.detectionResultColumns[b+1]&&(i=this.detectionResultColumns[b+1].getCodewords());var j=Array(14);j[2]=h[c],j[3]=i[c],c>0&&(j[0]=d[c-1],j[4]=h[c-1],j[5]=i[c-1]),c>1&&(j[8]=d[c-2],j[10]=h[c-2],j[11]=i[c-2]),c<d.length-1&&(j[1]=d[c+1],j[6]=h[c+1],j[7]=i[c+1]),c<d.length-2&&(j[9]=d[c+2],j[12]=h[c+2],j[13]=i[c+2]);try{for(var k=n9(j),l=k.next();!l.done;l=k.next()){var m=l.value;if(a.adjustRowNumber(g,m))return}}catch(a){e={error:a}}finally{try{l&&!l.done&&(f=k.return)&&f.call(k)}finally{if(e)throw e.error}}}},a.adjustRowNumber=function(a,b){return null!=b&&!!b.hasValidRowNumber()&&b.getBucket()===a.getBucket()&&(a.setRowNumber(b.getRowNumber()),!0)},a.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},a.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},a.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},a.prototype.setBoundingBox=function(a){this.boundingBox=a},a.prototype.getBoundingBox=function(){return this.boundingBox},a.prototype.setDetectionResultColumn=function(a,b){this.detectionResultColumns[a]=b},a.prototype.getDetectionResultColumn=function(a){return this.detectionResultColumns[a]},a.prototype.toString=function(){var a=this.detectionResultColumns[0];null==a&&(a=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var b=new n0,c=0;c<a.getCodewords().length;c++){b.format("CW %3d:",c);for(var d=0;d<this.barcodeColumnCount+2;d++){if(null==this.detectionResultColumns[d]){b.format("    |   ");continue}var e=this.detectionResultColumns[d].getCodewords()[c];if(null==e){b.format("    |   ");continue}b.format(" %3d|%3d",e.getRowNumber(),e.getValue())}b.format("%n")}return b.toString()},a}(),ob=function(){function a(b,c,d,e){this.rowNumber=a.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(b),this.endX=Math.trunc(c),this.bucket=Math.trunc(d),this.value=Math.trunc(e)}return a.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},a.prototype.isValidRowNumber=function(b){return b!==a.BARCODE_ROW_UNKNOWN&&this.bucket===b%3*3},a.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))},a.prototype.getWidth=function(){return this.endX-this.startX},a.prototype.getStartX=function(){return this.startX},a.prototype.getEndX=function(){return this.endX},a.prototype.getBucket=function(){return this.bucket},a.prototype.getValue=function(){return this.value},a.prototype.getRowNumber=function(){return this.rowNumber},a.prototype.setRowNumber=function(a){this.rowNumber=a},a.prototype.toString=function(){return this.rowNumber+"|"+this.value},a.BARCODE_ROW_UNKNOWN=-1,a}(),oc=function(){function a(){}return a.initialize=function(){for(var b=0;b<nP.SYMBOL_TABLE.length;b++)for(var c=nP.SYMBOL_TABLE[b],d=1&c,e=0;e<nP.BARS_IN_MODULE;e++){for(var f=0;(1&c)===d;)f+=1,c>>=1;d=1&c,a.RATIOS_TABLE[b]||(a.RATIOS_TABLE[b]=Array(nP.BARS_IN_MODULE)),a.RATIOS_TABLE[b][nP.BARS_IN_MODULE-e-1]=Math.fround(f/nP.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},a.getDecodedValue=function(b){var c=a.getDecodedCodewordValue(a.sampleBitCounts(b));return -1!==c?c:a.getClosestDecodedValue(b)},a.sampleBitCounts=function(a){for(var b=lu.sum(a),c=new Int32Array(nP.BARS_IN_MODULE),d=0,e=0,f=0;f<nP.MODULES_IN_CODEWORD;f++){var g=b/(2*nP.MODULES_IN_CODEWORD)+f*b/nP.MODULES_IN_CODEWORD;e+a[d]<=g&&(e+=a[d],d++),c[d]++}return c},a.getDecodedCodewordValue=function(b){var c=a.getBitValue(b);return -1===nP.getCodeword(c)?-1:c},a.getBitValue=function(a){for(var b=0,c=0;c<a.length;c++)for(var d=0;d<a[c];d++)b=b<<1|c%2==0;return Math.trunc(b)},a.getClosestDecodedValue=function(b){var c=lu.sum(b),d=Array(nP.BARS_IN_MODULE);if(c>1)for(var e=0;e<d.length;e++)d[e]=Math.fround(b[e]/c);var f=lv.MAX_VALUE,g=-1;this.bSymbolTableReady||a.initialize();for(var h=0;h<a.RATIOS_TABLE.length;h++){for(var i=0,j=a.RATIOS_TABLE[h],k=0;k<nP.BARS_IN_MODULE;k++){var l=Math.fround(j[k]-d[k]);if((i+=Math.fround(l*l))>=f)break}i<f&&(f=i,g=nP.SYMBOL_TABLE[h])}return g},a.bSymbolTableReady=!1,a.RATIOS_TABLE=Array(nP.SYMBOL_TABLE.length).map(function(a){return Array(nP.BARS_IN_MODULE)}),a}(),od=function(){function a(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return a.prototype.getSegmentIndex=function(){return this.segmentIndex},a.prototype.setSegmentIndex=function(a){this.segmentIndex=a},a.prototype.getFileId=function(){return this.fileId},a.prototype.setFileId=function(a){this.fileId=a},a.prototype.getOptionalData=function(){return this.optionalData},a.prototype.setOptionalData=function(a){this.optionalData=a},a.prototype.isLastSegment=function(){return this.lastSegment},a.prototype.setLastSegment=function(a){this.lastSegment=a},a.prototype.getSegmentCount=function(){return this.segmentCount},a.prototype.setSegmentCount=function(a){this.segmentCount=a},a.prototype.getSender=function(){return this.sender||null},a.prototype.setSender=function(a){this.sender=a},a.prototype.getAddressee=function(){return this.addressee||null},a.prototype.setAddressee=function(a){this.addressee=a},a.prototype.getFileName=function(){return this.fileName},a.prototype.setFileName=function(a){this.fileName=a},a.prototype.getFileSize=function(){return this.fileSize},a.prototype.setFileSize=function(a){this.fileSize=a},a.prototype.getChecksum=function(){return this.checksum},a.prototype.setChecksum=function(a){this.checksum=a},a.prototype.getTimestamp=function(){return this.timestamp},a.prototype.setTimestamp=function(a){this.timestamp=a},a}(),oe=function(){function a(){}return a.parseLong=function(a,b){return void 0===b&&(b=void 0),parseInt(a,b)},a}(),of=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),og=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return of(b,a),b.kind="NullPointerException",b}(kx),oh=function(){function a(){}return a.prototype.writeBytes=function(a){this.writeBytesOffset(a,0,a.length)},a.prototype.writeBytesOffset=function(a,b,c){if(null==a)throw new og;if(b<0||b>a.length||c<0||b+c>a.length||b+c<0)throw new kI;if(0!==c)for(var d=0;d<c;d++)this.write(a[b+d])},a.prototype.flush=function(){},a.prototype.close=function(){},a}(),oi=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),oj=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return oi(b,a),b}(kx),ok=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),ol=function(a){function b(b){void 0===b&&(b=32);var c=a.call(this)||this;if(c.count=0,b<0)throw new kB("Negative initial size: "+b);return c.buf=new Uint8Array(b),c}return ok(b,a),b.prototype.ensureCapacity=function(a){a-this.buf.length>0&&this.grow(a)},b.prototype.grow=function(a){var b=this.buf.length<<1;if(b-a<0&&(b=a),b<0){if(a<0)throw new oj;b=kN.MAX_VALUE}this.buf=kM.copyOfUint8Array(this.buf,b)},b.prototype.write=function(a){this.ensureCapacity(this.count+1),this.buf[this.count]=a,this.count+=1},b.prototype.writeBytesOffset=function(a,b,c){if(b<0||b>a.length||c<0||b+c-a.length>0)throw new kI;this.ensureCapacity(this.count+c),kG.arraycopy(a,b,this.buf,this.count,c),this.count+=c},b.prototype.writeTo=function(a){a.writeBytesOffset(this.buf,0,this.count)},b.prototype.reset=function(){this.count=0},b.prototype.toByteArray=function(){return kM.copyOfUint8Array(this.buf,this.count)},b.prototype.size=function(){return this.count},b.prototype.toString=function(a){return a?"string"==typeof a?this.toString_string(a):this.toString_number(a):this.toString_void()},b.prototype.toString_void=function(){return new String(this.buf).toString()},b.prototype.toString_string=function(a){return new String(this.buf).toString()},b.prototype.toString_number=function(a){return new String(this.buf).toString()},b.prototype.close=function(){},b}(oh);function om(){if("undefined"!=typeof window)return window.BigInt||null;if("undefined"!=typeof global)return global.BigInt||null;if("undefined"!=typeof self)return self.BigInt||null;throw Error("Can't search globals for BigInt!")}function on(a){if(void 0===r&&(r=om()),null===r)throw Error("BigInt is not supported!");return r(a)}!function(a){a[a.ALPHA=0]="ALPHA",a[a.LOWER=1]="LOWER",a[a.MIXED=2]="MIXED",a[a.PUNCT=3]="PUNCT",a[a.ALPHA_SHIFT=4]="ALPHA_SHIFT",a[a.PUNCT_SHIFT=5]="PUNCT_SHIFT"}(q||(q={}));var oo=function(){function a(){}return a.decode=function(b,c){var d=new kY(""),e=kT.ISO8859_1;d.enableDecoding(e);for(var f=1,g=b[f++],h=new od;f<b[0];){switch(g){case a.TEXT_COMPACTION_MODE_LATCH:f=a.textCompaction(b,f,d);break;case a.BYTE_COMPACTION_MODE_LATCH:case a.BYTE_COMPACTION_MODE_LATCH_6:f=a.byteCompaction(g,b,e,f,d);break;case a.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(b[f++]);break;case a.NUMERIC_COMPACTION_MODE_LATCH:f=a.numericCompaction(b,f,d);break;case a.ECI_CHARSET:kT.getCharacterSetECIByValue(b[f++]);break;case a.ECI_GENERAL_PURPOSE:f+=2;break;case a.ECI_USER_DEFINED:f++;break;case a.BEGIN_MACRO_PDF417_CONTROL_BLOCK:f=a.decodeMacroBlock(b,f,h);break;case a.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case a.MACRO_PDF417_TERMINATOR:throw new kR;default:f--,f=a.textCompaction(b,f,d)}if(f<b.length)g=b[f++];else throw kR.getFormatInstance()}if(0===d.length())throw kR.getFormatInstance();var i=new lh(null,d.toString(),null,c);return i.setOther(h),i},a.decodeMacroBlock=function(b,c,d){if(c+a.NUMBER_OF_SEQUENCE_CODEWORDS>b[0])throw kR.getFormatInstance();for(var e=new Int32Array(a.NUMBER_OF_SEQUENCE_CODEWORDS),f=0;f<a.NUMBER_OF_SEQUENCE_CODEWORDS;f++,c++)e[f]=b[c];d.setSegmentIndex(kN.parseInt(a.decodeBase900toBase10(e,a.NUMBER_OF_SEQUENCE_CODEWORDS)));var g=new kY;c=a.textCompaction(b,c,g),d.setFileId(g.toString());var h=-1;for(b[c]===a.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(h=c+1);c<b[0];)switch(b[c]){case a.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(b[++c]){case a.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var i=new kY;c=a.textCompaction(b,c+1,i),d.setFileName(i.toString());break;case a.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var j=new kY;c=a.textCompaction(b,c+1,j),d.setSender(j.toString());break;case a.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var k=new kY;c=a.textCompaction(b,c+1,k),d.setAddressee(k.toString());break;case a.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var l=new kY;c=a.numericCompaction(b,c+1,l),d.setSegmentCount(kN.parseInt(l.toString()));break;case a.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var m=new kY;c=a.numericCompaction(b,c+1,m),d.setTimestamp(oe.parseLong(m.toString()));break;case a.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var n=new kY;c=a.numericCompaction(b,c+1,n),d.setChecksum(kN.parseInt(n.toString()));break;case a.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var o=new kY;c=a.numericCompaction(b,c+1,o),d.setFileSize(oe.parseLong(o.toString()));break;default:throw kR.getFormatInstance()}break;case a.MACRO_PDF417_TERMINATOR:c++,d.setLastSegment(!0);break;default:throw kR.getFormatInstance()}if(-1!==h){var p=c-h;d.isLastSegment()&&p--,d.setOptionalData(kM.copyOfRange(b,h,h+p))}return c},a.textCompaction=function(b,c,d){for(var e=new Int32Array((b[0]-c)*2),f=new Int32Array((b[0]-c)*2),g=0,h=!1;c<b[0]&&!h;){var i=b[c++];if(i<a.TEXT_COMPACTION_MODE_LATCH)e[g]=i/30,e[g+1]=i%30,g+=2;else switch(i){case a.TEXT_COMPACTION_MODE_LATCH:e[g++]=a.TEXT_COMPACTION_MODE_LATCH;break;case a.BYTE_COMPACTION_MODE_LATCH:case a.BYTE_COMPACTION_MODE_LATCH_6:case a.NUMERIC_COMPACTION_MODE_LATCH:case a.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case a.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case a.MACRO_PDF417_TERMINATOR:c--,h=!0;break;case a.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:e[g]=a.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,i=b[c++],f[g]=i,g++}}return a.decodeTextCompaction(e,f,g,d),c},a.decodeTextCompaction=function(b,c,d,e){for(var f=q.ALPHA,g=q.ALPHA,h=0;h<d;){var i=b[h],j="";switch(f){case q.ALPHA:if(i<26)j=String.fromCharCode(65+i);else switch(i){case 26:j=" ";break;case a.LL:f=q.LOWER;break;case a.ML:f=q.MIXED;break;case a.PS:g=f,f=q.PUNCT_SHIFT;break;case a.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:e.append(c[h]);break;case a.TEXT_COMPACTION_MODE_LATCH:f=q.ALPHA}break;case q.LOWER:if(i<26)j=String.fromCharCode(97+i);else switch(i){case 26:j=" ";break;case a.AS:g=f,f=q.ALPHA_SHIFT;break;case a.ML:f=q.MIXED;break;case a.PS:g=f,f=q.PUNCT_SHIFT;break;case a.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:e.append(c[h]);break;case a.TEXT_COMPACTION_MODE_LATCH:f=q.ALPHA}break;case q.MIXED:if(i<a.PL)j=a.MIXED_CHARS[i];else switch(i){case a.PL:f=q.PUNCT;break;case 26:j=" ";break;case a.LL:f=q.LOWER;break;case a.AL:f=q.ALPHA;break;case a.PS:g=f,f=q.PUNCT_SHIFT;break;case a.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:e.append(c[h]);break;case a.TEXT_COMPACTION_MODE_LATCH:f=q.ALPHA}break;case q.PUNCT:if(i<a.PAL)j=a.PUNCT_CHARS[i];else switch(i){case a.PAL:f=q.ALPHA;break;case a.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:e.append(c[h]);break;case a.TEXT_COMPACTION_MODE_LATCH:f=q.ALPHA}break;case q.ALPHA_SHIFT:if(f=g,i<26)j=String.fromCharCode(65+i);else switch(i){case 26:j=" ";break;case a.TEXT_COMPACTION_MODE_LATCH:f=q.ALPHA}break;case q.PUNCT_SHIFT:if(f=g,i<a.PAL)j=a.PUNCT_CHARS[i];else switch(i){case a.PAL:f=q.ALPHA;break;case a.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:e.append(c[h]);break;case a.TEXT_COMPACTION_MODE_LATCH:f=q.ALPHA}}""!==j&&e.append(j),h++}},a.byteCompaction=function(b,c,d,e,f){var g=new ol,h=0,i=0,j=!1;switch(b){case a.BYTE_COMPACTION_MODE_LATCH:for(var k=new Int32Array(6),l=c[e++];e<c[0]&&!j;)switch(k[h++]=l,i=900*i+l,l=c[e++]){case a.TEXT_COMPACTION_MODE_LATCH:case a.BYTE_COMPACTION_MODE_LATCH:case a.NUMERIC_COMPACTION_MODE_LATCH:case a.BYTE_COMPACTION_MODE_LATCH_6:case a.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case a.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case a.MACRO_PDF417_TERMINATOR:e--,j=!0;break;default:if(h%5==0&&h>0){for(var m=0;m<6;++m)g.write(Number(on(i)>>on(8*(5-m))));i=0,h=0}}e===c[0]&&l<a.TEXT_COMPACTION_MODE_LATCH&&(k[h++]=l);for(var n=0;n<h;n++)g.write(k[n]);break;case a.BYTE_COMPACTION_MODE_LATCH_6:for(;e<c[0]&&!j;){var o=c[e++];if(o<a.TEXT_COMPACTION_MODE_LATCH)h++,i=900*i+o;else switch(o){case a.TEXT_COMPACTION_MODE_LATCH:case a.BYTE_COMPACTION_MODE_LATCH:case a.NUMERIC_COMPACTION_MODE_LATCH:case a.BYTE_COMPACTION_MODE_LATCH_6:case a.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case a.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case a.MACRO_PDF417_TERMINATOR:e--,j=!0}if(h%5==0&&h>0){for(var m=0;m<6;++m)g.write(Number(on(i)>>on(8*(5-m))));i=0,h=0}}}return f.append(kW.decode(g.toByteArray(),d)),e},a.numericCompaction=function(b,c,d){for(var e=0,f=!1,g=new Int32Array(a.MAX_NUMERIC_CODEWORDS);c<b[0]&&!f;){var h=b[c++];if(c===b[0]&&(f=!0),h<a.TEXT_COMPACTION_MODE_LATCH)g[e]=h,e++;else switch(h){case a.TEXT_COMPACTION_MODE_LATCH:case a.BYTE_COMPACTION_MODE_LATCH:case a.BYTE_COMPACTION_MODE_LATCH_6:case a.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case a.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case a.MACRO_PDF417_TERMINATOR:c--,f=!0}(e%a.MAX_NUMERIC_CODEWORDS==0||h===a.NUMERIC_COMPACTION_MODE_LATCH||f)&&e>0&&(d.append(a.decodeBase900toBase10(g,e)),e=0)}return c},a.decodeBase900toBase10=function(b,c){for(var d=on(0),e=0;e<c;e++)d+=a.EXP900[c-e-1]*on(b[e]);var f=d.toString();if("1"!==f.charAt(0))throw new kR;return f.substring(1)},a.TEXT_COMPACTION_MODE_LATCH=900,a.BYTE_COMPACTION_MODE_LATCH=901,a.NUMERIC_COMPACTION_MODE_LATCH=902,a.BYTE_COMPACTION_MODE_LATCH_6=924,a.ECI_USER_DEFINED=925,a.ECI_GENERAL_PURPOSE=926,a.ECI_CHARSET=927,a.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,a.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,a.MACRO_PDF417_TERMINATOR=922,a.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,a.MAX_NUMERIC_CODEWORDS=15,a.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,a.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,a.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,a.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,a.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,a.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,a.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,a.PL=25,a.LL=27,a.AS=27,a.ML=28,a.AL=28,a.PS=29,a.PAL=29,a.PUNCT_CHARS=";<>@[\\]_`~!\r	,:\n-.$/\"|*()?{}'",a.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",a.EXP900=om()?function(){var a=[];a[0]=on(1);var b=on(900);a[1]=b;for(var c=2;c<16;c++)a[c]=a[c-1]*b;return a}():[],a.NUMBER_OF_SEQUENCE_CODEWORDS=2,a}(),op=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},oq=function(){function a(){}return a.decode=function(b,c,d,e,f,g,h){for(var i,j=new n$(b,c,d,e,f),k=null,l=null,m=!0;;m=!1){if(null!=c&&(k=a.getRowIndicatorColumn(b,j,c,!0,g,h)),null!=e&&(l=a.getRowIndicatorColumn(b,j,e,!1,g,h)),null==(i=a.merge(k,l)))throw k_.getNotFoundInstance();var n=i.getBoundingBox();if(m&&null!=n&&(n.getMinY()<j.getMinY()||n.getMaxY()>j.getMaxY()))j=n;else break}i.setBoundingBox(j);var o=i.getBarcodeColumnCount()+1;i.setDetectionResultColumn(0,k),i.setDetectionResultColumn(o,l);for(var p=null!=k,q=1;q<=o;q++){var r=p?q:o-q;if(void 0===i.getDetectionResultColumn(r)){var s=void 0;s=0===r||r===o?new n8(j,0===r):new n2(j),i.setDetectionResultColumn(r,s);for(var t=-1,u=-1,v=j.getMinY();v<=j.getMaxY();v++){if((t=a.getStartColumn(i,r,v,p))<0||t>j.getMaxX()){if(-1===u)continue;t=u}var w=a.detectCodeword(b,j.getMinX(),j.getMaxX(),p,t,v,g,h);null!=w&&(s.setCodeword(v,w),u=t,g=Math.min(g,w.getWidth()),h=Math.max(h,w.getWidth()))}}}return a.createDecoderResult(i)},a.merge=function(b,c){if(null==b&&null==c)return null;var d=a.getBarcodeMetadata(b,c);return null==d?null:new oa(d,n$.merge(a.adjustBoundingBox(b),a.adjustBoundingBox(c)))},a.adjustBoundingBox=function(b){if(null==b)return null;var c,d,e=b.getRowHeights();if(null==e)return null;var f=a.getMax(e),g=0;try{for(var h=op(e),i=h.next();!i.done;i=h.next()){var j=i.value;if(g+=f-j,j>0)break}}catch(a){c={error:a}}finally{try{i&&!i.done&&(d=h.return)&&d.call(h)}finally{if(c)throw c.error}}for(var k=b.getCodewords(),l=0;g>0&&null==k[l];l++)g--;for(var m=0,l=e.length-1;l>=0&&(m+=f-e[l],!(e[l]>0));l--);for(var l=k.length-1;m>0&&null==k[l];l--)m--;return b.getBoundingBox().addMissingRows(g,m,b.isLeft())},a.getMax=function(a){var b,c,d=-1;try{for(var e=op(a),f=e.next();!f.done;f=e.next()){var g=f.value;d=Math.max(d,g)}}catch(a){b={error:a}}finally{try{f&&!f.done&&(c=e.return)&&c.call(e)}finally{if(b)throw b.error}}return d},a.getBarcodeMetadata=function(a,b){var c,d;return null==a||null==(c=a.getBarcodeMetadata())?null==b?null:b.getBarcodeMetadata():null==b||null==(d=b.getBarcodeMetadata())?c:c.getColumnCount()!==d.getColumnCount()&&c.getErrorCorrectionLevel()!==d.getErrorCorrectionLevel()&&c.getRowCount()!==d.getRowCount()?null:c},a.getRowIndicatorColumn=function(b,c,d,e,f,g){for(var h=new n8(c,e),i=0;i<2;i++)for(var j=0===i?1:-1,k=Math.trunc(Math.trunc(d.getX())),l=Math.trunc(Math.trunc(d.getY()));l<=c.getMaxY()&&l>=c.getMinY();l+=j){var m=a.detectCodeword(b,0,b.getWidth(),e,k,l,f,g);null!=m&&(h.setCodeword(l,m),k=e?m.getStartX():m.getEndX())}return h},a.adjustCodewordCount=function(b,c){var d=c[0][1],e=d.getValue(),f=b.getBarcodeColumnCount()*b.getBarcodeRowCount()-a.getNumberOfECCodeWords(b.getBarcodeECLevel());if(0===e.length){if(f<1||f>nP.MAX_CODEWORDS_IN_BARCODE)throw k_.getNotFoundInstance();d.setValue(f)}else e[0]!==f&&d.setValue(f)},a.createDecoderResult=function(b){var c=a.createBarcodeMatrix(b);a.adjustCodewordCount(b,c);for(var d=[],e=new Int32Array(b.getBarcodeRowCount()*b.getBarcodeColumnCount()),f=[],g=[],h=0;h<b.getBarcodeRowCount();h++)for(var i=0;i<b.getBarcodeColumnCount();i++){var j=c[h][i+1].getValue(),k=h*b.getBarcodeColumnCount()+i;0===j.length?d.push(k):1===j.length?e[k]=j[0]:(g.push(k),f.push(j))}for(var l=Array(f.length),m=0;m<l.length;m++)l[m]=f[m];return a.createDecoderResultFromAmbiguousValues(b.getBarcodeECLevel(),e,nP.toIntArray(d),nP.toIntArray(g),l)},a.createDecoderResultFromAmbiguousValues=function(b,c,d,e,f){for(var g=new Int32Array(e.length),h=100;h-- >0;){for(var i=0;i<g.length;i++)c[e[i]]=f[i][g[i]];try{return a.decodeCodewords(c,b,d)}catch(a){if(!(a instanceof kE))throw a}if(0===g.length)break;for(var i=0;i<g.length;i++)if(g[i]<f[i].length-1){g[i]++;break}else if(g[i]=0,i===g.length-1)throw kE.getChecksumInstance()}throw kE.getChecksumInstance()},a.createBarcodeMatrix=function(a){for(var b,c,d,e,f=Array.from({length:a.getBarcodeRowCount()},function(){return Array(a.getBarcodeColumnCount()+2)}),g=0;g<f.length;g++)for(var h=0;h<f[g].length;h++)f[g][h]=new n5;var i=0;try{for(var j=op(a.getDetectionResultColumns()),k=j.next();!k.done;k=j.next()){var l=k.value;if(null!=l)try{for(var m=(d=void 0,op(l.getCodewords())),n=m.next();!n.done;n=m.next()){var o=n.value;if(null!=o){var p=o.getRowNumber();if(p>=0){if(p>=f.length)continue;f[p][i].setValue(o.getValue())}}}}catch(a){d={error:a}}finally{try{n&&!n.done&&(e=m.return)&&e.call(m)}finally{if(d)throw d.error}}i++}}catch(a){b={error:a}}finally{try{k&&!k.done&&(c=j.return)&&c.call(j)}finally{if(b)throw b.error}}return f},a.isValidBarcodeColumn=function(a,b){return b>=0&&b<=a.getBarcodeColumnCount()+1},a.getStartColumn=function(b,c,d,e){var f,g,h=e?1:-1,i=null;if(a.isValidBarcodeColumn(b,c-h)&&(i=b.getDetectionResultColumn(c-h).getCodeword(d)),null!=i)return e?i.getEndX():i.getStartX();if(null!=(i=b.getDetectionResultColumn(c).getCodewordNearby(d)))return e?i.getStartX():i.getEndX();if(a.isValidBarcodeColumn(b,c-h)&&(i=b.getDetectionResultColumn(c-h).getCodewordNearby(d)),null!=i)return e?i.getEndX():i.getStartX();for(var j=0;a.isValidBarcodeColumn(b,c-h);){c-=h;try{for(var k=(f=void 0,op(b.getDetectionResultColumn(c).getCodewords())),l=k.next();!l.done;l=k.next()){var m=l.value;if(null!=m)return(e?m.getEndX():m.getStartX())+h*j*(m.getEndX()-m.getStartX())}}catch(a){f={error:a}}finally{try{l&&!l.done&&(g=k.return)&&g.call(k)}finally{if(f)throw f.error}}j++}return e?b.getBoundingBox().getMinX():b.getBoundingBox().getMaxX()},a.detectCodeword=function(b,c,d,e,f,g,h,i){f=a.adjustCodewordStartColumn(b,c,d,e,f,g);var j,k=a.getModuleBitCount(b,c,d,e,f,g);if(null==k)return null;var l=lu.sum(k);if(e)j=f+l;else{for(var m=0;m<k.length/2;m++){var n=k[m];k[m]=k[k.length-1-m],k[k.length-1-m]=n}f=(j=f)-l}if(!a.checkCodewordSkew(l,h,i))return null;var o=oc.getDecodedValue(k),p=nP.getCodeword(o);return -1===p?null:new ob(f,j,a.getCodewordBucketNumber(o),p)},a.getModuleBitCount=function(a,b,c,d,e,f){for(var g=e,h=new Int32Array(8),i=0,j=d?1:-1,k=d;(d?g<c:g>=b)&&i<h.length;)a.get(g,f)===k?(h[i]++,g+=j):(i++,k=!k);return i===h.length||g===(d?c:b)&&i===h.length-1?h:null},a.getNumberOfECCodeWords=function(a){return 2<<a},a.adjustCodewordStartColumn=function(b,c,d,e,f,g){for(var h=f,i=e?-1:1,j=0;j<2;j++){for(;(e?h>=c:h<d)&&e===b.get(h,g);){if(Math.abs(f-h)>a.CODEWORD_SKEW_SIZE)return f;h+=i}i=-i,e=!e}return h},a.checkCodewordSkew=function(b,c,d){return c-a.CODEWORD_SKEW_SIZE<=b&&b<=d+a.CODEWORD_SKEW_SIZE},a.decodeCodewords=function(b,c,d){if(0===b.length)throw kR.getFormatInstance();var e=1<<c+1,f=a.correctErrors(b,d,e);a.verifyCodewordCount(b,e);var g=oo.decode(b,""+c);return g.setErrorsCorrected(f),g.setErasures(d.length),g},a.correctErrors=function(b,c,d){if(null!=c&&c.length>d/2+a.MAX_ERRORS||d<0||d>a.MAX_EC_CODEWORDS)throw kE.getChecksumInstance();return a.errorCorrection.decode(b,d,c)},a.verifyCodewordCount=function(a,b){if(a.length<4)throw kR.getFormatInstance();var c=a[0];if(c>a.length)throw kR.getFormatInstance();if(0===c)if(b<a.length)a[0]=a.length-b;else throw kR.getFormatInstance()},a.getBitCountForCodeword=function(a){for(var b=new Int32Array(8),c=0,d=b.length-1;!((1&a)!==c&&(c=1&a,--d<0));)b[d]++,a>>=1;return b},a.getCodewordBucketNumber=function(a){return a instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(a):this.getCodewordBucketNumber_number(a)},a.getCodewordBucketNumber_number=function(b){return a.getCodewordBucketNumber(a.getBitCountForCodeword(b))},a.getCodewordBucketNumber_Int32Array=function(a){return(a[0]-a[2]+a[4]-a[6]+9)%9},a.toString=function(a){for(var b=new n0,c=0;c<a.length;c++){b.format("Row %2d: ",c);for(var d=0;d<a[c].length;d++){var e=a[c][d];0===e.getValue().length?b.format("        ",null):b.format("%4d(%2d)",e.getValue()[0],e.getConfidence(e.getValue()[0]))}b.format("%n")}return b.toString()},a.CODEWORD_SKEW_SIZE=2,a.MAX_ERRORS=3,a.MAX_EC_CODEWORDS=512,a.errorCorrection=new nZ,a}(),or=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},os=function(){function a(){}return a.prototype.decode=function(b,c){void 0===c&&(c=null);var d=a.decode(b,c,!1);if(null==d||0===d.length||null==d[0])throw k_.getNotFoundInstance();return d[0]},a.prototype.decodeMultiple=function(b,c){void 0===c&&(c=null);try{return a.decode(b,c,!0)}catch(a){if(a instanceof kR||a instanceof kE)throw k_.getNotFoundInstance();throw a}},a.decode=function(b,c,d){var e,f,g=[],h=nS.detectMultiple(b,c,d);try{for(var i=or(h.getPoints()),j=i.next();!j.done;j=i.next()){var k=j.value,l=oq.decode(h.getBits(),k[4],k[5],k[6],k[7],a.getMinCodewordWidth(k),a.getMaxCodewordWidth(k)),m=new le(l.getText(),l.getRawBytes(),void 0,k,lf.PDF_417);m.putMetadata(lg.ERROR_CORRECTION_LEVEL,l.getECLevel());var n=l.getOther();null!=n&&m.putMetadata(lg.PDF417_EXTRA_METADATA,n),g.push(m)}}catch(a){e={error:a}}finally{try{j&&!j.done&&(f=i.return)&&f.call(i)}finally{if(e)throw e.error}}return g.map(function(a){return a})},a.getMaxWidth=function(a,b){return null==a||null==b?0:Math.trunc(Math.abs(a.getX()-b.getX()))},a.getMinWidth=function(a,b){return null==a||null==b?kN.MAX_VALUE:Math.trunc(Math.abs(a.getX()-b.getX()))},a.getMaxCodewordWidth=function(b){return Math.floor(Math.max(Math.max(a.getMaxWidth(b[0],b[4]),a.getMaxWidth(b[6],b[2])*nP.MODULES_IN_CODEWORD/nP.MODULES_IN_STOP_PATTERN),Math.max(a.getMaxWidth(b[1],b[5]),a.getMaxWidth(b[7],b[3])*nP.MODULES_IN_CODEWORD/nP.MODULES_IN_STOP_PATTERN)))},a.getMinCodewordWidth=function(b){return Math.floor(Math.min(Math.min(a.getMinWidth(b[0],b[4]),a.getMinWidth(b[6],b[2])*nP.MODULES_IN_CODEWORD/nP.MODULES_IN_STOP_PATTERN),Math.min(a.getMinWidth(b[1],b[5]),a.getMinWidth(b[7],b[3])*nP.MODULES_IN_CODEWORD/nP.MODULES_IN_STOP_PATTERN)))},a.prototype.reset=function(){},a}(),ot=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),ou=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return ot(b,a),b.kind="ReaderException",b}(kx),ov=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},ow=function(){function a(){}return a.prototype.decode=function(a,b){return this.setHints(b),this.decodeInternal(a)},a.prototype.decodeWithState=function(a){return(null===this.readers||void 0===this.readers)&&this.setHints(null),this.decodeInternal(a)},a.prototype.setHints=function(a){this.hints=a;var b=null!=a&&void 0!==a.get(kP.TRY_HARDER),c=null==a?null:a.get(kP.POSSIBLE_FORMATS),d=[];if(null!=c){var e=c.some(function(a){return a===lf.UPC_A||a===lf.UPC_E||a===lf.EAN_13||a===lf.EAN_8||a===lf.CODABAR||a===lf.CODE_39||a===lf.CODE_93||a===lf.CODE_128||a===lf.ITF||a===lf.RSS_14||a===lf.RSS_EXPANDED});e&&!b&&d.push(new m6(a)),c.includes(lf.QR_CODE)&&d.push(new nN),c.includes(lf.DATA_MATRIX)&&d.push(new nk),c.includes(lf.AZTEC)&&d.push(new lI),c.includes(lf.PDF_417)&&d.push(new os),e&&b&&d.push(new m6(a))}0===d.length&&(b||d.push(new m6(a)),d.push(new nN),d.push(new nk),d.push(new lI),d.push(new os),b&&d.push(new m6(a))),this.readers=d},a.prototype.reset=function(){var a,b;if(null!==this.readers)try{for(var c=ov(this.readers),d=c.next();!d.done;d=c.next())d.value.reset()}catch(b){a={error:b}}finally{try{d&&!d.done&&(b=c.return)&&b.call(c)}finally{if(a)throw a.error}}},a.prototype.decodeInternal=function(a){var b,c;if(null===this.readers)throw new ou("No readers where selected, nothing can be read.");try{for(var d=ov(this.readers),e=d.next();!e.done;e=d.next()){var f=e.value;try{return f.decode(a,this.hints)}catch(a){if(a instanceof ou)continue}}}catch(a){b={error:a}}finally{try{e&&!e.done&&(c=d.return)&&c.call(d)}finally{if(b)throw b.error}}throw new k_("No MultiFormat Readers were able to detect the code.")},a}(),ox=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),oy=function(a){function b(b,c){void 0===b&&(b=null),void 0===c&&(c=500);var d=new ow;return d.setHints(b),a.call(this,d,c)||this}return ox(b,a),b.prototype.decodeBitmap=function(a){return this.reader.decodeWithState(a)},b}(ld),oz=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();!function(a){oz(function(b){return void 0===b&&(b=500),a.call(this,new os,b)||this},a)}(ld);var oA=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();!function(a){oA(function(b){return void 0===b&&(b=500),a.call(this,new nN,b)||this},a)}(ld),function(a){a[a.ERROR_CORRECTION=0]="ERROR_CORRECTION",a[a.CHARACTER_SET=1]="CHARACTER_SET",a[a.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",a[a.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",a[a.MIN_SIZE=4]="MIN_SIZE",a[a.MAX_SIZE=5]="MAX_SIZE",a[a.MARGIN=6]="MARGIN",a[a.PDF417_COMPACT=7]="PDF417_COMPACT",a[a.PDF417_COMPACTION=8]="PDF417_COMPACTION",a[a.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",a[a.AZTEC_LAYERS=10]="AZTEC_LAYERS",a[a.QR_VERSION=11]="QR_VERSION",a[a.GS1_FORMAT=12]="GS1_FORMAT",a[a.FORCE_C40=13]="FORCE_C40"}(s||(s={}));let oB=s;var oC=function(){function a(a){this.field=a,this.cachedGenerators=[],this.cachedGenerators.push(new lj(a,Int32Array.from([1])))}return a.prototype.buildGenerator=function(a){var b=this.cachedGenerators;if(a>=b.length)for(var c=b[b.length-1],d=this.field,e=b.length;e<=a;e++){var f=c.multiply(new lj(d,Int32Array.from([1,d.exp(e-1+d.getGeneratorBase())])));b.push(f),c=f}return b[a]},a.prototype.encode=function(a,b){if(0===b)throw new kB("No error correction bytes");var c=a.length-b;if(c<=0)throw new kB("No data bytes provided");var d=this.buildGenerator(b),e=new Int32Array(c);kG.arraycopy(a,0,e,0,c);for(var f=new lj(this.field,e),g=(f=f.multiplyByMonomial(b,1)).divide(d)[1].getCoefficients(),h=b-g.length,i=0;i<h;i++)a[c+i]=0;kG.arraycopy(g,0,a,c+h,g.length)},a}(),oD=function(){function a(){}return a.applyMaskPenaltyRule1=function(b){return a.applyMaskPenaltyRule1Internal(b,!0)+a.applyMaskPenaltyRule1Internal(b,!1)},a.applyMaskPenaltyRule2=function(b){for(var c=0,d=b.getArray(),e=b.getWidth(),f=b.getHeight(),g=0;g<f-1;g++)for(var h=d[g],i=0;i<e-1;i++){var j=h[i];j===h[i+1]&&j===d[g+1][i]&&j===d[g+1][i+1]&&c++}return a.N2*c},a.applyMaskPenaltyRule3=function(b){for(var c=0,d=b.getArray(),e=b.getWidth(),f=b.getHeight(),g=0;g<f;g++)for(var h=0;h<e;h++){var i=d[g];h+6<e&&1===i[h]&&0===i[h+1]&&1===i[h+2]&&1===i[h+3]&&1===i[h+4]&&0===i[h+5]&&1===i[h+6]&&(a.isWhiteHorizontal(i,h-4,h)||a.isWhiteHorizontal(i,h+7,h+11))&&c++,g+6<f&&1===d[g][h]&&0===d[g+1][h]&&1===d[g+2][h]&&1===d[g+3][h]&&1===d[g+4][h]&&0===d[g+5][h]&&1===d[g+6][h]&&(a.isWhiteVertical(d,h,g-4,g)||a.isWhiteVertical(d,h,g+7,g+11))&&c++}return c*a.N3},a.isWhiteHorizontal=function(a,b,c){b=Math.max(b,0),c=Math.min(c,a.length);for(var d=b;d<c;d++)if(1===a[d])return!1;return!0},a.isWhiteVertical=function(a,b,c,d){c=Math.max(c,0),d=Math.min(d,a.length);for(var e=c;e<d;e++)if(1===a[e][b])return!1;return!0},a.applyMaskPenaltyRule4=function(b){for(var c=0,d=b.getArray(),e=b.getWidth(),f=b.getHeight(),g=0;g<f;g++)for(var h=d[g],i=0;i<e;i++)1===h[i]&&c++;var j=b.getHeight()*b.getWidth();return Math.floor(10*Math.abs(2*c-j)/j)*a.N4},a.getDataMaskBit=function(a,b,c){var d,e;switch(a){case 0:d=c+b&1;break;case 1:d=1&c;break;case 2:d=b%3;break;case 3:d=(c+b)%3;break;case 4:d=Math.floor(c/2)+Math.floor(b/3)&1;break;case 5:d=(1&(e=c*b))+e%3;break;case 6:d=(1&(e=c*b))+e%3&1;break;case 7:d=(e=c*b)%3+(c+b&1)&1;break;default:throw new kB("Invalid mask pattern: "+a)}return 0===d},a.applyMaskPenaltyRule1Internal=function(b,c){for(var d=0,e=c?b.getHeight():b.getWidth(),f=c?b.getWidth():b.getHeight(),g=b.getArray(),h=0;h<e;h++){for(var i=0,j=-1,k=0;k<f;k++){var l=c?g[h][k]:g[k][h];l===j?i++:(i>=5&&(d+=a.N1+(i-5)),i=1,j=l)}i>=5&&(d+=a.N1+(i-5))}return d},a.N1=3,a.N2=3,a.N3=40,a.N4=10,a}(),oE=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},oF=function(){function a(a,b){this.width=a,this.height=b;for(var c=Array(b),d=0;d!==b;d++)c[d]=new Uint8Array(a);this.bytes=c}return a.prototype.getHeight=function(){return this.height},a.prototype.getWidth=function(){return this.width},a.prototype.get=function(a,b){return this.bytes[b][a]},a.prototype.getArray=function(){return this.bytes},a.prototype.setNumber=function(a,b,c){this.bytes[b][a]=c},a.prototype.setBoolean=function(a,b,c){this.bytes[b][a]=+!!c},a.prototype.clear=function(a){var b,c;try{for(var d=oE(this.bytes),e=d.next();!e.done;e=d.next()){var f=e.value;kM.fill(f,a)}}catch(a){b={error:a}}finally{try{e&&!e.done&&(c=d.return)&&c.call(d)}finally{if(b)throw b.error}}},a.prototype.equals=function(b){if(!(b instanceof a)||this.width!==b.width||this.height!==b.height)return!1;for(var c=0,d=this.height;c<d;++c)for(var e=this.bytes[c],f=b.bytes[c],g=0,h=this.width;g<h;++g)if(e[g]!==f[g])return!1;return!0},a.prototype.toString=function(){for(var a=new kY,b=0,c=this.height;b<c;++b){for(var d=this.bytes[b],e=0,f=this.width;e<f;++e)switch(d[e]){case 0:a.append(" 0");break;case 1:a.append(" 1");break;default:a.append("  ")}a.append("\n")}return a.toString()},a}(),oG=function(){function a(){this.maskPattern=-1}return a.prototype.getMode=function(){return this.mode},a.prototype.getECLevel=function(){return this.ecLevel},a.prototype.getVersion=function(){return this.version},a.prototype.getMaskPattern=function(){return this.maskPattern},a.prototype.getMatrix=function(){return this.matrix},a.prototype.toString=function(){var a=new kY;return a.append("<<\n"),a.append(" mode: "),a.append(this.mode?this.mode.toString():"null"),a.append("\n ecLevel: "),a.append(this.ecLevel?this.ecLevel.toString():"null"),a.append("\n version: "),a.append(this.version?this.version.toString():"null"),a.append("\n maskPattern: "),a.append(this.maskPattern.toString()),this.matrix?(a.append("\n matrix:\n"),a.append(this.matrix.toString())):a.append("\n matrix: null\n"),a.append(">>\n"),a.toString()},a.prototype.setMode=function(a){this.mode=a},a.prototype.setECLevel=function(a){this.ecLevel=a},a.prototype.setVersion=function(a){this.version=a},a.prototype.setMaskPattern=function(a){this.maskPattern=a},a.prototype.setMatrix=function(a){this.matrix=a},a.isValidMaskPattern=function(b){return b>=0&&b<a.NUM_MASK_PATTERNS},a.NUM_MASK_PATTERNS=8,a}(),oH=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),oI=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return oH(b,a),b.kind="WriterException",b}(kx),oJ=function(){function a(){}return a.clearMatrix=function(a){a.clear(255)},a.buildMatrix=function(b,c,d,e,f){a.clearMatrix(f),a.embedBasicPatterns(d,f),a.embedTypeInfo(c,e,f),a.maybeEmbedVersionInfo(d,f),a.embedDataBits(b,e,f)},a.embedBasicPatterns=function(b,c){a.embedPositionDetectionPatternsAndSeparators(c),a.embedDarkDotAtLeftBottomCorner(c),a.maybeEmbedPositionAdjustmentPatterns(b,c),a.embedTimingPatterns(c)},a.embedTypeInfo=function(b,c,d){var e=new kO;a.makeTypeInfoBits(b,c,e);for(var f=0,g=e.getSize();f<g;++f){var h=e.get(e.getSize()-1-f),i=a.TYPE_INFO_COORDINATES[f],j=i[0],k=i[1];if(d.setBoolean(j,k,h),f<8){var l=d.getWidth()-f-1,m=8;d.setBoolean(l,m,h)}else{var l=8,m=d.getHeight()-7+(f-8);d.setBoolean(l,m,h)}}},a.maybeEmbedVersionInfo=function(b,c){if(!(7>b.getVersionNumber())){var d=new kO;a.makeVersionInfoBits(b,d);for(var e=17,f=0;f<6;++f)for(var g=0;g<3;++g){var h=d.get(e);e--,c.setBoolean(f,c.getHeight()-11+g,h),c.setBoolean(c.getHeight()-11+g,f,h)}}},a.embedDataBits=function(b,c,d){for(var e=0,f=-1,g=d.getWidth()-1,h=d.getHeight()-1;g>0;){for(6===g&&(g-=1);h>=0&&h<d.getHeight();){for(var i=0;i<2;++i){var j=g-i;if(a.isEmpty(d.get(j,h))){var k=void 0;e<b.getSize()?(k=b.get(e),++e):k=!1,255!==c&&oD.getDataMaskBit(c,j,h)&&(k=!k),d.setBoolean(j,h,k)}}h+=f}h+=f=-f,g-=2}if(e!==b.getSize())throw new oI("Not all bits consumed: "+e+"/"+b.getSize())},a.findMSBSet=function(a){return 32-kN.numberOfLeadingZeros(a)},a.calculateBCHCode=function(b,c){if(0===c)throw new kB("0 polynomial");var d=a.findMSBSet(c);for(b<<=d-1;a.findMSBSet(b)>=d;)b^=c<<a.findMSBSet(b)-d;return b},a.makeTypeInfoBits=function(b,c,d){if(!oG.isValidMaskPattern(c))throw new oI("Invalid mask pattern");var e=b.getBits()<<3|c;d.appendBits(e,5);var f=a.calculateBCHCode(e,a.TYPE_INFO_POLY);d.appendBits(f,10);var g=new kO;if(g.appendBits(a.TYPE_INFO_MASK_PATTERN,15),d.xor(g),15!==d.getSize())throw new oI("should not happen but we got: "+d.getSize())},a.makeVersionInfoBits=function(b,c){c.appendBits(b.getVersionNumber(),6);var d=a.calculateBCHCode(b.getVersionNumber(),a.VERSION_INFO_POLY);if(c.appendBits(d,12),18!==c.getSize())throw new oI("should not happen but we got: "+c.getSize())},a.isEmpty=function(a){return 255===a},a.embedTimingPatterns=function(b){for(var c=8;c<b.getWidth()-8;++c){var d=(c+1)%2;a.isEmpty(b.get(c,6))&&b.setNumber(c,6,d),a.isEmpty(b.get(6,c))&&b.setNumber(6,c,d)}},a.embedDarkDotAtLeftBottomCorner=function(a){if(0===a.get(8,a.getHeight()-8))throw new oI;a.setNumber(8,a.getHeight()-8,1)},a.embedHorizontalSeparationPattern=function(b,c,d){for(var e=0;e<8;++e){if(!a.isEmpty(d.get(b+e,c)))throw new oI;d.setNumber(b+e,c,0)}},a.embedVerticalSeparationPattern=function(b,c,d){for(var e=0;e<7;++e){if(!a.isEmpty(d.get(b,c+e)))throw new oI;d.setNumber(b,c+e,0)}},a.embedPositionAdjustmentPattern=function(b,c,d){for(var e=0;e<5;++e)for(var f=a.POSITION_ADJUSTMENT_PATTERN[e],g=0;g<5;++g)d.setNumber(b+g,c+e,f[g])},a.embedPositionDetectionPattern=function(b,c,d){for(var e=0;e<7;++e)for(var f=a.POSITION_DETECTION_PATTERN[e],g=0;g<7;++g)d.setNumber(b+g,c+e,f[g])},a.embedPositionDetectionPatternsAndSeparators=function(b){var c=a.POSITION_DETECTION_PATTERN[0].length;a.embedPositionDetectionPattern(0,0,b),a.embedPositionDetectionPattern(b.getWidth()-c,0,b),a.embedPositionDetectionPattern(0,b.getWidth()-c,b),a.embedHorizontalSeparationPattern(0,7,b),a.embedHorizontalSeparationPattern(b.getWidth()-8,7,b),a.embedHorizontalSeparationPattern(0,b.getWidth()-8,b),a.embedVerticalSeparationPattern(7,0,b),a.embedVerticalSeparationPattern(b.getHeight()-7-1,0,b),a.embedVerticalSeparationPattern(7,b.getHeight()-7,b)},a.maybeEmbedPositionAdjustmentPatterns=function(b,c){if(!(2>b.getVersionNumber()))for(var d=b.getVersionNumber()-1,e=a.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[d],f=0,g=e.length;f!==g;f++){var h=e[f];if(h>=0)for(var i=0;i!==g;i++){var j=e[i];j>=0&&a.isEmpty(c.get(j,h))&&a.embedPositionAdjustmentPattern(j-2,h-2,c)}}},a.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),a.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),a.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),a.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),a.VERSION_INFO_POLY=7973,a.TYPE_INFO_POLY=1335,a.TYPE_INFO_MASK_PATTERN=21522,a}(),oK=function(){function a(a,b){this.dataBytes=a,this.errorCorrectionBytes=b}return a.prototype.getDataBytes=function(){return this.dataBytes},a.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},a}(),oL=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},oM=function(){function a(){}return a.calculateMaskPenalty=function(a){return oD.applyMaskPenaltyRule1(a)+oD.applyMaskPenaltyRule2(a)+oD.applyMaskPenaltyRule3(a)+oD.applyMaskPenaltyRule4(a)},a.encode=function(b,c,d){void 0===d&&(d=null);var e,f=a.DEFAULT_BYTE_MODE_ENCODING,g=null!==d&&void 0!==d.get(oB.CHARACTER_SET);g&&(f=d.get(oB.CHARACTER_SET).toString());var h=this.chooseMode(b,f),i=new kO;if(h===ny.BYTE&&(g||a.DEFAULT_BYTE_MODE_ENCODING!==f)){var j=kT.getCharacterSetECIByName(f);void 0!==j&&this.appendECI(j,i)}this.appendModeInfo(h,i);var k=new kO;if(this.appendBytes(b,h,k,f),null!==d&&void 0!==d.get(oB.QR_VERSION)){var l=Number.parseInt(d.get(oB.QR_VERSION).toString(),10);e=nt.getVersionForNumber(l);var m=this.calculateBitsNeeded(h,i,k,e);if(!this.willFit(m,e,c))throw new oI("Data too big for requested version")}else e=this.recommendVersion(c,h,i,k);var n=new kO;n.appendBitArray(i);var o=h===ny.BYTE?k.getSizeInBytes():b.length;this.appendLengthInfo(o,e,h,n),n.appendBitArray(k);var p=e.getECBlocksForLevel(c),q=e.getTotalCodewords()-p.getTotalECCodewords();this.terminateBits(q,n);var r=this.interleaveWithECBytes(n,e.getTotalCodewords(),q,p.getNumBlocks()),s=new oG;s.setECLevel(c),s.setMode(h),s.setVersion(e);var t=e.getDimensionForVersion(),u=new oF(t,t),v=this.chooseMaskPattern(r,c,e,u);return s.setMaskPattern(v),oJ.buildMatrix(r,c,e,v,u),s.setMatrix(u),s},a.recommendVersion=function(a,b,c,d){var e=this.calculateBitsNeeded(b,c,d,nt.getVersionForNumber(1)),f=this.chooseVersion(e,a),g=this.calculateBitsNeeded(b,c,d,f);return this.chooseVersion(g,a)},a.calculateBitsNeeded=function(a,b,c,d){return b.getSize()+a.getCharacterCountBits(d)+c.getSize()},a.getAlphanumericCode=function(b){return b<a.ALPHANUMERIC_TABLE.length?a.ALPHANUMERIC_TABLE[b]:-1},a.chooseMode=function(b,c){if(void 0===c&&(c=null),kT.SJIS.getName()===c&&this.isOnlyDoubleByteKanji(b))return ny.KANJI;for(var d=!1,e=!1,f=0,g=b.length;f<g;++f){var h=b.charAt(f);if(a.isDigit(h))d=!0;else{if(-1===this.getAlphanumericCode(h.charCodeAt(0)))return ny.BYTE;e=!0}}return e?ny.ALPHANUMERIC:d?ny.NUMERIC:ny.BYTE},a.isOnlyDoubleByteKanji=function(a){try{b=kW.encode(a,kT.SJIS)}catch(a){return!1}var b,c=b.length;if(c%2!=0)return!1;for(var d=0;d<c;d+=2){var e=255&b[d];if((e<129||e>159)&&(e<224||e>235))return!1}return!0},a.chooseMaskPattern=function(a,b,c,d){for(var e=Number.MAX_SAFE_INTEGER,f=-1,g=0;g<oG.NUM_MASK_PATTERNS;g++){oJ.buildMatrix(a,b,c,g,d);var h=this.calculateMaskPenalty(d);h<e&&(e=h,f=g)}return f},a.chooseVersion=function(b,c){for(var d=1;d<=40;d++){var e=nt.getVersionForNumber(d);if(a.willFit(b,e,c))return e}throw new oI("Data too big")},a.willFit=function(a,b,c){return b.getTotalCodewords()-b.getECBlocksForLevel(c).getTotalECCodewords()>=(a+7)/8},a.terminateBits=function(a,b){var c=8*a;if(b.getSize()>c)throw new oI("data bits cannot fit in the QR Code"+b.getSize()+" > "+c);for(var d=0;d<4&&b.getSize()<c;++d)b.appendBit(!1);var e=7&b.getSize();if(e>0)for(var d=e;d<8;d++)b.appendBit(!1);for(var f=a-b.getSizeInBytes(),d=0;d<f;++d)b.appendBits((1&d)==0?236:17,8);if(b.getSize()!==c)throw new oI("Bits size does not equal capacity")},a.getNumDataBytesAndNumECBytesForBlockID=function(a,b,c,d,e,f){if(d>=c)throw new oI("Block ID too large");var g=a%c,h=c-g,i=Math.floor(a/c),j=Math.floor(b/c),k=j+1,l=i-j,m=i+1-k;if(l!==m)throw new oI("EC bytes mismatch");if(c!==h+g)throw new oI("RS blocks mismatch");if(a!==(j+l)*h+(k+m)*g)throw new oI("Total bytes mismatch");d<h?(e[0]=j,f[0]=l):(e[0]=k,f[0]=m)},a.interleaveWithECBytes=function(b,c,d,e){if(b.getSizeInBytes()!==d)throw new oI("Number of bits and data bytes does not match");for(var f,g,h,i,j=0,k=0,l=0,m=[],n=0;n<e;++n){var o=new Int32Array(1),p=new Int32Array(1);a.getNumDataBytesAndNumECBytesForBlockID(c,d,e,n,o,p);var q=o[0],r=new Uint8Array(q);b.toBytes(8*j,r,0,q);var s=a.generateECBytes(r,p[0]);m.push(new oK(r,s)),k=Math.max(k,q),l=Math.max(l,s.length),j+=o[0]}if(d!==j)throw new oI("Data bytes does not match offset");for(var t=new kO,n=0;n<k;++n)try{for(var u=(f=void 0,oL(m)),v=u.next();!v.done;v=u.next()){var w=v.value,r=w.getDataBytes();n<r.length&&t.appendBits(r[n],8)}}catch(a){f={error:a}}finally{try{v&&!v.done&&(g=u.return)&&g.call(u)}finally{if(f)throw f.error}}for(var n=0;n<l;++n)try{for(var x=(h=void 0,oL(m)),y=x.next();!y.done;y=x.next()){var w=y.value,s=w.getErrorCorrectionBytes();n<s.length&&t.appendBits(s[n],8)}}catch(a){h={error:a}}finally{try{y&&!y.done&&(i=x.return)&&i.call(x)}finally{if(h)throw h.error}}if(c!==t.getSizeInBytes())throw new oI("Interleaving error: "+c+" and "+t.getSizeInBytes()+" differ.");return t},a.generateECBytes=function(a,b){for(var c=a.length,d=new Int32Array(c+b),e=0;e<c;e++)d[e]=255&a[e];new oC(ln.QR_CODE_FIELD_256).encode(d,b);for(var f=new Uint8Array(b),e=0;e<b;e++)f[e]=d[c+e];return f},a.appendModeInfo=function(a,b){b.appendBits(a.getBits(),4)},a.appendLengthInfo=function(a,b,c,d){var e=c.getCharacterCountBits(b);if(a>=1<<e)throw new oI(a+" is bigger than "+((1<<e)-1));d.appendBits(a,e)},a.appendBytes=function(b,c,d,e){switch(c){case ny.NUMERIC:a.appendNumericBytes(b,d);break;case ny.ALPHANUMERIC:a.appendAlphanumericBytes(b,d);break;case ny.BYTE:a.append8BitBytes(b,d,e);break;case ny.KANJI:a.appendKanjiBytes(b,d);break;default:throw new oI("Invalid mode: "+c)}},a.getDigit=function(a){return a.charCodeAt(0)-48},a.isDigit=function(b){var c=a.getDigit(b);return c>=0&&c<=9},a.appendNumericBytes=function(b,c){for(var d=b.length,e=0;e<d;){var f=a.getDigit(b.charAt(e));if(e+2<d){var g=a.getDigit(b.charAt(e+1)),h=a.getDigit(b.charAt(e+2));c.appendBits(100*f+10*g+h,10),e+=3}else if(e+1<d){var g=a.getDigit(b.charAt(e+1));c.appendBits(10*f+g,7),e+=2}else c.appendBits(f,4),e++}},a.appendAlphanumericBytes=function(b,c){for(var d=b.length,e=0;e<d;){var f=a.getAlphanumericCode(b.charCodeAt(e));if(-1===f)throw new oI;if(e+1<d){var g=a.getAlphanumericCode(b.charCodeAt(e+1));if(-1===g)throw new oI;c.appendBits(45*f+g,11),e+=2}else c.appendBits(f,6),e++}},a.append8BitBytes=function(a,b,c){var d;try{d=kW.encode(a,c)}catch(a){throw new oI(a)}for(var e=0,f=d.length;e!==f;e++){var g=d[e];b.appendBits(g,8)}},a.appendKanjiBytes=function(a,b){try{c=kW.encode(a,kT.SJIS)}catch(a){throw new oI(a)}for(var c,d=c.length,e=0;e<d;e+=2){var f=(255&c[e])<<8|255&c[e+1],g=-1;if(f>=33088&&f<=40956?g=f-33088:f>=57408&&f<=60351&&(g=f-49472),-1===g)throw new oI("Invalid byte sequence");var h=(g>>8)*192+(255&g);b.appendBits(h,13)}},a.appendECI=function(a,b){b.appendBits(ny.ECI.getBits(),4),b.appendBits(a.getValue(),8)},a.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),a.DEFAULT_BYTE_MODE_ENCODING=kT.UTF8.getName(),a}();!function(){function a(){}a.prototype.write=function(b,c,d,e){if(void 0===e&&(e=null),0===b.length)throw new kB("Found empty contents");if(c<0||d<0)throw new kB("Requested dimensions are too small: "+c+"x"+d);var f=nm.L,g=a.QUIET_ZONE_SIZE;null!==e&&(void 0!==e.get(oB.ERROR_CORRECTION)&&(f=nm.fromString(e.get(oB.ERROR_CORRECTION).toString())),void 0!==e.get(oB.MARGIN)&&(g=Number.parseInt(e.get(oB.MARGIN).toString(),10)));var h=oM.encode(b,f,e);return this.renderResult(h,c,d,g)},a.prototype.writeToDom=function(a,b,c,d,e){void 0===e&&(e=null),"string"==typeof a&&(a=document.querySelector(a));var f=this.write(b,c,d,e);a&&a.appendChild(f)},a.prototype.renderResult=function(a,b,c,d){var e=a.getMatrix();if(null===e)throw new lr;for(var f=e.getWidth(),g=e.getHeight(),h=f+2*d,i=g+2*d,j=Math.max(b,h),k=Math.max(c,i),l=Math.min(Math.floor(j/h),Math.floor(k/i)),m=Math.floor((j-f*l)/2),n=Math.floor((k-g*l)/2),o=this.createSVGElement(j,k),p=0,q=n;p<g;p++,q+=l)for(var r=0,s=m;r<f;r++,s+=l)if(1===e.get(r,p)){var t=this.createSvgRectElement(s,q,l,l);o.appendChild(t)}return o},a.prototype.createSVGElement=function(b,c){var d=document.createElementNS(a.SVG_NS,"svg");return d.setAttributeNS(null,"height",b.toString()),d.setAttributeNS(null,"width",c.toString()),d},a.prototype.createSvgRectElement=function(b,c,d,e){var f=document.createElementNS(a.SVG_NS,"rect");return f.setAttributeNS(null,"x",b.toString()),f.setAttributeNS(null,"y",c.toString()),f.setAttributeNS(null,"height",d.toString()),f.setAttributeNS(null,"width",e.toString()),f.setAttributeNS(null,"fill","#000000"),f},a.QUIET_ZONE_SIZE=4,a.SVG_NS="http://www.w3.org/2000/svg"}();var oN=function(){function a(){}return a.prototype.encode=function(b,c,d,e,f){if(0===b.length)throw new kB("Found empty contents");if(c!==lf.QR_CODE)throw new kB("Can only encode QR_CODE, but got "+c);if(d<0||e<0)throw new kB("Requested dimensions are too small: "+d+"x"+e);var g=nm.L,h=a.QUIET_ZONE_SIZE;null!==f&&(void 0!==f.get(oB.ERROR_CORRECTION)&&(g=nm.fromString(f.get(oB.ERROR_CORRECTION).toString())),void 0!==f.get(oB.MARGIN)&&(h=Number.parseInt(f.get(oB.MARGIN).toString(),10)));var i=oM.encode(b,g,f);return a.renderResult(i,d,e,h)},a.renderResult=function(a,b,c,d){var e=a.getMatrix();if(null===e)throw new lr;for(var f=e.getWidth(),g=e.getHeight(),h=f+2*d,i=g+2*d,j=Math.max(b,h),k=Math.max(c,i),l=Math.min(Math.floor(j/h),Math.floor(k/i)),m=Math.floor((j-f*l)/2),n=Math.floor((k-g*l)/2),o=new kZ(j,k),p=0,q=n;p<g;p++,q+=l)for(var r=0,s=m;r<f;r++,s+=l)1===e.get(r,p)&&o.setRegion(s,q,l,l);return o},a.QUIET_ZONE_SIZE=4,a}();(function(){}).prototype.encode=function(a,b,c,d,e){var f;if(b===lf.QR_CODE)f=new oN;else throw new kB("No encoder available for format "+b);return f.encode(a,b,c,d,e)};var oO=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();!function(a){function b(b,c,d,e,f,g,h,i){var j=a.call(this,g,h)||this;if(j.yuvData=b,j.dataWidth=c,j.dataHeight=d,j.left=e,j.top=f,e+g>c||f+h>d)throw new kB("Crop rectangle does not fit within image data.");return i&&j.reverseHorizontal(g,h),j}oO(b,a),b.prototype.getRow=function(a,b){if(a<0||a>=this.getHeight())throw new kB("Requested row is outside the image: "+a);var c=this.getWidth();(null==b||b.length<c)&&(b=new Uint8ClampedArray(c));var d=(a+this.top)*this.dataWidth+this.left;return kG.arraycopy(this.yuvData,d,b,0,c),b},b.prototype.getMatrix=function(){var a=this.getWidth(),b=this.getHeight();if(a===this.dataWidth&&b===this.dataHeight)return this.yuvData;var c=a*b,d=new Uint8ClampedArray(c),e=this.top*this.dataWidth+this.left;if(a===this.dataWidth)return kG.arraycopy(this.yuvData,e,d,0,c),d;for(var f=0;f<b;f++){var g=f*a;kG.arraycopy(this.yuvData,e,d,g,a),e+=this.dataWidth}return d},b.prototype.isCropSupported=function(){return!0},b.prototype.crop=function(a,c,d,e){return new b(this.yuvData,this.dataWidth,this.dataHeight,this.left+a,this.top+c,d,e,!1)},b.prototype.renderThumbnail=function(){for(var a=this.getWidth()/b.THUMBNAIL_SCALE_FACTOR,c=this.getHeight()/b.THUMBNAIL_SCALE_FACTOR,d=new Int32Array(a*c),e=this.yuvData,f=this.top*this.dataWidth+this.left,g=0;g<c;g++){for(var h=g*a,i=0;i<a;i++){var j=255&e[f+i*b.THUMBNAIL_SCALE_FACTOR];d[h+i]=0xff000000|65793*j}f+=this.dataWidth*b.THUMBNAIL_SCALE_FACTOR}return d},b.prototype.getThumbnailWidth=function(){return this.getWidth()/b.THUMBNAIL_SCALE_FACTOR},b.prototype.getThumbnailHeight=function(){return this.getHeight()/b.THUMBNAIL_SCALE_FACTOR},b.prototype.reverseHorizontal=function(a,b){for(var c=this.yuvData,d=0,e=this.top*this.dataWidth+this.left;d<b;d++,e+=this.dataWidth)for(var f=e+a/2,g=e,h=e+a-1;g<f;g++,h--){var i=c[g];c[g]=c[h],c[h]=i}},b.prototype.invert=function(){return new k6(this)},b.THUMBNAIL_SCALE_FACTOR=2}(k4);var oP=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();!function(a){function b(b,c,d,e,f,g,h){var i=a.call(this,c,d)||this;if(i.dataWidth=e,i.dataHeight=f,i.left=g,i.top=h,4===b.BYTES_PER_ELEMENT){for(var j=c*d,k=new Uint8ClampedArray(j),l=0;l<j;l++){var m=b[l],n=m>>16&255,o=m>>7&510,p=255&m;k[l]=(n+o+p)/4&255}i.luminances=k}else i.luminances=b;if(void 0===e&&(i.dataWidth=c),void 0===f&&(i.dataHeight=d),void 0===g&&(i.left=0),void 0===h&&(i.top=0),i.left+c>i.dataWidth||i.top+d>i.dataHeight)throw new kB("Crop rectangle does not fit within image data.");return i}oP(b,a),b.prototype.getRow=function(a,b){if(a<0||a>=this.getHeight())throw new kB("Requested row is outside the image: "+a);var c=this.getWidth();(null==b||b.length<c)&&(b=new Uint8ClampedArray(c));var d=(a+this.top)*this.dataWidth+this.left;return kG.arraycopy(this.luminances,d,b,0,c),b},b.prototype.getMatrix=function(){var a=this.getWidth(),b=this.getHeight();if(a===this.dataWidth&&b===this.dataHeight)return this.luminances;var c=a*b,d=new Uint8ClampedArray(c),e=this.top*this.dataWidth+this.left;if(a===this.dataWidth)return kG.arraycopy(this.luminances,e,d,0,c),d;for(var f=0;f<b;f++){var g=f*a;kG.arraycopy(this.luminances,e,d,g,a),e+=this.dataWidth}return d},b.prototype.isCropSupported=function(){return!0},b.prototype.crop=function(a,c,d,e){return new b(this.luminances,d,e,this.dataWidth,this.dataHeight,this.left+a,this.top+c)},b.prototype.invert=function(){return new k6(this)}}(k4);var oQ=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),oR=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return oQ(b,a),b.forName=function(a){return this.getCharacterSetECIByName(a)},b}(kT),oS=function(){function a(){}return a.ISO_8859_1=kT.ISO8859_1,a}(),oT=function(){function a(a,b,c){this.codewords=a,this.numcols=b,this.numrows=c,this.bits=new Uint8Array(b*c),kM.fill(this.bits,2)}return a.prototype.getNumrows=function(){return this.numrows},a.prototype.getNumcols=function(){return this.numcols},a.prototype.getBits=function(){return this.bits},a.prototype.getBit=function(a,b){return 1===this.bits[b*this.numcols+a]},a.prototype.setBit=function(a,b,c){this.bits[b*this.numcols+a]=+!!c},a.prototype.noBit=function(a,b){return 2===this.bits[b*this.numcols+a]},a.prototype.place=function(){var a=0,b=4,c=0;do{b===this.numrows&&0===c&&this.corner1(a++),b===this.numrows-2&&0===c&&this.numcols%4!=0&&this.corner2(a++),b===this.numrows-2&&0===c&&this.numcols%8==4&&this.corner3(a++),b===this.numrows+4&&2===c&&this.numcols%8==0&&this.corner4(a++);do b<this.numrows&&c>=0&&this.noBit(c,b)&&this.utah(b,c,a++),b-=2,c+=2;while(b>=0&&c<this.numcols);b++,c+=3;do b>=0&&c<this.numcols&&this.noBit(c,b)&&this.utah(b,c,a++),b+=2,c-=2;while(b<this.numrows&&c>=0);b+=3,c++}while(b<this.numrows||c<this.numcols);this.noBit(this.numcols-1,this.numrows-1)&&(this.setBit(this.numcols-1,this.numrows-1,!0),this.setBit(this.numcols-2,this.numrows-2,!0))},a.prototype.module=function(a,b,c,d){a<0&&(a+=this.numrows,b+=4-(this.numrows+4)%8),b<0&&(b+=this.numcols,a+=4-(this.numcols+4)%8);var e=this.codewords.charCodeAt(c);e&=1<<8-d,this.setBit(b,a,0!==e)},a.prototype.utah=function(a,b,c){this.module(a-2,b-2,c,1),this.module(a-2,b-1,c,2),this.module(a-1,b-2,c,3),this.module(a-1,b-1,c,4),this.module(a-1,b,c,5),this.module(a,b-2,c,6),this.module(a,b-1,c,7),this.module(a,b,c,8)},a.prototype.corner1=function(a){this.module(this.numrows-1,0,a,1),this.module(this.numrows-1,1,a,2),this.module(this.numrows-1,2,a,3),this.module(0,this.numcols-2,a,4),this.module(0,this.numcols-1,a,5),this.module(1,this.numcols-1,a,6),this.module(2,this.numcols-1,a,7),this.module(3,this.numcols-1,a,8)},a.prototype.corner2=function(a){this.module(this.numrows-3,0,a,1),this.module(this.numrows-2,0,a,2),this.module(this.numrows-1,0,a,3),this.module(0,this.numcols-4,a,4),this.module(0,this.numcols-3,a,5),this.module(0,this.numcols-2,a,6),this.module(0,this.numcols-1,a,7),this.module(1,this.numcols-1,a,8)},a.prototype.corner3=function(a){this.module(this.numrows-3,0,a,1),this.module(this.numrows-2,0,a,2),this.module(this.numrows-1,0,a,3),this.module(0,this.numcols-2,a,4),this.module(0,this.numcols-1,a,5),this.module(1,this.numcols-1,a,6),this.module(2,this.numcols-1,a,7),this.module(3,this.numcols-1,a,8)},a.prototype.corner4=function(a){this.module(this.numrows-1,0,a,1),this.module(this.numrows-1,this.numcols-1,a,2),this.module(0,this.numcols-3,a,3),this.module(0,this.numcols-2,a,4),this.module(0,this.numcols-1,a,5),this.module(1,this.numcols-3,a,6),this.module(1,this.numcols-2,a,7),this.module(1,this.numcols-1,a,8)},a}(),oU=[5,7,10,11,12,14,18,20,24,28,36,42,48,56,62,68],oV=[[228,48,15,111,62],[23,68,144,134,240,92,254],[28,24,185,166,223,248,116,255,110,61],[175,138,205,12,194,168,39,245,60,97,120],[41,153,158,91,61,42,142,213,97,178,100,242],[156,97,192,252,95,9,157,119,138,45,18,186,83,185],[83,195,100,39,188,75,66,61,241,213,109,129,94,254,225,48,90,188],[15,195,244,9,233,71,168,2,188,160,153,145,253,79,108,82,27,174,186,172],[52,190,88,205,109,39,176,21,155,197,251,223,155,21,5,172,254,124,12,181,184,96,50,193],[211,231,43,97,71,96,103,174,37,151,170,53,75,34,249,121,17,138,110,213,141,136,120,151,233,168,93,255],[245,127,242,218,130,250,162,181,102,120,84,179,220,251,80,182,229,18,2,4,68,33,101,137,95,119,115,44,175,184,59,25,225,98,81,112],[77,193,137,31,19,38,22,153,247,105,122,2,245,133,242,8,175,95,100,9,167,105,214,111,57,121,21,1,253,57,54,101,248,202,69,50,150,177,226,5,9,5],[245,132,172,223,96,32,117,22,238,133,238,231,205,188,237,87,191,106,16,147,118,23,37,90,170,205,131,88,120,100,66,138,186,240,82,44,176,87,187,147,160,175,69,213,92,253,225,19],[175,9,223,238,12,17,220,208,100,29,175,170,230,192,215,235,150,159,36,223,38,200,132,54,228,146,218,234,117,203,29,232,144,238,22,150,201,117,62,207,164,13,137,245,127,67,247,28,155,43,203,107,233,53,143,46],[242,93,169,50,144,210,39,118,202,188,201,189,143,108,196,37,185,112,134,230,245,63,197,190,250,106,185,221,175,64,114,71,161,44,147,6,27,218,51,63,87,10,40,130,188,17,163,31,176,170,4,107,232,7,94,166,224,124,86,47,11,204],[220,228,173,89,251,149,159,56,89,33,147,244,154,36,73,127,213,136,248,180,234,197,158,177,68,122,93,213,15,160,227,236,66,139,153,185,202,167,179,25,220,232,96,210,231,136,223,239,181,241,59,52,172,25,49,232,211,189,64,54,108,153,132,63,96,103,82,186]],oW=(t=function(a,b){for(var c=1,d=0;d<255;d++)b[d]=c,a[c]=d,(c*=2)>=256&&(c^=301);return{LOG:a,ALOG:b}}([],[])).LOG,oX=t.ALOG;!function(a){a[a.FORCE_NONE=0]="FORCE_NONE",a[a.FORCE_SQUARE=1]="FORCE_SQUARE",a[a.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"}(u||(u={}));var oY="[)>\x1e05\x1d",oZ="[)>\x1e06\x1d",o$=function(){function a(){}return a.encodeECC200=function(a,b){if(a.length!==b.getDataCapacity())throw Error("The number of codewords does not match the selected symbol");var c=new kY;c.append(a);var d=b.getInterleavedBlockCount();if(1===d){var e=this.createECCBlock(a,b.getErrorCodewords());c.append(e)}else{for(var f=[],g=[],h=0;h<d;h++)f[h]=b.getDataLengthForInterleavedBlock(h+1),g[h]=b.getErrorLengthForInterleavedBlock(h+1);for(var i=0;i<d;i++){for(var j=new kY,k=i;k<b.getDataCapacity();k+=d)j.append(a.charAt(k));for(var e=this.createECCBlock(j.toString(),g[i]),l=0,m=i;m<g[i]*d;m+=d)c.setCharAt(b.getDataCapacity()+m,e.charAt(l++))}}return c.toString()},a.createECCBlock=function(a,b){for(var c=-1,d=0;d<oU.length;d++)if(oU[d]===b){c=d;break}if(c<0)throw Error("Illegal number of error correction codewords specified: "+b);for(var e=oV[c],f=[],d=0;d<b;d++)f[d]=0;for(var d=0;d<a.length;d++){for(var g=f[b-1]^a.charAt(d).charCodeAt(0),h=b-1;h>0;h--)0!==g&&0!==e[h]?f[h]=f[h-1]^oX[(oW[g]+oW[e[h]])%255]:f[h]=f[h-1];0!==g&&0!==e[0]?f[0]=oX[(oW[g]+oW[e[0]])%255]:f[0]=0}for(var i=[],d=0;d<b;d++)i[d]=f[b-d-1];return i.map(function(a){return String.fromCharCode(a)}).join("")},a}(),o_=function(){function a(){}return a.prototype.getEncodingMode=function(){return 0},a.prototype.encode=function(a){if(pd.determineConsecutiveDigitCount(a.getMessage(),a.pos)>=2)a.writeCodeword(this.encodeASCIIDigits(a.getMessage().charCodeAt(a.pos),a.getMessage().charCodeAt(a.pos+1))),a.pos+=2;else{var b=a.getCurrentChar(),c=pd.lookAheadTest(a.getMessage(),a.pos,this.getEncodingMode());if(c!==this.getEncodingMode())switch(c){case 5:a.writeCodeword(231),a.signalEncoderChange(5);return;case 1:a.writeCodeword(230),a.signalEncoderChange(1);return;case 3:a.writeCodeword(238),a.signalEncoderChange(3);break;case 2:a.writeCodeword(239),a.signalEncoderChange(2);break;case 4:a.writeCodeword(240),a.signalEncoderChange(4);break;default:throw Error("Illegal mode: "+c)}else pd.isExtendedASCII(b)?(a.writeCodeword(235),a.writeCodeword(b-128+1)):a.writeCodeword(b+1),a.pos++}},a.prototype.encodeASCIIDigits=function(a,b){if(pd.isDigit(a)&&pd.isDigit(b))return(a-48)*10+(b-48)+130;throw Error("not digits: "+a+b)},a}(),o0=function(){function a(){}return a.prototype.getEncodingMode=function(){return 5},a.prototype.encode=function(a){var b=new kY;for(b.append(0);a.hasMoreCharacters();){var c=a.getCurrentChar();if(b.append(c),a.pos++,pd.lookAheadTest(a.getMessage(),a.pos,this.getEncodingMode())!==this.getEncodingMode()){a.signalEncoderChange(0);break}}var d=b.length()-1,e=a.getCodewordCount()+d+1;a.updateSymbolInfo(e);var f=a.getSymbolInfo().getDataCapacity()-e>0;if(a.hasMoreCharacters()||f)if(d<=249)b.setCharAt(0,kX.getCharAt(d));else if(d<=1555)b.setCharAt(0,kX.getCharAt(Math.floor(d/250)+249)),b.insert(1,kX.getCharAt(d%250));else throw Error("Message length not in valid ranges: "+d);for(var g=0,c=b.length();g<c;g++)a.writeCodeword(this.randomize255State(b.charAt(g).charCodeAt(0),a.getCodewordCount()+1))},a.prototype.randomize255State=function(a,b){var c=a+(149*b%255+1);return c<=255?c:c-256},a}(),o1=function(){function a(){}return a.prototype.getEncodingMode=function(){return 1},a.prototype.encodeMaximal=function(a){for(var b=new kY,c=0,d=a.pos,e=0;a.hasMoreCharacters();){var f=a.getCurrentChar();a.pos++,c=this.encodeChar(f,b),b.length()%3==0&&(d=a.pos,e=b.length())}if(e!==b.length()){var g=Math.floor(b.length()/3*2),h=Math.floor(a.getCodewordCount()+g+1);a.updateSymbolInfo(h);var i=a.getSymbolInfo().getDataCapacity()-h,j=Math.floor(b.length()%3);(2===j&&2!==i||1===j&&(c>3||1!==i))&&(a.pos=d)}b.length()>0&&a.writeCodeword(230),this.handleEOD(a,b)},a.prototype.encode=function(a){for(var b=new kY;a.hasMoreCharacters();){var c=a.getCurrentChar();a.pos++;var d=this.encodeChar(c,b),e=2*Math.floor(b.length()/3),f=a.getCodewordCount()+e;a.updateSymbolInfo(f);var g=a.getSymbolInfo().getDataCapacity()-f;if(!a.hasMoreCharacters()){var h=new kY;for(b.length()%3==2&&2!==g&&(d=this.backtrackOneCharacter(a,b,h,d));b.length()%3==1&&(d>3||1!==g);)d=this.backtrackOneCharacter(a,b,h,d);break}if(b.length()%3==0&&pd.lookAheadTest(a.getMessage(),a.pos,this.getEncodingMode())!==this.getEncodingMode()){a.signalEncoderChange(0);break}}this.handleEOD(a,b)},a.prototype.backtrackOneCharacter=function(a,b,c,d){var e=b.length(),f=b.toString().substring(0,e-d);b.setLengthToZero(),b.append(f),a.pos--;var g=a.getCurrentChar();return d=this.encodeChar(g,c),a.resetSymbolInfo(),d},a.prototype.writeNextTriplet=function(a,b){a.writeCodewords(this.encodeToCodewords(b.toString()));var c=b.toString().substring(3);b.setLengthToZero(),b.append(c)},a.prototype.handleEOD=function(a,b){var c=Math.floor(b.length()/3*2),d=b.length()%3,e=a.getCodewordCount()+c;a.updateSymbolInfo(e);var f=a.getSymbolInfo().getDataCapacity()-e;if(2===d){for(b.append("\0");b.length()>=3;)this.writeNextTriplet(a,b);a.hasMoreCharacters()&&a.writeCodeword(254)}else if(1===f&&1===d){for(;b.length()>=3;)this.writeNextTriplet(a,b);a.hasMoreCharacters()&&a.writeCodeword(254),a.pos--}else if(0===d){for(;b.length()>=3;)this.writeNextTriplet(a,b);(f>0||a.hasMoreCharacters())&&a.writeCodeword(254)}else throw Error("Unexpected case. Please report!");a.signalEncoderChange(0)},a.prototype.encodeChar=function(a,b){return 32===a?(b.append(3),1):a>=48&&a<=57?(b.append(a-48+4),1):a>=65&&a<=90?(b.append(a-65+14),1):a<32?(b.append(0),b.append(a),2):a<=47?(b.append(1),b.append(a-33),2):a<=64?(b.append(1),b.append(a-58+15),2):a<=95?(b.append(1),b.append(a-91+22),2):a<=127?(b.append(2),b.append(a-96),2):(b.append("1\x1e"),2+this.encodeChar(a-128,b))},a.prototype.encodeToCodewords=function(a){var b=1600*a.charCodeAt(0)+40*a.charCodeAt(1)+a.charCodeAt(2)+1,c=new kY;return c.append(b/256),c.append(b%256),c.toString()},a}(),o2=function(){function a(){}return a.prototype.getEncodingMode=function(){return 4},a.prototype.encode=function(a){for(var b=new kY;a.hasMoreCharacters();){var c=a.getCurrentChar();if(this.encodeChar(c,b),a.pos++,b.length()>=4){a.writeCodewords(this.encodeToCodewords(b.toString()));var d=b.toString().substring(4);if(b.setLengthToZero(),b.append(d),pd.lookAheadTest(a.getMessage(),a.pos,this.getEncodingMode())!==this.getEncodingMode()){a.signalEncoderChange(0);break}}}b.append(kX.getCharAt(31)),this.handleEOD(a,b)},a.prototype.handleEOD=function(a,b){try{var c=b.length();if(0===c)return;if(1===c){a.updateSymbolInfo();var d=a.getSymbolInfo().getDataCapacity()-a.getCodewordCount(),e=a.getRemainingCharacters();if(e>d&&(a.updateSymbolInfo(a.getCodewordCount()+1),d=a.getSymbolInfo().getDataCapacity()-a.getCodewordCount()),e<=d&&d<=2)return}if(c>4)throw Error("Count must not exceed 4");var f=c-1,g=this.encodeToCodewords(b.toString()),h=!a.hasMoreCharacters()&&f<=2;if(f<=2){a.updateSymbolInfo(a.getCodewordCount()+f);var d=a.getSymbolInfo().getDataCapacity()-a.getCodewordCount();d>=3&&(h=!1,a.updateSymbolInfo(a.getCodewordCount()+g.length))}h?(a.resetSymbolInfo(),a.pos-=f):a.writeCodewords(g)}finally{a.signalEncoderChange(0)}},a.prototype.encodeChar=function(a,b){a>=32&&a<=63?b.append(a):a>=64&&a<=94?b.append(kX.getCharAt(a-64)):pd.illegalCharacter(kX.getCharAt(a))},a.prototype.encodeToCodewords=function(a){var b=a.length;if(0===b)throw Error("StringBuilder must not be empty");var c=(a.charAt(0).charCodeAt(0)<<18)+((b>=2?a.charAt(1).charCodeAt(0):0)<<12)+((b>=3?a.charAt(2).charCodeAt(0):0)<<6)+(b>=4?a.charAt(3).charCodeAt(0):0),d=new kY;return d.append(c>>16&255),b>=2&&d.append(c>>8&255),b>=3&&d.append(255&c),d.toString()},a}(),o3=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),o4=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},o5=function(){function a(a,b,c,d,e,f,g,h){void 0===g&&(g=0),void 0===h&&(h=0),this.rectangular=a,this.dataCapacity=b,this.errorCodewords=c,this.matrixWidth=d,this.matrixHeight=e,this.dataRegions=f,this.rsBlockData=g,this.rsBlockError=h}return a.lookup=function(a,b,c,d,e){var f,g;void 0===b&&(b=0),void 0===c&&(c=null),void 0===d&&(d=null),void 0===e&&(e=!0);try{for(var h=o4(o7),i=h.next();!i.done;i=h.next()){var j=i.value;if(!(1===b&&j.rectangular||2===b&&!j.rectangular||null!=c&&(j.getSymbolWidth()<c.getWidth()||j.getSymbolHeight()<c.getHeight()))&&!(null!=d&&(j.getSymbolWidth()>d.getWidth()||j.getSymbolHeight()>d.getHeight()))&&a<=j.dataCapacity)return j}}catch(a){f={error:a}}finally{try{i&&!i.done&&(g=h.return)&&g.call(h)}finally{if(f)throw f.error}}if(e)throw Error("Can't find a symbol arrangement that matches the message. Data codewords: "+a);return null},a.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw Error("Cannot handle this number of data regions")}},a.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw Error("Cannot handle this number of data regions")}},a.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},a.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},a.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+2*this.getHorizontalDataRegions()},a.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+2*this.getVerticalDataRegions()},a.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},a.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},a.prototype.getDataCapacity=function(){return this.dataCapacity},a.prototype.getErrorCodewords=function(){return this.errorCodewords},a.prototype.getDataLengthForInterleavedBlock=function(a){return this.rsBlockData},a.prototype.getErrorLengthForInterleavedBlock=function(a){return this.rsBlockError},a}(),o6=function(a){function b(){return a.call(this,!1,1558,620,22,22,36,-1,62)||this}return o3(b,a),b.prototype.getInterleavedBlockCount=function(){return 10},b.prototype.getDataLengthForInterleavedBlock=function(a){return a<=8?156:155},b}(o5),o7=[new o5(!1,3,5,8,8,1),new o5(!1,5,7,10,10,1),new o5(!0,5,7,16,6,1),new o5(!1,8,10,12,12,1),new o5(!0,10,11,14,6,2),new o5(!1,12,12,14,14,1),new o5(!0,16,14,24,10,1),new o5(!1,18,14,16,16,1),new o5(!1,22,18,18,18,1),new o5(!0,22,18,16,10,2),new o5(!1,30,20,20,20,1),new o5(!0,32,24,16,14,2),new o5(!1,36,24,22,22,1),new o5(!1,44,28,24,24,1),new o5(!0,49,28,22,14,2),new o5(!1,62,36,14,14,4),new o5(!1,86,42,16,16,4),new o5(!1,114,48,18,18,4),new o5(!1,144,56,20,20,4),new o5(!1,174,68,22,22,4),new o5(!1,204,84,24,24,4,102,42),new o5(!1,280,112,14,14,16,140,56),new o5(!1,368,144,16,16,16,92,36),new o5(!1,456,192,18,18,16,114,48),new o5(!1,576,224,20,20,16,144,56),new o5(!1,696,272,22,22,16,174,68),new o5(!1,816,336,24,24,16,136,56),new o5(!1,1050,408,18,18,36,175,68),new o5(!1,1304,496,20,20,36,163,62),new o6],o8=function(){function a(a){this.msg=a,this.pos=0,this.skipAtEnd=0;for(var b=a.split("").map(function(a){return a.charCodeAt(0)}),c=new kY,d=0,e=b.length;d<e;d++){var f=String.fromCharCode(255&b[d]);if("?"===f&&"?"!==a.charAt(d))throw Error("Message contains characters outside ISO-8859-1 encoding.");c.append(f)}this.msg=c.toString(),this.shape=0,this.codewords=new kY,this.newEncoding=-1}return a.prototype.setSymbolShape=function(a){this.shape=a},a.prototype.setSizeConstraints=function(a,b){this.minSize=a,this.maxSize=b},a.prototype.getMessage=function(){return this.msg},a.prototype.setSkipAtEnd=function(a){this.skipAtEnd=a},a.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},a.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},a.prototype.getCodewords=function(){return this.codewords},a.prototype.writeCodewords=function(a){this.codewords.append(a)},a.prototype.writeCodeword=function(a){this.codewords.append(a)},a.prototype.getCodewordCount=function(){return this.codewords.length()},a.prototype.getNewEncoding=function(){return this.newEncoding},a.prototype.signalEncoderChange=function(a){this.newEncoding=a},a.prototype.resetEncoderSignal=function(){this.newEncoding=-1},a.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},a.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},a.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},a.prototype.getSymbolInfo=function(){return this.symbolInfo},a.prototype.updateSymbolInfo=function(a){void 0===a&&(a=this.getCodewordCount()),(null==this.symbolInfo||a>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=o5.lookup(a,this.shape,this.minSize,this.maxSize,!0))},a.prototype.resetSymbolInfo=function(){this.symbolInfo=null},a}(),o9=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),pa=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return o9(b,a),b.prototype.getEncodingMode=function(){return 3},b.prototype.encode=function(a){for(var b=new kY;a.hasMoreCharacters();){var c=a.getCurrentChar();if(a.pos++,this.encodeChar(c,b),b.length()%3==0&&(this.writeNextTriplet(a,b),pd.lookAheadTest(a.getMessage(),a.pos,this.getEncodingMode())!==this.getEncodingMode())){a.signalEncoderChange(0);break}}this.handleEOD(a,b)},b.prototype.encodeChar=function(a,b){switch(a){case 13:b.append(0);break;case 42:b.append(1);break;case 62:b.append(2);break;case 32:b.append(3);break;default:a>=48&&a<=57?b.append(a-48+4):a>=65&&a<=90?b.append(a-65+14):pd.illegalCharacter(kX.getCharAt(a))}return 1},b.prototype.handleEOD=function(a,b){a.updateSymbolInfo();var c=a.getSymbolInfo().getDataCapacity()-a.getCodewordCount(),d=b.length();a.pos-=d,(a.getRemainingCharacters()>1||c>1||a.getRemainingCharacters()!==c)&&a.writeCodeword(254),0>a.getNewEncoding()&&a.signalEncoderChange(0)},b}(o1),pb=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),pc=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return pb(b,a),b.prototype.getEncodingMode=function(){return 2},b.prototype.encodeChar=function(a,b){return 32===a?(b.append(3),1):a>=48&&a<=57?(b.append(a-48+4),1):a>=97&&a<=122?(b.append(a-97+14),1):a<32?(b.append(0),b.append(a),2):a<=47?(b.append(1),b.append(a-33),2):a<=64?(b.append(1),b.append(a-58+15),2):a>=91&&a<=95?(b.append(1),b.append(a-91+22),2):96===a?(b.append(2),b.append(0),2):a<=90?(b.append(2),b.append(a-65+1),2):a<=127?(b.append(2),b.append(a-123+27),2):(b.append("1\x1e"),2+this.encodeChar(a-128,b))},b}(o1);let pd=function(){function a(){}return a.randomize253State=function(a){var b=129+(149*a%253+1);return b<=254?b:b-254},a.encodeHighLevel=function(a,b,c,d,e){void 0===b&&(b=0),void 0===c&&(c=null),void 0===d&&(d=null),void 0===e&&(e=!1);var f=new o1,g=[new o_,f,new pc,new pa,new o2,new o0],h=new o8(a);h.setSymbolShape(b),h.setSizeConstraints(c,d),a.startsWith(oY)&&a.endsWith("\x1e\x04")?(h.writeCodeword(236),h.setSkipAtEnd(2),h.pos+=oY.length):a.startsWith(oZ)&&a.endsWith("\x1e\x04")&&(h.writeCodeword(237),h.setSkipAtEnd(2),h.pos+=oZ.length);var i=0;for(e&&(f.encodeMaximal(h),i=h.getNewEncoding(),h.resetEncoderSignal());h.hasMoreCharacters();)g[i].encode(h),h.getNewEncoding()>=0&&(i=h.getNewEncoding(),h.resetEncoderSignal());var j=h.getCodewordCount();h.updateSymbolInfo();var k=h.getSymbolInfo().getDataCapacity();j<k&&0!==i&&5!==i&&4!==i&&h.writeCodeword("\xfe");var l=h.getCodewords();for(l.length()<k&&l.append(129);l.length()<k;)l.append(this.randomize253State(l.length()+1));return h.getCodewords().toString()},a.lookAheadTest=function(a,b,c){var d=this.lookAheadTestIntern(a,b,c);if(3===c&&3===d){for(var e=Math.min(b+3,a.length),f=b;f<e;f++)if(!this.isNativeX12(a.charCodeAt(f)))return 0}else if(4===c&&4===d){for(var e=Math.min(b+4,a.length),f=b;f<e;f++)if(!this.isNativeEDIFACT(a.charCodeAt(f)))return 0}return d},a.lookAheadTestIntern=function(a,b,c){if(b>=a.length)return c;0===c?d=[0,1,1,1,1,1.25]:(d=[1,2,2,2,2,2.25])[c]=0;for(var d,e=0,f=new Uint8Array(6),g=[];;){if(b+e===a.length){kM.fill(f,0),kM.fill(g,0);var h=this.findMinimums(d,g,kN.MAX_VALUE,f),i=this.getMinimumCount(f);if(g[0]===h)return 0;if(1===i){if(f[5]>0)return 5;if(f[4]>0)return 4;if(f[2]>0)return 2;if(f[3]>0)return 3}return 1}var j=a.charCodeAt(b+e);if(e++,this.isDigit(j)?d[0]+=.5:this.isExtendedASCII(j)?(d[0]=Math.ceil(d[0]),d[0]+=2):(d[0]=Math.ceil(d[0]),d[0]++),this.isNativeC40(j)?d[1]+=2/3:this.isExtendedASCII(j)?d[1]+=8/3:d[1]+=4/3,this.isNativeText(j)?d[2]+=2/3:this.isExtendedASCII(j)?d[2]+=8/3:d[2]+=4/3,this.isNativeX12(j)?d[3]+=2/3:this.isExtendedASCII(j)?d[3]+=13/3:d[3]+=10/3,this.isNativeEDIFACT(j)?d[4]+=.75:this.isExtendedASCII(j)?d[4]+=4.25:d[4]+=3.25,this.isSpecialB256(j)?d[5]+=4:d[5]++,e>=4){if(kM.fill(f,0),kM.fill(g,0),this.findMinimums(d,g,kN.MAX_VALUE,f),g[0]<this.min(g[5],g[1],g[2],g[3],g[4]))return 0;if(g[5]<g[0]||g[5]+1<this.min(g[1],g[2],g[3],g[4]))return 5;if(g[4]+1<this.min(g[5],g[1],g[2],g[3],g[0]))return 4;if(g[2]+1<this.min(g[5],g[1],g[4],g[3],g[0]))return 2;if(g[3]+1<this.min(g[5],g[1],g[4],g[2],g[0]))return 3;if(g[1]+1<this.min(g[0],g[5],g[4],g[2])){if(g[1]<g[3])return 1;if(g[1]===g[3]){for(var k=b+e+1;k<a.length;){var l=a.charCodeAt(k);if(this.isX12TermSep(l))return 3;if(!this.isNativeX12(l))break;k++}return 1}}}}},a.min=function(a,b,c,d,e){var f=Math.min(a,Math.min(b,Math.min(c,d)));return void 0===e?f:Math.min(f,e)},a.findMinimums=function(a,b,c,d){for(var e=0;e<6;e++){var f=b[e]=Math.ceil(a[e]);c>f&&(c=f,kM.fill(d,0)),c===f&&(d[e]=d[e]+1)}return c},a.getMinimumCount=function(a){for(var b=0,c=0;c<6;c++)b+=a[c];return b||0},a.isDigit=function(a){return a>=48&&a<=57},a.isExtendedASCII=function(a){return a>=128&&a<=255},a.isNativeC40=function(a){return 32===a||a>=48&&a<=57||a>=65&&a<=90},a.isNativeText=function(a){return 32===a||a>=48&&a<=57||a>=97&&a<=122},a.isNativeX12=function(a){return this.isX12TermSep(a)||32===a||a>=48&&a<=57||a>=65&&a<=90},a.isX12TermSep=function(a){return 13===a||42===a||62===a},a.isNativeEDIFACT=function(a){return a>=32&&a<=94},a.isSpecialB256=function(a){return!1},a.determineConsecutiveDigitCount=function(a,b){void 0===b&&(b=0);for(var c=a.length,d=b;d<c&&this.isDigit(a.charCodeAt(d));)d++;return d-b},a.illegalCharacter=function(a){var b=kN.toHexString(a.charCodeAt(0));throw Error("Illegal character: "+a+" (0x"+(b="0000".substring(0,4-b.length)+b)+")")},a}();var pe=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},pf=function(){function a(a){this.charset=a,this.name=a.name}return a.prototype.canEncode=function(a){try{return null!=kW.encode(a,this.charset)}catch(a){return!1}},a}(),pg=function(){function a(a,b,c){this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(a){return new pf(oR.forName(a))}),this.encoders=[];var d,e,f,g,h,i,j=[];j.push(new pf(oS.ISO_8859_1));for(var k=null!=b&&b.name.startsWith("UTF"),l=0;l<a.length;l++){var m=!1;try{for(var n=(d=void 0,pe(j)),o=n.next();!o.done;o=n.next()){var p=o.value,q=a.charAt(l);if(q.charCodeAt(0)===c||p.canEncode(q)){m=!0;break}}}catch(a){d={error:a}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(d)throw d.error}}if(!m)try{for(var r=(f=void 0,pe(this.ENCODERS)),s=r.next();!s.done;s=r.next()){var p=s.value;if(p.canEncode(a.charAt(l))){j.push(p),m=!0;break}}}catch(a){f={error:a}}finally{try{s&&!s.done&&(g=r.return)&&g.call(r)}finally{if(f)throw f.error}}m||(k=!0)}if(1!==j.length||k){this.encoders=[];var t=0;try{for(var u=pe(j),v=u.next();!v.done;v=u.next()){var p=v.value;this.encoders[t++]=p}}catch(a){h={error:a}}finally{try{v&&!v.done&&(i=u.return)&&i.call(u)}finally{if(h)throw h.error}}}else this.encoders=[j[0]];var w=-1;if(null!=b){for(var l=0;l<this.encoders.length;l++)if(null!=this.encoders[l]&&b.name===this.encoders[l].name){w=l;break}}this.priorityEncoderIndex=w}return a.prototype.length=function(){return this.encoders.length},a.prototype.getCharsetName=function(a){if(!(a<this.length()))throw Error("index must be less than length");return this.encoders[a].name},a.prototype.getCharset=function(a){if(!(a<this.length()))throw Error("index must be less than length");return this.encoders[a].charset},a.prototype.getECIValue=function(a){return this.encoders[a].charset.getValueIdentifier()},a.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},a.prototype.canEncode=function(a,b){if(!(b<this.length()))throw Error("index must be less than length");return!0},a.prototype.encode=function(a,b){if(!(b<this.length()))throw Error("index must be less than length");return kW.encode(kX.getCharAt(a),this.encoders[b].name)},a}(),ph=function(){function a(a,b,c){this.fnc1=c;var d=new pg(a,b,c);if(1===d.length())for(var e=0;e<this.bytes.length;e++){var f=a.charAt(e).charCodeAt(0);this.bytes[e]=f===c?1e3:f}else this.bytes=this.encodeMinimally(a,d,c)}return a.prototype.getFNC1Character=function(){return this.fnc1},a.prototype.length=function(){return this.bytes.length},a.prototype.haveNCharacters=function(a,b){if(a+b-1>=this.bytes.length)return!1;for(var c=0;c<b;c++)if(this.isECI(a+c))return!1;return!0},a.prototype.charAt=function(a){if(a<0||a>=this.length())throw Error(""+a);if(this.isECI(a))throw Error("value at "+a+" is not a character but an ECI");return this.isFNC1(a)?this.fnc1:this.bytes[a]},a.prototype.subSequence=function(a,b){if(a<0||a>b||b>this.length())throw Error(""+a);for(var c=new kY,d=a;d<b;d++){if(this.isECI(d))throw Error("value at "+d+" is not a character but an ECI");c.append(this.charAt(d))}return c.toString()},a.prototype.isECI=function(a){if(a<0||a>=this.length())throw Error(""+a);return this.bytes[a]>255&&this.bytes[a]<=999},a.prototype.isFNC1=function(a){if(a<0||a>=this.length())throw Error(""+a);return 1e3===this.bytes[a]},a.prototype.getECIValue=function(a){if(a<0||a>=this.length())throw Error(""+a);if(!this.isECI(a))throw Error("value at "+a+" is not an ECI but a character");return this.bytes[a]-256},a.prototype.addEdge=function(a,b,c){(null==a[b][c.encoderIndex]||a[b][c.encoderIndex].cachedTotalSize>c.cachedTotalSize)&&(a[b][c.encoderIndex]=c)},a.prototype.addEdges=function(a,b,c,d,e,f){var g=a.charAt(d).charCodeAt(0),h=0,i=b.length();b.getPriorityEncoderIndex()>=0&&(g===f||b.canEncode(g,b.getPriorityEncoderIndex()))&&(i=(h=b.getPriorityEncoderIndex())+1);for(var j=h;j<i;j++)(g===f||b.canEncode(g,j))&&this.addEdge(c,d+1,new pi(g,b,j,e,f))},a.prototype.encodeMinimally=function(a,b,c){var d=a.length,e=new pi[d+1][b.length()];this.addEdges(a,b,e,0,null,c);for(var f=1;f<=d;f++){for(var g=0;g<b.length();g++)null!=e[f][g]&&f<d&&this.addEdges(a,b,e,f,e[f][g],c);for(var g=0;g<b.length();g++)e[f-1][g]=null}for(var h=-1,i=kN.MAX_VALUE,g=0;g<b.length();g++)if(null!=e[d][g]){var j=e[d][g];j.cachedTotalSize<i&&(i=j.cachedTotalSize,h=g)}if(h<0)throw Error('Failed to encode "'+a+'"');for(var k=[],l=e[d][h];null!=l;){if(l.isFNC1())k.unshift(1e3);else for(var m=b.encode(l.c,l.encoderIndex),f=m.length-1;f>=0;f--)k.unshift(255&m[f]);(null===l.previous?0:l.previous.encoderIndex)!==l.encoderIndex&&k.unshift(256+b.getECIValue(l.encoderIndex)),l=l.previous}for(var n=[],f=0;f<n.length;f++)n[f]=k[f];return n},a}(),pi=function(){function a(a,b,c,d,e){this.c=a,this.encoderSet=b,this.encoderIndex=c,this.previous=d,this.fnc1=e,this.c=a===e?1e3:a;var f=this.isFNC1()?1:b.encode(a,c).length;(null===d?0:d.encoderIndex)!==c&&(f+=3),null!=d&&(f+=d.cachedTotalSize),this.cachedTotalSize=f}return a.prototype.isFNC1=function(){return 1e3===this.c},a}(),pj=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),pk=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},pl=function(a,b){var c="function"==typeof Symbol&&a[Symbol.iterator];if(!c)return a;var d,e,f=c.call(a),g=[];try{for(;(void 0===b||b-- >0)&&!(d=f.next()).done;)g.push(d.value)}catch(a){e={error:a}}finally{try{d&&!d.done&&(c=f.return)&&c.call(f)}finally{if(e)throw e.error}}return g},pm=function(){for(var a=[],b=0;b<arguments.length;b++)a=a.concat(pl(arguments[b]));return a};!function(a){a[a.ASCII=0]="ASCII",a[a.C40=1]="C40",a[a.TEXT=2]="TEXT",a[a.X12=3]="X12",a[a.EDF=4]="EDF",a[a.B256=5]="B256"}(v||(v={}));var pn=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],po=function(){function a(){}return a.isExtendedASCII=function(a,b){return a!==b&&a>=128&&a<=255},a.isInC40Shift1Set=function(a){return a<=31},a.isInC40Shift2Set=function(a,b){var c,d;try{for(var e=pk(pn),f=e.next();!f.done;f=e.next())if(f.value.charCodeAt(0)===a)return!0}catch(a){c={error:a}}finally{try{f&&!f.done&&(d=e.return)&&d.call(e)}finally{if(c)throw c.error}}return a===b},a.isInTextShift1Set=function(a){return this.isInC40Shift1Set(a)},a.isInTextShift2Set=function(a,b){return this.isInC40Shift2Set(a,b)},a.encodeHighLevel=function(a,b,c,d){void 0===b&&(b=null),void 0===c&&(c=-1),void 0===d&&(d=0);var e=0;return a.startsWith(oY)&&a.endsWith("\x1e\x04")?(e=5,a=a.substring(oY.length,a.length-2)):a.startsWith(oZ)&&a.endsWith("\x1e\x04")&&(e=6,a=a.substring(oZ.length,a.length-2)),decodeURIComponent(escape(String.fromCharCode.apply(String,pm(this.encode(a,b,c,d,e)))))},a.encode=function(a,b,c,d,e){return this.encodeMinimally(new pr(a,b,c,d,e)).getBytes()},a.addEdge=function(a,b){var c=b.fromPosition+b.characterLength;(null===a[c][b.getEndMode()]||a[c][b.getEndMode()].cachedTotalSize>b.cachedTotalSize)&&(a[c][b.getEndMode()]=b)},a.getNumberOfC40Words=function(b,c,d,e){for(var f=0,g=c;g<b.length()&&!b.isECI(g);g++){;var h=b.charAt(g);if(d&&pd.isNativeC40(h)||!d&&pd.isNativeText(h))f++;else if(a.isExtendedASCII(h,b.getFNC1Character())){var i=255&h;i>=128&&(d&&pd.isNativeC40(i-128)||!d&&pd.isNativeText(i-128))?f+=3:f+=4}else f+=2;if(f%3==0||(f-2)%3==0&&g+1===b.length())return e[0]=g-c+1,Math.ceil(f/3)}return e[0]=0,0},a.addEdges=function(b,c,d,e){if(b.isECI(d))return void this.addEdge(c,new pq(b,v.ASCII,d,1,e));var f,g,h,i=b.charAt(d);if(null===e||e.getEndMode()!==v.EDF){pd.isDigit(i)&&b.haveNCharacters(d,2)&&pd.isDigit(b.charAt(d+1))?this.addEdge(c,new pq(b,v.ASCII,d,2,e)):this.addEdge(c,new pq(b,v.ASCII,d,1,e));var j=[v.C40,v.TEXT];try{for(var k=pk(j),l=k.next();!l.done;l=k.next()){var m=l.value,n=[];a.getNumberOfC40Words(b,d,m===v.C40,n)>0&&this.addEdge(c,new pq(b,m,d,n[0],e))}}catch(a){f={error:a}}finally{try{l&&!l.done&&(g=k.return)&&g.call(k)}finally{if(f)throw f.error}}b.haveNCharacters(d,3)&&pd.isNativeX12(b.charAt(d))&&pd.isNativeX12(b.charAt(d+1))&&pd.isNativeX12(b.charAt(d+2))&&this.addEdge(c,new pq(b,v.X12,d,3,e)),this.addEdge(c,new pq(b,v.B256,d,1,e))}for(h=0;h<3;h++){var o=d+h;if(b.haveNCharacters(o,1)&&pd.isNativeEDIFACT(b.charAt(o)))this.addEdge(c,new pq(b,v.EDF,d,h+1,e));else break}3===h&&b.haveNCharacters(d,4)&&pd.isNativeEDIFACT(b.charAt(d+3))&&this.addEdge(c,new pq(b,v.EDF,d,4,e))},a.encodeMinimally=function(a){var b=a.length(),c=Array(b+1).fill(null).map(function(){return Array(6).fill(0)});this.addEdges(a,c,0,null);for(var d=1;d<=b;d++){for(var e=0;e<6;e++)null!==c[d][e]&&d<b&&this.addEdges(a,c,d,c[d][e]);for(var e=0;e<6;e++)c[d-1][e]=null}for(var f=-1,g=kN.MAX_VALUE,e=0;e<6;e++)if(null!==c[b][e]){var h=c[b][e],i=e>=1&&e<=3?h.cachedTotalSize+1:h.cachedTotalSize;i<g&&(g=i,f=e)}if(f<0)throw Error('Failed to encode "'+a+'"');return new pp(c[b][f])},a}(),pp=function(){function a(a){var b=a.input,c=0,d=[],e=[],f=[];(a.mode===v.C40||a.mode===v.TEXT||a.mode===v.X12)&&a.getEndMode()!==v.ASCII&&(c+=this.prepend(pq.getBytes(254),d));for(var g=a;null!==g;)c+=this.prepend(g.getDataBytes(),d),(null===g.previous||g.getPreviousStartMode()!==g.getMode())&&(g.getMode()===v.B256&&(c<=249?(d.unshift(c),c++):(d.unshift(c%250),d.unshift(c/250+249),c+=2),e.push(d.length),f.push(c)),this.prepend(g.getLatchBytes(),d),c=0),g=g.previous;5===b.getMacroId()?c+=this.prepend(pq.getBytes(236),d):6===b.getMacroId()&&(c+=this.prepend(pq.getBytes(237),d)),b.getFNC1Character()>0&&(c+=this.prepend(pq.getBytes(232),d));for(var h=0;h<e.length;h++)this.applyRandomPattern(d,d.length-e[h],f[h]);var i=a.getMinSymbolSize(d.length);for(d.length<i&&d.push(129);d.length<i;)d.push(this.randomize253State(d.length+1));this.bytes=new Uint8Array(d.length);for(var h=0;h<this.bytes.length;h++)this.bytes[h]=d[h]}return a.prototype.prepend=function(a,b){for(var c=a.length-1;c>=0;c--)b.unshift(a[c]);return a.length},a.prototype.randomize253State=function(a){var b=129+(149*a%253+1);return b<=254?b:b-254},a.prototype.applyRandomPattern=function(a,b,c){for(var d=0;d<c;d++){var e=b+d,f=(255&a[e])+(149*(e+1)%255+1);a[e]=f<=255?f:f-256}},a.prototype.getBytes=function(){return this.bytes},a}(),pq=function(){function a(a,b,c,d,e){if(this.input=a,this.mode=b,this.fromPosition=c,this.characterLength=d,this.previous=e,this.allCodewordCapacities=[3,5,8,10,12,16,18,22,30,32,36,44,49,62,86,114,144,174,204,280,368,456,576,696,816,1050,1304,1558],this.squareCodewordCapacities=[3,5,8,12,18,22,30,36,44,62,86,114,144,174,204,280,368,456,576,696,816,1050,1304,1558],this.rectangularCodewordCapacities=[5,10,16,33,32,49],!(c+d<=a.length()))throw Error("Invalid edge");var f=null!==e?e.cachedTotalSize:0,g=this.getPreviousMode();switch(b){case v.ASCII:f++,(a.isECI(c)||po.isExtendedASCII(a.charAt(c),a.getFNC1Character()))&&f++,(g===v.C40||g===v.TEXT||g===v.X12)&&f++;break;case v.B256:f++,g!==v.B256?f++:250===this.getB256Size()&&f++,g===v.ASCII?f++:(g===v.C40||g===v.TEXT||g===v.X12)&&(f+=2);break;case v.C40:case v.TEXT:case v.X12:b===v.X12?f+=2:f+=2*po.getNumberOfC40Words(a,c,b===v.C40,[]),g===v.ASCII||g===v.B256?f++:g!==b&&(g===v.C40||g===v.TEXT||g===v.X12)&&(f+=2);break;case v.EDF:f+=3,g===v.ASCII||g===v.B256?f++:(g===v.C40||g===v.TEXT||g===v.X12)&&(f+=2)}this.cachedTotalSize=f}return a.prototype.getB256Size=function(){for(var a=0,b=this;null!==b&&b.mode===v.B256&&a<=250;)a++,b=b.previous;return a},a.prototype.getPreviousStartMode=function(){return null===this.previous?v.ASCII:this.previous.mode},a.prototype.getPreviousMode=function(){return null===this.previous?v.ASCII:this.previous.getEndMode()},a.prototype.getEndMode=function(){if(this.mode===v.EDF){if(this.characterLength<4)return v.ASCII;var a=this.getLastASCII();if(a>0&&this.getCodewordsRemaining(this.cachedTotalSize+a)<=2-a)return v.ASCII}if(this.mode===v.C40||this.mode===v.TEXT||this.mode===v.X12){if(this.fromPosition+this.characterLength>=this.input.length()&&0===this.getCodewordsRemaining(this.cachedTotalSize))return v.ASCII;var a=this.getLastASCII();if(1===a&&0===this.getCodewordsRemaining(this.cachedTotalSize+1))return v.ASCII}return this.mode},a.prototype.getMode=function(){return this.mode},a.prototype.getLastASCII=function(){var a=this.input.length(),b=this.fromPosition+this.characterLength;return a-b>4||b>=a?0:a-b==1?+!po.isExtendedASCII(this.input.charAt(b),this.input.getFNC1Character()):a-b==2?po.isExtendedASCII(this.input.charAt(b),this.input.getFNC1Character())||po.isExtendedASCII(this.input.charAt(b+1),this.input.getFNC1Character())?0:pd.isDigit(this.input.charAt(b))&&pd.isDigit(this.input.charAt(b+1))?1:2:a-b==3?pd.isDigit(this.input.charAt(b))&&pd.isDigit(this.input.charAt(b+1))&&!po.isExtendedASCII(this.input.charAt(b+2),this.input.getFNC1Character())||pd.isDigit(this.input.charAt(b+1))&&pd.isDigit(this.input.charAt(b+2))&&!po.isExtendedASCII(this.input.charAt(b),this.input.getFNC1Character())?2:0:pd.isDigit(this.input.charAt(b))&&pd.isDigit(this.input.charAt(b+1))&&pd.isDigit(this.input.charAt(b+2))&&pd.isDigit(this.input.charAt(b+3))?2:0},a.prototype.getMinSymbolSize=function(a){var b,c,d,e,f,g;switch(this.input.getShapeHint()){case 1:try{for(var h=pk(this.squareCodewordCapacities),i=h.next();!i.done;i=h.next()){var j=i.value;if(j>=a)return j}}catch(a){b={error:a}}finally{try{i&&!i.done&&(c=h.return)&&c.call(h)}finally{if(b)throw b.error}}break;case 2:try{for(var k=pk(this.rectangularCodewordCapacities),l=k.next();!l.done;l=k.next()){var j=l.value;if(j>=a)return j}}catch(a){d={error:a}}finally{try{l&&!l.done&&(e=k.return)&&e.call(k)}finally{if(d)throw d.error}}}try{for(var m=pk(this.allCodewordCapacities),n=m.next();!n.done;n=m.next()){var j=n.value;if(j>=a)return j}}catch(a){f={error:a}}finally{try{n&&!n.done&&(g=m.return)&&g.call(m)}finally{if(f)throw f.error}}return this.allCodewordCapacities[this.allCodewordCapacities.length-1]},a.prototype.getCodewordsRemaining=function(a){return this.getMinSymbolSize(a)-a},a.getBytes=function(a,b){var c=new Uint8Array(b?2:1);return c[0]=a,b&&(c[1]=b),c},a.prototype.setC40Word=function(a,b,c,d,e){var f=1600*(255&c)+40*(255&d)+(255&e)+1;a[b]=f/256,a[b+1]=f%256},a.prototype.getX12Value=function(a){return 13===a?0:42===a?1:62===a?2:32===a?3:a>=48&&a<=57?a-44:a>=65&&a<=90?a-51:a},a.prototype.getX12Words=function(){if(this.characterLength%3!=0)throw Error("X12 words must be a multiple of 3");for(var a=new Uint8Array(this.characterLength/3*2),b=0;b<a.length;b+=2)this.setC40Word(a,b,this.getX12Value(this.input.charAt(this.fromPosition+b/2*3)),this.getX12Value(this.input.charAt(this.fromPosition+b/2*3+1)),this.getX12Value(this.input.charAt(this.fromPosition+b/2*3+2)));return a},a.prototype.getShiftValue=function(a,b,c){return b&&po.isInC40Shift1Set(a)||!b&&po.isInTextShift1Set(a)?0:b&&po.isInC40Shift2Set(a,c)||!b&&po.isInTextShift2Set(a,c)?1:2},a.prototype.getC40Value=function(a,b,c,d){if(c===d){if(2!==b)throw Error("FNC1 cannot be used in C40 shift 2");return 27}return a?c<=31?c:32===c?3:c<=47?c-33:c<=57?c-44:c<=64?c-43:c<=90?c-51:c<=95?c-69:c<=127?c-96:c:0===c?0:0===b&&c<=3?c-1:1===b&&c<=31?c:32===c?3:c>=33&&c<=47?c-33:c>=48&&c<=57?c-44:c>=58&&c<=64?c-43:c>=65&&c<=90?c-64:c>=91&&c<=95?c-69:96===c?0:c>=97&&c<=122?c-83:c>=123&&c<=127?c-96:c},a.prototype.getC40Words=function(a,b){for(var c=[],d=0;d<this.characterLength;d++){var e=this.input.charAt(this.fromPosition+d);if(a&&pd.isNativeC40(e)||!a&&pd.isNativeText(e))c.push(this.getC40Value(a,0,e,b));else if(po.isExtendedASCII(e,b)){var f=(255&e)-128;if(a&&pd.isNativeC40(f)||!a&&pd.isNativeText(f))c.push(1),c.push(30),c.push(this.getC40Value(a,0,f,b));else{c.push(1),c.push(30);var g=this.getShiftValue(f,a,b);c.push(g),c.push(this.getC40Value(a,g,f,b))}}else{var g=this.getShiftValue(e,a,b);c.push(g),c.push(this.getC40Value(a,g,e,b))}}if(c.length%3!=0){if((c.length-2)%3!=0||this.fromPosition+this.characterLength!==this.input.length())throw Error("C40 words must be a multiple of 3");c.push(0)}for(var h=new Uint8Array(c.length/3*2),i=0,d=0;d<c.length;d+=3)this.setC40Word(h,i,255&c[d],255&c[d+1],255&c[d+2]),i+=2;return h},a.prototype.getEDFBytes=function(){for(var a=Math.ceil(this.characterLength/4),b=new Uint8Array(3*a),c=this.fromPosition,d=Math.min(this.fromPosition+this.characterLength-1,this.input.length()-1),e=0;e<a;e+=3){for(var f=[],g=0;g<4;g++)c<=d?f[g]=63&this.input.charAt(c++):f[g]=31*(c===d+1);var h=f[0]<<18;h|=f[1]<<12,h|=f[2]<<6,h|=f[3],b[e]=h>>16&255,b[e+1]=h>>8&255,b[e+2]=255&h}return b},a.prototype.getLatchBytes=function(){switch(this.getPreviousMode()){case v.ASCII:case v.B256:switch(this.mode){case v.B256:return a.getBytes(231);case v.C40:return a.getBytes(230);case v.TEXT:return a.getBytes(239);case v.X12:return a.getBytes(238);case v.EDF:return a.getBytes(240)}break;case v.C40:case v.TEXT:case v.X12:if(this.mode!==this.getPreviousMode())switch(this.mode){case v.ASCII:return a.getBytes(254);case v.B256:return a.getBytes(254,231);case v.C40:return a.getBytes(254,230);case v.TEXT:return a.getBytes(254,239);case v.X12:return a.getBytes(254,238);case v.EDF:return a.getBytes(254,240)}break;case v.EDF:if(this.mode!==v.EDF)throw Error("Cannot switch from EDF to "+this.mode)}return new Uint8Array(0)},a.prototype.getDataBytes=function(){switch(this.mode){case v.ASCII:if(this.input.isECI(this.fromPosition))return a.getBytes(241,this.input.getECIValue(this.fromPosition)+1);if(po.isExtendedASCII(this.input.charAt(this.fromPosition),this.input.getFNC1Character()))return a.getBytes(235,this.input.charAt(this.fromPosition)-127);if(2===this.characterLength)return a.getBytes(10*this.input.charAt(this.fromPosition)+this.input.charAt(this.fromPosition+1)+130);else if(this.input.isFNC1(this.fromPosition))return a.getBytes(232);else return a.getBytes(this.input.charAt(this.fromPosition)+1);case v.B256:return a.getBytes(this.input.charAt(this.fromPosition));case v.C40:return this.getC40Words(!0,this.input.getFNC1Character());case v.TEXT:return this.getC40Words(!1,this.input.getFNC1Character());case v.X12:return this.getX12Words();case v.EDF:return this.getEDFBytes()}},a}(),pr=function(a){function b(b,c,d,e,f){var g=a.call(this,b,c,d)||this;return g.shape=e,g.macroId=f,g}return pj(b,a),b.prototype.getMacroId=function(){return this.macroId},b.prototype.getShapeHint=function(){return this.shape},b}(ph);!function(){function a(){}a.prototype.encode=function(a,b,c,d,e){if(void 0===e&&(e=null),""===a.trim())throw Error("Found empty contents");if(b!==lf.DATA_MATRIX)throw Error("Can only encode DATA_MATRIX, but got "+b);if(c<0||d<0)throw Error("Requested dimensions can't be negative: "+c+"x"+d);var f,g=0,h=null,i=null;if(null!=e){var j=e.get(oB.DATA_MATRIX_SHAPE);null!=j&&(g=j);var k=e.get(oB.MIN_SIZE);null!=k&&(h=k);var l=e.get(oB.MAX_SIZE);null!=l&&(i=l)}if(null!=e&&e.has(oB.DATA_MATRIX_COMPACT)&&e.get(oB.DATA_MATRIX_COMPACT).toString()){var m=e.has(oB.GS1_FORMAT)&&!!e.get(oB.GS1_FORMAT).toString(),n=null;e.has(oB.CHARACTER_SET)&&(n=oR.forName(e.get(oB.CHARACTER_SET).toString())),f=po.encodeHighLevel(a,n,m?29:-1,g)}else{var o=null!=e&&e.has(oB.FORCE_C40)&&!!e.get(oB.FORCE_C40).toString();f=pd.encodeHighLevel(a,g,h,i,o)}var p=o5.lookup(f.length,g,h,i,!0),q=new oT(o$.encodeECC200(f,p),p.getSymbolDataWidth(),p.getSymbolDataHeight());return q.place(),this.encodeLowLevel(q,p,c,d)},a.prototype.encodeLowLevel=function(a,b,c,d){for(var e=b.getSymbolDataWidth(),f=b.getSymbolDataHeight(),g=new oF(b.getSymbolWidth(),b.getSymbolHeight()),h=0,i=0;i<f;i++){var j=void 0;if(i%b.matrixHeight==0){j=0;for(var k=0;k<b.getSymbolWidth();k++)g.setBoolean(j,h,k%2==0),j++;h++}j=0;for(var k=0;k<e;k++)k%b.matrixWidth==0&&(g.setBoolean(j,h,!0),j++),g.setBoolean(j,h,a.getBit(k,i)),j++,k%b.matrixWidth==b.matrixWidth-1&&(g.setBoolean(j,h,i%2==0),j++);if(h++,i%b.matrixHeight==b.matrixHeight-1){j=0;for(var k=0;k<b.getSymbolWidth();k++)g.setBoolean(j,h,!0),j++;h++}}return this.convertByteMatrixToBitMatrix(g,c,d)},a.prototype.convertByteMatrixToBitMatrix=function(a,b,c){var d,e=a.getWidth(),f=a.getHeight(),g=Math.max(b,e),h=Math.max(c,f),i=Math.min(g/e,h/f),j=(g-e*i)/2,k=(h-f*i)/2;c<f||b<e?(j=0,k=0,d=new kZ(e,f)):d=new kZ(b,c),d.clear();for(var l=0,m=k;l<f;l++,m+=i)for(var n=0,o=j;n<e;n++,o+=i)1===a.get(n,l)&&d.setRegion(o,m,i,i);return d}}();var ps=function(){function a(){}return a.prototype.isCompact=function(){return this.compact},a.prototype.setCompact=function(a){this.compact=a},a.prototype.getSize=function(){return this.size},a.prototype.setSize=function(a){this.size=a},a.prototype.getLayers=function(){return this.layers},a.prototype.setLayers=function(a){this.layers=a},a.prototype.getCodeWords=function(){return this.codeWords},a.prototype.setCodeWords=function(a){this.codeWords=a},a.prototype.getMatrix=function(){return this.matrix},a.prototype.setMatrix=function(a){this.matrix=a},a}(),pt=function(){function a(){}return a.singletonList=function(a){return[a]},a.min=function(a,b){return a.sort(b)[0]},a}(),pu=function(){function a(a){this.previous=a}return a.prototype.getPrevious=function(){return this.previous},a}(),pv=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),pw=function(a){function b(b,c,d){var e=a.call(this,b)||this;return e.value=c,e.bitCount=d,e}return pv(b,a),b.prototype.appendTo=function(a,b){a.appendBits(this.value,this.bitCount)},b.prototype.add=function(a,c){return new b(this,a,c)},b.prototype.addBinaryShift=function(a,c){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new b(this,a,c)},b.prototype.toString=function(){var a=this.value&(1<<this.bitCount)-1;return a|=1<<this.bitCount,"<"+kN.toBinaryString(a|1<<this.bitCount).substring(1)+">"},b}(pu),px=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),py=function(a){function b(b,c,d){var e=a.call(this,b,0,0)||this;return e.binaryShiftStart=c,e.binaryShiftByteCount=d,e}return px(b,a),b.prototype.appendTo=function(a,b){for(var c=0;c<this.binaryShiftByteCount;c++)(0===c||31===c&&this.binaryShiftByteCount<=62)&&(a.appendBits(31,5),this.binaryShiftByteCount>62?a.appendBits(this.binaryShiftByteCount-31,16):0===c?a.appendBits(Math.min(this.binaryShiftByteCount,31),5):a.appendBits(this.binaryShiftByteCount-31,5)),a.appendBits(b[this.binaryShiftStart+c],8)},b.prototype.addBinaryShift=function(a,c){return new b(this,a,c)},b.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},b}(pw);function pz(a,b,c){return new pw(a,b,c)}var pA=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],pB=new pw(null,0,0),pC=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])],pD=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},pE=function(a){var b,c;try{for(var d=pD(a),e=d.next();!e.done;e=d.next()){var f=e.value;kM.fill(f,-1)}}catch(a){b={error:a}}finally{try{e&&!e.done&&(c=d.return)&&c.call(d)}finally{if(b)throw b.error}}return a[0][4]=0,a[1][4]=0,a[1][0]=28,a[3][4]=0,a[2][4]=0,a[2][0]=15,a}(kM.createInt32Array(6,6)),pF=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},pG=function(){function a(a,b,c,d){this.token=a,this.mode=b,this.binaryShiftByteCount=c,this.bitCount=d}return a.prototype.getMode=function(){return this.mode},a.prototype.getToken=function(){return this.token},a.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},a.prototype.getBitCount=function(){return this.bitCount},a.prototype.latchAndAppend=function(b,c){var d=this.bitCount,e=this.token;if(b!==this.mode){var f=pC[this.mode][b];e=pz(e,65535&f,f>>16),d+=f>>16}var g=2===b?4:5;return new a(e=pz(e,c,g),b,0,d+g)},a.prototype.shiftAndAppend=function(b,c){var d=this.token,e=2===this.mode?4:5;return d=pz(d,pE[this.mode][b],e),new a(d=pz(d,c,5),this.mode,0,this.bitCount+e+5)},a.prototype.addBinaryShiftChar=function(b){var c=this.token,d=this.mode,e=this.bitCount;if(4===this.mode||2===this.mode){var f=pC[d][0];c=pz(c,65535&f,f>>16),e+=f>>16,d=0}var g=0===this.binaryShiftByteCount||31===this.binaryShiftByteCount?18:62===this.binaryShiftByteCount?9:8,h=new a(c,d,this.binaryShiftByteCount+1,e+g);return 2078===h.binaryShiftByteCount&&(h=h.endBinaryShift(b+1)),h},a.prototype.endBinaryShift=function(b){if(0===this.binaryShiftByteCount)return this;var c=this.token;return new a(c=new py(c,b-this.binaryShiftByteCount,this.binaryShiftByteCount),this.mode,0,this.bitCount)},a.prototype.isBetterThanOrEqualTo=function(b){var c=this.bitCount+(pC[this.mode][b.mode]>>16);return this.binaryShiftByteCount<b.binaryShiftByteCount?c+=a.calculateBinaryShiftCost(b)-a.calculateBinaryShiftCost(this):this.binaryShiftByteCount>b.binaryShiftByteCount&&b.binaryShiftByteCount>0&&(c+=10),c<=b.bitCount},a.prototype.toBitArray=function(a){for(var b,c,d=[],e=this.endBinaryShift(a.length).token;null!==e;e=e.getPrevious())d.unshift(e);var f=new kO;try{for(var g=pF(d),h=g.next();!h.done;h=g.next())h.value.appendTo(f,a)}catch(a){b={error:a}}finally{try{h&&!h.done&&(c=g.return)&&c.call(g)}finally{if(b)throw b.error}}return f},a.prototype.toString=function(){return kX.format("%s bits=%d bytes=%d",pA[this.mode],this.bitCount,this.binaryShiftByteCount)},a.calculateBinaryShiftCost=function(a){return a.binaryShiftByteCount>62?21:a.binaryShiftByteCount>31?20:10*(a.binaryShiftByteCount>0)},a.INITIAL_STATE=new a(pB,0,0,0),a}(),pH=function(a){var b=kX.getCharCode(" "),c=kX.getCharCode("."),d=kX.getCharCode(",");a[0][b]=1;for(var e=kX.getCharCode("Z"),f=kX.getCharCode("A"),g=f;g<=e;g++)a[0][g]=g-f+2;a[1][b]=1;for(var h=kX.getCharCode("z"),i=kX.getCharCode("a"),g=i;g<=h;g++)a[1][g]=g-i+2;a[2][b]=1;for(var j=kX.getCharCode("9"),k=kX.getCharCode("0"),g=k;g<=j;g++)a[2][g]=g-k+2;a[2][d]=12,a[2][c]=13;for(var l=["\0"," ","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","	","\n","\v","\f","\r","\x1b","\x1c","\x1d","\x1e","\x1f","@","\\","^","_","`","|","~",""],m=0;m<l.length;m++)a[3][kX.getCharCode(l[m])]=m;for(var n=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],m=0;m<n.length;m++)kX.getCharCode(n[m])>0&&(a[4][kX.getCharCode(n[m])]=m);return a}(kM.createInt32Array(5,256)),pI=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},pJ=function(){function a(a){this.text=a}return a.prototype.encode=function(){for(var b=kX.getCharCode(" "),c=kX.getCharCode("\n"),d=pt.singletonList(pG.INITIAL_STATE),e=0;e<this.text.length;e++){var f=void 0,g=e+1<this.text.length?this.text[e+1]:0;switch(this.text[e]){case kX.getCharCode("\r"):f=2*(g===c);break;case kX.getCharCode("."):f=3*(g===b);break;case kX.getCharCode(","):f=4*(g===b);break;case kX.getCharCode(":"):f=5*(g===b);break;default:f=0}f>0?(d=a.updateStateListForPair(d,e,f),e++):d=this.updateStateListForChar(d,e)}return pt.min(d,function(a,b){return a.getBitCount()-b.getBitCount()}).toBitArray(this.text)},a.prototype.updateStateListForChar=function(b,c){var d,e,f=[];try{for(var g=pI(b),h=g.next();!h.done;h=g.next()){var i=h.value;this.updateStateForChar(i,c,f)}}catch(a){d={error:a}}finally{try{h&&!h.done&&(e=g.return)&&e.call(g)}finally{if(d)throw d.error}}return a.simplifyStates(f)},a.prototype.updateStateForChar=function(a,b,c){for(var d=255&this.text[b],e=pH[a.getMode()][d]>0,f=null,g=0;g<=4;g++){var h=pH[g][d];if(h>0){if(null==f&&(f=a.endBinaryShift(b)),!e||g===a.getMode()||2===g){var i=f.latchAndAppend(g,h);c.push(i)}if(!e&&pE[a.getMode()][g]>=0){var j=f.shiftAndAppend(g,h);c.push(j)}}}if(a.getBinaryShiftByteCount()>0||0===pH[a.getMode()][d]){var k=a.addBinaryShiftChar(b);c.push(k)}},a.updateStateListForPair=function(a,b,c){var d,e,f=[];try{for(var g=pI(a),h=g.next();!h.done;h=g.next()){var i=h.value;this.updateStateForPair(i,b,c,f)}}catch(a){d={error:a}}finally{try{h&&!h.done&&(e=g.return)&&e.call(g)}finally{if(d)throw d.error}}return this.simplifyStates(f)},a.updateStateForPair=function(a,b,c,d){var e=a.endBinaryShift(b);if(d.push(e.latchAndAppend(4,c)),4!==a.getMode()&&d.push(e.shiftAndAppend(4,c)),3===c||4===c){var f=e.latchAndAppend(2,16-c).latchAndAppend(2,1);d.push(f)}if(a.getBinaryShiftByteCount()>0){var g=a.addBinaryShiftChar(b).addBinaryShiftChar(b+1);d.push(g)}},a.simplifyStates=function(a){var b,c,d,e,f=[];try{for(var g=pI(a),h=g.next();!h.done;h=g.next()){var i=h.value,j=!0,k=function(a){if(a.isBetterThanOrEqualTo(i))return j=!1,"break";i.isBetterThanOrEqualTo(a)&&(f=f.filter(function(b){return b!==a}))};try{for(var l=(d=void 0,pI(f)),m=l.next();!m.done;m=l.next()){var n=m.value,o=k(n);if("break"===o)break}}catch(a){d={error:a}}finally{try{m&&!m.done&&(e=l.return)&&e.call(l)}finally{if(d)throw d.error}}j&&f.push(i)}}catch(a){b={error:a}}finally{try{h&&!h.done&&(c=g.return)&&c.call(g)}finally{if(b)throw b.error}}return f},a}(),pK=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},pL=function(){function a(){}return a.encodeBytes=function(b){return a.encode(b,a.DEFAULT_EC_PERCENT,a.DEFAULT_AZTEC_LAYERS)},a.encode=function(b,c,d){var e,f,g,h,i,j,k=new pJ(b).encode(),l=kN.truncDivision(k.getSize()*c,100)+11,m=k.getSize()+l;if(d!==a.DEFAULT_AZTEC_LAYERS){if(e=d<0,(f=Math.abs(d))>(e?a.MAX_NB_BITS_COMPACT:a.MAX_NB_BITS))throw new kB(kX.format("Illegal value %s for layers",d));var n=(g=a.totalBitsInLayer(f,e))-g%(h=a.WORD_SIZE[f]);if((i=a.stuffBits(k,h)).getSize()+l>n||e&&i.getSize()>64*h)throw new kB("Data to large for user specified layer")}else{h=0,i=null;for(var o=0;;o++){if(o>a.MAX_NB_BITS)throw new kB("Data too large for an Aztec code");if(f=(e=o<=3)?o+1:o,!(m>(g=a.totalBitsInLayer(f,e)))){(null==i||h!==a.WORD_SIZE[f])&&(h=a.WORD_SIZE[f],i=a.stuffBits(k,h));var n=g-g%h;if(!(e&&i.getSize()>64*h)&&i.getSize()+l<=n)break}}}var p=a.generateCheckWords(i,g,h),q=i.getSize()/h,r=a.generateModeMessage(e,f,q),s=(e?11:14)+4*f,t=new Int32Array(s);if(e){j=s;for(var o=0;o<t.length;o++)t[o]=o}else{j=s+1+2*kN.truncDivision(kN.truncDivision(s,2)-1,15);for(var u=kN.truncDivision(s,2),v=kN.truncDivision(j,2),o=0;o<u;o++){var w=o+kN.truncDivision(o,15);t[u-o-1]=v-w-1,t[u+o]=v+w+1}}for(var x=new kZ(j),o=0,y=0;o<f;o++){for(var z=(f-o)*4+(e?9:12),A=0;A<z;A++)for(var B=2*A,C=0;C<2;C++)p.get(y+B+C)&&x.set(t[2*o+C],t[2*o+A]),p.get(y+2*z+B+C)&&x.set(t[2*o+A],t[s-1-2*o-C]),p.get(y+4*z+B+C)&&x.set(t[s-1-2*o-C],t[s-1-2*o-A]),p.get(y+6*z+B+C)&&x.set(t[s-1-2*o-A],t[2*o+C]);y+=8*z}if(a.drawModeMessage(x,e,j,r),e)a.drawBullsEye(x,kN.truncDivision(j,2),5);else{a.drawBullsEye(x,kN.truncDivision(j,2),7);for(var o=0,A=0;o<kN.truncDivision(s,2)-1;o+=15,A+=16)for(var C=1&kN.truncDivision(j,2);C<j;C+=2)x.set(kN.truncDivision(j,2)-A,C),x.set(kN.truncDivision(j,2)+A,C),x.set(C,kN.truncDivision(j,2)-A),x.set(C,kN.truncDivision(j,2)+A)}var D=new ps;return D.setCompact(e),D.setSize(j),D.setLayers(f),D.setCodeWords(q),D.setMatrix(x),D},a.drawBullsEye=function(a,b,c){for(var d=0;d<c;d+=2)for(var e=b-d;e<=b+d;e++)a.set(e,b-d),a.set(e,b+d),a.set(b-d,e),a.set(b+d,e);a.set(b-c,b-c),a.set(b-c+1,b-c),a.set(b-c,b-c+1),a.set(b+c,b-c),a.set(b+c,b-c+1),a.set(b+c,b+c-1)},a.generateModeMessage=function(b,c,d){var e=new kO;return b?(e.appendBits(c-1,2),e.appendBits(d-1,6),e=a.generateCheckWords(e,28,4)):(e.appendBits(c-1,5),e.appendBits(d-1,11),e=a.generateCheckWords(e,40,4)),e},a.drawModeMessage=function(a,b,c,d){var e=kN.truncDivision(c,2);if(b)for(var f=0;f<7;f++){var g=e-3+f;d.get(f)&&a.set(g,e-5),d.get(f+7)&&a.set(e+5,g),d.get(20-f)&&a.set(g,e+5),d.get(27-f)&&a.set(e-5,g)}else for(var f=0;f<10;f++){var g=e-5+f+kN.truncDivision(f,5);d.get(f)&&a.set(g,e-7),d.get(f+10)&&a.set(e+7,g),d.get(29-f)&&a.set(g,e+7),d.get(39-f)&&a.set(e-7,g)}},a.generateCheckWords=function(b,c,d){var e,f,g=b.getSize()/d,h=new oC(a.getGF(d)),i=kN.truncDivision(c,d),j=a.bitsToWords(b,d,i);h.encode(j,i-g);var k=c%d,l=new kO;l.appendBits(0,k);try{for(var m=pK(Array.from(j)),n=m.next();!n.done;n=m.next()){var o=n.value;l.appendBits(o,d)}}catch(a){e={error:a}}finally{try{n&&!n.done&&(f=m.return)&&f.call(m)}finally{if(e)throw e.error}}return l},a.bitsToWords=function(a,b,c){var d,e,f=new Int32Array(c);for(d=0,e=a.getSize()/b;d<e;d++){for(var g=0,h=0;h<b;h++)g|=a.get(d*b+h)?1<<b-h-1:0;f[d]=g}return f},a.getGF=function(a){switch(a){case 4:return ln.AZTEC_PARAM;case 6:return ln.AZTEC_DATA_6;case 8:return ln.AZTEC_DATA_8;case 10:return ln.AZTEC_DATA_10;case 12:return ln.AZTEC_DATA_12;default:throw new kB("Unsupported word size "+a)}},a.stuffBits=function(a,b){for(var c=new kO,d=a.getSize(),e=(1<<b)-2,f=0;f<d;f+=b){for(var g=0,h=0;h<b;h++)(f+h>=d||a.get(f+h))&&(g|=1<<b-1-h);(g&e)===e?(c.appendBits(g&e,b),f--):(g&e)==0?(c.appendBits(1|g,b),f--):c.appendBits(g,b)}return c},a.totalBitsInLayer=function(a,b){return((b?88:112)+16*a)*a},a.DEFAULT_EC_PERCENT=33,a.DEFAULT_AZTEC_LAYERS=0,a.MAX_NB_BITS=32,a.MAX_NB_BITS_COMPACT=4,a.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),a}();function pM({onScan:a,onClose:b,isActive:c=!0}){let[d,e]=(0,z.useState)(!1),[f,g]=(0,z.useState)(""),[h,i]=(0,z.useState)(!1),{videoRef:j,isScanning:k,error:l,hasPermission:m,lastScannedCode:n,startScanning:o,stopScanning:p,resetLastCode:q}=function(a={}){let b=(0,z.useRef)(null),c=(0,z.useRef)(null),[d,e]=(0,z.useState)({isScanning:!1,error:null,lastScannedCode:null,hasPermission:null}),f=(0,z.useCallback)(async()=>{if(!b.current)return void e(a=>({...a,error:"Video element not available"}));try{let d=new Map;d.set(kP.POSSIBLE_FORMATS,[lf.EAN_13,lf.EAN_8,lf.UPC_A,lf.UPC_E,lf.CODE_128,lf.CODE_39,...a.formats||[]]),d.set(kP.TRY_HARDER,!0);let f=new oy(d);c.current=f;let g=null;try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw Error("Camera implementation not found. Are you in a secure context (HTTPS/localhost)?");g=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1920,min:1280},height:{ideal:1080,min:720},aspectRatio:{ideal:16/9}}})}catch(a){if(a instanceof Error&&("NotAllowedError"===a.name||a.message.includes("Permission denied")))throw Error("Camera permission denied");throw Error("Failed to verify camera support or permission was denied")}if(e(a=>({...a,isScanning:!0,error:null,hasPermission:!0})),!g)throw Error("Failed to acquire camera stream");await f.decodeFromStream(g,b.current,(b,c)=>{if(b){let c=b.getText();e(a=>({...a,lastScannedCode:c})),a.onScan?.(c)}c&&"NotFoundException"!==c.name&&console.error("Scan error:",c)})}catch(c){let b=c instanceof Error?c.message:"Failed to start scanner";b.includes("Permission denied")||b.includes("NotAllowedError")?e(a=>({...a,hasPermission:!1,error:"Camera permission denied"})):e(a=>({...a,error:b})),a.onError?.(b)}},[a]),g=(0,z.useCallback)(()=>{c.current&&(c.current.reset(),c.current=null),e(a=>({...a,isScanning:!1}))},[]),h=(0,z.useCallback)(()=>{e(a=>({...a,lastScannedCode:null}))},[]);return{videoRef:b,...d,startScanning:f,stopScanning:g,resetLastCode:h}}({onScan:(0,z.useCallback)(b=>{a(b)},[a])});return(0,y.jsxs)("div",{"data-design-id":"barcode-scanner",className:"relative w-full h-full flex flex-col",children:[(0,y.jsxs)("div",{"data-design-id":"scanner-header",className:"absolute top-0 left-0 right-0 z-20 p-4 flex justify-between items-center",children:[b&&(0,y.jsx)(i4,{"data-design-id":"scanner-close-btn",variant:"ghost",size:"icon",onClick:b,className:"glass bg-black/30 text-white hover:bg-black/50",children:(0,y.jsx)(kp,{className:"w-5 h-5"})}),(0,y.jsxs)("div",{className:"flex gap-2",children:[(0,y.jsx)(i4,{"data-design-id":"scanner-keyboard-btn",variant:"ghost",size:"icon",onClick:()=>e(!d),className:"glass bg-black/30 text-white hover:bg-black/50",children:(0,y.jsx)(kq,{className:"w-5 h-5"})}),(0,y.jsx)(i4,{"data-design-id":"scanner-torch-btn",variant:"ghost",size:"icon",onClick:()=>i(!h),className:"glass bg-black/30 text-white hover:bg-black/50",disabled:!k,children:h?(0,y.jsx)(kr,{className:"w-5 h-5"}):(0,y.jsx)(ks,{className:"w-5 h-5"})})]})]}),(0,y.jsx)(f9,{mode:"wait",children:d?(0,y.jsxs)(f1.div,{"data-design-id":"manual-entry-panel",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"flex-1 flex flex-col items-center justify-center p-6 bg-background",children:[(0,y.jsx)("div",{"data-design-id":"manual-entry-icon",className:"w-20 h-20 rounded-full bg-primary/10 flex items-center justify-center mb-6",children:(0,y.jsx)(kq,{className:"w-10 h-10 text-primary"})}),(0,y.jsx)("h2",{"data-design-id":"manual-entry-title",className:"text-xl font-semibold mb-2",children:"Enter UPC Manually"}),(0,y.jsx)("p",{"data-design-id":"manual-entry-description",className:"text-muted-foreground text-center mb-6",children:"Type the barcode number found on the product packaging"}),(0,y.jsxs)("form",{onSubmit:b=>{b.preventDefault(),f.trim()&&(a(f.trim()),g(""),e(!1))},className:"w-full max-w-sm space-y-4",children:[(0,y.jsx)(jc,{"data-design-id":"manual-entry-input",type:"text",inputMode:"numeric",pattern:"[0-9]*",placeholder:"Enter UPC (e.g., 012345678905)",value:f,onChange:a=>g(a.target.value.replace(/[^0-9]/g,"")),className:"text-center text-lg h-12 tracking-widest",autoFocus:!0}),(0,y.jsx)(i4,{"data-design-id":"manual-entry-submit",type:"submit",className:"w-full h-12 text-base font-semibold",disabled:!f.trim()||f.length<8,children:"Look Up Product"}),(0,y.jsx)(i4,{"data-design-id":"manual-entry-cancel",type:"button",variant:"ghost",onClick:()=>e(!1),className:"w-full",children:"Back to Scanner"})]})]},"manual-entry"):(0,y.jsxs)(f1.div,{"data-design-id":"scanner-view",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"relative flex-1 bg-black overflow-hidden",children:[(0,y.jsx)("video",{ref:j,className:"absolute inset-0 w-full h-full object-contain bg-black",playsInline:!0,muted:!0,autoPlay:!0}),(0,y.jsx)("div",{"data-design-id":"scanner-overlay",className:"absolute inset-0 flex items-center justify-center",children:(0,y.jsxs)("div",{className:"relative w-72 h-44",children:[(0,y.jsx)("div",{className:"absolute inset-0 border-2 border-white/30 rounded-xl"}),(0,y.jsx)("div",{className:"absolute -top-1 -left-1 w-8 h-8 border-t-4 border-l-4 border-primary rounded-tl-xl"}),(0,y.jsx)("div",{className:"absolute -top-1 -right-1 w-8 h-8 border-t-4 border-r-4 border-primary rounded-tr-xl"}),(0,y.jsx)("div",{className:"absolute -bottom-1 -left-1 w-8 h-8 border-b-4 border-l-4 border-primary rounded-bl-xl"}),(0,y.jsx)("div",{className:"absolute -bottom-1 -right-1 w-8 h-8 border-b-4 border-r-4 border-primary rounded-br-xl"}),k&&(0,y.jsx)(f1.div,{"data-design-id":"scan-line",className:"absolute left-2 right-2 h-0.5 bg-gradient-to-r from-transparent via-primary to-transparent",animate:{top:["10%","90%","10%"]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}})]})}),(0,y.jsx)("div",{"data-design-id":"scanner-status",className:"absolute bottom-8 left-0 right-0 px-6",children:(0,y.jsx)("div",{className:"glass bg-black/50 rounded-2xl p-4 text-center",children:l?(0,y.jsxs)("div",{"data-design-id":"scanner-error",className:"text-red-400",children:[(0,y.jsx)(kt,{className:"w-6 h-6 mx-auto mb-2"}),(0,y.jsx)("p",{className:"text-sm",children:l}),(0,y.jsx)(i4,{onClick:o,variant:"outline",size:"sm",className:"mt-3 border-white/20 text-white hover:bg-white/10",children:"Try Again"})]}):!1===m?(0,y.jsxs)("div",{"data-design-id":"scanner-permission",className:"text-yellow-400",children:[(0,y.jsx)(kt,{className:"w-6 h-6 mx-auto mb-2"}),(0,y.jsx)("p",{className:"text-sm",children:"Camera access is required to scan barcodes"}),(0,y.jsx)("p",{className:"text-xs text-white/60 mt-1",children:"Please enable camera in your browser settings"})]}):k?(0,y.jsxs)("div",{"data-design-id":"scanner-active",className:"text-white",children:[(0,y.jsx)(jl,{className:"w-6 h-6 mx-auto mb-2 animate-pulse"}),(0,y.jsx)("p",{className:"text-sm font-medium",children:"Point camera at barcode"}),(0,y.jsx)("p",{className:"text-xs text-white/60 mt-1",children:"Position barcode within the frame"})]}):(0,y.jsxs)("div",{"data-design-id":"scanner-starting",className:"text-white/60",children:[(0,y.jsx)("div",{className:"w-6 h-6 mx-auto mb-2 border-2 border-white/30 border-t-white rounded-full animate-spin"}),(0,y.jsx)("p",{className:"text-sm",children:"Starting camera..."})]})})}),(0,y.jsx)(f9,{children:n&&(0,y.jsx)(f1.div,{"data-design-id":"scan-success",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 glass bg-primary/90 text-primary-foreground px-6 py-3 rounded-xl",children:(0,y.jsx)("p",{className:"font-mono font-semibold",children:n})})})]},"scanner")})]})}!function(){function a(){}a.prototype.encode=function(a,b,c,d){return this.encodeWithHints(a,b,c,d,null)},a.prototype.encodeWithHints=function(b,c,d,e,f){var g=oS.ISO_8859_1,h=pL.DEFAULT_EC_PERCENT,i=pL.DEFAULT_AZTEC_LAYERS;return null!=f&&(f.has(oB.CHARACTER_SET)&&(g=oR.forName(f.get(oB.CHARACTER_SET).toString())),f.has(oB.ERROR_CORRECTION)&&(h=kN.parseInt(f.get(oB.ERROR_CORRECTION).toString())),f.has(oB.AZTEC_LAYERS)&&(i=kN.parseInt(f.get(oB.AZTEC_LAYERS).toString()))),a.encodeLayers(b,c,d,e,g,h,i)},a.encodeLayers=function(b,c,d,e,f,g,h){if(c!==lf.AZTEC)throw new kB("Can only encode AZTEC, but got "+c);var i=pL.encode(kX.getBytes(b,f),g,h);return a.renderResult(i,d,e)},a.renderResult=function(a,b,c){var d=a.getMatrix();if(null==d)throw new lr;for(var e=d.getWidth(),f=d.getHeight(),g=Math.max(b,e),h=Math.max(c,f),i=Math.min(g/e,h/f),j=(g-e*i)/2,k=(h-f*i)/2,l=new kZ(g,h),m=0,n=k;m<f;m++,n+=i)for(var o=0,p=j;o<e;o++,p+=i)d.get(o,m)&&l.setRegion(p,n,i,i);return l}}();let pN=hD("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);function pO(a){let b=function(a){let b=z.forwardRef((a,b)=>{let{children:c,...d}=a;if(z.isValidElement(c)){var e;let a,f,g=(e=c,(f=(a=Object.getOwnPropertyDescriptor(e.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.ref:(f=(a=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.props.ref:e.props.ref||e.ref),h=function(a,b){let c={...b};for(let d in b){let e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...a)=>{let b=f(...a);return e(...a),b}:e&&(c[d]=e):"style"===d?c[d]={...e,...f}:"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return{...a,...c}}(d,c.props);return c.type!==z.Fragment&&(h.ref=b?iU(b,g):g),z.cloneElement(c,h)}return z.Children.count(c)>1?z.Children.only(null):null});return b.displayName=`${a}.SlotClone`,b}(a),c=z.forwardRef((a,c)=>{let{children:d,...e}=a,f=z.Children.toArray(d),g=f.find(pQ);if(g){let a=g.props.children,d=f.map(b=>b!==g?b:z.Children.count(a)>1?z.Children.only(null):z.isValidElement(a)?a.props.children:null);return(0,y.jsx)(b,{...e,ref:c,children:z.isValidElement(a)?z.cloneElement(a,void 0,d):null})}return(0,y.jsx)(b,{...e,ref:c,children:d})});return c.displayName=`${a}.Slot`,c}var pP=Symbol("radix.slottable");function pQ(a){return z.isValidElement(a)&&"function"==typeof a.type&&"__radixId"in a.type&&a.type.__radixId===pP}function pR(a){let b=a+"CollectionProvider",[c,d]=jI(b),[e,f]=c(b,{collectionRef:{current:null},itemMap:new Map}),g=a=>{let{scope:b,children:c}=a,d=z.useRef(null),f=z.useRef(new Map).current;return(0,y.jsx)(e,{scope:b,itemMap:f,collectionRef:d,children:c})};g.displayName=b;let h=a+"CollectionSlot",i=pO(h),j=z.forwardRef((a,b)=>{let{scope:c,children:d}=a,e=iV(b,f(h,c).collectionRef);return(0,y.jsx)(i,{ref:e,children:d})});j.displayName=h;let k=a+"CollectionItemSlot",l="data-radix-collection-item",m=pO(k),n=z.forwardRef((a,b)=>{let{scope:c,children:d,...e}=a,g=z.useRef(null),h=iV(b,g),i=f(k,c);return z.useEffect(()=>(i.itemMap.set(g,{ref:g,...e}),()=>void i.itemMap.delete(g))),(0,y.jsx)(m,{...{[l]:""},ref:h,children:d})});return n.displayName=k,[{Provider:g,Slot:j,ItemSlot:n},function(b){let c=f(a+"CollectionConsumer",b);return z.useCallback(()=>{let a=c.collectionRef.current;if(!a)return[];let b=Array.from(a.querySelectorAll(`[${l}]`));return Array.from(c.itemMap.values()).sort((a,c)=>b.indexOf(a.ref.current)-b.indexOf(c.ref.current))},[c.collectionRef,c.itemMap])},d]}var pS=new WeakMap;function pT(a,b){if("at"in Array.prototype)return Array.prototype.at.call(a,b);let c=function(a,b){let c=a.length,d=pU(b),e=d>=0?d:c+d;return e<0||e>=c?-1:e}(a,b);return -1===c?void 0:a[c]}function pU(a){return a!=a||0===a?0:Math.trunc(a)}(class a extends Map{#a;constructor(a){super(a),this.#a=[...super.keys()],pS.set(this,!0)}set(a,b){return pS.get(this)&&(this.has(a)?this.#a[this.#a.indexOf(a)]=a:this.#a.push(a)),super.set(a,b),this}insert(a,b,c){let d,e=this.has(b),f=this.#a.length,g=pU(a),h=g>=0?g:f+g,i=h<0||h>=f?-1:h;if(i===this.size||e&&i===this.size-1||-1===i)return this.set(b,c),this;let j=this.size+ +!e;g<0&&h++;let k=[...this.#a],l=!1;for(let a=h;a<j;a++)if(h===a){let f=k[a];k[a]===b&&(f=k[a+1]),e&&this.delete(b),d=this.get(f),this.set(b,c)}else{l||k[a-1]!==b||(l=!0);let c=k[l?a:a-1],e=d;d=this.get(c),this.delete(c),this.set(c,e)}return this}with(b,c,d){let e=new a(this);return e.insert(b,c,d),e}before(a){let b=this.#a.indexOf(a)-1;if(!(b<0))return this.entryAt(b)}setBefore(a,b,c){let d=this.#a.indexOf(a);return -1===d?this:this.insert(d,b,c)}after(a){let b=this.#a.indexOf(a);if(-1!==(b=-1===b||b===this.size-1?-1:b+1))return this.entryAt(b)}setAfter(a,b,c){let d=this.#a.indexOf(a);return -1===d?this:this.insert(d+1,b,c)}first(){return this.entryAt(0)}last(){return this.entryAt(-1)}clear(){return this.#a=[],super.clear()}delete(a){let b=super.delete(a);return b&&this.#a.splice(this.#a.indexOf(a),1),b}deleteAt(a){let b=this.keyAt(a);return void 0!==b&&this.delete(b)}at(a){let b=pT(this.#a,a);if(void 0!==b)return this.get(b)}entryAt(a){let b=pT(this.#a,a);if(void 0!==b)return[b,this.get(b)]}indexOf(a){return this.#a.indexOf(a)}keyAt(a){return pT(this.#a,a)}from(a,b){let c=this.indexOf(a);if(-1===c)return;let d=c+b;return d<0&&(d=0),d>=this.size&&(d=this.size-1),this.at(d)}keyFrom(a,b){let c=this.indexOf(a);if(-1===c)return;let d=c+b;return d<0&&(d=0),d>=this.size&&(d=this.size-1),this.keyAt(d)}find(a,b){let c=0;for(let d of this){if(Reflect.apply(a,b,[d,c,this]))return d;c++}}findIndex(a,b){let c=0;for(let d of this){if(Reflect.apply(a,b,[d,c,this]))return c;c++}return -1}filter(b,c){let d=[],e=0;for(let a of this)Reflect.apply(b,c,[a,e,this])&&d.push(a),e++;return new a(d)}map(b,c){let d=[],e=0;for(let a of this)d.push([a[0],Reflect.apply(b,c,[a,e,this])]),e++;return new a(d)}reduce(...a){let[b,c]=a,d=0,e=c??this.at(0);for(let c of this)e=0===d&&1===a.length?c:Reflect.apply(b,this,[e,c,d,this]),d++;return e}reduceRight(...a){let[b,c]=a,d=c??this.at(-1);for(let c=this.size-1;c>=0;c--){let e=this.at(c);d=c===this.size-1&&1===a.length?e:Reflect.apply(b,this,[d,e,c,this])}return d}toSorted(b){return new a([...this.entries()].sort(b))}toReversed(){let b=new a;for(let a=this.size-1;a>=0;a--){let c=this.keyAt(a),d=this.get(c);b.set(c,d)}return b}toSpliced(...b){let c=[...this.entries()];return c.splice(...b),new a(c)}slice(b,c){let d=new a,e=this.size-1;if(void 0===b)return d;b<0&&(b+=this.size),void 0!==c&&c>0&&(e=c-1);for(let a=b;a<=e;a++){let b=this.keyAt(a),c=this.get(b);d.set(b,c)}return d}every(a,b){let c=0;for(let d of this){if(!Reflect.apply(a,b,[d,c,this]))return!1;c++}return!0}some(a,b){let c=0;for(let d of this){if(Reflect.apply(a,b,[d,c,this]))return!0;c++}return!1}});var pV=A[" useInsertionEffect ".trim().toString()]||jF;function pW({prop:a,defaultProp:b,onChange:c=()=>{},caller:d}){let[e,f,g]=function({defaultProp:a,onChange:b}){let[c,d]=z.useState(a),e=z.useRef(c),f=z.useRef(b);return pV(()=>{f.current=b},[b]),z.useEffect(()=>{e.current!==c&&(f.current?.(c),e.current=c)},[c,e]),[c,d,f]}({defaultProp:b,onChange:c}),h=void 0!==a,i=h?a:e;{let b=z.useRef(void 0!==a);z.useEffect(()=>{let a=b.current;if(a!==h){let b=h?"controlled":"uncontrolled";console.warn(`${d} is changing from ${a?"controlled":"uncontrolled"} to ${b}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`)}b.current=h},[h,d])}return[i,z.useCallback(b=>{if(h){let c="function"==typeof b?b(a):b;c!==a&&g.current?.(c)}else f(b)},[h,a,f,g])]}Symbol("RADIX:SYNC_STATE");var pX=A[" useId ".trim().toString()]||(()=>void 0),pY=0;function pZ(a){let[b,c]=z.useState(pX());return jF(()=>{a||c(a=>a??String(pY++))},[a]),a||(b?`radix-${b}`:"")}var p$="Collapsible",[p_,p0]=jI(p$),[p1,p2]=p_(p$),p3=z.forwardRef((a,b)=>{let{__scopeCollapsible:c,open:d,defaultOpen:e,disabled:f,onOpenChange:g,...h}=a,[i,j]=pW({prop:d,defaultProp:e??!1,onChange:g,caller:p$});return(0,y.jsx)(p1,{scope:c,disabled:f,contentId:pZ(),open:i,onOpenToggle:z.useCallback(()=>j(a=>!a),[j]),children:(0,y.jsx)(jD.div,{"data-state":p9(i),"data-disabled":f?"":void 0,...h,ref:b})})});p3.displayName=p$;var p4="CollapsibleTrigger",p5=z.forwardRef((a,b)=>{let{__scopeCollapsible:c,...d}=a,e=p2(p4,c);return(0,y.jsx)(jD.button,{type:"button","aria-controls":e.contentId,"aria-expanded":e.open||!1,"data-state":p9(e.open),"data-disabled":e.disabled?"":void 0,disabled:e.disabled,...d,ref:b,onClick:jM(a.onClick,e.onOpenToggle)})});p5.displayName=p4;var p6="CollapsibleContent",p7=z.forwardRef((a,b)=>{let{forceMount:c,...d}=a,e=p2(p6,a.__scopeCollapsible);return(0,y.jsx)(jG,{present:c||e.open,children:({present:a})=>(0,y.jsx)(p8,{...d,ref:b,present:a})})});p7.displayName=p6;var p8=z.forwardRef((a,b)=>{let{__scopeCollapsible:c,present:d,children:e,...f}=a,g=p2(p6,c),[h,i]=z.useState(d),j=z.useRef(null),k=iV(b,j),l=z.useRef(0),m=l.current,n=z.useRef(0),o=n.current,p=g.open||h,q=z.useRef(p),r=z.useRef(void 0);return z.useEffect(()=>{let a=requestAnimationFrame(()=>q.current=!1);return()=>cancelAnimationFrame(a)},[]),jF(()=>{let a=j.current;if(a){r.current=r.current||{transitionDuration:a.style.transitionDuration,animationName:a.style.animationName},a.style.transitionDuration="0s",a.style.animationName="none";let b=a.getBoundingClientRect();l.current=b.height,n.current=b.width,q.current||(a.style.transitionDuration=r.current.transitionDuration,a.style.animationName=r.current.animationName),i(d)}},[g.open,d]),(0,y.jsx)(jD.div,{"data-state":p9(g.open),"data-disabled":g.disabled?"":void 0,id:g.contentId,hidden:!p,...f,ref:k,style:{"--radix-collapsible-content-height":m?`${m}px`:void 0,"--radix-collapsible-content-width":o?`${o}px`:void 0,...a.style},children:p&&e})});function p9(a){return a?"open":"closed"}var qa="Accordion",qb=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[qc,qd,qe]=pR(qa),[qf,qg]=jI(qa,[qe,p0]),qh=p0(),qi=z.forwardRef((a,b)=>{let{type:c,...d}=a;return(0,y.jsx)(qc.Provider,{scope:a.__scopeAccordion,children:"multiple"===c?(0,y.jsx)(qo,{...d,ref:b}):(0,y.jsx)(qn,{...d,ref:b})})});qi.displayName=qa;var[qj,qk]=qf(qa),[ql,qm]=qf(qa,{collapsible:!1}),qn=z.forwardRef((a,b)=>{let{value:c,defaultValue:d,onValueChange:e=()=>{},collapsible:f=!1,...g}=a,[h,i]=pW({prop:c,defaultProp:d??"",onChange:e,caller:qa});return(0,y.jsx)(qj,{scope:a.__scopeAccordion,value:z.useMemo(()=>h?[h]:[],[h]),onItemOpen:i,onItemClose:z.useCallback(()=>f&&i(""),[f,i]),children:(0,y.jsx)(ql,{scope:a.__scopeAccordion,collapsible:f,children:(0,y.jsx)(qr,{...g,ref:b})})})}),qo=z.forwardRef((a,b)=>{let{value:c,defaultValue:d,onValueChange:e=()=>{},...f}=a,[g,h]=pW({prop:c,defaultProp:d??[],onChange:e,caller:qa}),i=z.useCallback(a=>h((b=[])=>[...b,a]),[h]),j=z.useCallback(a=>h((b=[])=>b.filter(b=>b!==a)),[h]);return(0,y.jsx)(qj,{scope:a.__scopeAccordion,value:g,onItemOpen:i,onItemClose:j,children:(0,y.jsx)(ql,{scope:a.__scopeAccordion,collapsible:!0,children:(0,y.jsx)(qr,{...f,ref:b})})})}),[qp,qq]=qf(qa),qr=z.forwardRef((a,b)=>{let{__scopeAccordion:c,disabled:d,dir:e,orientation:f="vertical",...g}=a,h=iV(z.useRef(null),b),i=qd(c),j="ltr"===jL(e),k=jM(a.onKeyDown,a=>{if(!qb.includes(a.key))return;let b=a.target,c=i().filter(a=>!a.ref.current?.disabled),d=c.findIndex(a=>a.ref.current===b),e=c.length;if(-1===d)return;a.preventDefault();let g=d,h=e-1,k=()=>{(g=d+1)>h&&(g=0)},l=()=>{(g=d-1)<0&&(g=h)};switch(a.key){case"Home":g=0;break;case"End":g=h;break;case"ArrowRight":"horizontal"===f&&(j?k():l());break;case"ArrowDown":"vertical"===f&&k();break;case"ArrowLeft":"horizontal"===f&&(j?l():k());break;case"ArrowUp":"vertical"===f&&l()}let m=g%e;c[m].ref.current?.focus()});return(0,y.jsx)(qp,{scope:c,disabled:d,direction:e,orientation:f,children:(0,y.jsx)(qc.Slot,{scope:c,children:(0,y.jsx)(jD.div,{...g,"data-orientation":f,ref:h,onKeyDown:d?void 0:k})})})}),qs="AccordionItem",[qt,qu]=qf(qs),qv=z.forwardRef((a,b)=>{let{__scopeAccordion:c,value:d,...e}=a,f=qq(qs,c),g=qk(qs,c),h=qh(c),i=pZ(),j=d&&g.value.includes(d)||!1,k=f.disabled||a.disabled;return(0,y.jsx)(qt,{scope:c,open:j,disabled:k,triggerId:i,children:(0,y.jsx)(p3,{"data-orientation":f.orientation,"data-state":qC(j),...h,...e,ref:b,disabled:k,open:j,onOpenChange:a=>{a?g.onItemOpen(d):g.onItemClose(d)}})})});qv.displayName=qs;var qw="AccordionHeader",qx=z.forwardRef((a,b)=>{let{__scopeAccordion:c,...d}=a,e=qq(qa,c),f=qu(qw,c);return(0,y.jsx)(jD.h3,{"data-orientation":e.orientation,"data-state":qC(f.open),"data-disabled":f.disabled?"":void 0,...d,ref:b})});qx.displayName=qw;var qy="AccordionTrigger",qz=z.forwardRef((a,b)=>{let{__scopeAccordion:c,...d}=a,e=qq(qa,c),f=qu(qy,c),g=qm(qy,c),h=qh(c);return(0,y.jsx)(qc.ItemSlot,{scope:c,children:(0,y.jsx)(p5,{"aria-disabled":f.open&&!g.collapsible||void 0,"data-orientation":e.orientation,id:f.triggerId,...h,...d,ref:b})})});qz.displayName=qy;var qA="AccordionContent",qB=z.forwardRef((a,b)=>{let{__scopeAccordion:c,...d}=a,e=qq(qa,c),f=qu(qA,c),g=qh(c);return(0,y.jsx)(p7,{role:"region","aria-labelledby":f.triggerId,"data-orientation":e.orientation,...g,...d,ref:b,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...a.style}})});function qC(a){return a?"open":"closed"}qB.displayName=qA;let qD=hD("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),qE=z.forwardRef(({className:a,...b},c)=>(0,y.jsx)(qv,{ref:c,className:iL("border-b",a),...b}));qE.displayName="AccordionItem";let qF=z.forwardRef(({className:a,children:b,...c},d)=>(0,y.jsx)(qx,{className:"flex",children:(0,y.jsxs)(qz,{ref:d,className:iL("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline text-left [&[data-state=open]>svg]:rotate-180",a),...c,children:[b,(0,y.jsx)(qD,{className:"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200"})]})}));qF.displayName=qz.displayName;let qG=z.forwardRef(({className:a,children:b,...c},d)=>(0,y.jsx)(qB,{ref:d,className:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...c,children:(0,y.jsx)("div",{className:iL("pb-4 pt-0",a),children:b})}));qG.displayName=qB.displayName;var qH="dismissableLayer.update",qI=z.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),qJ=z.forwardRef((a,b)=>{let{disableOutsidePointerEvents:c=!1,onEscapeKeyDown:d,onPointerDownOutside:e,onFocusOutside:f,onInteractOutside:g,onDismiss:h,...i}=a,j=z.useContext(qI),[k,l]=z.useState(null),m=k?.ownerDocument??globalThis?.document,[,n]=z.useState({}),o=iV(b,a=>l(a)),p=Array.from(j.layers),[q]=[...j.layersWithOutsidePointerEventsDisabled].slice(-1),r=p.indexOf(q),s=k?p.indexOf(k):-1,t=j.layersWithOutsidePointerEventsDisabled.size>0,u=s>=r,v=function(a,b=globalThis?.document){let c=jJ(a),d=z.useRef(!1),e=z.useRef(()=>{});return z.useEffect(()=>{let a=a=>{if(a.target&&!d.current){let d=function(){qL("dismissableLayer.pointerDownOutside",c,f,{discrete:!0})},f={originalEvent:a};"touch"===a.pointerType?(b.removeEventListener("click",e.current),e.current=d,b.addEventListener("click",e.current,{once:!0})):d()}else b.removeEventListener("click",e.current);d.current=!1},f=window.setTimeout(()=>{b.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(f),b.removeEventListener("pointerdown",a),b.removeEventListener("click",e.current)}},[b,c]),{onPointerDownCapture:()=>d.current=!0}}(a=>{let b=a.target,c=[...j.branches].some(a=>a.contains(b));u&&!c&&(e?.(a),g?.(a),a.defaultPrevented||h?.())},m),x=function(a,b=globalThis?.document){let c=jJ(a),d=z.useRef(!1);return z.useEffect(()=>{let a=a=>{a.target&&!d.current&&qL("dismissableLayer.focusOutside",c,{originalEvent:a},{discrete:!1})};return b.addEventListener("focusin",a),()=>b.removeEventListener("focusin",a)},[b,c]),{onFocusCapture:()=>d.current=!0,onBlurCapture:()=>d.current=!1}}(a=>{let b=a.target;![...j.branches].some(a=>a.contains(b))&&(f?.(a),g?.(a),a.defaultPrevented||h?.())},m);return!function(a,b=globalThis?.document){let c=jJ(a);z.useEffect(()=>{let a=a=>{"Escape"===a.key&&c(a)};return b.addEventListener("keydown",a,{capture:!0}),()=>b.removeEventListener("keydown",a,{capture:!0})},[c,b])}(a=>{s===j.layers.size-1&&(d?.(a),!a.defaultPrevented&&h&&(a.preventDefault(),h()))},m),z.useEffect(()=>{if(k)return c&&(0===j.layersWithOutsidePointerEventsDisabled.size&&(w=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),j.layersWithOutsidePointerEventsDisabled.add(k)),j.layers.add(k),qK(),()=>{c&&1===j.layersWithOutsidePointerEventsDisabled.size&&(m.body.style.pointerEvents=w)}},[k,m,c,j]),z.useEffect(()=>()=>{k&&(j.layers.delete(k),j.layersWithOutsidePointerEventsDisabled.delete(k),qK())},[k,j]),z.useEffect(()=>{let a=()=>n({});return document.addEventListener(qH,a),()=>document.removeEventListener(qH,a)},[]),(0,y.jsx)(jD.div,{...i,ref:o,style:{pointerEvents:t?u?"auto":"none":void 0,...a.style},onFocusCapture:jM(a.onFocusCapture,x.onFocusCapture),onBlurCapture:jM(a.onBlurCapture,x.onBlurCapture),onPointerDownCapture:jM(a.onPointerDownCapture,v.onPointerDownCapture)})});function qK(){let a=new CustomEvent(qH);document.dispatchEvent(a)}function qL(a,b,c,{discrete:d}){let e=c.originalEvent.target,f=new CustomEvent(a,{bubbles:!1,cancelable:!0,detail:c});b&&e.addEventListener(a,b,{once:!0}),d?jE(e,f):e.dispatchEvent(f)}qJ.displayName="DismissableLayer",z.forwardRef((a,b)=>{let c=z.useContext(qI),d=z.useRef(null),e=iV(b,d);return z.useEffect(()=>{let a=d.current;if(a)return c.branches.add(a),()=>{c.branches.delete(a)}},[c.branches]),(0,y.jsx)(jD.div,{...a,ref:e})}).displayName="DismissableLayerBranch";let qM=["top","right","bottom","left"],qN=Math.min,qO=Math.max,qP=Math.round,qQ=Math.floor,qR=a=>({x:a,y:a}),qS={left:"right",right:"left",bottom:"top",top:"bottom"},qT={start:"end",end:"start"};function qU(a,b){return"function"==typeof a?a(b):a}function qV(a){return a.split("-")[0]}function qW(a){return a.split("-")[1]}function qX(a){return"x"===a?"y":"x"}function qY(a){return"y"===a?"height":"width"}let qZ=new Set(["top","bottom"]);function q$(a){return qZ.has(qV(a))?"y":"x"}function q_(a){return a.replace(/start|end/g,a=>qT[a])}let q0=["left","right"],q1=["right","left"],q2=["top","bottom"],q3=["bottom","top"];function q4(a){return a.replace(/left|right|bottom|top/g,a=>qS[a])}function q5(a){return"number"!=typeof a?{top:0,right:0,bottom:0,left:0,...a}:{top:a,right:a,bottom:a,left:a}}function q6(a){let{x:b,y:c,width:d,height:e}=a;return{width:d,height:e,top:c,left:b,right:b+d,bottom:c+e,x:b,y:c}}function q7(a,b,c){let d,{reference:e,floating:f}=a,g=q$(b),h=qX(q$(b)),i=qY(h),j=qV(b),k="y"===g,l=e.x+e.width/2-f.width/2,m=e.y+e.height/2-f.height/2,n=e[i]/2-f[i]/2;switch(j){case"top":d={x:l,y:e.y-f.height};break;case"bottom":d={x:l,y:e.y+e.height};break;case"right":d={x:e.x+e.width,y:m};break;case"left":d={x:e.x-f.width,y:m};break;default:d={x:e.x,y:e.y}}switch(qW(b)){case"start":d[h]-=n*(c&&k?-1:1);break;case"end":d[h]+=n*(c&&k?-1:1)}return d}async function q8(a,b){var c;void 0===b&&(b={});let{x:d,y:e,platform:f,rects:g,elements:h,strategy:i}=a,{boundary:j="clippingAncestors",rootBoundary:k="viewport",elementContext:l="floating",altBoundary:m=!1,padding:n=0}=qU(b,a),o=q5(n),p=h[m?"floating"===l?"reference":"floating":l],q=q6(await f.getClippingRect({element:null==(c=await (null==f.isElement?void 0:f.isElement(p)))||c?p:p.contextElement||await (null==f.getDocumentElement?void 0:f.getDocumentElement(h.floating)),boundary:j,rootBoundary:k,strategy:i})),r="floating"===l?{x:d,y:e,width:g.floating.width,height:g.floating.height}:g.reference,s=await (null==f.getOffsetParent?void 0:f.getOffsetParent(h.floating)),t=await (null==f.isElement?void 0:f.isElement(s))&&await (null==f.getScale?void 0:f.getScale(s))||{x:1,y:1},u=q6(f.convertOffsetParentRelativeRectToViewportRelativeRect?await f.convertOffsetParentRelativeRectToViewportRelativeRect({elements:h,rect:r,offsetParent:s,strategy:i}):r);return{top:(q.top-u.top+o.top)/t.y,bottom:(u.bottom-q.bottom+o.bottom)/t.y,left:(q.left-u.left+o.left)/t.x,right:(u.right-q.right+o.right)/t.x}}let q9=async(a,b,c)=>{let{placement:d="bottom",strategy:e="absolute",middleware:f=[],platform:g}=c,h=f.filter(Boolean),i=await (null==g.isRTL?void 0:g.isRTL(b)),j=await g.getElementRects({reference:a,floating:b,strategy:e}),{x:k,y:l}=q7(j,d,i),m=d,n={},o=0;for(let c=0;c<h.length;c++){var p;let{name:f,fn:q}=h[c],{x:r,y:s,data:t,reset:u}=await q({x:k,y:l,initialPlacement:d,placement:m,strategy:e,middlewareData:n,rects:j,platform:{...g,detectOverflow:null!=(p=g.detectOverflow)?p:q8},elements:{reference:a,floating:b}});k=null!=r?r:k,l=null!=s?s:l,n={...n,[f]:{...n[f],...t}},u&&o<=50&&(o++,"object"==typeof u&&(u.placement&&(m=u.placement),u.rects&&(j=!0===u.rects?await g.getElementRects({reference:a,floating:b,strategy:e}):u.rects),{x:k,y:l}=q7(j,m,i)),c=-1)}return{x:k,y:l,placement:m,strategy:e,middlewareData:n}};function ra(a,b){return{top:a.top-b.height,right:a.right-b.width,bottom:a.bottom-b.height,left:a.left-b.width}}function rb(a){return qM.some(b=>a[b]>=0)}let rc=new Set(["left","top"]);async function rd(a,b){let{placement:c,platform:d,elements:e}=a,f=await (null==d.isRTL?void 0:d.isRTL(e.floating)),g=qV(c),h=qW(c),i="y"===q$(c),j=rc.has(g)?-1:1,k=f&&i?-1:1,l=qU(b,a),{mainAxis:m,crossAxis:n,alignmentAxis:o}="number"==typeof l?{mainAxis:l,crossAxis:0,alignmentAxis:null}:{mainAxis:l.mainAxis||0,crossAxis:l.crossAxis||0,alignmentAxis:l.alignmentAxis};return h&&"number"==typeof o&&(n="end"===h?-1*o:o),i?{x:n*k,y:m*j}:{x:m*j,y:n*k}}function re(){return"undefined"!=typeof window}function rf(a){return ri(a)?(a.nodeName||"").toLowerCase():"#document"}function rg(a){var b;return(null==a||null==(b=a.ownerDocument)?void 0:b.defaultView)||window}function rh(a){var b;return null==(b=(ri(a)?a.ownerDocument:a.document)||window.document)?void 0:b.documentElement}function ri(a){return!!re()&&(a instanceof Node||a instanceof rg(a).Node)}function rj(a){return!!re()&&(a instanceof Element||a instanceof rg(a).Element)}function rk(a){return!!re()&&(a instanceof HTMLElement||a instanceof rg(a).HTMLElement)}function rl(a){return!!re()&&"undefined"!=typeof ShadowRoot&&(a instanceof ShadowRoot||a instanceof rg(a).ShadowRoot)}let rm=new Set(["inline","contents"]);function rn(a){let{overflow:b,overflowX:c,overflowY:d,display:e}=ry(a);return/auto|scroll|overlay|hidden|clip/.test(b+d+c)&&!rm.has(e)}let ro=new Set(["table","td","th"]),rp=[":popover-open",":modal"];function rq(a){return rp.some(b=>{try{return a.matches(b)}catch(a){return!1}})}let rr=["transform","translate","scale","rotate","perspective"],rs=["transform","translate","scale","rotate","perspective","filter"],rt=["paint","layout","strict","content"];function ru(a){let b=rv(),c=rj(a)?ry(a):a;return rr.some(a=>!!c[a]&&"none"!==c[a])||!!c.containerType&&"normal"!==c.containerType||!b&&!!c.backdropFilter&&"none"!==c.backdropFilter||!b&&!!c.filter&&"none"!==c.filter||rs.some(a=>(c.willChange||"").includes(a))||rt.some(a=>(c.contain||"").includes(a))}function rv(){return"undefined"!=typeof CSS&&!!CSS.supports&&CSS.supports("-webkit-backdrop-filter","none")}let rw=new Set(["html","body","#document"]);function rx(a){return rw.has(rf(a))}function ry(a){return rg(a).getComputedStyle(a)}function rz(a){return rj(a)?{scrollLeft:a.scrollLeft,scrollTop:a.scrollTop}:{scrollLeft:a.scrollX,scrollTop:a.scrollY}}function rA(a){if("html"===rf(a))return a;let b=a.assignedSlot||a.parentNode||rl(a)&&a.host||rh(a);return rl(b)?b.host:b}function rB(a,b,c){var d;void 0===b&&(b=[]),void 0===c&&(c=!0);let e=function a(b){let c=rA(b);return rx(c)?b.ownerDocument?b.ownerDocument.body:b.body:rk(c)&&rn(c)?c:a(c)}(a),f=e===(null==(d=a.ownerDocument)?void 0:d.body),g=rg(e);if(f){let a=rC(g);return b.concat(g,g.visualViewport||[],rn(e)?e:[],a&&c?rB(a):[])}return b.concat(e,rB(e,[],c))}function rC(a){return a.parent&&Object.getPrototypeOf(a.parent)?a.frameElement:null}function rD(a){let b=ry(a),c=parseFloat(b.width)||0,d=parseFloat(b.height)||0,e=rk(a),f=e?a.offsetWidth:c,g=e?a.offsetHeight:d,h=qP(c)!==f||qP(d)!==g;return h&&(c=f,d=g),{width:c,height:d,$:h}}function rE(a){return rj(a)?a:a.contextElement}function rF(a){let b=rE(a);if(!rk(b))return qR(1);let c=b.getBoundingClientRect(),{width:d,height:e,$:f}=rD(b),g=(f?qP(c.width):c.width)/d,h=(f?qP(c.height):c.height)/e;return g&&Number.isFinite(g)||(g=1),h&&Number.isFinite(h)||(h=1),{x:g,y:h}}let rG=qR(0);function rH(a){let b=rg(a);return rv()&&b.visualViewport?{x:b.visualViewport.offsetLeft,y:b.visualViewport.offsetTop}:rG}function rI(a,b,c,d){var e;void 0===b&&(b=!1),void 0===c&&(c=!1);let f=a.getBoundingClientRect(),g=rE(a),h=qR(1);b&&(d?rj(d)&&(h=rF(d)):h=rF(a));let i=(void 0===(e=c)&&(e=!1),d&&(!e||d===rg(g))&&e)?rH(g):qR(0),j=(f.left+i.x)/h.x,k=(f.top+i.y)/h.y,l=f.width/h.x,m=f.height/h.y;if(g){let a=rg(g),b=d&&rj(d)?rg(d):d,c=a,e=rC(c);for(;e&&d&&b!==c;){let a=rF(e),b=e.getBoundingClientRect(),d=ry(e),f=b.left+(e.clientLeft+parseFloat(d.paddingLeft))*a.x,g=b.top+(e.clientTop+parseFloat(d.paddingTop))*a.y;j*=a.x,k*=a.y,l*=a.x,m*=a.y,j+=f,k+=g,e=rC(c=rg(e))}}return q6({width:l,height:m,x:j,y:k})}function rJ(a,b){let c=rz(a).scrollLeft;return b?b.left+c:rI(rh(a)).left+c}function rK(a,b){let c=a.getBoundingClientRect();return{x:c.left+b.scrollLeft-rJ(a,c),y:c.top+b.scrollTop}}let rL=new Set(["absolute","fixed"]);function rM(a,b,c){let d;if("viewport"===b)d=function(a,b){let c=rg(a),d=rh(a),e=c.visualViewport,f=d.clientWidth,g=d.clientHeight,h=0,i=0;if(e){f=e.width,g=e.height;let a=rv();(!a||a&&"fixed"===b)&&(h=e.offsetLeft,i=e.offsetTop)}let j=rJ(d);if(j<=0){let a=d.ownerDocument,b=a.body,c=getComputedStyle(b),e="CSS1Compat"===a.compatMode&&parseFloat(c.marginLeft)+parseFloat(c.marginRight)||0,g=Math.abs(d.clientWidth-b.clientWidth-e);g<=25&&(f-=g)}else j<=25&&(f+=j);return{width:f,height:g,x:h,y:i}}(a,c);else if("document"===b)d=function(a){let b=rh(a),c=rz(a),d=a.ownerDocument.body,e=qO(b.scrollWidth,b.clientWidth,d.scrollWidth,d.clientWidth),f=qO(b.scrollHeight,b.clientHeight,d.scrollHeight,d.clientHeight),g=-c.scrollLeft+rJ(a),h=-c.scrollTop;return"rtl"===ry(d).direction&&(g+=qO(b.clientWidth,d.clientWidth)-e),{width:e,height:f,x:g,y:h}}(rh(a));else if(rj(b))d=function(a,b){let c=rI(a,!0,"fixed"===b),d=c.top+a.clientTop,e=c.left+a.clientLeft,f=rk(a)?rF(a):qR(1),g=a.clientWidth*f.x,h=a.clientHeight*f.y;return{width:g,height:h,x:e*f.x,y:d*f.y}}(b,c);else{let c=rH(a);d={x:b.x-c.x,y:b.y-c.y,width:b.width,height:b.height}}return q6(d)}function rN(a){return"static"===ry(a).position}function rO(a,b){if(!rk(a)||"fixed"===ry(a).position)return null;if(b)return b(a);let c=a.offsetParent;return rh(a)===c&&(c=c.ownerDocument.body),c}function rP(a,b){var c;let d=rg(a);if(rq(a))return d;if(!rk(a)){let b=rA(a);for(;b&&!rx(b);){if(rj(b)&&!rN(b))return b;b=rA(b)}return d}let e=rO(a,b);for(;e&&(c=e,ro.has(rf(c)))&&rN(e);)e=rO(e,b);return e&&rx(e)&&rN(e)&&!ru(e)?d:e||function(a){let b=rA(a);for(;rk(b)&&!rx(b);){if(ru(b))return b;if(rq(b))break;b=rA(b)}return null}(a)||d}let rQ=async function(a){let b=this.getOffsetParent||rP,c=this.getDimensions,d=await c(a.floating);return{reference:function(a,b,c){let d=rk(b),e=rh(b),f="fixed"===c,g=rI(a,!0,f,b),h={scrollLeft:0,scrollTop:0},i=qR(0);if(d||!d&&!f)if(("body"!==rf(b)||rn(e))&&(h=rz(b)),d){let a=rI(b,!0,f,b);i.x=a.x+b.clientLeft,i.y=a.y+b.clientTop}else e&&(i.x=rJ(e));f&&!d&&e&&(i.x=rJ(e));let j=!e||d||f?qR(0):rK(e,h);return{x:g.left+h.scrollLeft-i.x-j.x,y:g.top+h.scrollTop-i.y-j.y,width:g.width,height:g.height}}(a.reference,await b(a.floating),a.strategy),floating:{x:0,y:0,width:d.width,height:d.height}}},rR={convertOffsetParentRelativeRectToViewportRelativeRect:function(a){let{elements:b,rect:c,offsetParent:d,strategy:e}=a,f="fixed"===e,g=rh(d),h=!!b&&rq(b.floating);if(d===g||h&&f)return c;let i={scrollLeft:0,scrollTop:0},j=qR(1),k=qR(0),l=rk(d);if((l||!l&&!f)&&(("body"!==rf(d)||rn(g))&&(i=rz(d)),rk(d))){let a=rI(d);j=rF(d),k.x=a.x+d.clientLeft,k.y=a.y+d.clientTop}let m=!g||l||f?qR(0):rK(g,i);return{width:c.width*j.x,height:c.height*j.y,x:c.x*j.x-i.scrollLeft*j.x+k.x+m.x,y:c.y*j.y-i.scrollTop*j.y+k.y+m.y}},getDocumentElement:rh,getClippingRect:function(a){let{element:b,boundary:c,rootBoundary:d,strategy:e}=a,f=[..."clippingAncestors"===c?rq(b)?[]:function(a,b){let c=b.get(a);if(c)return c;let d=rB(a,[],!1).filter(a=>rj(a)&&"body"!==rf(a)),e=null,f="fixed"===ry(a).position,g=f?rA(a):a;for(;rj(g)&&!rx(g);){let b=ry(g),c=ru(g);c||"fixed"!==b.position||(e=null),(f?!c&&!e:!c&&"static"===b.position&&!!e&&rL.has(e.position)||rn(g)&&!c&&function a(b,c){let d=rA(b);return!(d===c||!rj(d)||rx(d))&&("fixed"===ry(d).position||a(d,c))}(a,g))?d=d.filter(a=>a!==g):e=b,g=rA(g)}return b.set(a,d),d}(b,this._c):[].concat(c),d],g=f[0],h=f.reduce((a,c)=>{let d=rM(b,c,e);return a.top=qO(d.top,a.top),a.right=qN(d.right,a.right),a.bottom=qN(d.bottom,a.bottom),a.left=qO(d.left,a.left),a},rM(b,g,e));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}},getOffsetParent:rP,getElementRects:rQ,getClientRects:function(a){return Array.from(a.getClientRects())},getDimensions:function(a){let{width:b,height:c}=rD(a);return{width:b,height:c}},getScale:rF,isElement:rj,isRTL:function(a){return"rtl"===ry(a).direction}};function rS(a,b){return a.x===b.x&&a.y===b.y&&a.width===b.width&&a.height===b.height}let rT=a=>({name:"arrow",options:a,async fn(b){let{x:c,y:d,placement:e,rects:f,platform:g,elements:h,middlewareData:i}=b,{element:j,padding:k=0}=qU(a,b)||{};if(null==j)return{};let l=q5(k),m={x:c,y:d},n=qX(q$(e)),o=qY(n),p=await g.getDimensions(j),q="y"===n,r=q?"clientHeight":"clientWidth",s=f.reference[o]+f.reference[n]-m[n]-f.floating[o],t=m[n]-f.reference[n],u=await (null==g.getOffsetParent?void 0:g.getOffsetParent(j)),v=u?u[r]:0;v&&await (null==g.isElement?void 0:g.isElement(u))||(v=h.floating[r]||f.floating[o]);let w=v/2-p[o]/2-1,x=qN(l[q?"top":"left"],w),y=qN(l[q?"bottom":"right"],w),z=v-p[o]-y,A=v/2-p[o]/2+(s/2-t/2),B=qO(x,qN(A,z)),C=!i.arrow&&null!=qW(e)&&A!==B&&f.reference[o]/2-(A<x?x:y)-p[o]/2<0,D=C?A<x?A-x:A-z:0;return{[n]:m[n]+D,data:{[n]:B,centerOffset:A-B-D,...C&&{alignmentOffset:D}},reset:C}}});var rU="undefined"!=typeof document?z.useLayoutEffect:function(){};function rV(a,b){let c,d,e;if(a===b)return!0;if(typeof a!=typeof b)return!1;if("function"==typeof a&&a.toString()===b.toString())return!0;if(a&&b&&"object"==typeof a){if(Array.isArray(a)){if((c=a.length)!==b.length)return!1;for(d=c;0!=d--;)if(!rV(a[d],b[d]))return!1;return!0}if((c=(e=Object.keys(a)).length)!==Object.keys(b).length)return!1;for(d=c;0!=d--;)if(!({}).hasOwnProperty.call(b,e[d]))return!1;for(d=c;0!=d--;){let c=e[d];if(("_owner"!==c||!a.$$typeof)&&!rV(a[c],b[c]))return!1}return!0}return a!=a&&b!=b}function rW(a){return"undefined"==typeof window?1:(a.ownerDocument.defaultView||window).devicePixelRatio||1}function rX(a,b){let c=rW(a);return Math.round(b*c)/c}function rY(a){let b=z.useRef(a);return rU(()=>{b.current=a}),b}var rZ=z.forwardRef((a,b)=>{let{children:c,width:d=10,height:e=5,...f}=a;return(0,y.jsx)(jD.svg,{...f,ref:b,width:d,height:e,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:a.asChild?c:(0,y.jsx)("polygon",{points:"0,0 30,0 15,10"})})});function r$(a){let[b,c]=z.useState(void 0);return jF(()=>{if(a){c({width:a.offsetWidth,height:a.offsetHeight});let b=new ResizeObserver(b=>{let d,e;if(!Array.isArray(b)||!b.length)return;let f=b[0];if("borderBoxSize"in f){let a=f.borderBoxSize,b=Array.isArray(a)?a[0]:a;d=b.inlineSize,e=b.blockSize}else d=a.offsetWidth,e=a.offsetHeight;c({width:d,height:e})});return b.observe(a,{box:"border-box"}),()=>b.unobserve(a)}c(void 0)},[a]),b}rZ.displayName="Arrow";var r_="Popper",[r0,r1]=jI(r_),[r2,r3]=r0(r_),r4=a=>{let{__scopePopper:b,children:c}=a,[d,e]=z.useState(null);return(0,y.jsx)(r2,{scope:b,anchor:d,onAnchorChange:e,children:c})};r4.displayName=r_;var r5="PopperAnchor",r6=z.forwardRef((a,b)=>{let{__scopePopper:c,virtualRef:d,...e}=a,f=r3(r5,c),g=z.useRef(null),h=iV(b,g),i=z.useRef(null);return z.useEffect(()=>{let a=i.current;i.current=d?.current||g.current,a!==i.current&&f.onAnchorChange(i.current)}),d?null:(0,y.jsx)(jD.div,{...e,ref:h})});r6.displayName=r5;var r7="PopperContent",[r8,r9]=r0(r7),sa=z.forwardRef((a,b)=>{let{__scopePopper:c,side:d="bottom",sideOffset:e=0,align:f="center",alignOffset:g=0,arrowPadding:h=0,avoidCollisions:i=!0,collisionBoundary:j=[],collisionPadding:k=0,sticky:l="partial",hideWhenDetached:m=!1,updatePositionStrategy:n="optimized",onPlaced:o,...p}=a,q=r3(r7,c),[r,s]=z.useState(null),t=iV(b,a=>s(a)),[u,v]=z.useState(null),w=r$(u),x=w?.width??0,A=w?.height??0,B="number"==typeof k?k:{top:0,right:0,bottom:0,left:0,...k},C=Array.isArray(j)?j:[j],D=C.length>0,E={padding:B,boundary:C.filter(se),altBoundary:D},{refs:F,floatingStyles:G,placement:H,isPositioned:I,middlewareData:J}=function(a){void 0===a&&(a={});let{placement:b="bottom",strategy:c="absolute",middleware:d=[],platform:e,elements:{reference:f,floating:g}={},transform:h=!0,whileElementsMounted:i,open:j}=a,[k,l]=z.useState({x:0,y:0,strategy:c,placement:b,middlewareData:{},isPositioned:!1}),[m,n]=z.useState(d);rV(m,d)||n(d);let[o,p]=z.useState(null),[q,r]=z.useState(null),s=z.useCallback(a=>{a!==w.current&&(w.current=a,p(a))},[]),t=z.useCallback(a=>{a!==x.current&&(x.current=a,r(a))},[]),u=f||o,v=g||q,w=z.useRef(null),x=z.useRef(null),y=z.useRef(k),A=null!=i,B=rY(i),C=rY(e),D=rY(j),E=z.useCallback(()=>{if(!w.current||!x.current)return;let a={placement:b,strategy:c,middleware:m};C.current&&(a.platform=C.current),((a,b,c)=>{let d=new Map,e={platform:rR,...c},f={...e.platform,_c:d};return q9(a,b,{...e,platform:f})})(w.current,x.current,a).then(a=>{let b={...a,isPositioned:!1!==D.current};F.current&&!rV(y.current,b)&&(y.current=b,jA.flushSync(()=>{l(b)}))})},[m,b,c,C,D]);rU(()=>{!1===j&&y.current.isPositioned&&(y.current.isPositioned=!1,l(a=>({...a,isPositioned:!1})))},[j]);let F=z.useRef(!1);rU(()=>(F.current=!0,()=>{F.current=!1}),[]),rU(()=>{if(u&&(w.current=u),v&&(x.current=v),u&&v){if(B.current)return B.current(u,v,E);E()}},[u,v,E,B,A]);let G=z.useMemo(()=>({reference:w,floating:x,setReference:s,setFloating:t}),[s,t]),H=z.useMemo(()=>({reference:u,floating:v}),[u,v]),I=z.useMemo(()=>{let a={position:c,left:0,top:0};if(!H.floating)return a;let b=rX(H.floating,k.x),d=rX(H.floating,k.y);return h?{...a,transform:"translate("+b+"px, "+d+"px)",...rW(H.floating)>=1.5&&{willChange:"transform"}}:{position:c,left:b,top:d}},[c,h,H.floating,k.x,k.y]);return z.useMemo(()=>({...k,update:E,refs:G,elements:H,floatingStyles:I}),[k,E,G,H,I])}({strategy:"fixed",placement:d+("center"!==f?"-"+f:""),whileElementsMounted:(...a)=>(function(a,b,c,d){let e;void 0===d&&(d={});let{ancestorScroll:f=!0,ancestorResize:g=!0,elementResize:h="function"==typeof ResizeObserver,layoutShift:i="function"==typeof IntersectionObserver,animationFrame:j=!1}=d,k=rE(a),l=f||g?[...k?rB(k):[],...rB(b)]:[];l.forEach(a=>{f&&a.addEventListener("scroll",c,{passive:!0}),g&&a.addEventListener("resize",c)});let m=k&&i?function(a,b){let c,d=null,e=rh(a);function f(){var a;clearTimeout(c),null==(a=d)||a.disconnect(),d=null}return!function g(h,i){void 0===h&&(h=!1),void 0===i&&(i=1),f();let j=a.getBoundingClientRect(),{left:k,top:l,width:m,height:n}=j;if(h||b(),!m||!n)return;let o=qQ(l),p=qQ(e.clientWidth-(k+m)),q={rootMargin:-o+"px "+-p+"px "+-qQ(e.clientHeight-(l+n))+"px "+-qQ(k)+"px",threshold:qO(0,qN(1,i))||1},r=!0;function s(b){let d=b[0].intersectionRatio;if(d!==i){if(!r)return g();d?g(!1,d):c=setTimeout(()=>{g(!1,1e-7)},1e3)}1!==d||rS(j,a.getBoundingClientRect())||g(),r=!1}try{d=new IntersectionObserver(s,{...q,root:e.ownerDocument})}catch(a){d=new IntersectionObserver(s,q)}d.observe(a)}(!0),f}(k,c):null,n=-1,o=null;h&&(o=new ResizeObserver(a=>{let[d]=a;d&&d.target===k&&o&&(o.unobserve(b),cancelAnimationFrame(n),n=requestAnimationFrame(()=>{var a;null==(a=o)||a.observe(b)})),c()}),k&&!j&&o.observe(k),o.observe(b));let p=j?rI(a):null;return j&&function b(){let d=rI(a);p&&!rS(p,d)&&c(),p=d,e=requestAnimationFrame(b)}(),c(),()=>{var a;l.forEach(a=>{f&&a.removeEventListener("scroll",c),g&&a.removeEventListener("resize",c)}),null==m||m(),null==(a=o)||a.disconnect(),o=null,j&&cancelAnimationFrame(e)}})(...a,{animationFrame:"always"===n}),elements:{reference:q.anchor},middleware:[((a,b)=>({...function(a){return void 0===a&&(a=0),{name:"offset",options:a,async fn(b){var c,d;let{x:e,y:f,placement:g,middlewareData:h}=b,i=await rd(b,a);return g===(null==(c=h.offset)?void 0:c.placement)&&null!=(d=h.arrow)&&d.alignmentOffset?{}:{x:e+i.x,y:f+i.y,data:{...i,placement:g}}}}}(a),options:[a,b]}))({mainAxis:e+A,alignmentAxis:g}),i&&((a,b)=>({...function(a){return void 0===a&&(a={}),{name:"shift",options:a,async fn(b){let{x:c,y:d,placement:e,platform:f}=b,{mainAxis:g=!0,crossAxis:h=!1,limiter:i={fn:a=>{let{x:b,y:c}=a;return{x:b,y:c}}},...j}=qU(a,b),k={x:c,y:d},l=await f.detectOverflow(b,j),m=q$(qV(e)),n=qX(m),o=k[n],p=k[m];if(g){let a="y"===n?"top":"left",b="y"===n?"bottom":"right",c=o+l[a],d=o-l[b];o=qO(c,qN(o,d))}if(h){let a="y"===m?"top":"left",b="y"===m?"bottom":"right",c=p+l[a],d=p-l[b];p=qO(c,qN(p,d))}let q=i.fn({...b,[n]:o,[m]:p});return{...q,data:{x:q.x-c,y:q.y-d,enabled:{[n]:g,[m]:h}}}}}}(a),options:[a,b]}))({mainAxis:!0,crossAxis:!1,limiter:"partial"===l?((a,b)=>({...function(a){return void 0===a&&(a={}),{options:a,fn(b){let{x:c,y:d,placement:e,rects:f,middlewareData:g}=b,{offset:h=0,mainAxis:i=!0,crossAxis:j=!0}=qU(a,b),k={x:c,y:d},l=q$(e),m=qX(l),n=k[m],o=k[l],p=qU(h,b),q="number"==typeof p?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(i){let a="y"===m?"height":"width",b=f.reference[m]-f.floating[a]+q.mainAxis,c=f.reference[m]+f.reference[a]-q.mainAxis;n<b?n=b:n>c&&(n=c)}if(j){var r,s;let a="y"===m?"width":"height",b=rc.has(qV(e)),c=f.reference[l]-f.floating[a]+(b&&(null==(r=g.offset)?void 0:r[l])||0)+(b?0:q.crossAxis),d=f.reference[l]+f.reference[a]+(b?0:(null==(s=g.offset)?void 0:s[l])||0)-(b?q.crossAxis:0);o<c?o=c:o>d&&(o=d)}return{[m]:n,[l]:o}}}}(a),options:[a,b]}))():void 0,...E}),i&&((a,b)=>({...function(a){return void 0===a&&(a={}),{name:"flip",options:a,async fn(b){var c,d,e,f,g;let{placement:h,middlewareData:i,rects:j,initialPlacement:k,platform:l,elements:m}=b,{mainAxis:n=!0,crossAxis:o=!0,fallbackPlacements:p,fallbackStrategy:q="bestFit",fallbackAxisSideDirection:r="none",flipAlignment:s=!0,...t}=qU(a,b);if(null!=(c=i.arrow)&&c.alignmentOffset)return{};let u=qV(h),v=q$(k),w=qV(k)===k,x=await (null==l.isRTL?void 0:l.isRTL(m.floating)),y=p||(w||!s?[q4(k)]:function(a){let b=q4(a);return[q_(a),b,q_(b)]}(k)),z="none"!==r;!p&&z&&y.push(...function(a,b,c,d){let e=qW(a),f=function(a,b,c){switch(a){case"top":case"bottom":if(c)return b?q1:q0;return b?q0:q1;case"left":case"right":return b?q2:q3;default:return[]}}(qV(a),"start"===c,d);return e&&(f=f.map(a=>a+"-"+e),b&&(f=f.concat(f.map(q_)))),f}(k,s,r,x));let A=[k,...y],B=await l.detectOverflow(b,t),C=[],D=(null==(d=i.flip)?void 0:d.overflows)||[];if(n&&C.push(B[u]),o){let a=function(a,b,c){void 0===c&&(c=!1);let d=qW(a),e=qX(q$(a)),f=qY(e),g="x"===e?d===(c?"end":"start")?"right":"left":"start"===d?"bottom":"top";return b.reference[f]>b.floating[f]&&(g=q4(g)),[g,q4(g)]}(h,j,x);C.push(B[a[0]],B[a[1]])}if(D=[...D,{placement:h,overflows:C}],!C.every(a=>a<=0)){let a=((null==(e=i.flip)?void 0:e.index)||0)+1,b=A[a];if(b&&("alignment"!==o||v===q$(b)||D.every(a=>q$(a.placement)!==v||a.overflows[0]>0)))return{data:{index:a,overflows:D},reset:{placement:b}};let c=null==(f=D.filter(a=>a.overflows[0]<=0).sort((a,b)=>a.overflows[1]-b.overflows[1])[0])?void 0:f.placement;if(!c)switch(q){case"bestFit":{let a=null==(g=D.filter(a=>{if(z){let b=q$(a.placement);return b===v||"y"===b}return!0}).map(a=>[a.placement,a.overflows.filter(a=>a>0).reduce((a,b)=>a+b,0)]).sort((a,b)=>a[1]-b[1])[0])?void 0:g[0];a&&(c=a);break}case"initialPlacement":c=k}if(h!==c)return{reset:{placement:c}}}return{}}}}(a),options:[a,b]}))({...E}),((a,b)=>({...function(a){return void 0===a&&(a={}),{name:"size",options:a,async fn(b){var c,d;let e,f,{placement:g,rects:h,platform:i,elements:j}=b,{apply:k=()=>{},...l}=qU(a,b),m=await i.detectOverflow(b,l),n=qV(g),o=qW(g),p="y"===q$(g),{width:q,height:r}=h.floating;"top"===n||"bottom"===n?(e=n,f=o===(await (null==i.isRTL?void 0:i.isRTL(j.floating))?"start":"end")?"left":"right"):(f=n,e="end"===o?"top":"bottom");let s=r-m.top-m.bottom,t=q-m.left-m.right,u=qN(r-m[e],s),v=qN(q-m[f],t),w=!b.middlewareData.shift,x=u,y=v;if(null!=(c=b.middlewareData.shift)&&c.enabled.x&&(y=t),null!=(d=b.middlewareData.shift)&&d.enabled.y&&(x=s),w&&!o){let a=qO(m.left,0),b=qO(m.right,0),c=qO(m.top,0),d=qO(m.bottom,0);p?y=q-2*(0!==a||0!==b?a+b:qO(m.left,m.right)):x=r-2*(0!==c||0!==d?c+d:qO(m.top,m.bottom))}await k({...b,availableWidth:y,availableHeight:x});let z=await i.getDimensions(j.floating);return q!==z.width||r!==z.height?{reset:{rects:!0}}:{}}}}(a),options:[a,b]}))({...E,apply:({elements:a,rects:b,availableWidth:c,availableHeight:d})=>{let{width:e,height:f}=b.reference,g=a.floating.style;g.setProperty("--radix-popper-available-width",`${c}px`),g.setProperty("--radix-popper-available-height",`${d}px`),g.setProperty("--radix-popper-anchor-width",`${e}px`),g.setProperty("--radix-popper-anchor-height",`${f}px`)}}),u&&((a,b)=>({...(a=>({name:"arrow",options:a,fn(b){let{element:c,padding:d}="function"==typeof a?a(b):a;return c&&({}).hasOwnProperty.call(c,"current")?null!=c.current?rT({element:c.current,padding:d}).fn(b):{}:c?rT({element:c,padding:d}).fn(b):{}}}))(a),options:[a,b]}))({element:u,padding:h}),sf({arrowWidth:x,arrowHeight:A}),m&&((a,b)=>({...function(a){return void 0===a&&(a={}),{name:"hide",options:a,async fn(b){let{rects:c,platform:d}=b,{strategy:e="referenceHidden",...f}=qU(a,b);switch(e){case"referenceHidden":{let a=ra(await d.detectOverflow(b,{...f,elementContext:"reference"}),c.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:rb(a)}}}case"escaped":{let a=ra(await d.detectOverflow(b,{...f,altBoundary:!0}),c.floating);return{data:{escapedOffsets:a,escaped:rb(a)}}}default:return{}}}}}(a),options:[a,b]}))({strategy:"referenceHidden",...E})]}),[K,L]=sg(H),M=jJ(o);jF(()=>{I&&M?.()},[I,M]);let N=J.arrow?.x,O=J.arrow?.y,P=J.arrow?.centerOffset!==0,[Q,R]=z.useState();return jF(()=>{r&&R(window.getComputedStyle(r).zIndex)},[r]),(0,y.jsx)("div",{ref:F.setFloating,"data-radix-popper-content-wrapper":"",style:{...G,transform:I?G.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Q,"--radix-popper-transform-origin":[J.transformOrigin?.x,J.transformOrigin?.y].join(" "),...J.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:a.dir,children:(0,y.jsx)(r8,{scope:c,placedSide:K,onArrowChange:v,arrowX:N,arrowY:O,shouldHideArrow:P,children:(0,y.jsx)(jD.div,{"data-side":K,"data-align":L,...p,ref:t,style:{...p.style,animation:I?void 0:"none"}})})})});sa.displayName=r7;var sb="PopperArrow",sc={top:"bottom",right:"left",bottom:"top",left:"right"},sd=z.forwardRef(function(a,b){let{__scopePopper:c,...d}=a,e=r9(sb,c),f=sc[e.placedSide];return(0,y.jsx)("span",{ref:e.onArrowChange,style:{position:"absolute",left:e.arrowX,top:e.arrowY,[f]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[e.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[e.placedSide],visibility:e.shouldHideArrow?"hidden":void 0},children:(0,y.jsx)(rZ,{...d,ref:b,style:{...d.style,display:"block"}})})});function se(a){return null!==a}sd.displayName=sb;var sf=a=>({name:"transformOrigin",options:a,fn(b){let{placement:c,rects:d,middlewareData:e}=b,f=e.arrow?.centerOffset!==0,g=f?0:a.arrowWidth,h=f?0:a.arrowHeight,[i,j]=sg(c),k={start:"0%",center:"50%",end:"100%"}[j],l=(e.arrow?.x??0)+g/2,m=(e.arrow?.y??0)+h/2,n="",o="";return"bottom"===i?(n=f?k:`${l}px`,o=`${-h}px`):"top"===i?(n=f?k:`${l}px`,o=`${d.floating.height+h}px`):"right"===i?(n=`${-h}px`,o=f?k:`${m}px`):"left"===i&&(n=`${d.floating.width+h}px`,o=f?k:`${m}px`),{data:{x:n,y:o}}}});function sg(a){let[b,c="center"]=a.split("-");return[b,c]}var sh=z.forwardRef((a,b)=>{let{container:c,...d}=a,[e,f]=z.useState(!1);jF(()=>f(!0),[]);let g=c||e&&globalThis?.document?.body;return g?jA.createPortal((0,y.jsx)(jD.div,{...d,ref:b}),g):null});sh.displayName="Portal";var si=Symbol("radix.slottable"),sj=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),sk=z.forwardRef((a,b)=>(0,y.jsx)(jD.span,{...a,ref:b,style:{...sj,...a.style}}));sk.displayName="VisuallyHidden";var[sl,sm]=jI("Tooltip",[r1]),sn=r1(),so="TooltipProvider",sp="tooltip.open",[sq,sr]=sl(so),ss=a=>{let{__scopeTooltip:b,delayDuration:c=700,skipDelayDuration:d=300,disableHoverableContent:e=!1,children:f}=a,g=z.useRef(!0),h=z.useRef(!1),i=z.useRef(0);return z.useEffect(()=>{let a=i.current;return()=>window.clearTimeout(a)},[]),(0,y.jsx)(sq,{scope:b,isOpenDelayedRef:g,delayDuration:c,onOpen:z.useCallback(()=>{window.clearTimeout(i.current),g.current=!1},[]),onClose:z.useCallback(()=>{window.clearTimeout(i.current),i.current=window.setTimeout(()=>g.current=!0,d)},[d]),isPointerInTransitRef:h,onPointerInTransitChange:z.useCallback(a=>{h.current=a},[]),disableHoverableContent:e,children:f})};ss.displayName=so;var st="Tooltip",[su,sv]=sl(st),sw="TooltipTrigger";z.forwardRef((a,b)=>{let{__scopeTooltip:c,...d}=a,e=sv(sw,c),f=sr(sw,c),g=sn(c),h=iV(b,z.useRef(null),e.onTriggerChange),i=z.useRef(!1),j=z.useRef(!1),k=z.useCallback(()=>i.current=!1,[]);return z.useEffect(()=>()=>document.removeEventListener("pointerup",k),[k]),(0,y.jsx)(r6,{asChild:!0,...g,children:(0,y.jsx)(jD.button,{"aria-describedby":e.open?e.contentId:void 0,"data-state":e.stateAttribute,...d,ref:h,onPointerMove:jM(a.onPointerMove,a=>{"touch"!==a.pointerType&&(j.current||f.isPointerInTransitRef.current||(e.onTriggerEnter(),j.current=!0))}),onPointerLeave:jM(a.onPointerLeave,()=>{e.onTriggerLeave(),j.current=!1}),onPointerDown:jM(a.onPointerDown,()=>{e.open&&e.onClose(),i.current=!0,document.addEventListener("pointerup",k,{once:!0})}),onFocus:jM(a.onFocus,()=>{i.current||e.onOpen()}),onBlur:jM(a.onBlur,e.onClose),onClick:jM(a.onClick,e.onClose)})})}).displayName=sw;var sx="TooltipPortal",[sy,sz]=sl(sx,{forceMount:void 0}),sA=a=>{let{__scopeTooltip:b,forceMount:c,children:d,container:e}=a,f=sv(sx,b);return(0,y.jsx)(sy,{scope:b,forceMount:c,children:(0,y.jsx)(jG,{present:c||f.open,children:(0,y.jsx)(sh,{asChild:!0,container:e,children:d})})})};sA.displayName=sx;var sB="TooltipContent",sC=z.forwardRef((a,b)=>{let c=sz(sB,a.__scopeTooltip),{forceMount:d=c.forceMount,side:e="top",...f}=a,g=sv(sB,a.__scopeTooltip);return(0,y.jsx)(jG,{present:d||g.open,children:g.disableHoverableContent?(0,y.jsx)(sH,{side:e,...f,ref:b}):(0,y.jsx)(sD,{side:e,...f,ref:b})})}),sD=z.forwardRef((a,b)=>{let c=sv(sB,a.__scopeTooltip),d=sr(sB,a.__scopeTooltip),e=z.useRef(null),f=iV(b,e),[g,h]=z.useState(null),{trigger:i,onClose:j}=c,k=e.current,{onPointerInTransitChange:l}=d,m=z.useCallback(()=>{h(null),l(!1)},[l]),n=z.useCallback((a,b)=>{let c=a.currentTarget,d={x:a.clientX,y:a.clientY},e=function(a,b){let c=Math.abs(b.top-a.y),d=Math.abs(b.bottom-a.y),e=Math.abs(b.right-a.x),f=Math.abs(b.left-a.x);switch(Math.min(c,d,e,f)){case f:return"left";case e:return"right";case c:return"top";case d:return"bottom";default:throw Error("unreachable")}}(d,c.getBoundingClientRect());h(function(a){let b=a.slice();return b.sort((a,b)=>a.x<b.x?-1:a.x>b.x?1:a.y<b.y?-1:1*!!(a.y>b.y)),function(a){if(a.length<=1)return a.slice();let b=[];for(let c=0;c<a.length;c++){let d=a[c];for(;b.length>=2;){let a=b[b.length-1],c=b[b.length-2];if((a.x-c.x)*(d.y-c.y)>=(a.y-c.y)*(d.x-c.x))b.pop();else break}b.push(d)}b.pop();let c=[];for(let b=a.length-1;b>=0;b--){let d=a[b];for(;c.length>=2;){let a=c[c.length-1],b=c[c.length-2];if((a.x-b.x)*(d.y-b.y)>=(a.y-b.y)*(d.x-b.x))c.pop();else break}c.push(d)}return(c.pop(),1===b.length&&1===c.length&&b[0].x===c[0].x&&b[0].y===c[0].y)?b:b.concat(c)}(b)}([...function(a,b,c=5){let d=[];switch(b){case"top":d.push({x:a.x-c,y:a.y+c},{x:a.x+c,y:a.y+c});break;case"bottom":d.push({x:a.x-c,y:a.y-c},{x:a.x+c,y:a.y-c});break;case"left":d.push({x:a.x+c,y:a.y-c},{x:a.x+c,y:a.y+c});break;case"right":d.push({x:a.x-c,y:a.y-c},{x:a.x-c,y:a.y+c})}return d}(d,e),...function(a){let{top:b,right:c,bottom:d,left:e}=a;return[{x:e,y:b},{x:c,y:b},{x:c,y:d},{x:e,y:d}]}(b.getBoundingClientRect())])),l(!0)},[l]);return z.useEffect(()=>()=>m(),[m]),z.useEffect(()=>{if(i&&k){let a=a=>n(a,k),b=a=>n(a,i);return i.addEventListener("pointerleave",a),k.addEventListener("pointerleave",b),()=>{i.removeEventListener("pointerleave",a),k.removeEventListener("pointerleave",b)}}},[i,k,n,m]),z.useEffect(()=>{if(g){let a=a=>{let b=a.target,c={x:a.clientX,y:a.clientY},d=i?.contains(b)||k?.contains(b),e=!function(a,b){let{x:c,y:d}=a,e=!1;for(let a=0,f=b.length-1;a<b.length;f=a++){let g=b[a],h=b[f],i=g.x,j=g.y,k=h.x,l=h.y;j>d!=l>d&&c<(k-i)*(d-j)/(l-j)+i&&(e=!e)}return e}(c,g);d?m():e&&(m(),j())};return document.addEventListener("pointermove",a),()=>document.removeEventListener("pointermove",a)}},[i,k,g,j,m]),(0,y.jsx)(sH,{...a,ref:f})}),[sE,sF]=sl(st,{isInside:!1}),sG=function(a){let b=({children:a})=>(0,y.jsx)(y.Fragment,{children:a});return b.displayName=`${a}.Slottable`,b.__radixId=si,b}("TooltipContent"),sH=z.forwardRef((a,b)=>{let{__scopeTooltip:c,children:d,"aria-label":e,onEscapeKeyDown:f,onPointerDownOutside:g,...h}=a,i=sv(sB,c),j=sn(c),{onClose:k}=i;return z.useEffect(()=>(document.addEventListener(sp,k),()=>document.removeEventListener(sp,k)),[k]),z.useEffect(()=>{if(i.trigger){let a=a=>{let b=a.target;b?.contains(i.trigger)&&k()};return window.addEventListener("scroll",a,{capture:!0}),()=>window.removeEventListener("scroll",a,{capture:!0})}},[i.trigger,k]),(0,y.jsx)(qJ,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:f,onPointerDownOutside:g,onFocusOutside:a=>a.preventDefault(),onDismiss:k,children:(0,y.jsxs)(sa,{"data-state":i.stateAttribute,...j,...h,ref:b,style:{...h.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[(0,y.jsx)(sG,{children:d}),(0,y.jsx)(sE,{scope:c,isInside:!0,children:(0,y.jsx)(sk,{id:i.contentId,role:"tooltip",children:e||d})})]})})});sC.displayName=sB;var sI="TooltipArrow";z.forwardRef((a,b)=>{let{__scopeTooltip:c,...d}=a,e=sn(c);return sF(sI,c).isInside?null:(0,y.jsx)(sd,{...e,...d,ref:b})}).displayName=sI,z.forwardRef(({className:a,sideOffset:b=4,...c},d)=>(0,y.jsx)(sA,{children:(0,y.jsx)(sC,{ref:d,sideOffset:b,className:iL("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",a),...c})})).displayName=sC.displayName;let sJ={safe:{icon:jq,color:"text-emerald-600 dark:text-emerald-400",bgColor:"bg-emerald-50 dark:bg-emerald-950/30",label:"Safe"},unsafe:{icon:js,color:"text-red-600 dark:text-red-400",bgColor:"bg-red-50 dark:bg-red-950/30",label:"Unsafe"},unknown:{icon:jr,color:"text-amber-600 dark:text-amber-400",bgColor:"bg-amber-50 dark:bg-amber-950/30",label:"Unknown"}},sK={high:{color:"bg-red-500",label:"High Risk"},medium:{color:"bg-amber-500",label:"Medium Risk"},low:{color:"bg-blue-500",label:"Low Risk"}};function sL({ingredient:a,index:b,showProvenance:c=!1}){let d=sJ[a.safetyStatus],e=d.icon;return a.safetyReason||a.maskingReason||a.subIngredients?.length?(0,y.jsx)(f1.div,{"data-design-id":`ingredient-accordion-${b}`,initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.03*b},children:(0,y.jsx)(qi,{type:"single",collapsible:!0,children:(0,y.jsxs)(qE,{value:`ing-${b}`,className:"border-0",children:[(0,y.jsxs)(qF,{className:iL("p-3 rounded-xl border hover:no-underline",d.bgColor,"border-transparent hover:border-border/50"),children:[(0,y.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,y.jsx)(e,{className:iL("w-5 h-5 flex-shrink-0",d.color)}),(0,y.jsxs)("div",{className:"text-left",children:[(0,y.jsx)("span",{className:"font-medium",children:a.canonicalName}),a.originalText.toLowerCase()!==a.canonicalName.toLowerCase()&&(0,y.jsxs)("span",{className:"text-xs text-muted-foreground ml-2",children:["(",a.originalText,")"]})]})]}),(0,y.jsx)("div",{className:"flex items-center gap-2 mr-2",children:a.isMasking&&a.maskingRiskLevel&&(0,y.jsxs)(jw,{variant:"outline",className:iL("text-[10px] px-1.5",sK[a.maskingRiskLevel].color,"text-white border-0"),children:[(0,y.jsx)(iQ,{className:"w-3 h-3 mr-0.5"}),"Masking"]})})]}),(0,y.jsx)(qG,{className:"px-3 pt-2 pb-3",children:(0,y.jsxs)("div",{className:"space-y-3 pl-8",children:[a.safetyReason&&(0,y.jsxs)("div",{"data-design-id":`safety-reason-${b}`,className:"flex items-start gap-2 text-sm",children:[(0,y.jsx)(pN,{className:"w-4 h-4 text-muted-foreground mt-0.5 flex-shrink-0"}),(0,y.jsx)("p",{className:"text-muted-foreground",children:a.safetyReason})]}),a.isMasking&&a.maskingReason&&(0,y.jsxs)("div",{"data-design-id":`masking-reason-${b}`,className:"flex items-start gap-2 text-sm bg-violet-50 dark:bg-violet-950/30 rounded-lg p-2",children:[(0,y.jsx)(iQ,{className:"w-4 h-4 text-violet-500 mt-0.5 flex-shrink-0"}),(0,y.jsx)("p",{className:"text-violet-700 dark:text-violet-300",children:a.maskingReason})]}),a.subIngredients&&a.subIngredients.length>0&&(0,y.jsxs)("div",{"data-design-id":`sub-ingredients-${b}`,className:"space-y-2",children:[(0,y.jsx)("p",{className:"text-xs font-medium text-muted-foreground",children:"Sub-ingredients:"}),(0,y.jsx)("div",{className:"space-y-1.5 pl-2 border-l-2 border-muted",children:a.subIngredients.map((a,c)=>{let d=sJ[a.safetyStatus],e=d.icon;return(0,y.jsxs)("div",{"data-design-id":`sub-ingredient-${b}-${c}`,className:"flex items-center gap-2 text-sm",children:[(0,y.jsx)(e,{className:iL("w-4 h-4",d.color)}),(0,y.jsx)("span",{children:a.canonicalName})]},c)})})]}),(0,y.jsxs)("div",{"data-design-id":`confidence-${b}`,className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,y.jsxs)("span",{children:["Confidence: ",Math.round(100*a.confidence),"%"]}),c&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("span",{children:""}),(0,y.jsxs)("span",{children:["Source: ",a.sourceProvenance]})]})]})]})})]})})}):(0,y.jsxs)(f1.div,{"data-design-id":`ingredient-item-${b}`,initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.03*b},className:iL("flex items-center justify-between p-3 rounded-xl border",d.bgColor,"border-transparent"),children:[(0,y.jsxs)("div",{className:"flex items-center gap-3",children:[(0,y.jsx)(e,{className:iL("w-5 h-5 flex-shrink-0",d.color)}),(0,y.jsxs)("div",{children:[(0,y.jsx)("span",{className:"font-medium",children:a.canonicalName}),a.originalText.toLowerCase()!==a.canonicalName.toLowerCase()&&(0,y.jsxs)("span",{className:"text-xs text-muted-foreground ml-2",children:["(",a.originalText,")"]})]})]}),(0,y.jsxs)("div",{className:"flex items-center gap-2",children:[a.isMasking&&a.maskingRiskLevel&&(0,y.jsxs)(jw,{variant:"outline",className:iL("text-[10px] px-1.5",sK[a.maskingRiskLevel].color,"text-white border-0"),children:[(0,y.jsx)(iQ,{className:"w-3 h-3 mr-0.5"}),"Masking"]}),c&&(0,y.jsx)(jw,{variant:"outline",className:"text-[10px]",children:a.sourceProvenance})]})]})}function sM({ingredients:a,showProvenance:b=!1}){let c=[...a].sort((a,b)=>{let c={unsafe:0,unknown:1,safe:2};return c[a.safetyStatus]-c[b.safetyStatus]});return(0,y.jsx)(ss,{children:(0,y.jsxs)("div",{"data-design-id":"ingredient-list",className:"space-y-2",children:[(0,y.jsxs)("div",{"data-design-id":"ingredient-list-header",className:"flex items-center justify-between mb-3",children:[(0,y.jsxs)("h3",{className:"font-semibold",children:["Ingredients (",a.length,")"]}),(0,y.jsxs)("div",{className:"flex gap-3 text-xs",children:[(0,y.jsxs)("span",{className:"flex items-center gap-1",children:[(0,y.jsx)(jq,{className:"w-3.5 h-3.5 text-emerald-500"}),"Safe"]}),(0,y.jsxs)("span",{className:"flex items-center gap-1",children:[(0,y.jsx)(jr,{className:"w-3.5 h-3.5 text-amber-500"}),"Unknown"]}),(0,y.jsxs)("span",{className:"flex items-center gap-1",children:[(0,y.jsx)(js,{className:"w-3.5 h-3.5 text-red-500"}),"Unsafe"]})]})]}),(0,y.jsx)("div",{className:"space-y-1.5",children:c.map((a,c)=>(0,y.jsx)(sL,{ingredient:a,index:c,showProvenance:b},c))})]})})}let sN=hD("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),sO=hD("barcode",[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M8 5v14",key:"1ybrkv"}],["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"M17 5v14",key:"ycjyhj"}],["path",{d:"M21 5v14",key:"nzette"}]]),sP=hD("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),sQ=hD("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),sR=hD("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var sS=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,b)=>{let c=iZ(`Primitive.${b}`),d=z.forwardRef((a,d)=>{let{asChild:e,...f}=a;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,y.jsx)(e?c:b,{...f,ref:d})});return d.displayName=`Primitive.${b}`,{...a,[b]:d}},{}),sT=z.forwardRef((a,b)=>(0,y.jsx)(sS.label,{...a,ref:b,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));sT.displayName="Label";let sU=i2("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),sV=z.forwardRef(({className:a,...b},c)=>(0,y.jsx)(sT,{ref:c,className:iL(sU(),a),...b}));sV.displayName=sT.displayName;let sW=z.forwardRef(({className:a,...b},c)=>(0,y.jsx)("textarea",{className:iL("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:c,...b}));function sX({initialUPC:a="",onSubmit:b,onCancel:c,isLoading:d=!1}){let[e,f]=(0,z.useState)(a),[g,h]=(0,z.useState)(""),[i,j]=(0,z.useState)(""),[k,l]=(0,z.useState)(""),[m,n]=(0,z.useState)({}),o=async a=>{a.preventDefault();let c={},d=function(a){let b=a.replace(/[^0-9]/g,"");return 0===b.length?{valid:!1,message:"UPC is required"}:b.length<8?{valid:!1,message:"UPC must be at least 8 digits"}:b.length>14?{valid:!1,message:"UPC cannot exceed 14 digits"}:/^\d+$/.test(b)?{valid:!0}:{valid:!1,message:"UPC must contain only numbers"}}(e);if(d.valid||(c.upc=d.message||"Invalid UPC"),g.trim()||(c.name="Product name is required"),k.trim()?k.trim().length<10&&(c.ingredients="Please enter the complete ingredient list"):c.ingredients="Ingredients are required",Object.keys(c).length>0)return void n(c);n({}),await b({upc:e.replace(/[^0-9]/g,""),name:g.trim(),brand:i.trim()||void 0,ingredients:k.trim()})};return(0,y.jsxs)(f1.form,{"data-design-id":"manual-entry-form",initial:{opacity:0,y:20},animate:{opacity:1,y:0},onSubmit:o,className:"space-y-6 p-1",children:[(0,y.jsxs)("div",{"data-design-id":"form-header",className:"text-center mb-6",children:[(0,y.jsx)("div",{className:"w-16 h-16 rounded-2xl bg-primary/10 flex items-center justify-center mx-auto mb-4",children:(0,y.jsx)(sN,{className:"w-8 h-8 text-primary"})}),(0,y.jsx)("h2",{"data-design-id":"form-title",className:"text-xl font-bold",children:"Add Product Manually"}),(0,y.jsx)("p",{"data-design-id":"form-subtitle",className:"text-muted-foreground text-sm mt-1",children:"Enter the product details from the label"})]}),(0,y.jsxs)("div",{"data-design-id":"form-field-upc",className:"space-y-2",children:[(0,y.jsxs)(sV,{htmlFor:"upc",className:"flex items-center gap-2",children:[(0,y.jsx)(sO,{className:"w-4 h-4"}),"UPC / Barcode"]}),(0,y.jsx)(jc,{id:"upc",type:"text",inputMode:"numeric",placeholder:"Enter 8-14 digit barcode",value:e,onChange:a=>f(a.target.value.replace(/[^0-9]/g,"")),className:m.upc?"border-red-500":"",disabled:d}),m.upc&&(0,y.jsx)("p",{className:"text-xs text-red-500",children:m.upc})]}),(0,y.jsxs)("div",{"data-design-id":"form-field-name",className:"space-y-2",children:[(0,y.jsxs)(sV,{htmlFor:"name",className:"flex items-center gap-2",children:[(0,y.jsx)(sP,{className:"w-4 h-4"}),"Product Name *"]}),(0,y.jsx)(jc,{id:"name",type:"text",placeholder:"e.g., Organic Whole Wheat Bread",value:g,onChange:a=>h(a.target.value),className:m.name?"border-red-500":"",disabled:d}),m.name&&(0,y.jsx)("p",{className:"text-xs text-red-500",children:m.name})]}),(0,y.jsxs)("div",{"data-design-id":"form-field-brand",className:"space-y-2",children:[(0,y.jsxs)(sV,{htmlFor:"brand",className:"flex items-center gap-2",children:[(0,y.jsx)(sN,{className:"w-4 h-4"}),"Brand (Optional)"]}),(0,y.jsx)(jc,{id:"brand",type:"text",placeholder:"e.g., Nature's Own",value:i,onChange:a=>j(a.target.value),disabled:d})]}),(0,y.jsxs)("div",{"data-design-id":"form-field-ingredients",className:"space-y-2",children:[(0,y.jsxs)(sV,{htmlFor:"ingredients",className:"flex items-center gap-2",children:[(0,y.jsx)(sQ,{className:"w-4 h-4"}),"Ingredients *"]}),(0,y.jsx)(sW,{id:"ingredients",placeholder:"Paste or type the ingredients list exactly as shown on the package. Separate ingredients with commas.",value:k,onChange:a=>l(a.target.value),className:`min-h-[150px] ${m.ingredients?"border-red-500":""}`,disabled:d}),m.ingredients?(0,y.jsx)("p",{className:"text-xs text-red-500",children:m.ingredients}):(0,y.jsx)("p",{className:"text-xs text-muted-foreground",children:'Include all ingredients, sub-ingredients in parentheses, and any "contains" statements.'})]}),(0,y.jsxs)("div",{"data-design-id":"form-actions",className:"flex gap-3 pt-2",children:[c&&(0,y.jsx)(i4,{type:"button",variant:"outline",onClick:c,disabled:d,className:"flex-1",children:"Cancel"}),(0,y.jsx)(i4,{type:"submit",disabled:d,className:"flex-1",children:d?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(kl,{className:"w-4 h-4 mr-2 animate-spin"}),"Analyzing..."]}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(sR,{className:"w-4 h-4 mr-2"}),"Add & Analyze"]})})]})]})}sW.displayName="Textarea";let sY=i2("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),sZ=z.forwardRef(({className:a,variant:b,...c},d)=>(0,y.jsx)("div",{ref:d,role:"alert",className:iL(sY({variant:b}),a),...c}));sZ.displayName="Alert";let s$=z.forwardRef(({className:a,...b},c)=>(0,y.jsx)("h5",{ref:c,className:iL("mb-1 font-medium leading-none tracking-tight",a),...b}));s$.displayName="AlertTitle";let s_=z.forwardRef(({className:a,...b},c)=>(0,y.jsx)("div",{ref:c,className:iL("text-sm [&_p]:leading-relaxed",a),...b}));s_.displayName="AlertDescription";var s0=c(2830);function s1(){let[a,b]=(0,z.useState)("scanner"),[c,d]=(0,z.useState)(null),[e,f]=(0,z.useState)(null),[g,h]=(0,z.useState)(""),[i,j]=(0,z.useState)(!1),{addToHistory:k,setActiveTab:l,setCurrentProduct:m,toggleFavorite:n}=ge(),o=(0,z.useCallback)(async a=>{if(!i&&a!==g){j(!0),h(a),b("loading");try{let c=await hx(a);if(c.success&&c.product)d(c.product),f(c.safety),k(c.product),b("result"),c.safety?.overallStatus==="safe"?s0.oR.success("Product is MTHFR Safe!"):c.safety?.overallStatus==="unsafe"?s0.oR.warning(`Found ${c.safety.unsafeCount} unsafe ingredient(s)`):s0.oR.info("Some ingredients require review");else if(c.notFound)b("not-found");else throw Error(c.error||"Failed to process product")}catch(a){console.error("Scan error:",a),s0.oR.error("Failed to look up product"),b("scanner")}finally{j(!1)}}},[i,g,k]),p=async a=>{j(!0);try{let c=await hy(a.upc,a.name,a.ingredients,a.brand,void 0,"manual");if(c.success&&c.product)d(c.product),f(c.safety),k(c.product),b("result"),s0.oR.success("Product added successfully!");else throw Error(c.error||"Failed to add product")}catch(a){console.error("Manual entry error:",a),s0.oR.error("Failed to add product")}finally{j(!1)}},q=()=>{b("scanner"),d(null),f(null),h("")};return(0,y.jsx)("div",{"data-design-id":"scan-screen",className:"h-full flex flex-col bg-background",children:(0,y.jsxs)(f9,{mode:"wait",children:["scanner"===a&&(0,y.jsx)(f1.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex-1",children:(0,y.jsx)(pM,{onScan:o,isActive:"scanner"===a})},"scanner"),"loading"===a&&(0,y.jsxs)(f1.div,{"data-design-id":"scan-loading",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex-1 flex flex-col items-center justify-center p-8",children:[(0,y.jsx)("div",{className:"w-20 h-20 rounded-2xl bg-primary/10 flex items-center justify-center mb-6",children:(0,y.jsx)(kl,{className:"w-10 h-10 text-primary animate-spin"})}),(0,y.jsx)("h2",{"data-design-id":"loading-title",className:"text-xl font-semibold mb-2",children:"Looking up product..."}),(0,y.jsx)("p",{"data-design-id":"loading-subtitle",className:"text-muted-foreground text-center",children:"Searching product databases and analyzing ingredients"}),(0,y.jsxs)("p",{"data-design-id":"loading-upc",className:"font-mono text-sm mt-4 text-muted-foreground",children:["UPC: ",g]})]},"loading"),"result"===a&&c&&(0,y.jsxs)(f1.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex-1 flex flex-col",children:[(0,y.jsxs)("div",{"data-design-id":"result-header",className:"p-4 flex items-center gap-3 border-b",children:[(0,y.jsx)(i4,{"data-design-id":"result-back",variant:"ghost",size:"icon",onClick:q,children:(0,y.jsx)(km,{className:"w-5 h-5"})}),(0,y.jsx)("h2",{className:"font-semibold flex-1",children:"Scan Result"}),(0,y.jsx)(i4,{"data-design-id":"scan-another",variant:"outline",size:"sm",onClick:q,children:"Scan Another"})]}),(0,y.jsx)(ki,{className:"flex-1",children:(0,y.jsxs)("div",{className:"p-5 space-y-6 pb-24",children:[(0,y.jsx)(jz,{product:c,onToggleFavorite:()=>{c.id&&n(c.id)}}),(0,y.jsx)(sM,{ingredients:c.ingredients,showProvenance:!0})]})})]},"result"),"not-found"===a&&(0,y.jsxs)(f1.div,{"data-design-id":"not-found-screen",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex-1 flex flex-col",children:[(0,y.jsxs)("div",{"data-design-id":"not-found-header",className:"p-4 flex items-center gap-3 border-b",children:[(0,y.jsx)(i4,{variant:"ghost",size:"icon",onClick:q,children:(0,y.jsx)(km,{className:"w-5 h-5"})}),(0,y.jsx)("h2",{className:"font-semibold",children:"Product Not Found"})]}),(0,y.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center p-8",children:[(0,y.jsx)("div",{"data-design-id":"not-found-icon",className:"w-24 h-24 rounded-full bg-amber-100 dark:bg-amber-950/50 flex items-center justify-center mb-6",children:(0,y.jsx)(kn,{className:"w-12 h-12 text-amber-600 dark:text-amber-400"})}),(0,y.jsx)("h2",{"data-design-id":"not-found-title",className:"text-xl font-semibold mb-2",children:"Product Not in Database"}),(0,y.jsx)("p",{"data-design-id":"not-found-desc",className:"text-muted-foreground text-center mb-2",children:"We couldn't find this product in our databases."}),(0,y.jsxs)("p",{"data-design-id":"not-found-upc",className:"font-mono text-sm text-muted-foreground mb-6",children:["UPC: ",g]}),(0,y.jsxs)(sZ,{"data-design-id":"not-found-alert",className:"mb-6 max-w-sm",children:[(0,y.jsx)(ko,{className:"w-4 h-4"}),(0,y.jsx)(s$,{children:"Help improve the database"}),(0,y.jsx)(s_,{children:"You can add this product manually by entering its name and ingredient list."})]}),(0,y.jsxs)("div",{className:"flex flex-col gap-3 w-full max-w-sm",children:[(0,y.jsx)(i4,{"data-design-id":"google-search-btn",variant:"secondary",onClick:()=>window.open(`https://www.google.com/search?q=UPC+${g}`,"_blank"),className:"w-full",children:"Search Web for UPC"}),(0,y.jsxs)("div",{className:"flex gap-3 w-full",children:[(0,y.jsx)(i4,{"data-design-id":"try-again-btn",variant:"outline",onClick:q,className:"flex-1",children:"Scan Again"}),(0,y.jsx)(i4,{"data-design-id":"add-manually-btn",onClick:()=>b("manual-entry"),className:"flex-1",children:"Add Manually"})]})]})]})]},"not-found"),"manual-entry"===a&&(0,y.jsxs)(f1.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex-1 flex flex-col",children:[(0,y.jsxs)("div",{"data-design-id":"manual-header",className:"p-4 flex items-center gap-3 border-b",children:[(0,y.jsx)(i4,{variant:"ghost",size:"icon",onClick:q,children:(0,y.jsx)(km,{className:"w-5 h-5"})}),(0,y.jsx)("h2",{className:"font-semibold",children:"Manual Entry"})]}),(0,y.jsx)(ki,{className:"flex-1",children:(0,y.jsx)("div",{className:"p-5 pb-24",children:(0,y.jsx)(sX,{initialUPC:g,onSubmit:p,onCancel:q,isLoading:i})})})]},"manual-entry")]})})}let s2=hD("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),s3=hD("arrow-up-narrow-wide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]);var s4="rovingFocusGroup.onEntryFocus",s5={bubbles:!1,cancelable:!0},s6="RovingFocusGroup",[s7,s8,s9]=pR(s6),[ta,tb]=jI(s6,[s9]),[tc,td]=ta(s6),te=z.forwardRef((a,b)=>(0,y.jsx)(s7.Provider,{scope:a.__scopeRovingFocusGroup,children:(0,y.jsx)(s7.Slot,{scope:a.__scopeRovingFocusGroup,children:(0,y.jsx)(tf,{...a,ref:b})})}));te.displayName=s6;var tf=z.forwardRef((a,b)=>{let{__scopeRovingFocusGroup:c,orientation:d,loop:e=!1,dir:f,currentTabStopId:g,defaultCurrentTabStopId:h,onCurrentTabStopIdChange:i,onEntryFocus:j,preventScrollOnEntryFocus:k=!1,...l}=a,m=z.useRef(null),n=iV(b,m),o=jL(f),[p,q]=pW({prop:g,defaultProp:h??null,onChange:i,caller:s6}),[r,s]=z.useState(!1),t=jJ(j),u=s8(c),v=z.useRef(!1),[w,x]=z.useState(0);return z.useEffect(()=>{let a=m.current;if(a)return a.addEventListener(s4,t),()=>a.removeEventListener(s4,t)},[t]),(0,y.jsx)(tc,{scope:c,orientation:d,dir:o,loop:e,currentTabStopId:p,onItemFocus:z.useCallback(a=>q(a),[q]),onItemShiftTab:z.useCallback(()=>s(!0),[]),onFocusableItemAdd:z.useCallback(()=>x(a=>a+1),[]),onFocusableItemRemove:z.useCallback(()=>x(a=>a-1),[]),children:(0,y.jsx)(jD.div,{tabIndex:r||0===w?-1:0,"data-orientation":d,...l,ref:n,style:{outline:"none",...a.style},onMouseDown:jM(a.onMouseDown,()=>{v.current=!0}),onFocus:jM(a.onFocus,a=>{let b=!v.current;if(a.target===a.currentTarget&&b&&!r){let b=new CustomEvent(s4,s5);if(a.currentTarget.dispatchEvent(b),!b.defaultPrevented){let a=u().filter(a=>a.focusable);tj([a.find(a=>a.active),a.find(a=>a.id===p),...a].filter(Boolean).map(a=>a.ref.current),k)}}v.current=!1}),onBlur:jM(a.onBlur,()=>s(!1))})})}),tg="RovingFocusGroupItem",th=z.forwardRef((a,b)=>{let{__scopeRovingFocusGroup:c,focusable:d=!0,active:e=!1,tabStopId:f,children:g,...h}=a,i=pZ(),j=f||i,k=td(tg,c),l=k.currentTabStopId===j,m=s8(c),{onFocusableItemAdd:n,onFocusableItemRemove:o,currentTabStopId:p}=k;return z.useEffect(()=>{if(d)return n(),()=>o()},[d,n,o]),(0,y.jsx)(s7.ItemSlot,{scope:c,id:j,focusable:d,active:e,children:(0,y.jsx)(jD.span,{tabIndex:l?0:-1,"data-orientation":k.orientation,...h,ref:b,onMouseDown:jM(a.onMouseDown,a=>{d?k.onItemFocus(j):a.preventDefault()}),onFocus:jM(a.onFocus,()=>k.onItemFocus(j)),onKeyDown:jM(a.onKeyDown,a=>{if("Tab"===a.key&&a.shiftKey)return void k.onItemShiftTab();if(a.target!==a.currentTarget)return;let b=function(a,b,c){var d;let e=(d=a.key,"rtl"!==c?d:"ArrowLeft"===d?"ArrowRight":"ArrowRight"===d?"ArrowLeft":d);if(!("vertical"===b&&["ArrowLeft","ArrowRight"].includes(e))&&!("horizontal"===b&&["ArrowUp","ArrowDown"].includes(e)))return ti[e]}(a,k.orientation,k.dir);if(void 0!==b){if(a.metaKey||a.ctrlKey||a.altKey||a.shiftKey)return;a.preventDefault();let c=m().filter(a=>a.focusable).map(a=>a.ref.current);if("last"===b)c.reverse();else if("prev"===b||"next"===b){"prev"===b&&c.reverse();let d=c.indexOf(a.currentTarget);c=k.loop?function(a,b){return a.map((c,d)=>a[(b+d)%a.length])}(c,d+1):c.slice(d+1)}setTimeout(()=>tj(c))}}),children:"function"==typeof g?g({isCurrentTabStop:l,hasTabStop:null!=p}):g})})});th.displayName=tg;var ti={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function tj(a,b=!1){let c=document.activeElement;for(let d of a)if(d===c||(d.focus({preventScroll:b}),document.activeElement!==c))return}var tk="Tabs",[tl,tm]=jI(tk,[tb]),tn=tb(),[to,tp]=tl(tk),tq=z.forwardRef((a,b)=>{let{__scopeTabs:c,value:d,onValueChange:e,defaultValue:f,orientation:g="horizontal",dir:h,activationMode:i="automatic",...j}=a,k=jL(h),[l,m]=pW({prop:d,onChange:e,defaultProp:f??"",caller:tk});return(0,y.jsx)(to,{scope:c,baseId:pZ(),value:l,onValueChange:m,orientation:g,dir:k,activationMode:i,children:(0,y.jsx)(jD.div,{dir:k,"data-orientation":g,...j,ref:b})})});tq.displayName=tk;var tr="TabsList",ts=z.forwardRef((a,b)=>{let{__scopeTabs:c,loop:d=!0,...e}=a,f=tp(tr,c),g=tn(c);return(0,y.jsx)(te,{asChild:!0,...g,orientation:f.orientation,dir:f.dir,loop:d,children:(0,y.jsx)(jD.div,{role:"tablist","aria-orientation":f.orientation,...e,ref:b})})});ts.displayName=tr;var tt="TabsTrigger",tu=z.forwardRef((a,b)=>{let{__scopeTabs:c,value:d,disabled:e=!1,...f}=a,g=tp(tt,c),h=tn(c),i=tx(g.baseId,d),j=ty(g.baseId,d),k=d===g.value;return(0,y.jsx)(th,{asChild:!0,...h,focusable:!e,active:k,children:(0,y.jsx)(jD.button,{type:"button",role:"tab","aria-selected":k,"aria-controls":j,"data-state":k?"active":"inactive","data-disabled":e?"":void 0,disabled:e,id:i,...f,ref:b,onMouseDown:jM(a.onMouseDown,a=>{e||0!==a.button||!1!==a.ctrlKey?a.preventDefault():g.onValueChange(d)}),onKeyDown:jM(a.onKeyDown,a=>{[" ","Enter"].includes(a.key)&&g.onValueChange(d)}),onFocus:jM(a.onFocus,()=>{let a="manual"!==g.activationMode;k||e||!a||g.onValueChange(d)})})})});tu.displayName=tt;var tv="TabsContent",tw=z.forwardRef((a,b)=>{let{__scopeTabs:c,value:d,forceMount:e,children:f,...g}=a,h=tp(tv,c),i=tx(h.baseId,d),j=ty(h.baseId,d),k=d===h.value,l=z.useRef(k);return z.useEffect(()=>{let a=requestAnimationFrame(()=>l.current=!1);return()=>cancelAnimationFrame(a)},[]),(0,y.jsx)(jG,{present:e||k,children:({present:c})=>(0,y.jsx)(jD.div,{"data-state":k?"active":"inactive","data-orientation":h.orientation,role:"tabpanel","aria-labelledby":i,hidden:!c,id:j,tabIndex:0,...g,ref:b,style:{...a.style,animationDuration:l.current?"0s":void 0},children:c&&f})})});function tx(a,b){return`${a}-trigger-${b}`}function ty(a,b){return`${a}-content-${b}`}tw.displayName=tv;let tz=z.forwardRef(({className:a,...b},c)=>(0,y.jsx)(ts,{ref:c,className:iL("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",a),...b}));tz.displayName=ts.displayName;let tA=z.forwardRef(({className:a,...b},c)=>(0,y.jsx)(tu,{ref:c,className:iL("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",a),...b}));tA.displayName=tu.displayName,z.forwardRef(({className:a,...b},c)=>(0,y.jsx)(tw,{ref:c,className:iL("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...b})).displayName=tw.displayName;var tB=0;function tC(){z.useEffect(()=>{let a=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",a[0]??tD()),document.body.insertAdjacentElement("beforeend",a[1]??tD()),tB++,()=>{1===tB&&document.querySelectorAll("[data-radix-focus-guard]").forEach(a=>a.remove()),tB--}},[])}function tD(){let a=document.createElement("span");return a.setAttribute("data-radix-focus-guard",""),a.tabIndex=0,a.style.outline="none",a.style.opacity="0",a.style.position="fixed",a.style.pointerEvents="none",a}var tE="focusScope.autoFocusOnMount",tF="focusScope.autoFocusOnUnmount",tG={bubbles:!1,cancelable:!0},tH=z.forwardRef((a,b)=>{let{loop:c=!1,trapped:d=!1,onMountAutoFocus:e,onUnmountAutoFocus:f,...g}=a,[h,i]=z.useState(null),j=jJ(e),k=jJ(f),l=z.useRef(null),m=iV(b,a=>i(a)),n=z.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;z.useEffect(()=>{if(d){let a=function(a){if(n.paused||!h)return;let b=a.target;h.contains(b)?l.current=b:tK(l.current,{select:!0})},b=function(a){if(n.paused||!h)return;let b=a.relatedTarget;null!==b&&(h.contains(b)||tK(l.current,{select:!0}))};document.addEventListener("focusin",a),document.addEventListener("focusout",b);let c=new MutationObserver(function(a){if(document.activeElement===document.body)for(let b of a)b.removedNodes.length>0&&tK(h)});return h&&c.observe(h,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",a),document.removeEventListener("focusout",b),c.disconnect()}}},[d,h,n.paused]),z.useEffect(()=>{if(h){tL.add(n);let a=document.activeElement;if(!h.contains(a)){let b=new CustomEvent(tE,tG);h.addEventListener(tE,j),h.dispatchEvent(b),b.defaultPrevented||(function(a,{select:b=!1}={}){let c=document.activeElement;for(let d of a)if(tK(d,{select:b}),document.activeElement!==c)return}(tI(h).filter(a=>"A"!==a.tagName),{select:!0}),document.activeElement===a&&tK(h))}return()=>{h.removeEventListener(tE,j),setTimeout(()=>{let b=new CustomEvent(tF,tG);h.addEventListener(tF,k),h.dispatchEvent(b),b.defaultPrevented||tK(a??document.body,{select:!0}),h.removeEventListener(tF,k),tL.remove(n)},0)}}},[h,j,k,n]);let o=z.useCallback(a=>{if(!c&&!d||n.paused)return;let b="Tab"===a.key&&!a.altKey&&!a.ctrlKey&&!a.metaKey,e=document.activeElement;if(b&&e){let b=a.currentTarget,[d,f]=function(a){let b=tI(a);return[tJ(b,a),tJ(b.reverse(),a)]}(b);d&&f?a.shiftKey||e!==f?a.shiftKey&&e===d&&(a.preventDefault(),c&&tK(f,{select:!0})):(a.preventDefault(),c&&tK(d,{select:!0})):e===b&&a.preventDefault()}},[c,d,n.paused]);return(0,y.jsx)(jD.div,{tabIndex:-1,...g,ref:m,onKeyDown:o})});function tI(a){let b=[],c=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{let b="INPUT"===a.tagName&&"hidden"===a.type;return a.disabled||a.hidden||b?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;c.nextNode();)b.push(c.currentNode);return b}function tJ(a,b){for(let c of a)if(!function(a,{upTo:b}){if("hidden"===getComputedStyle(a).visibility)return!0;for(;a&&(void 0===b||a!==b);){if("none"===getComputedStyle(a).display)return!0;a=a.parentElement}return!1}(c,{upTo:b}))return c}function tK(a,{select:b=!1}={}){if(a&&a.focus){var c;let d=document.activeElement;a.focus({preventScroll:!0}),a!==d&&(c=a)instanceof HTMLInputElement&&"select"in c&&b&&a.select()}}tH.displayName="FocusScope";var tL=function(){let a=[];return{add(b){let c=a[0];b!==c&&c?.pause(),(a=tM(a,b)).unshift(b)},remove(b){a=tM(a,b),a[0]?.resume()}}}();function tM(a,b){let c=[...a],d=c.indexOf(b);return -1!==d&&c.splice(d,1),c}var tN=Symbol("radix.slottable");function tO(a){return z.isValidElement(a)&&"function"==typeof a.type&&"__radixId"in a.type&&a.type.__radixId===tN}var tP=new WeakMap,tQ=new WeakMap,tR={},tS=0,tT=function(a){return a&&(a.host||tT(a.parentNode))},tU=function(a,b,c,d){var e=(Array.isArray(a)?a:[a]).map(function(a){if(b.contains(a))return a;var c=tT(a);return c&&b.contains(c)?c:(console.error("aria-hidden",a,"in not contained inside",b,". Doing nothing"),null)}).filter(function(a){return!!a});tR[c]||(tR[c]=new WeakMap);var f=tR[c],g=[],h=new Set,i=new Set(e),j=function(a){!a||h.has(a)||(h.add(a),j(a.parentNode))};e.forEach(j);var k=function(a){!a||i.has(a)||Array.prototype.forEach.call(a.children,function(a){if(h.has(a))k(a);else try{var b=a.getAttribute(d),e=null!==b&&"false"!==b,i=(tP.get(a)||0)+1,j=(f.get(a)||0)+1;tP.set(a,i),f.set(a,j),g.push(a),1===i&&e&&tQ.set(a,!0),1===j&&a.setAttribute(c,"true"),e||a.setAttribute(d,"true")}catch(b){console.error("aria-hidden: cannot operate on ",a,b)}})};return k(b),h.clear(),tS++,function(){g.forEach(function(a){var b=tP.get(a)-1,e=f.get(a)-1;tP.set(a,b),f.set(a,e),b||(tQ.has(a)||a.removeAttribute(d),tQ.delete(a)),e||a.removeAttribute(c)}),--tS||(tP=new WeakMap,tP=new WeakMap,tQ=new WeakMap,tR={})}},tV=function(a,b,c){void 0===c&&(c="data-aria-hidden");var d=Array.from(Array.isArray(a)?a:[a]),e=b||("undefined"==typeof document?null:(Array.isArray(a)?a[0]:a).ownerDocument.body);return e?(d.push.apply(d,Array.from(e.querySelectorAll("[aria-live], script"))),tU(d,e,c,"aria-hidden")):function(){return null}},tW=function(){return(tW=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)};function tX(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c}Object.create;Object.create;var tY=("function"==typeof SuppressedError&&SuppressedError,"right-scroll-bar-position"),tZ="width-before-scroll-bar";function t$(a,b){return"function"==typeof a?a(b):a&&(a.current=b),a}var t_="undefined"!=typeof window?z.useLayoutEffect:z.useEffect,t0=new WeakMap;function t1(a){return a}var t2=function(a){void 0===a&&(a={});var b,c,d,e=(void 0===b&&(b=t1),c=[],d=!1,{read:function(){if(d)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return c.length?c[c.length-1]:null},useMedium:function(a){var e=b(a,d);return c.push(e),function(){c=c.filter(function(a){return a!==e})}},assignSyncMedium:function(a){for(d=!0;c.length;){var b=c;c=[],b.forEach(a)}c={push:function(b){return a(b)},filter:function(){return c}}},assignMedium:function(a){d=!0;var b=[];if(c.length){var e=c;c=[],e.forEach(a),b=c}var f=function(){var c=b;b=[],c.forEach(a)},g=function(){return Promise.resolve().then(f)};g(),c={push:function(a){b.push(a),g()},filter:function(a){return b=b.filter(a),c}}}});return e.options=tW({async:!0,ssr:!1},a),e}(),t3=function(){},t4=z.forwardRef(function(a,b){var c,d,e,f,g=z.useRef(null),h=z.useState({onScrollCapture:t3,onWheelCapture:t3,onTouchMoveCapture:t3}),i=h[0],j=h[1],k=a.forwardProps,l=a.children,m=a.className,n=a.removeScrollBar,o=a.enabled,p=a.shards,q=a.sideCar,r=a.noRelative,s=a.noIsolation,t=a.inert,u=a.allowPinchZoom,v=a.as,w=a.gapMode,x=tX(a,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),y=(c=[g,b],d=function(a){return c.forEach(function(b){return t$(b,a)})},(e=(0,z.useState)(function(){return{value:null,callback:d,facade:{get current(){return e.value},set current(value){var a=e.value;a!==value&&(e.value=value,e.callback(value,a))}}}})[0]).callback=d,f=e.facade,t_(function(){var a=t0.get(f);if(a){var b=new Set(a),d=new Set(c),e=f.current;b.forEach(function(a){d.has(a)||t$(a,null)}),d.forEach(function(a){b.has(a)||t$(a,e)})}t0.set(f,c)},[c]),f),A=tW(tW({},x),i);return z.createElement(z.Fragment,null,o&&z.createElement(q,{sideCar:t2,removeScrollBar:n,shards:p,noRelative:r,noIsolation:s,inert:t,setCallbacks:j,allowPinchZoom:!!u,lockRef:g,gapMode:w}),k?z.cloneElement(z.Children.only(l),tW(tW({},A),{ref:y})):z.createElement(void 0===v?"div":v,tW({},A,{className:m,ref:y}),l))});t4.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},t4.classNames={fullWidth:tZ,zeroRight:tY};var t5=function(a){var b=a.sideCar,c=tX(a,["sideCar"]);if(!b)throw Error("Sidecar: please provide `sideCar` property to import the right car");var d=b.read();if(!d)throw Error("Sidecar medium not found");return z.createElement(d,tW({},c))};t5.isSideCarExport=!0;var t6=function(){var a=0,b=null;return{add:function(d){if(0==a&&(b=function(){if(!document)return null;var a=document.createElement("style");a.type="text/css";var b=x||c.nc;return b&&a.setAttribute("nonce",b),a}())){var e,f;(e=b).styleSheet?e.styleSheet.cssText=d:e.appendChild(document.createTextNode(d)),f=b,(document.head||document.getElementsByTagName("head")[0]).appendChild(f)}a++},remove:function(){--a||!b||(b.parentNode&&b.parentNode.removeChild(b),b=null)}}},t7=function(){var a=t6();return function(b,c){z.useEffect(function(){return a.add(b),function(){a.remove()}},[b&&c])}},t8=function(){var a=t7();return function(b){return a(b.styles,b.dynamic),null}},t9={left:0,top:0,right:0,gap:0},ua=function(a){return parseInt(a||"",10)||0},ub=function(a){var b=window.getComputedStyle(document.body),c=b["padding"===a?"paddingLeft":"marginLeft"],d=b["padding"===a?"paddingTop":"marginTop"],e=b["padding"===a?"paddingRight":"marginRight"];return[ua(c),ua(d),ua(e)]},uc=function(a){if(void 0===a&&(a="margin"),"undefined"==typeof window)return t9;var b=ub(a),c=document.documentElement.clientWidth,d=window.innerWidth;return{left:b[0],top:b[1],right:b[2],gap:Math.max(0,d-c+b[2]-b[0])}},ud=t8(),ue="data-scroll-locked",uf=function(a,b,c,d){var e=a.left,f=a.top,g=a.right,h=a.gap;return void 0===c&&(c="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(d,";\n   padding-right: ").concat(h,"px ").concat(d,";\n  }\n  body[").concat(ue,"] {\n    overflow: hidden ").concat(d,";\n    overscroll-behavior: contain;\n    ").concat([b&&"position: relative ".concat(d,";"),"margin"===c&&"\n    padding-left: ".concat(e,"px;\n    padding-top: ").concat(f,"px;\n    padding-right: ").concat(g,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(h,"px ").concat(d,";\n    "),"padding"===c&&"padding-right: ".concat(h,"px ").concat(d,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(tY," {\n    right: ").concat(h,"px ").concat(d,";\n  }\n  \n  .").concat(tZ," {\n    margin-right: ").concat(h,"px ").concat(d,";\n  }\n  \n  .").concat(tY," .").concat(tY," {\n    right: 0 ").concat(d,";\n  }\n  \n  .").concat(tZ," .").concat(tZ," {\n    margin-right: 0 ").concat(d,";\n  }\n  \n  body[").concat(ue,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(h,"px;\n  }\n")},ug=function(){var a=parseInt(document.body.getAttribute(ue)||"0",10);return isFinite(a)?a:0},uh=function(){z.useEffect(function(){return document.body.setAttribute(ue,(ug()+1).toString()),function(){var a=ug()-1;a<=0?document.body.removeAttribute(ue):document.body.setAttribute(ue,a.toString())}},[])},ui=function(a){var b=a.noRelative,c=a.noImportant,d=a.gapMode,e=void 0===d?"margin":d;uh();var f=z.useMemo(function(){return uc(e)},[e]);return z.createElement(ud,{styles:uf(f,!b,e,c?"":"!important")})},uj=!1;if("undefined"!=typeof window)try{var uk=Object.defineProperty({},"passive",{get:function(){return uj=!0,!0}});window.addEventListener("test",uk,uk),window.removeEventListener("test",uk,uk)}catch(a){uj=!1}var ul=!!uj&&{passive:!1},um=function(a,b){if(!(a instanceof Element))return!1;var c=window.getComputedStyle(a);return"hidden"!==c[b]&&(c.overflowY!==c.overflowX||"TEXTAREA"===a.tagName||"visible"!==c[b])},un=function(a,b){var c=b.ownerDocument,d=b;do{if("undefined"!=typeof ShadowRoot&&d instanceof ShadowRoot&&(d=d.host),uo(a,d)){var e=up(a,d);if(e[1]>e[2])return!0}d=d.parentNode}while(d&&d!==c.body);return!1},uo=function(a,b){return"v"===a?um(b,"overflowY"):um(b,"overflowX")},up=function(a,b){return"v"===a?[b.scrollTop,b.scrollHeight,b.clientHeight]:[b.scrollLeft,b.scrollWidth,b.clientWidth]},uq=function(a,b,c,d,e){var f,g=(f=window.getComputedStyle(b).direction,"h"===a&&"rtl"===f?-1:1),h=g*d,i=c.target,j=b.contains(i),k=!1,l=h>0,m=0,n=0;do{if(!i)break;var o=up(a,i),p=o[0],q=o[1]-o[2]-g*p;(p||q)&&uo(a,i)&&(m+=q,n+=p);var r=i.parentNode;i=r&&r.nodeType===Node.DOCUMENT_FRAGMENT_NODE?r.host:r}while(!j&&i!==document.body||j&&(b.contains(i)||b===i));return l&&(e&&1>Math.abs(m)||!e&&h>m)?k=!0:!l&&(e&&1>Math.abs(n)||!e&&-h>n)&&(k=!0),k},ur=function(a){return"changedTouches"in a?[a.changedTouches[0].clientX,a.changedTouches[0].clientY]:[0,0]},us=function(a){return[a.deltaX,a.deltaY]},ut=function(a){return a&&"current"in a?a.current:a},uu=0,uv=[];let uw=(g=function(a){var b=z.useRef([]),c=z.useRef([0,0]),d=z.useRef(),e=z.useState(uu++)[0],f=z.useState(t8)[0],g=z.useRef(a);z.useEffect(function(){g.current=a},[a]),z.useEffect(function(){if(a.inert){document.body.classList.add("block-interactivity-".concat(e));var b=(function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))})([a.lockRef.current],(a.shards||[]).map(ut),!0).filter(Boolean);return b.forEach(function(a){return a.classList.add("allow-interactivity-".concat(e))}),function(){document.body.classList.remove("block-interactivity-".concat(e)),b.forEach(function(a){return a.classList.remove("allow-interactivity-".concat(e))})}}},[a.inert,a.lockRef.current,a.shards]);var h=z.useCallback(function(a,b){if("touches"in a&&2===a.touches.length||"wheel"===a.type&&a.ctrlKey)return!g.current.allowPinchZoom;var e,f=ur(a),h=c.current,i="deltaX"in a?a.deltaX:h[0]-f[0],j="deltaY"in a?a.deltaY:h[1]-f[1],k=a.target,l=Math.abs(i)>Math.abs(j)?"h":"v";if("touches"in a&&"h"===l&&"range"===k.type)return!1;var m=window.getSelection(),n=m&&m.anchorNode;if(n&&(n===k||n.contains(k)))return!1;var o=un(l,k);if(!o)return!0;if(o?e=l:(e="v"===l?"h":"v",o=un(l,k)),!o)return!1;if(!d.current&&"changedTouches"in a&&(i||j)&&(d.current=e),!e)return!0;var p=d.current||e;return uq(p,b,a,"h"===p?i:j,!0)},[]),i=z.useCallback(function(a){if(uv.length&&uv[uv.length-1]===f){var c="deltaY"in a?us(a):ur(a),d=b.current.filter(function(b){var d;return b.name===a.type&&(b.target===a.target||a.target===b.shadowParent)&&(d=b.delta,d[0]===c[0]&&d[1]===c[1])})[0];if(d&&d.should){a.cancelable&&a.preventDefault();return}if(!d){var e=(g.current.shards||[]).map(ut).filter(Boolean).filter(function(b){return b.contains(a.target)});(e.length>0?h(a,e[0]):!g.current.noIsolation)&&a.cancelable&&a.preventDefault()}}},[]),j=z.useCallback(function(a,c,d,e){var f={name:a,delta:c,target:d,should:e,shadowParent:function(a){for(var b=null;null!==a;)a instanceof ShadowRoot&&(b=a.host,a=a.host),a=a.parentNode;return b}(d)};b.current.push(f),setTimeout(function(){b.current=b.current.filter(function(a){return a!==f})},1)},[]),k=z.useCallback(function(a){c.current=ur(a),d.current=void 0},[]),l=z.useCallback(function(b){j(b.type,us(b),b.target,h(b,a.lockRef.current))},[]),m=z.useCallback(function(b){j(b.type,ur(b),b.target,h(b,a.lockRef.current))},[]);z.useEffect(function(){return uv.push(f),a.setCallbacks({onScrollCapture:l,onWheelCapture:l,onTouchMoveCapture:m}),document.addEventListener("wheel",i,ul),document.addEventListener("touchmove",i,ul),document.addEventListener("touchstart",k,ul),function(){uv=uv.filter(function(a){return a!==f}),document.removeEventListener("wheel",i,ul),document.removeEventListener("touchmove",i,ul),document.removeEventListener("touchstart",k,ul)}},[]);var n=a.removeScrollBar,o=a.inert;return z.createElement(z.Fragment,null,o?z.createElement(f,{styles:"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")}):null,n?z.createElement(ui,{noRelative:a.noRelative,gapMode:a.gapMode}):null)},t2.useMedium(g),t5);var ux=z.forwardRef(function(a,b){return z.createElement(t4,tW({},a,{ref:b,sideCar:uw}))});ux.classNames=t4.classNames;var uy=["Enter"," "],uz=["ArrowUp","PageDown","End"],uA=["ArrowDown","PageUp","Home",...uz],uB={ltr:[...uy,"ArrowRight"],rtl:[...uy,"ArrowLeft"]},uC={ltr:["ArrowLeft"],rtl:["ArrowRight"]},uD="Menu",[uE,uF,uG]=pR(uD),[uH,uI]=jI(uD,[uG,r1,tb]),uJ=r1(),uK=tb(),[uL,uM]=uH(uD),[uN,uO]=uH(uD),uP=a=>{let{__scopeMenu:b,open:c=!1,children:d,dir:e,onOpenChange:f,modal:g=!0}=a,h=uJ(b),[i,j]=z.useState(null),k=z.useRef(!1),l=jJ(f),m=jL(e);return z.useEffect(()=>{let a=()=>{k.current=!0,document.addEventListener("pointerdown",b,{capture:!0,once:!0}),document.addEventListener("pointermove",b,{capture:!0,once:!0})},b=()=>k.current=!1;return document.addEventListener("keydown",a,{capture:!0}),()=>{document.removeEventListener("keydown",a,{capture:!0}),document.removeEventListener("pointerdown",b,{capture:!0}),document.removeEventListener("pointermove",b,{capture:!0})}},[]),(0,y.jsx)(r4,{...h,children:(0,y.jsx)(uL,{scope:b,open:c,onOpenChange:l,content:i,onContentChange:j,children:(0,y.jsx)(uN,{scope:b,onClose:z.useCallback(()=>l(!1),[l]),isUsingKeyboardRef:k,dir:m,modal:g,children:d})})})};uP.displayName=uD;var uQ=z.forwardRef((a,b)=>{let{__scopeMenu:c,...d}=a,e=uJ(c);return(0,y.jsx)(r6,{...e,...d,ref:b})});uQ.displayName="MenuAnchor";var uR="MenuPortal",[uS,uT]=uH(uR,{forceMount:void 0}),uU=a=>{let{__scopeMenu:b,forceMount:c,children:d,container:e}=a,f=uM(uR,b);return(0,y.jsx)(uS,{scope:b,forceMount:c,children:(0,y.jsx)(jG,{present:c||f.open,children:(0,y.jsx)(sh,{asChild:!0,container:e,children:d})})})};uU.displayName=uR;var uV="MenuContent",[uW,uX]=uH(uV),uY=z.forwardRef((a,b)=>{let c=uT(uV,a.__scopeMenu),{forceMount:d=c.forceMount,...e}=a,f=uM(uV,a.__scopeMenu),g=uO(uV,a.__scopeMenu);return(0,y.jsx)(uE.Provider,{scope:a.__scopeMenu,children:(0,y.jsx)(jG,{present:d||f.open,children:(0,y.jsx)(uE.Slot,{scope:a.__scopeMenu,children:g.modal?(0,y.jsx)(uZ,{...e,ref:b}):(0,y.jsx)(u$,{...e,ref:b})})})})}),uZ=z.forwardRef((a,b)=>{let c=uM(uV,a.__scopeMenu),d=z.useRef(null),e=iV(b,d);return z.useEffect(()=>{let a=d.current;if(a)return tV(a)},[]),(0,y.jsx)(u0,{...a,ref:e,trapFocus:c.open,disableOutsidePointerEvents:c.open,disableOutsideScroll:!0,onFocusOutside:jM(a.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>c.onOpenChange(!1)})}),u$=z.forwardRef((a,b)=>{let c=uM(uV,a.__scopeMenu);return(0,y.jsx)(u0,{...a,ref:b,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>c.onOpenChange(!1)})}),u_=function(a){let b=function(a){let b=z.forwardRef((a,b)=>{let{children:c,...d}=a;if(z.isValidElement(c)){var e;let a,f,g=(e=c,(f=(a=Object.getOwnPropertyDescriptor(e.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.ref:(f=(a=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.props.ref:e.props.ref||e.ref),h=function(a,b){let c={...b};for(let d in b){let e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...a)=>{let b=f(...a);return e(...a),b}:e&&(c[d]=e):"style"===d?c[d]={...e,...f}:"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return{...a,...c}}(d,c.props);return c.type!==z.Fragment&&(h.ref=b?iU(b,g):g),z.cloneElement(c,h)}return z.Children.count(c)>1?z.Children.only(null):null});return b.displayName=`${a}.SlotClone`,b}(a),c=z.forwardRef((a,c)=>{let{children:d,...e}=a,f=z.Children.toArray(d),g=f.find(tO);if(g){let a=g.props.children,d=f.map(b=>b!==g?b:z.Children.count(a)>1?z.Children.only(null):z.isValidElement(a)?a.props.children:null);return(0,y.jsx)(b,{...e,ref:c,children:z.isValidElement(a)?z.cloneElement(a,void 0,d):null})}return(0,y.jsx)(b,{...e,ref:c,children:d})});return c.displayName=`${a}.Slot`,c}("MenuContent.ScrollLock"),u0=z.forwardRef((a,b)=>{let{__scopeMenu:c,loop:d=!1,trapFocus:e,onOpenAutoFocus:f,onCloseAutoFocus:g,disableOutsidePointerEvents:h,onEntryFocus:i,onEscapeKeyDown:j,onPointerDownOutside:k,onFocusOutside:l,onInteractOutside:m,onDismiss:n,disableOutsideScroll:o,...p}=a,q=uM(uV,c),r=uO(uV,c),s=uJ(c),t=uK(c),u=uF(c),[v,w]=z.useState(null),x=z.useRef(null),A=iV(b,x,q.onContentChange),B=z.useRef(0),C=z.useRef(""),D=z.useRef(0),E=z.useRef(null),F=z.useRef("right"),G=z.useRef(0),H=o?ux:z.Fragment;z.useEffect(()=>()=>window.clearTimeout(B.current),[]),tC();let I=z.useCallback(a=>F.current===E.current?.side&&function(a,b){return!!b&&function(a,b){let{x:c,y:d}=a,e=!1;for(let a=0,f=b.length-1;a<b.length;f=a++){let g=b[a],h=b[f],i=g.x,j=g.y,k=h.x,l=h.y;j>d!=l>d&&c<(k-i)*(d-j)/(l-j)+i&&(e=!e)}return e}({x:a.clientX,y:a.clientY},b)}(a,E.current?.area),[]);return(0,y.jsx)(uW,{scope:c,searchRef:C,onItemEnter:z.useCallback(a=>{I(a)&&a.preventDefault()},[I]),onItemLeave:z.useCallback(a=>{I(a)||(x.current?.focus(),w(null))},[I]),onTriggerLeave:z.useCallback(a=>{I(a)&&a.preventDefault()},[I]),pointerGraceTimerRef:D,onPointerGraceIntentChange:z.useCallback(a=>{E.current=a},[]),children:(0,y.jsx)(H,{...o?{as:u_,allowPinchZoom:!0}:void 0,children:(0,y.jsx)(tH,{asChild:!0,trapped:e,onMountAutoFocus:jM(f,a=>{a.preventDefault(),x.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:g,children:(0,y.jsx)(qJ,{asChild:!0,disableOutsidePointerEvents:h,onEscapeKeyDown:j,onPointerDownOutside:k,onFocusOutside:l,onInteractOutside:m,onDismiss:n,children:(0,y.jsx)(te,{asChild:!0,...t,dir:r.dir,orientation:"vertical",loop:d,currentTabStopId:v,onCurrentTabStopIdChange:w,onEntryFocus:jM(i,a=>{r.isUsingKeyboardRef.current||a.preventDefault()}),preventScrollOnEntryFocus:!0,children:(0,y.jsx)(sa,{role:"menu","aria-orientation":"vertical","data-state":vq(q.open),"data-radix-menu-content":"",dir:r.dir,...s,...p,ref:A,style:{outline:"none",...p.style},onKeyDown:jM(p.onKeyDown,a=>{let b=a.target.closest("[data-radix-menu-content]")===a.currentTarget,c=a.ctrlKey||a.altKey||a.metaKey,d=1===a.key.length;b&&("Tab"===a.key&&a.preventDefault(),!c&&d&&(a=>{let b=C.current+a,c=u().filter(a=>!a.disabled),d=document.activeElement,e=c.find(a=>a.ref.current===d)?.textValue,f=function(a,b,c){var d;let e=b.length>1&&Array.from(b).every(a=>a===b[0])?b[0]:b,f=c?a.indexOf(c):-1,g=(d=Math.max(f,0),a.map((b,c)=>a[(d+c)%a.length]));1===e.length&&(g=g.filter(a=>a!==c));let h=g.find(a=>a.toLowerCase().startsWith(e.toLowerCase()));return h!==c?h:void 0}(c.map(a=>a.textValue),b,e),g=c.find(a=>a.textValue===f)?.ref.current;!function a(b){C.current=b,window.clearTimeout(B.current),""!==b&&(B.current=window.setTimeout(()=>a(""),1e3))}(b),g&&setTimeout(()=>g.focus())})(a.key));let e=x.current;if(a.target!==e||!uA.includes(a.key))return;a.preventDefault();let f=u().filter(a=>!a.disabled).map(a=>a.ref.current);uz.includes(a.key)&&f.reverse(),function(a){let b=document.activeElement;for(let c of a)if(c===b||(c.focus(),document.activeElement!==b))return}(f)}),onBlur:jM(a.onBlur,a=>{a.currentTarget.contains(a.target)||(window.clearTimeout(B.current),C.current="")}),onPointerMove:jM(a.onPointerMove,vt(a=>{let b=a.target,c=G.current!==a.clientX;a.currentTarget.contains(b)&&c&&(F.current=a.clientX>G.current?"right":"left",G.current=a.clientX)}))})})})})})})});uY.displayName=uV;var u1=z.forwardRef((a,b)=>{let{__scopeMenu:c,...d}=a;return(0,y.jsx)(jD.div,{role:"group",...d,ref:b})});u1.displayName="MenuGroup";var u2=z.forwardRef((a,b)=>{let{__scopeMenu:c,...d}=a;return(0,y.jsx)(jD.div,{...d,ref:b})});u2.displayName="MenuLabel";var u3="MenuItem",u4="menu.itemSelect",u5=z.forwardRef((a,b)=>{let{disabled:c=!1,onSelect:d,...e}=a,f=z.useRef(null),g=uO(u3,a.__scopeMenu),h=uX(u3,a.__scopeMenu),i=iV(b,f),j=z.useRef(!1);return(0,y.jsx)(u6,{...e,ref:i,disabled:c,onClick:jM(a.onClick,()=>{let a=f.current;if(!c&&a){let b=new CustomEvent(u4,{bubbles:!0,cancelable:!0});a.addEventListener(u4,a=>d?.(a),{once:!0}),jE(a,b),b.defaultPrevented?j.current=!1:g.onClose()}}),onPointerDown:b=>{a.onPointerDown?.(b),j.current=!0},onPointerUp:jM(a.onPointerUp,a=>{j.current||a.currentTarget?.click()}),onKeyDown:jM(a.onKeyDown,a=>{let b=""!==h.searchRef.current;c||b&&" "===a.key||uy.includes(a.key)&&(a.currentTarget.click(),a.preventDefault())})})});u5.displayName=u3;var u6=z.forwardRef((a,b)=>{let{__scopeMenu:c,disabled:d=!1,textValue:e,...f}=a,g=uX(u3,c),h=uK(c),i=z.useRef(null),j=iV(b,i),[k,l]=z.useState(!1),[m,n]=z.useState("");return z.useEffect(()=>{let a=i.current;a&&n((a.textContent??"").trim())},[f.children]),(0,y.jsx)(uE.ItemSlot,{scope:c,disabled:d,textValue:e??m,children:(0,y.jsx)(th,{asChild:!0,...h,focusable:!d,children:(0,y.jsx)(jD.div,{role:"menuitem","data-highlighted":k?"":void 0,"aria-disabled":d||void 0,"data-disabled":d?"":void 0,...f,ref:j,onPointerMove:jM(a.onPointerMove,vt(a=>{d?g.onItemLeave(a):(g.onItemEnter(a),a.defaultPrevented||a.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:jM(a.onPointerLeave,vt(a=>g.onItemLeave(a))),onFocus:jM(a.onFocus,()=>l(!0)),onBlur:jM(a.onBlur,()=>l(!1))})})})}),u7=z.forwardRef((a,b)=>{let{checked:c=!1,onCheckedChange:d,...e}=a;return(0,y.jsx)(vf,{scope:a.__scopeMenu,checked:c,children:(0,y.jsx)(u5,{role:"menuitemcheckbox","aria-checked":vr(c)?"mixed":c,...e,ref:b,"data-state":vs(c),onSelect:jM(e.onSelect,()=>d?.(!!vr(c)||!c),{checkForDefaultPrevented:!1})})})});u7.displayName="MenuCheckboxItem";var u8="MenuRadioGroup",[u9,va]=uH(u8,{value:void 0,onValueChange:()=>{}}),vb=z.forwardRef((a,b)=>{let{value:c,onValueChange:d,...e}=a,f=jJ(d);return(0,y.jsx)(u9,{scope:a.__scopeMenu,value:c,onValueChange:f,children:(0,y.jsx)(u1,{...e,ref:b})})});vb.displayName=u8;var vc="MenuRadioItem",vd=z.forwardRef((a,b)=>{let{value:c,...d}=a,e=va(vc,a.__scopeMenu),f=c===e.value;return(0,y.jsx)(vf,{scope:a.__scopeMenu,checked:f,children:(0,y.jsx)(u5,{role:"menuitemradio","aria-checked":f,...d,ref:b,"data-state":vs(f),onSelect:jM(d.onSelect,()=>e.onValueChange?.(c),{checkForDefaultPrevented:!1})})})});vd.displayName=vc;var ve="MenuItemIndicator",[vf,vg]=uH(ve,{checked:!1}),vh=z.forwardRef((a,b)=>{let{__scopeMenu:c,forceMount:d,...e}=a,f=vg(ve,c);return(0,y.jsx)(jG,{present:d||vr(f.checked)||!0===f.checked,children:(0,y.jsx)(jD.span,{...e,ref:b,"data-state":vs(f.checked)})})});vh.displayName=ve;var vi=z.forwardRef((a,b)=>{let{__scopeMenu:c,...d}=a;return(0,y.jsx)(jD.div,{role:"separator","aria-orientation":"horizontal",...d,ref:b})});vi.displayName="MenuSeparator";var vj=z.forwardRef((a,b)=>{let{__scopeMenu:c,...d}=a,e=uJ(c);return(0,y.jsx)(sd,{...e,...d,ref:b})});vj.displayName="MenuArrow";var[vk,vl]=uH("MenuSub"),vm="MenuSubTrigger",vn=z.forwardRef((a,b)=>{let c=uM(vm,a.__scopeMenu),d=uO(vm,a.__scopeMenu),e=vl(vm,a.__scopeMenu),f=uX(vm,a.__scopeMenu),g=z.useRef(null),{pointerGraceTimerRef:h,onPointerGraceIntentChange:i}=f,j={__scopeMenu:a.__scopeMenu},k=z.useCallback(()=>{g.current&&window.clearTimeout(g.current),g.current=null},[]);return z.useEffect(()=>k,[k]),z.useEffect(()=>{let a=h.current;return()=>{window.clearTimeout(a),i(null)}},[h,i]),(0,y.jsx)(uQ,{asChild:!0,...j,children:(0,y.jsx)(u6,{id:e.triggerId,"aria-haspopup":"menu","aria-expanded":c.open,"aria-controls":e.contentId,"data-state":vq(c.open),...a,ref:iU(b,e.onTriggerChange),onClick:b=>{a.onClick?.(b),a.disabled||b.defaultPrevented||(b.currentTarget.focus(),c.open||c.onOpenChange(!0))},onPointerMove:jM(a.onPointerMove,vt(b=>{f.onItemEnter(b),!b.defaultPrevented&&(a.disabled||c.open||g.current||(f.onPointerGraceIntentChange(null),g.current=window.setTimeout(()=>{c.onOpenChange(!0),k()},100)))})),onPointerLeave:jM(a.onPointerLeave,vt(a=>{k();let b=c.content?.getBoundingClientRect();if(b){let d=c.content?.dataset.side,e="right"===d,g=b[e?"left":"right"],i=b[e?"right":"left"];f.onPointerGraceIntentChange({area:[{x:a.clientX+(e?-5:5),y:a.clientY},{x:g,y:b.top},{x:i,y:b.top},{x:i,y:b.bottom},{x:g,y:b.bottom}],side:d}),window.clearTimeout(h.current),h.current=window.setTimeout(()=>f.onPointerGraceIntentChange(null),300)}else{if(f.onTriggerLeave(a),a.defaultPrevented)return;f.onPointerGraceIntentChange(null)}})),onKeyDown:jM(a.onKeyDown,b=>{let e=""!==f.searchRef.current;a.disabled||e&&" "===b.key||uB[d.dir].includes(b.key)&&(c.onOpenChange(!0),c.content?.focus(),b.preventDefault())})})})});vn.displayName=vm;var vo="MenuSubContent",vp=z.forwardRef((a,b)=>{let c=uT(uV,a.__scopeMenu),{forceMount:d=c.forceMount,...e}=a,f=uM(uV,a.__scopeMenu),g=uO(uV,a.__scopeMenu),h=vl(vo,a.__scopeMenu),i=z.useRef(null),j=iV(b,i);return(0,y.jsx)(uE.Provider,{scope:a.__scopeMenu,children:(0,y.jsx)(jG,{present:d||f.open,children:(0,y.jsx)(uE.Slot,{scope:a.__scopeMenu,children:(0,y.jsx)(u0,{id:h.contentId,"aria-labelledby":h.triggerId,...e,ref:j,align:"start",side:"rtl"===g.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:a=>{g.isUsingKeyboardRef.current&&i.current?.focus(),a.preventDefault()},onCloseAutoFocus:a=>a.preventDefault(),onFocusOutside:jM(a.onFocusOutside,a=>{a.target!==h.trigger&&f.onOpenChange(!1)}),onEscapeKeyDown:jM(a.onEscapeKeyDown,a=>{g.onClose(),a.preventDefault()}),onKeyDown:jM(a.onKeyDown,a=>{let b=a.currentTarget.contains(a.target),c=uC[g.dir].includes(a.key);b&&c&&(f.onOpenChange(!1),h.trigger?.focus(),a.preventDefault())})})})})})});function vq(a){return a?"open":"closed"}function vr(a){return"indeterminate"===a}function vs(a){return vr(a)?"indeterminate":a?"checked":"unchecked"}function vt(a){return b=>"mouse"===b.pointerType?a(b):void 0}vp.displayName=vo;var vu="DropdownMenu",[vv,vw]=jI(vu,[uI]),vx=uI(),[vy,vz]=vv(vu),vA=a=>{let{__scopeDropdownMenu:b,children:c,dir:d,open:e,defaultOpen:f,onOpenChange:g,modal:h=!0}=a,i=vx(b),j=z.useRef(null),[k,l]=pW({prop:e,defaultProp:f??!1,onChange:g,caller:vu});return(0,y.jsx)(vy,{scope:b,triggerId:pZ(),triggerRef:j,contentId:pZ(),open:k,onOpenChange:l,onOpenToggle:z.useCallback(()=>l(a=>!a),[l]),modal:h,children:(0,y.jsx)(uP,{...i,open:k,onOpenChange:l,dir:d,modal:h,children:c})})};vA.displayName=vu;var vB="DropdownMenuTrigger",vC=z.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,disabled:d=!1,...e}=a,f=vz(vB,c),g=vx(c);return(0,y.jsx)(uQ,{asChild:!0,...g,children:(0,y.jsx)(jD.button,{type:"button",id:f.triggerId,"aria-haspopup":"menu","aria-expanded":f.open,"aria-controls":f.open?f.contentId:void 0,"data-state":f.open?"open":"closed","data-disabled":d?"":void 0,disabled:d,...e,ref:iU(b,f.triggerRef),onPointerDown:jM(a.onPointerDown,a=>{!d&&0===a.button&&!1===a.ctrlKey&&(f.onOpenToggle(),f.open||a.preventDefault())}),onKeyDown:jM(a.onKeyDown,a=>{!d&&(["Enter"," "].includes(a.key)&&f.onOpenToggle(),"ArrowDown"===a.key&&f.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});vC.displayName=vB;var vD=a=>{let{__scopeDropdownMenu:b,...c}=a,d=vx(b);return(0,y.jsx)(uU,{...d,...c})};vD.displayName="DropdownMenuPortal";var vE="DropdownMenuContent",vF=z.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=vz(vE,c),f=vx(c),g=z.useRef(!1);return(0,y.jsx)(uY,{id:e.contentId,"aria-labelledby":e.triggerId,...f,...d,ref:b,onCloseAutoFocus:jM(a.onCloseAutoFocus,a=>{g.current||e.triggerRef.current?.focus(),g.current=!1,a.preventDefault()}),onInteractOutside:jM(a.onInteractOutside,a=>{let b=a.detail.originalEvent,c=0===b.button&&!0===b.ctrlKey,d=2===b.button||c;(!e.modal||d)&&(g.current=!0)}),style:{...a.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});vF.displayName=vE,z.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=vx(c);return(0,y.jsx)(u1,{...e,...d,ref:b})}).displayName="DropdownMenuGroup";var vG=z.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=vx(c);return(0,y.jsx)(u2,{...e,...d,ref:b})});vG.displayName="DropdownMenuLabel";var vH=z.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=vx(c);return(0,y.jsx)(u5,{...e,...d,ref:b})});vH.displayName="DropdownMenuItem";var vI=z.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=vx(c);return(0,y.jsx)(u7,{...e,...d,ref:b})});vI.displayName="DropdownMenuCheckboxItem",z.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=vx(c);return(0,y.jsx)(vb,{...e,...d,ref:b})}).displayName="DropdownMenuRadioGroup";var vJ=z.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=vx(c);return(0,y.jsx)(vd,{...e,...d,ref:b})});vJ.displayName="DropdownMenuRadioItem";var vK=z.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=vx(c);return(0,y.jsx)(vh,{...e,...d,ref:b})});vK.displayName="DropdownMenuItemIndicator";var vL=z.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=vx(c);return(0,y.jsx)(vi,{...e,...d,ref:b})});vL.displayName="DropdownMenuSeparator",z.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=vx(c);return(0,y.jsx)(vj,{...e,...d,ref:b})}).displayName="DropdownMenuArrow";var vM=z.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=vx(c);return(0,y.jsx)(vn,{...e,...d,ref:b})});vM.displayName="DropdownMenuSubTrigger";var vN=z.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=vx(c);return(0,y.jsx)(vp,{...e,...d,ref:b,style:{...a.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});vN.displayName="DropdownMenuSubContent";let vO=hD("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),vP=hD("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);z.forwardRef(({className:a,inset:b,children:c,...d},e)=>(0,y.jsxs)(vM,{ref:e,className:iL("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",b&&"pl-8",a),...d,children:[c,(0,y.jsx)(iS,{className:"ml-auto"})]})).displayName=vM.displayName,z.forwardRef(({className:a,...b},c)=>(0,y.jsx)(vN,{ref:c,className:iL("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",a),...b})).displayName=vN.displayName;let vQ=z.forwardRef(({className:a,sideOffset:b=4,...c},d)=>(0,y.jsx)(vD,{children:(0,y.jsx)(vF,{ref:d,sideOffset:b,className:iL("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",a),...c})}));vQ.displayName=vF.displayName;let vR=z.forwardRef(({className:a,inset:b,...c},d)=>(0,y.jsx)(vH,{ref:d,className:iL("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",b&&"pl-8",a),...c}));function vS(){let{scanHistory:a,favorites:b,currentProduct:c,setCurrentProduct:d,toggleFavorite:e,clearHistory:f}=ge(),[g,h]=(0,z.useState)(""),[i,j]=(0,z.useState)("recent"),[k,l]=(0,z.useState)("all"),[m,n]=(0,z.useState)("all"),o=a=>hu(a.ingredients).overallStatus,p=(a=>{let b=[...a];if(g){let a=g.toLowerCase();b=b.filter(b=>b.name.toLowerCase().includes(a)||b.brand?.toLowerCase().includes(a)||b.upc.includes(a))}return"all"!==k&&(b=b.filter(a=>o(a)===k)),b.sort((a,b)=>{switch(i){case"name":return a.name.localeCompare(b.name);case"safety":{let c={unsafe:0,unknown:1,safe:2};return c[o(a)]-c[o(b)]}default:return new Date(b.lastScannedAt||b.createdAt).getTime()-new Date(a.lastScannedAt||a.createdAt).getTime()}}),b})("favorites"===m?b:a);return c?(hu(c.ingredients),(0,y.jsxs)("div",{"data-design-id":"product-detail",className:"h-full flex flex-col bg-background",children:[(0,y.jsxs)("div",{"data-design-id":"detail-header",className:"p-4 flex items-center gap-3 border-b",children:[(0,y.jsx)(i4,{"data-design-id":"detail-back",variant:"ghost",size:"icon",onClick:()=>d(null),children:(0,y.jsx)(km,{className:"w-5 h-5"})}),(0,y.jsx)("h2",{className:"font-semibold flex-1 truncate",children:c.name}),(0,y.jsx)(i4,{"data-design-id":"detail-favorite",variant:"ghost",size:"icon",onClick:()=>c.id&&e(c.id),children:(0,y.jsx)(ja,{className:`w-5 h-5 ${c.isFavorite?"fill-red-500 text-red-500":""}`})})]}),(0,y.jsx)(ki,{className:"flex-1",children:(0,y.jsxs)("div",{className:"p-5 space-y-6 pb-24",children:[(0,y.jsx)(jz,{product:c}),(0,y.jsx)(sM,{ingredients:c.ingredients,showProvenance:!0}),(0,y.jsxs)("div",{"data-design-id":"product-meta",className:"text-xs text-muted-foreground space-y-1",children:[(0,y.jsxs)("p",{children:["UPC: ",c.upc]}),(0,y.jsxs)("p",{children:["Source: ",c.sourceProvenance]}),(0,y.jsxs)("p",{children:["Added: ",new Date(c.createdAt).toLocaleDateString()]}),c.lastScannedAt&&(0,y.jsxs)("p",{children:["Last scanned:"," ",new Date(c.lastScannedAt).toLocaleDateString()]})]})]})})]})):(0,y.jsxs)("div",{"data-design-id":"history-screen",className:"h-full flex flex-col bg-background",children:[(0,y.jsxs)("div",{"data-design-id":"history-header",className:"p-4 border-b space-y-4",children:[(0,y.jsxs)("div",{className:"flex items-center justify-between",children:[(0,y.jsx)("h1",{"data-design-id":"history-title",className:"text-xl font-bold",children:"Product History"}),(0,y.jsxs)(jw,{"data-design-id":"history-count",variant:"secondary",children:[a.length," products"]})]}),(0,y.jsx)(tq,{value:m,onValueChange:a=>n(a),children:(0,y.jsxs)(tz,{"data-design-id":"history-tabs",className:"w-full",children:[(0,y.jsxs)(tA,{"data-design-id":"tab-all",value:"all",className:"flex-1",children:[(0,y.jsx)(hG,{className:"w-4 h-4 mr-2"}),"All Scans"]}),(0,y.jsxs)(tA,{"data-design-id":"tab-favorites",value:"favorites",className:"flex-1",children:[(0,y.jsx)(ja,{className:"w-4 h-4 mr-2"}),"Favorites (",b.length,")"]})]})}),(0,y.jsxs)("div",{className:"flex gap-2",children:[(0,y.jsxs)("div",{className:"relative flex-1",children:[(0,y.jsx)(i7,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,y.jsx)(jc,{"data-design-id":"history-search",placeholder:"Search products...",value:g,onChange:a=>h(a.target.value),className:"pl-10"})]}),(0,y.jsxs)(vA,{children:[(0,y.jsx)(vC,{asChild:!0,children:(0,y.jsx)(i4,{"data-design-id":"filter-btn",variant:"outline",size:"icon",children:(0,y.jsx)(s2,{className:"w-4 h-4"})})}),(0,y.jsxs)(vQ,{align:"end",children:[(0,y.jsxs)(vR,{onClick:()=>l("all"),children:["All Products","all"===k&&(0,y.jsx)("span",{className:"ml-auto",children:""})]}),(0,y.jsxs)(vR,{onClick:()=>l("safe"),children:["Safe Only","safe"===k&&(0,y.jsx)("span",{className:"ml-auto",children:""})]}),(0,y.jsxs)(vR,{onClick:()=>l("unsafe"),children:["Unsafe Only","unsafe"===k&&(0,y.jsx)("span",{className:"ml-auto",children:""})]}),(0,y.jsxs)(vR,{onClick:()=>l("unknown"),children:["Unknown Only","unknown"===k&&(0,y.jsx)("span",{className:"ml-auto",children:""})]})]})]}),(0,y.jsxs)(vA,{children:[(0,y.jsx)(vC,{asChild:!0,children:(0,y.jsx)(i4,{"data-design-id":"sort-btn",variant:"outline",size:"icon",children:(0,y.jsx)(s3,{className:"w-4 h-4"})})}),(0,y.jsxs)(vQ,{align:"end",children:[(0,y.jsxs)(vR,{onClick:()=>j("recent"),children:["Most Recent","recent"===i&&(0,y.jsx)("span",{className:"ml-auto",children:""})]}),(0,y.jsxs)(vR,{onClick:()=>j("name"),children:["Name (A-Z)","name"===i&&(0,y.jsx)("span",{className:"ml-auto",children:""})]}),(0,y.jsxs)(vR,{onClick:()=>j("safety"),children:["Safety Status","safety"===i&&(0,y.jsx)("span",{className:"ml-auto",children:""})]})]})]})]})]}),(0,y.jsx)(ki,{className:"flex-1",children:(0,y.jsx)("div",{className:"p-4 pb-24 space-y-2",children:(0,y.jsx)(f9,{mode:"popLayout",children:p.length>0?p.map((a,b)=>(0,y.jsx)(f1.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.9},transition:{delay:.05*b},children:(0,y.jsx)(jz,{product:a,compact:!0,onSelect:()=>d(a)})},a.id)):(0,y.jsxs)(f1.div,{"data-design-id":"history-empty",initial:{opacity:0},animate:{opacity:1},className:"text-center py-16",children:[(0,y.jsx)("div",{className:"w-20 h-20 rounded-full bg-muted flex items-center justify-center mx-auto mb-4",children:(0,y.jsx)(sN,{className:"w-10 h-10 text-muted-foreground"})}),(0,y.jsx)("h3",{"data-design-id":"empty-title",className:"font-semibold mb-2",children:g?"No matching products":"favorites"===m?"No favorites yet":"No products scanned"}),(0,y.jsx)("p",{"data-design-id":"empty-desc",className:"text-sm text-muted-foreground",children:g?"Try adjusting your search or filters":"favorites"===m?"Tap the heart icon on a product to add it to favorites":"Start scanning products to build your history"})]})})})})]})}vR.displayName=vH.displayName,z.forwardRef(({className:a,children:b,checked:c,...d},e)=>(0,y.jsxs)(vI,{ref:e,className:iL("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:c,...d,children:[(0,y.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,y.jsx)(vK,{children:(0,y.jsx)(vO,{className:"h-4 w-4"})})}),b]})).displayName=vI.displayName,z.forwardRef(({className:a,children:b,...c},d)=>(0,y.jsxs)(vJ,{ref:d,className:iL("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...c,children:[(0,y.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,y.jsx)(vK,{children:(0,y.jsx)(vP,{className:"h-2 w-2 fill-current"})})}),b]})).displayName=vJ.displayName,z.forwardRef(({className:a,inset:b,...c},d)=>(0,y.jsx)(vG,{ref:d,className:iL("px-2 py-1.5 text-sm font-semibold",b&&"pl-8",a),...c})).displayName=vG.displayName,z.forwardRef(({className:a,...b},c)=>(0,y.jsx)(vL,{ref:c,className:iL("-mx-1 my-1 h-px bg-muted",a),...b})).displayName=vL.displayName;let vT=hD("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]]),vU=hD("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),vV=hD("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),vW=hD("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),vX=hD("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),vY=hD("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]),vZ=hD("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);var v$="Switch",[v_,v0]=jI(v$),[v1,v2]=v_(v$),v3=z.forwardRef((a,b)=>{let{__scopeSwitch:c,name:d,checked:e,defaultChecked:f,required:g,disabled:h,value:i="on",onCheckedChange:j,form:k,...l}=a,[m,n]=z.useState(null),o=iV(b,a=>n(a)),p=z.useRef(!1),q=!m||k||!!m.closest("form"),[r,s]=pW({prop:e,defaultProp:f??!1,onChange:j,caller:v$});return(0,y.jsxs)(v1,{scope:c,checked:r,disabled:h,children:[(0,y.jsx)(jD.button,{type:"button",role:"switch","aria-checked":r,"aria-required":g,"data-state":v7(r),"data-disabled":h?"":void 0,disabled:h,value:i,...l,ref:o,onClick:jM(a.onClick,a=>{s(a=>!a),q&&(p.current=a.isPropagationStopped(),p.current||a.stopPropagation())})}),q&&(0,y.jsx)(v6,{control:m,bubbles:!p.current,name:d,value:i,checked:r,required:g,disabled:h,form:k,style:{transform:"translateX(-100%)"}})]})});v3.displayName=v$;var v4="SwitchThumb",v5=z.forwardRef((a,b)=>{let{__scopeSwitch:c,...d}=a,e=v2(v4,c);return(0,y.jsx)(jD.span,{"data-state":v7(e.checked),"data-disabled":e.disabled?"":void 0,...d,ref:b})});v5.displayName=v4;var v6=z.forwardRef(({__scopeSwitch:a,control:b,checked:c,bubbles:d=!0,...e},f)=>{let g=z.useRef(null),h=iV(g,f),i=function(a){let b=z.useRef({value:a,previous:a});return z.useMemo(()=>(b.current.value!==a&&(b.current.previous=b.current.value,b.current.value=a),b.current.previous),[a])}(c),j=r$(b);return z.useEffect(()=>{let a=g.current;if(!a)return;let b=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(i!==c&&b){let e=new Event("click",{bubbles:d});b.call(a,c),a.dispatchEvent(e)}},[i,c,d]),(0,y.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:c,...e,tabIndex:-1,ref:h,style:{...e.style,...j,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function v7(a){return a?"checked":"unchecked"}v6.displayName="SwitchBubbleInput";let v8=z.forwardRef(({className:a,...b},c)=>(0,y.jsx)(v3,{className:iL("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...b,ref:c,children:(0,y.jsx)(v5,{className:iL("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));v8.displayName=v3.displayName;let v9=[{type:"location",title:"Location Access",description:"Help find local product availability and regional formulations",howUsed:"Location is used to find nearby stores carrying products and identify region-specific product variations that may have different ingredients.",icon:vX,iconColor:"text-blue-500"},{type:"photo",title:"Photo Upload & Analysis",description:"Scan ingredient labels using your camera for OCR analysis",howUsed:"Photos of product labels are processed using OCR to extract ingredient lists. This helps verify or supplement data from product databases.",icon:jl,iconColor:"text-purple-500"},{type:"review",title:"Review Aggregation",description:"Access community reviews for additional ingredient insights",howUsed:"With your permission, we search public product reviews for mentions of ingredients that may not appear on standard labels.",icon:vY,iconColor:"text-amber-500"},{type:"data_contribution",title:"Data Contribution",description:"Share your findings to improve the database for everyone",howUsed:"Your manually entered products and OCR corrections help improve ingredient data accuracy for the entire community.",icon:vZ,iconColor:"text-emerald-500"}];function wa({config:a,isGranted:b,onToggle:c}){let d=a.icon;return(0,y.jsx)(f1.div,{"data-design-id":`consent-item-${a.type}`,initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:iL("p-4 rounded-xl border transition-colors",b?"bg-primary/5 border-primary/20":"bg-card border-border"),children:(0,y.jsxs)("div",{className:"flex items-start gap-4",children:[(0,y.jsx)("div",{className:iL("w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0",b?"bg-primary/10":"bg-muted"),children:(0,y.jsx)(d,{className:iL("w-5 h-5",b?a.iconColor:"text-muted-foreground")})}),(0,y.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,y.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,y.jsx)("h4",{"data-design-id":`consent-title-${a.type}`,className:"font-semibold",children:a.title}),(0,y.jsx)(v8,{"data-design-id":`consent-toggle-${a.type}`,checked:b,onCheckedChange:c})]}),(0,y.jsx)("p",{"data-design-id":`consent-desc-${a.type}`,className:"text-sm text-muted-foreground mt-1",children:a.description}),b&&(0,y.jsx)(f1.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-3 p-3 bg-background rounded-lg border border-border/50",children:(0,y.jsxs)("div",{className:"flex items-start gap-2 text-xs text-muted-foreground",children:[(0,y.jsx)(pN,{className:"w-3.5 h-3.5 mt-0.5 flex-shrink-0"}),(0,y.jsx)("p",{children:a.howUsed})]})})]})]})})}function wb(){let{consents:a,setConsent:b}=ge();return(0,y.jsxs)("div",{"data-design-id":"consent-manager",className:"space-y-6",children:[(0,y.jsxs)(jd,{"data-design-id":"consent-header-card",children:[(0,y.jsx)(je,{className:"pb-3",children:(0,y.jsxs)("div",{className:"flex items-center gap-3",children:[(0,y.jsx)("div",{className:"w-12 h-12 rounded-xl bg-primary/10 flex items-center justify-center",children:(0,y.jsx)(iP,{className:"w-6 h-6 text-primary"})}),(0,y.jsxs)("div",{children:[(0,y.jsx)(jf,{"data-design-id":"consent-manager-title",children:"Privacy & Permissions"}),(0,y.jsx)(jg,{"data-design-id":"consent-manager-desc",children:"Control how your data is collected and used"})]})]})}),(0,y.jsx)(jh,{children:(0,y.jsxs)(sZ,{"data-design-id":"consent-info-alert",children:[(0,y.jsx)(pN,{className:"w-4 h-4"}),(0,y.jsx)(s_,{children:"All data collection is opt-in. The app works fully offline with core features. Enable permissions only for features you want to use."})]})})]}),(0,y.jsx)("div",{"data-design-id":"consent-list",className:"space-y-3",children:v9.map((c,d)=>(0,y.jsx)(f1.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*d},children:(0,y.jsx)(wa,{config:c,isGranted:a[c.type]?.granted||!1,onToggle:a=>b(c.type,a)})},c.type))}),(0,y.jsx)(jd,{"data-design-id":"data-policy-card",className:"bg-muted/30",children:(0,y.jsxs)(jh,{className:"pt-4",children:[(0,y.jsx)("h4",{"data-design-id":"data-policy-title",className:"font-semibold text-sm mb-2",children:"How We Protect Your Data"}),(0,y.jsxs)("ul",{className:"space-y-2 text-xs text-muted-foreground",children:[(0,y.jsxs)("li",{"data-design-id":"data-policy-item-1",className:"flex items-start gap-2",children:[(0,y.jsx)("span",{className:"text-primary",children:""}),"All product data is stored locally on your device using IndexedDB"]}),(0,y.jsxs)("li",{"data-design-id":"data-policy-item-2",className:"flex items-start gap-2",children:[(0,y.jsx)("span",{className:"text-primary",children:""}),"Photos are processed on-device when possible; never stored on servers"]}),(0,y.jsxs)("li",{"data-design-id":"data-policy-item-3",className:"flex items-start gap-2",children:[(0,y.jsx)("span",{className:"text-primary",children:""}),"Location data is used only for queries and never logged"]}),(0,y.jsxs)("li",{"data-design-id":"data-policy-item-4",className:"flex items-start gap-2",children:[(0,y.jsx)("span",{className:"text-primary",children:""}),"You can withdraw consent and delete all data at any time"]})]})]})})]})}var wc=Symbol("radix.slottable");function wd(a){return z.isValidElement(a)&&"function"==typeof a.type&&"__radixId"in a.type&&a.type.__radixId===wc}var we="Dialog",[wf,wg]=jI(we),[wh,wi]=wf(we),wj=a=>{let{__scopeDialog:b,children:c,open:d,defaultOpen:e,onOpenChange:f,modal:g=!0}=a,h=z.useRef(null),i=z.useRef(null),[j,k]=pW({prop:d,defaultProp:e??!1,onChange:f,caller:we});return(0,y.jsx)(wh,{scope:b,triggerRef:h,contentRef:i,contentId:pZ(),titleId:pZ(),descriptionId:pZ(),open:j,onOpenChange:k,onOpenToggle:z.useCallback(()=>k(a=>!a),[k]),modal:g,children:c})};wj.displayName=we;var wk="DialogTrigger",wl=z.forwardRef((a,b)=>{let{__scopeDialog:c,...d}=a,e=wi(wk,c),f=iV(b,e.triggerRef);return(0,y.jsx)(jD.button,{type:"button","aria-haspopup":"dialog","aria-expanded":e.open,"aria-controls":e.contentId,"data-state":wF(e.open),...d,ref:f,onClick:jM(a.onClick,e.onOpenToggle)})});wl.displayName=wk;var wm="DialogPortal",[wn,wo]=wf(wm,{forceMount:void 0}),wp=a=>{let{__scopeDialog:b,forceMount:c,children:d,container:e}=a,f=wi(wm,b);return(0,y.jsx)(wn,{scope:b,forceMount:c,children:z.Children.map(d,a=>(0,y.jsx)(jG,{present:c||f.open,children:(0,y.jsx)(sh,{asChild:!0,container:e,children:a})}))})};wp.displayName=wm;var wq="DialogOverlay",wr=z.forwardRef((a,b)=>{let c=wo(wq,a.__scopeDialog),{forceMount:d=c.forceMount,...e}=a,f=wi(wq,a.__scopeDialog);return f.modal?(0,y.jsx)(jG,{present:d||f.open,children:(0,y.jsx)(wt,{...e,ref:b})}):null});wr.displayName=wq;var ws=function(a){let b=function(a){let b=z.forwardRef((a,b)=>{let{children:c,...d}=a;if(z.isValidElement(c)){var e;let a,f,g=(e=c,(f=(a=Object.getOwnPropertyDescriptor(e.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.ref:(f=(a=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.props.ref:e.props.ref||e.ref),h=function(a,b){let c={...b};for(let d in b){let e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...a)=>{let b=f(...a);return e(...a),b}:e&&(c[d]=e):"style"===d?c[d]={...e,...f}:"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return{...a,...c}}(d,c.props);return c.type!==z.Fragment&&(h.ref=b?iU(b,g):g),z.cloneElement(c,h)}return z.Children.count(c)>1?z.Children.only(null):null});return b.displayName=`${a}.SlotClone`,b}(a),c=z.forwardRef((a,c)=>{let{children:d,...e}=a,f=z.Children.toArray(d),g=f.find(wd);if(g){let a=g.props.children,d=f.map(b=>b!==g?b:z.Children.count(a)>1?z.Children.only(null):z.isValidElement(a)?a.props.children:null);return(0,y.jsx)(b,{...e,ref:c,children:z.isValidElement(a)?z.cloneElement(a,void 0,d):null})}return(0,y.jsx)(b,{...e,ref:c,children:d})});return c.displayName=`${a}.Slot`,c}("DialogOverlay.RemoveScroll"),wt=z.forwardRef((a,b)=>{let{__scopeDialog:c,...d}=a,e=wi(wq,c);return(0,y.jsx)(ux,{as:ws,allowPinchZoom:!0,shards:[e.contentRef],children:(0,y.jsx)(jD.div,{"data-state":wF(e.open),...d,ref:b,style:{pointerEvents:"auto",...d.style}})})}),wu="DialogContent",wv=z.forwardRef((a,b)=>{let c=wo(wu,a.__scopeDialog),{forceMount:d=c.forceMount,...e}=a,f=wi(wu,a.__scopeDialog);return(0,y.jsx)(jG,{present:d||f.open,children:f.modal?(0,y.jsx)(ww,{...e,ref:b}):(0,y.jsx)(wx,{...e,ref:b})})});wv.displayName=wu;var ww=z.forwardRef((a,b)=>{let c=wi(wu,a.__scopeDialog),d=z.useRef(null),e=iV(b,c.contentRef,d);return z.useEffect(()=>{let a=d.current;if(a)return tV(a)},[]),(0,y.jsx)(wy,{...a,ref:e,trapFocus:c.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:jM(a.onCloseAutoFocus,a=>{a.preventDefault(),c.triggerRef.current?.focus()}),onPointerDownOutside:jM(a.onPointerDownOutside,a=>{let b=a.detail.originalEvent,c=0===b.button&&!0===b.ctrlKey;(2===b.button||c)&&a.preventDefault()}),onFocusOutside:jM(a.onFocusOutside,a=>a.preventDefault())})}),wx=z.forwardRef((a,b)=>{let c=wi(wu,a.__scopeDialog),d=z.useRef(!1),e=z.useRef(!1);return(0,y.jsx)(wy,{...a,ref:b,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:b=>{a.onCloseAutoFocus?.(b),b.defaultPrevented||(d.current||c.triggerRef.current?.focus(),b.preventDefault()),d.current=!1,e.current=!1},onInteractOutside:b=>{a.onInteractOutside?.(b),b.defaultPrevented||(d.current=!0,"pointerdown"===b.detail.originalEvent.type&&(e.current=!0));let f=b.target;c.triggerRef.current?.contains(f)&&b.preventDefault(),"focusin"===b.detail.originalEvent.type&&e.current&&b.preventDefault()}})}),wy=z.forwardRef((a,b)=>{let{__scopeDialog:c,trapFocus:d,onOpenAutoFocus:e,onCloseAutoFocus:f,...g}=a,h=wi(wu,c),i=z.useRef(null),j=iV(b,i);return tC(),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(tH,{asChild:!0,loop:!0,trapped:d,onMountAutoFocus:e,onUnmountAutoFocus:f,children:(0,y.jsx)(qJ,{role:"dialog",id:h.contentId,"aria-describedby":h.descriptionId,"aria-labelledby":h.titleId,"data-state":wF(h.open),...g,ref:j,onDismiss:()=>h.onOpenChange(!1)})}),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(wJ,{titleId:h.titleId}),(0,y.jsx)(wK,{contentRef:i,descriptionId:h.descriptionId})]})]})}),wz="DialogTitle",wA=z.forwardRef((a,b)=>{let{__scopeDialog:c,...d}=a,e=wi(wz,c);return(0,y.jsx)(jD.h2,{id:e.titleId,...d,ref:b})});wA.displayName=wz;var wB="DialogDescription",wC=z.forwardRef((a,b)=>{let{__scopeDialog:c,...d}=a,e=wi(wB,c);return(0,y.jsx)(jD.p,{id:e.descriptionId,...d,ref:b})});wC.displayName=wB;var wD="DialogClose",wE=z.forwardRef((a,b)=>{let{__scopeDialog:c,...d}=a,e=wi(wD,c);return(0,y.jsx)(jD.button,{type:"button",...d,ref:b,onClick:jM(a.onClick,()=>e.onOpenChange(!1))})});function wF(a){return a?"open":"closed"}wE.displayName=wD;var wG="DialogTitleWarning",[wH,wI]=function(a,b){let c=z.createContext(b),d=a=>{let{children:b,...d}=a,e=z.useMemo(()=>d,Object.values(d));return(0,y.jsx)(c.Provider,{value:e,children:b})};return d.displayName=a+"Provider",[d,function(d){let e=z.useContext(c);if(e)return e;if(void 0!==b)return b;throw Error(`\`${d}\` must be used within \`${a}\``)}]}(wG,{contentName:wu,titleName:wz,docsSlug:"dialog"}),wJ=({titleId:a})=>{let b=wI(wG),c=`\`${b.contentName}\` requires a \`${b.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${b.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${b.docsSlug}`;return z.useEffect(()=>{a&&(document.getElementById(a)||console.error(c))},[c,a]),null},wK=({contentRef:a,descriptionId:b})=>{let c=wI("DialogDescriptionWarning"),d=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${c.contentName}}.`;return z.useEffect(()=>{let c=a.current?.getAttribute("aria-describedby");b&&c&&(document.getElementById(b)||console.warn(d))},[d,a,b]),null};let wL=z.forwardRef(({className:a,...b},c)=>(0,y.jsx)(wr,{ref:c,className:iL("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...b}));wL.displayName=wr.displayName;let wM=z.forwardRef(({className:a,children:b,...c},d)=>(0,y.jsxs)(wp,{children:[(0,y.jsx)(wL,{}),(0,y.jsxs)(wv,{ref:d,className:iL("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...c,children:[b,(0,y.jsxs)(wE,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,y.jsx)(kp,{className:"h-4 w-4"}),(0,y.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));wM.displayName=wv.displayName;let wN=({className:a,...b})=>(0,y.jsx)("div",{className:iL("flex flex-col space-y-1.5 text-center sm:text-left",a),...b});wN.displayName="DialogHeader";let wO=({className:a,...b})=>(0,y.jsx)("div",{className:iL("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...b});wO.displayName="DialogFooter";let wP=z.forwardRef(({className:a,...b},c)=>(0,y.jsx)(wA,{ref:c,className:iL("text-lg font-semibold leading-none tracking-tight",a),...b}));wP.displayName=wA.displayName;let wQ=z.forwardRef(({className:a,...b},c)=>(0,y.jsx)(wC,{ref:c,className:iL("text-sm text-muted-foreground",a),...b}));function wR(){let{clearHistory:a,scanHistory:b}=ge(),[c,d]=(0,z.useState)(!1),[e,f]=(0,z.useState)(!1),g=async()=>{try{let a=await gB(),b=new Blob([a],{type:"application/json"}),c=URL.createObjectURL(b),d=document.createElement("a");d.href=c,d.download=`mthfr-scanner-export-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(c),s0.oR.success("Data exported successfully!")}catch(a){s0.oR.error("Failed to export data")}},h=async()=>{try{await gA(),a(),f(!1),s0.oR.success("All data cleared")}catch(a){s0.oR.error("Failed to clear data")}};return(0,y.jsx)(ki,{className:"h-full",children:(0,y.jsxs)("div",{"data-design-id":"settings-screen",className:"pb-24 px-5 pt-4 space-y-6",children:[(0,y.jsxs)(f1.div,{"data-design-id":"settings-header",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[(0,y.jsxs)("h1",{"data-design-id":"settings-title",className:"text-2xl font-bold flex items-center gap-2",children:[(0,y.jsx)(hH,{className:"w-6 h-6"}),"Settings"]}),(0,y.jsx)("p",{"data-design-id":"settings-subtitle",className:"text-muted-foreground",children:"Manage your preferences and data"})]}),(0,y.jsx)(f1.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},children:(0,y.jsx)(wb,{})}),(0,y.jsx)(f1.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:(0,y.jsxs)(jd,{"data-design-id":"appearance-card",children:[(0,y.jsx)(je,{className:"pb-3",children:(0,y.jsxs)(jf,{"data-design-id":"appearance-title",className:"text-base flex items-center gap-2",children:[c?(0,y.jsx)(vT,{className:"w-4 h-4"}):(0,y.jsx)(vU,{className:"w-4 h-4"}),"Appearance"]})}),(0,y.jsx)(jh,{children:(0,y.jsxs)("div",{className:"flex items-center justify-between",children:[(0,y.jsxs)("div",{children:[(0,y.jsx)("p",{"data-design-id":"dark-mode-label",className:"font-medium",children:"Dark Mode"}),(0,y.jsx)("p",{className:"text-sm text-muted-foreground",children:"Use dark theme for reduced eye strain"})]}),(0,y.jsx)(v8,{"data-design-id":"dark-mode-toggle",checked:c,onCheckedChange:()=>{d(!c),document.documentElement.classList.toggle("dark")}})]})})]})}),(0,y.jsx)(f1.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},children:(0,y.jsxs)(jd,{"data-design-id":"data-card",children:[(0,y.jsxs)(je,{className:"pb-3",children:[(0,y.jsxs)(jf,{"data-design-id":"data-title",className:"text-base flex items-center gap-2",children:[(0,y.jsx)(jk,{className:"w-4 h-4"}),"Data Management"]}),(0,y.jsxs)(jg,{children:[b.length," products in history"]})]}),(0,y.jsxs)(jh,{className:"space-y-3",children:[(0,y.jsxs)(i4,{"data-design-id":"export-btn",variant:"outline",className:"w-full justify-between",onClick:g,children:[(0,y.jsxs)("span",{className:"flex items-center gap-2",children:[(0,y.jsx)(vV,{className:"w-4 h-4"}),"Export Data"]}),(0,y.jsx)(iS,{className:"w-4 h-4 text-muted-foreground"})]}),(0,y.jsxs)(wj,{open:e,onOpenChange:f,children:[(0,y.jsx)(wl,{asChild:!0,children:(0,y.jsxs)(i4,{"data-design-id":"clear-btn",variant:"outline",className:"w-full justify-between text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-950/30",children:[(0,y.jsxs)("span",{className:"flex items-center gap-2",children:[(0,y.jsx)(vW,{className:"w-4 h-4"}),"Clear All Data"]}),(0,y.jsx)(iS,{className:"w-4 h-4"})]})}),(0,y.jsxs)(wM,{children:[(0,y.jsxs)(wN,{children:[(0,y.jsx)(wP,{children:"Clear All Data?"}),(0,y.jsx)(wQ,{children:"This will permanently delete all your scanned products, history, and favorites. This action cannot be undone."})]}),(0,y.jsxs)(wO,{className:"gap-2 sm:gap-0",children:[(0,y.jsx)(i4,{variant:"outline",onClick:()=>f(!1),children:"Cancel"}),(0,y.jsx)(i4,{variant:"destructive",onClick:h,children:"Yes, Clear All"})]})]})]})]})]})}),(0,y.jsx)(f1.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},children:(0,y.jsxs)(jd,{"data-design-id":"about-card",children:[(0,y.jsx)(je,{className:"pb-3",children:(0,y.jsxs)(jf,{"data-design-id":"about-title",className:"text-base flex items-center gap-2",children:[(0,y.jsx)(jr,{className:"w-4 h-4"}),"About MTHFR & This App"]})}),(0,y.jsx)(jh,{children:(0,y.jsxs)(qi,{type:"single",collapsible:!0,className:"w-full",children:[(0,y.jsxs)(qE,{value:"what-is-mthfr",children:[(0,y.jsx)(qF,{"data-design-id":"faq-mthfr",children:"What is MTHFR?"}),(0,y.jsx)(qG,{children:(0,y.jsx)("p",{className:"text-sm text-muted-foreground leading-relaxed",children:"MTHFR (methylenetetrahydrofolate reductase) is an enzyme that plays a crucial role in processing folate and supporting methylationa vital biochemical process affecting DNA repair, detoxification, and neurotransmitter production. Genetic variants (like C677T and A1298C) can reduce enzyme efficiency by 30-70%, making it important to avoid synthetic folic acid and other problematic ingredients."})})]}),(0,y.jsxs)(qE,{value:"classification",children:[(0,y.jsx)(qF,{"data-design-id":"faq-classification",children:"How are ingredients classified?"}),(0,y.jsx)(qG,{children:(0,y.jsxs)("div",{className:"text-sm text-muted-foreground space-y-3",children:[(0,y.jsxs)("p",{children:[(0,y.jsx)("strong",{className:"text-foreground",children:"Safe (Green):"})," ","Ingredients that support methylation or have no negative impact. Includes methylated vitamins, whole foods, and natural ingredients."]}),(0,y.jsxs)("p",{children:[(0,y.jsx)("strong",{className:"text-foreground",children:"Unsafe (Red):"})," ","Ingredients that may interfere with methylation. Includes synthetic folic acid, cyanocobalamin, MSG, and certain preservatives."]}),(0,y.jsxs)("p",{children:[(0,y.jsx)("strong",{className:"text-foreground",children:"Unknown (Yellow):"})," ","Ingredients without enough research to classify, or ingredients that may affect individuals differently."]})]})})]}),(0,y.jsxs)(qE,{value:"masking",children:[(0,y.jsx)(qF,{"data-design-id":"faq-masking",children:"What are masking ingredients?"}),(0,y.jsx)(qG,{children:(0,y.jsx)("p",{className:"text-sm text-muted-foreground leading-relaxed",children:'Masking ingredients are vague terms like "natural flavors," "spices," or "proprietary blend" that can hide undisclosed components. These may contain MSG, synthetic additives, or other problematic ingredients. We flag these for your awareness so you can investigate further or contact the manufacturer for clarification.'})})]}),(0,y.jsxs)(qE,{value:"accuracy",children:[(0,y.jsx)(qF,{"data-design-id":"faq-accuracy",children:"How accurate is this app?"}),(0,y.jsx)(qG,{children:(0,y.jsx)("p",{className:"text-sm text-muted-foreground leading-relaxed",children:"This app is a tool for awareness, not medical advice. While we strive for accuracy using product databases and research-backed classifications, ingredient lists can change, regional variations exist, and individual sensitivities vary. Always consult healthcare providers for personalized guidance, especially regarding MTHFR-related dietary changes."})})]})]})})]})}),(0,y.jsx)(f1.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},children:(0,y.jsx)(jd,{"data-design-id":"app-info-card",className:"bg-muted/30",children:(0,y.jsxs)(jh,{className:"pt-4",children:[(0,y.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,y.jsx)("div",{className:"w-12 h-12 rounded-xl bg-primary/10 flex items-center justify-center",children:(0,y.jsx)(iP,{className:"w-6 h-6 text-primary"})}),(0,y.jsxs)("div",{children:[(0,y.jsx)("h3",{"data-design-id":"app-name",className:"font-semibold",children:"MTHFR Food Scanner"}),(0,y.jsx)("p",{"data-design-id":"app-version",className:"text-sm text-muted-foreground",children:"Version 1.0.0"})]})]}),(0,y.jsx)("p",{"data-design-id":"app-description",className:"text-xs text-muted-foreground",children:"A local-first PWA for MTHFR-conscious individuals to evaluate food product safety. All data is stored locally on your device. No account required."})]})})})]})})}function wS(){let{activeTab:a,hasCompletedOnboarding:b}=ge(),[c,d]=(0,z.useState)(!0);if(c)return(0,y.jsx)("div",{"data-design-id":"loading-screen",className:"fixed inset-0 flex flex-col items-center justify-center bg-background",children:(0,y.jsxs)(f1.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},className:"flex flex-col items-center",children:[(0,y.jsx)("div",{"data-design-id":"loading-icon",className:"w-20 h-20 rounded-2xl bg-gradient-to-br from-primary to-emerald-600 flex items-center justify-center mb-6 shadow-xl shadow-primary/30",children:(0,y.jsx)(iP,{className:"w-10 h-10 text-white"})}),(0,y.jsx)("h1",{"data-design-id":"loading-title",className:"text-xl font-bold mb-2",children:"MTHFR Scanner"}),(0,y.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,y.jsx)(kl,{className:"w-4 h-4 animate-spin"}),(0,y.jsx)("span",{"data-design-id":"loading-text",children:"Loading..."})]})]})});if(!b)return(0,y.jsx)(i6,{});let e={initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20}};return(0,y.jsxs)("div",{"data-design-id":"app-shell",className:"fixed inset-0 flex flex-col bg-background",children:[(0,y.jsx)("main",{"data-design-id":"main-content",className:"flex-1 overflow-hidden",children:(0,y.jsxs)(f9,{mode:"wait",children:["home"===a&&(0,y.jsx)(f1.div,{variants:e,initial:"initial",animate:"animate",exit:"exit",transition:{duration:.2},className:"h-full",children:(0,y.jsx)(kk,{})},"home"),"scan"===a&&(0,y.jsx)(f1.div,{variants:e,initial:"initial",animate:"animate",exit:"exit",transition:{duration:.2},className:"h-full",children:(0,y.jsx)(s1,{})},"scan"),"history"===a&&(0,y.jsx)(f1.div,{variants:e,initial:"initial",animate:"animate",exit:"exit",transition:{duration:.2},className:"h-full",children:(0,y.jsx)(vS,{})},"history"),"settings"===a&&(0,y.jsx)(f1.div,{variants:e,initial:"initial",animate:"animate",exit:"exit",transition:{duration:.2},className:"h-full",children:(0,y.jsx)(wR,{})},"settings")]})}),(0,y.jsx)(iN,{})]})}function wT(){return(0,y.jsx)(wS,{})}wQ.displayName=wC.displayName},261:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/app-paths")},352:function(a){a.exports=function(){var a=function(b,c){return(a=Object.setPrototypeOf||(({__proto__:[]})instanceof Array?function(a,b){a.__proto__=b}:function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])}))(b,c)},b=function(){return(b=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)};function c(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||((d=d||Array.prototype.slice.call(b,0,e))[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))}var d="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,e=Object.keys,f=Array.isArray;function g(a,b){return"object"==typeof b&&e(b).forEach(function(c){a[c]=b[c]}),a}"undefined"==typeof Promise||d.Promise||(d.Promise=Promise);var h=Object.getPrototypeOf,i={}.hasOwnProperty;function j(a,b){return i.call(a,b)}function k(a,b){"function"==typeof b&&(b=b(h(a))),("undefined"==typeof Reflect?e:Reflect.ownKeys)(b).forEach(function(c){m(a,c,b[c])})}var l=Object.defineProperty;function m(a,b,c,d){l(a,b,g(c&&j(c,"get")&&"function"==typeof c.get?{get:c.get,set:c.set,configurable:!0}:{value:c,configurable:!0,writable:!0},d))}function n(a){return{from:function(b){return a.prototype=Object.create(b.prototype),m(a.prototype,"constructor",a),{extend:k.bind(null,a.prototype)}}}}var o=Object.getOwnPropertyDescriptor,p=[].slice;function q(a,b,c){return p.call(a,b,c)}function r(a,b){return b(a)}function s(a){if(!a)throw Error("Assertion Failed")}function t(a){d.setImmediate?setImmediate(a):setTimeout(a,0)}function u(a,b){if("string"==typeof b&&j(a,b))return a[b];if(!b)return a;if("string"!=typeof b){for(var c=[],d=0,e=b.length;d<e;++d){var f=u(a,b[d]);c.push(f)}return c}var g,h=b.indexOf(".");return -1===h||null==(g=a[b.substr(0,h)])?void 0:u(g,b.substr(h+1))}function v(a,b,c){if(a&&void 0!==b&&!("isFrozen"in Object&&Object.isFrozen(a)))if("string"!=typeof b&&"length"in b){s("string"!=typeof c&&"length"in c);for(var d=0,e=b.length;d<e;++d)v(a,b[d],c[d])}else{var g,h,i=b.indexOf(".");-1!==i?(g=b.substr(0,i),""===(i=b.substr(i+1))?void 0===c?f(a)&&!isNaN(parseInt(g))?a.splice(g,1):delete a[g]:a[g]=c:v(h=(h=a[g])&&j(a,g)?h:a[g]={},i,c)):void 0===c?f(a)&&!isNaN(parseInt(b))?a.splice(b,1):delete a[b]:a[b]=c}}function w(a){var b,c={};for(b in a)j(a,b)&&(c[b]=a[b]);return c}var x=[].concat;function y(a){return x.apply([],a)}var z="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(y([8,16,32,64].map(function(a){return["Int","Uint","Float"].map(function(b){return b+a+"Array"})}))).filter(function(a){return d[a]}),A=new Set(z.map(function(a){return d[a]})),B=null;function C(a){return B=new WeakMap,a=function a(b){if(!b||"object"!=typeof b)return b;var c=B.get(b);if(c)return c;if(f(b)){c=[],B.set(b,c);for(var d=0,e=b.length;d<e;++d)c.push(a(b[d]))}else if(A.has(b.constructor))c=b;else{var g,i=h(b);for(g in c=i===Object.prototype?{}:Object.create(i),B.set(b,c),b)j(b,g)&&(c[g]=a(b[g]))}return c}(a),B=null,a}var D={}.toString;function E(a){return D.call(a).slice(8,-1)}var F="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",G="symbol"==typeof F?function(a){var b;return null!=a&&(b=a[F])&&b.apply(a)}:function(){return null};function H(a,b){0<=(b=a.indexOf(b))&&a.splice(b,1)}var I={};function J(a){var b,c,d,e;if(1==arguments.length){if(f(a))return a.slice();if(this===I&&"string"==typeof a)return[a];if(e=G(a))for(c=[];!(d=e.next()).done;)c.push(d.value);else{if(null==a||"number"!=typeof(b=a.length))return[a];for(c=Array(b);b--;)c[b]=a[b]}}else for(b=arguments.length,c=Array(b);b--;)c[b]=arguments[b];return c}var K="undefined"!=typeof Symbol?function(a){return"AsyncFunction"===a[Symbol.toStringTag]}:function(){return!1},z=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],L=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(z),M={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function N(a,b){this.name=a,this.message=b}function O(a,b){return a+". Errors: "+Object.keys(b).map(function(a){return b[a].toString()}).filter(function(a,b,c){return c.indexOf(a)===b}).join("\n")}function P(a,b,c,d){this.failures=b,this.failedKeys=d,this.successCount=c,this.message=O(a,b)}function Q(a,b){this.name="BulkError",this.failures=Object.keys(b).map(function(a){return b[a]}),this.failuresByPos=b,this.message=O(a,this.failures)}n(N).from(Error).extend({toString:function(){return this.name+": "+this.message}}),n(P).from(N),n(Q).from(N);var R=L.reduce(function(a,b){return a[b]=b+"Error",a},{}),S=L.reduce(function(a,b){var c=b+"Error";function d(a,d){this.name=c,a?"string"==typeof a?(this.message="".concat(a).concat(d?"\n "+d:""),this.inner=d||null):"object"==typeof a&&(this.message="".concat(a.name," ").concat(a.message),this.inner=a):(this.message=M[b]||c,this.inner=null)}return n(d).from(N),a[b]=d,a},{}),T=(S.Syntax=SyntaxError,S.Type=TypeError,S.Range=RangeError,z.reduce(function(a,b){return a[b+"Error"]=S[b],a},{}));function U(){}function V(a){return a}function W(a,b){return null==a||a===V?b:function(c){return b(a(c))}}function X(a,b){return function(){a.apply(this,arguments),b.apply(this,arguments)}}function Y(a,b){return a===U?b:function(){var c=a.apply(this,arguments),d=(void 0!==c&&(arguments[0]=c),this.onsuccess),e=this.onerror,f=(this.onsuccess=null,this.onerror=null,b.apply(this,arguments));return d&&(this.onsuccess=this.onsuccess?X(d,this.onsuccess):d),e&&(this.onerror=this.onerror?X(e,this.onerror):e),void 0!==f?f:c}}function Z(a,b){return a===U?b:function(){a.apply(this,arguments);var c=this.onsuccess,d=this.onerror;this.onsuccess=this.onerror=null,b.apply(this,arguments),c&&(this.onsuccess=this.onsuccess?X(c,this.onsuccess):c),d&&(this.onerror=this.onerror?X(d,this.onerror):d)}}function $(a,b){return a===U?b:function(c){var d=a.apply(this,arguments),c=(g(c,d),this.onsuccess),e=this.onerror,f=(this.onsuccess=null,this.onerror=null,b.apply(this,arguments));return c&&(this.onsuccess=this.onsuccess?X(c,this.onsuccess):c),e&&(this.onerror=this.onerror?X(e,this.onerror):e),void 0===d?void 0===f?void 0:f:g(d,f)}}function _(a,b){return a===U?b:function(){return!1!==b.apply(this,arguments)&&a.apply(this,arguments)}}function aa(a,b){return a===U?b:function(){var c=a.apply(this,arguments);if(c&&"function"==typeof c.then){for(var d=this,e=arguments.length,f=Array(e);e--;)f[e]=arguments[e];return c.then(function(){return b.apply(d,f)})}return b.apply(this,arguments)}}(z=L.reduce(function(a,b){return -1===["Syntax","Type","Range"].indexOf(b)&&(a[b+"Error"]=S[b]),a},{})).ModifyError=P,z.DexieError=N,z.BulkError=Q;var ab="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href),ac={},ad="undefined"==typeof Promise?[]:(L=Promise.resolve(),"undefined"!=typeof crypto&&crypto.subtle?[ad=crypto.subtle.digest("SHA-512",new Uint8Array([0])),h(ad),L]:[L,h(L),L]),L=ad[0],ae=ad[1],ae=ae&&ae.then,af=L&&L.constructor,ag=!!ad[2],ah=function(a,b){ap.push([a,b]),aj&&(queueMicrotask(az),aj=!1)},ai=!0,aj=!0,ak=[],al=[],am=V,an={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:U,pgp:!1,env:{},finalize:U},ao=an,ap=[],aq=0,ar=[];function as(a){if("object"!=typeof this)throw TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var b=this._PSD=ao;if("function"!=typeof a){if(a!==ac)throw TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],!1===this._state&&av(this,this._value)}else this._state=null,this._value=null,++b.ref,function a(b,c){try{c(function(c){if(null===b._state){if(c===b)throw TypeError("A promise cannot be resolved with itself.");var d=b._lib&&aA();c&&"function"==typeof c.then?a(b,function(a,b){c instanceof as?c._then(a,b):c.then(a,b)}):(b._state=!0,b._value=c,aw(b)),d&&aB()}},av.bind(null,b))}catch(a){av(b,a)}}(this,a)}var at={get:function(){var a=ao,b=aJ;function c(c,d){var e=this,f=!a.global&&(a!==ao||b!==aJ),g=f&&!aN(),h=new as(function(b,h){ax(e,new au(aT(c,a,f,g),aT(d,a,f,g),b,h,a))});return this._consoleTask&&(h._consoleTask=this._consoleTask),h}return c.prototype=ac,c},set:function(a){m(this,"then",a&&a.prototype===ac?at:{get:function(){return a},set:at.set})}};function au(a,b,c,d,e){this.onFulfilled="function"==typeof a?a:null,this.onRejected="function"==typeof b?b:null,this.resolve=c,this.reject=d,this.psd=e}function av(a,b){var c;al.push(b),null===a._state&&(c=a._lib&&aA(),b=am(b),a._state=!1,a._value=b,ak.some(function(b){return b._value===a._value})||ak.push(a),aw(a),c)&&aB()}function aw(a){var b=a._listeners;a._listeners=[];for(var c=0,d=b.length;c<d;++c)ax(a,b[c]);var e=a._PSD;--e.ref||e.finalize(),0===aq&&(++aq,ah(function(){0==--aq&&aC()},[]))}function ax(a,b){if(null===a._state)a._listeners.push(b);else{var c=a._state?b.onFulfilled:b.onRejected;if(null===c)return(a._state?b.resolve:b.reject)(a._value);++b.psd.ref,++aq,ah(ay,[c,a,b])}}function ay(a,b,c){try{var d,e=b._value;!b._state&&al.length&&(al=[]),d=ab&&b._consoleTask?b._consoleTask.run(function(){return a(e)}):a(e),b._state||-1!==al.indexOf(e)||(a=>{for(var b=ak.length;b;)if(ak[--b]._value===a._value)return ak.splice(b,1)})(b),c.resolve(d)}catch(a){c.reject(a)}finally{0==--aq&&aC(),--c.psd.ref||c.psd.finalize()}}function az(){aS(an,function(){aA()&&aB()})}function aA(){var a=ai;return aj=ai=!1,a}function aB(){var a,b,c;do for(;0<ap.length;)for(a=ap,ap=[],c=a.length,b=0;b<c;++b){var d=a[b];d[0].apply(null,d[1])}while(0<ap.length);aj=ai=!0}function aC(){for(var a=ak,b=(ak=[],a.forEach(function(a){a._PSD.onunhandled.call(null,a._value,a)}),ar.slice(0)),c=b.length;c;)b[--c]()}function aD(a){return new as(ac,!1,a)}function aE(a,b){var c=ao;return function(){var d=aA(),e=ao;try{return aQ(c,!0),a.apply(this,arguments)}catch(a){b&&b(a)}finally{aQ(e,!1),d&&aB()}}}k(as.prototype,{then:at,_then:function(a,b){ax(this,new au(null,null,a,b,ao))},catch:function(a){var b;return 1==arguments.length?this.then(null,a):(b=arguments[1],"function"==typeof a?this.then(null,function(c){return(c instanceof a?b:aD)(c)}):this.then(null,function(c){return(c&&c.name===a?b:aD)(c)}))},finally:function(a){return this.then(function(b){return as.resolve(a()).then(function(){return b})},function(b){return as.resolve(a()).then(function(){return aD(b)})})},timeout:function(a,b){var c=this;return a<1/0?new as(function(d,e){var f=setTimeout(function(){return e(new S.Timeout(b))},a);c.then(d,e).finally(clearTimeout.bind(null,f))}):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&m(as.prototype,Symbol.toStringTag,"Dexie.Promise"),an.env=aR(),k(as,{all:function(){var a=J.apply(null,arguments).map(aO);return new as(function(b,c){0===a.length&&b([]);var d=a.length;a.forEach(function(e,f){return as.resolve(e).then(function(c){a[f]=c,--d||b(a)},c)})})},resolve:function(a){return a instanceof as?a:a&&"function"==typeof a.then?new as(function(b,c){a.then(b,c)}):new as(ac,!0,a)},reject:aD,race:function(){var a=J.apply(null,arguments).map(aO);return new as(function(b,c){a.map(function(a){return as.resolve(a).then(b,c)})})},PSD:{get:function(){return ao},set:function(a){return ao=a}},totalEchoes:{get:function(){return aJ}},newPSD:aL,usePSD:aS,scheduler:{get:function(){return ah},set:function(a){ah=a}},rejectionMapper:{get:function(){return am},set:function(a){am=a}},follow:function(a,b){return new as(function(c,d){return aL(function(b,c){var d=ao;d.unhandleds=[],d.onunhandled=c,d.finalize=X(function(){var a,d=this;a=function(){0===d.unhandleds.length?b():c(d.unhandleds[0])},ar.push(function b(){a(),ar.splice(ar.indexOf(b),1)}),++aq,ah(function(){0==--aq&&aC()},[])},d.finalize),a()},b,c,d)})}}),af&&(af.allSettled&&m(as,"allSettled",function(){var a=J.apply(null,arguments).map(aO);return new as(function(b){0===a.length&&b([]);var c=a.length,d=Array(c);a.forEach(function(a,e){return as.resolve(a).then(function(a){return d[e]={status:"fulfilled",value:a}},function(a){return d[e]={status:"rejected",reason:a}}).then(function(){return--c||b(d)})})})}),af.any&&"undefined"!=typeof AggregateError&&m(as,"any",function(){var a=J.apply(null,arguments).map(aO);return new as(function(b,c){0===a.length&&c(AggregateError([]));var d=a.length,e=Array(d);a.forEach(function(a,f){return as.resolve(a).then(function(a){return b(a)},function(a){e[f]=a,--d||c(AggregateError(e))})})})}),af.withResolvers)&&(as.withResolvers=af.withResolvers);var aF={awaits:0,echoes:0,id:0},aG=0,aH=[],aI=0,aJ=0,aK=0;function aL(a,b,c,d){var e=ao,f=Object.create(e),b=(f.parent=e,f.ref=0,f.global=!1,f.id=++aK,an.env,f.env=ag?{Promise:as,PromiseProp:{value:as,configurable:!0,writable:!0},all:as.all,race:as.race,allSettled:as.allSettled,any:as.any,resolve:as.resolve,reject:as.reject}:{},b&&g(f,b),++e.ref,f.finalize=function(){--this.parent.ref||this.parent.finalize()},aS(f,a,c,d));return 0===f.ref&&f.finalize(),b}function aM(){return aF.id||(aF.id=++aG),++aF.awaits,aF.echoes+=100,aF.id}function aN(){return!!aF.awaits&&(0==--aF.awaits&&(aF.id=0),aF.echoes=100*aF.awaits,!0)}function aO(a){return aF.echoes&&a&&a.constructor===af?(aM(),a.then(function(a){return aN(),a},function(a){return aN(),aV(a)})):a}function aP(){var a=aH[aH.length-1];aH.pop(),aQ(a,!1)}function aQ(a,b){var c,e,f=ao;(b?!aF.echoes||aI++&&a===ao:!aI||--aI&&a===ao)||queueMicrotask(b?(function(a){++aJ,aF.echoes&&0!=--aF.echoes||(aF.echoes=aF.awaits=aF.id=0),aH.push(ao),aQ(a,!0)}).bind(null,a):aP),a!==ao&&(ao=a,f===an&&(an.env=aR()),ag)&&(c=an.env.Promise,e=a.env,f.global||a.global)&&(Object.defineProperty(d,"Promise",e.PromiseProp),c.all=e.all,c.race=e.race,c.resolve=e.resolve,c.reject=e.reject,e.allSettled&&(c.allSettled=e.allSettled),e.any)&&(c.any=e.any)}function aR(){var a=d.Promise;return ag?{Promise:a,PromiseProp:Object.getOwnPropertyDescriptor(d,"Promise"),all:a.all,race:a.race,allSettled:a.allSettled,any:a.any,resolve:a.resolve,reject:a.reject}:{}}function aS(a,b,c,d,e){var f=ao;try{return aQ(a,!0),b(c,d,e)}finally{aQ(f,!1)}}function aT(a,b,c,d){return"function"!=typeof a?a:function(){var e=ao;c&&aM(),aQ(b,!0);try{return a.apply(this,arguments)}finally{aQ(e,!1),d&&queueMicrotask(aN)}}}function aU(a){Promise===af&&0===aF.echoes?0===aI?a():enqueueNativeMicroTask(a):setTimeout(a,0)}-1===(""+ae).indexOf("[native code]")&&(aM=aN=U);var aV=as.reject,aW=String.fromCharCode(65535),aX="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",aY="String expected.",aZ=[],a$="__dbnames",a_="readonly",a0="readwrite";function a1(a,b){return a?b?function(){return a.apply(this,arguments)&&b.apply(this,arguments)}:a:b}var a2={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function a3(a){return"string"!=typeof a||/\./.test(a)?function(a){return a}:function(b){return void 0===b[a]&&a in b&&delete(b=C(b))[a],b}}function a4(){throw S.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function a5(a,b){try{var c=a6(a),d=a6(b);if(c!==d)return"Array"===c?1:"Array"===d?-1:"binary"===c?1:"binary"===d?-1:"string"===c?1:"string"===d?-1:"Date"===c?1:"Date"!==d?NaN:-1;switch(c){case"number":case"Date":case"string":return b<a?1:a<b?-1:0;case"binary":for(var e=a7(a),f=a7(b),g=e.length,h=f.length,i=g<h?g:h,j=0;j<i;++j)if(e[j]!==f[j])return e[j]<f[j]?-1:1;return g===h?0:g<h?-1:1;case"Array":for(var k=a.length,l=b.length,m=k<l?k:l,n=0;n<m;++n){var o=a5(a[n],b[n]);if(0!==o)return o}return k===l?0:k<l?-1:1}}catch(a){}return NaN}function a6(a){var b=typeof a;return"object"==b&&(ArrayBuffer.isView(a)||"ArrayBuffer"===(b=E(a)))?"binary":b}function a7(a){return a instanceof Uint8Array?a:ArrayBuffer.isView(a)?new Uint8Array(a.buffer,a.byteOffset,a.byteLength):new Uint8Array(a)}function a8(a,b,c){var d=a.schema.yProps;return d?(b&&0<c.numFailures&&(b=b.filter(function(a,b){return!c.failures[b]})),Promise.all(d.map(function(c){return c=c.updatesTable,b?a.db.table(c).where("k").anyOf(b).delete():a.db.table(c).clear()})).then(function(){return c})):c}function a9(a){this["@@propmod"]=a}function ba(a,b){for(var c=e(b),d=c.length,f=!1,g=0;g<d;++g){var h=c[g],i=b[h],j=u(a,h);i instanceof a9?(v(a,h,i.execute(j)),f=!0):j!==i&&(v(a,h,i),f=!0)}return f}function bb(){}function bc(a){function b(b,d){if(d){for(var e=arguments.length,f=Array(e-1);--e;)f[e-1]=arguments[e];return c[b].subscribe.apply(null,f),a}if("string"==typeof b)return c[b]}var c={};b.addEventType=h;for(var d=1,g=arguments.length;d<g;++d)h(arguments[d]);return b;function h(a,d,g){var i;if("object"!=typeof a)return d=d||_,i={subscribers:[],fire:g=g||U,subscribe:function(a){-1===i.subscribers.indexOf(a)&&(i.subscribers.push(a),i.fire=d(i.fire,a))},unsubscribe:function(a){i.subscribers=i.subscribers.filter(function(b){return b!==a}),i.fire=i.subscribers.reduce(d,g)}},c[a]=b[a]=i;e(a).forEach(function(b){var c=a[b];if(f(c))h(b,a[b][0],a[b][1]);else{if("asap"!==c)throw new S.InvalidArgument("Invalid event config");var d=h(b,V,function(){for(var a=arguments.length,b=Array(a);a--;)b[a]=arguments[a];d.subscribers.forEach(function(a){t(function(){a.apply(null,b)})})})}})}}function bd(a,b){return n(b).from({prototype:a}),b}function be(a,b){return!(a.filter||a.algorithm||a.or)&&(b?a.justLimit:!a.replayFilter)}function bf(a,b){a.filter=a1(a.filter,b)}function bg(a,b,c){var d=a.replayFilter;a.replayFilter=d?function(){return a1(d(),b())}:b,a.justLimit=c&&!d}function bh(a,b){if(a.isPrimKey)return b.primaryKey;var c=b.getIndexByKeyPath(a.index);if(c)return c;throw new S.Schema("KeyPath "+a.index+" on object store "+b.name+" is not indexed")}function bi(a,b,c){var d=bh(a,b.schema);return b.openCursor({trans:c,values:!a.keysOnly,reverse:"prev"===a.dir,unique:!!a.unique,query:{index:d,range:a.range}})}function bj(a,b,c,d){var e,f,g=a.replayFilter?a1(a.filter,a.replayFilter()):a.filter;return a.or?(e={},f=function(a,c,d){var f,h;g&&!g(c,d,function(a){return c.stop(a)},function(a){return c.fail(a)})||("[object ArrayBuffer]"==(h=""+(f=c.primaryKey))&&(h=""+new Uint8Array(f)),j(e,h))||(e[h]=!0,b(a,c,d))},Promise.all([a.or._iterate(f,c),bk(bi(a,d,c),a.algorithm,f,!a.keysOnly&&a.valueMapper)])):bk(bi(a,d,c),a1(a.algorithm,g),b,!a.keysOnly&&a.valueMapper)}function bk(a,b,c,d){var e=aE(d?function(a,b,e){return c(d(a),b,e)}:c);return a.then(function(a){if(a)return a.start(function(){var c=function(){return a.continue()};b&&!b(a,function(a){return c=a},function(b){a.stop(b),c=U},function(b){a.fail(b),c=U})||e(a.value,a,function(a){return c=a}),c()})})}function bl(){}a9.prototype.execute=function(a){var b=this["@@propmod"];if(void 0!==b.add){var d=b.add;if(f(d))return c(c([],f(a)?a:[],!0),d,!0).sort();if("number"==typeof d)return(Number(a)||0)+d;if("bigint"==typeof d)try{return BigInt(a)+d}catch(a){return BigInt(0)+d}throw TypeError("Invalid term ".concat(d))}if(void 0!==b.remove){var e=b.remove;if(f(e))return f(a)?a.filter(function(a){return!e.includes(a)}).sort():[];if("number"==typeof e)return Number(a)-e;if("bigint"==typeof e)try{return BigInt(a)-e}catch(a){return BigInt(0)-e}throw TypeError("Invalid subtrahend ".concat(e))}return(d=null==(d=b.replacePrefix)?void 0:d[0])&&"string"==typeof a&&a.startsWith(d)?b.replacePrefix[1]+a.substring(d.length):a},bb.prototype._trans=function(a,b,c){var d=this._tx||ao.trans,e=this.name,f=ab&&"undefined"!=typeof console&&console.createTask&&console.createTask("Dexie: ".concat("readonly"===a?"read":"write"," ").concat(this.name));function g(a,c,d){if(d.schema[e])return b(d.idbtrans,d);throw new S.NotFound("Table "+e+" not part of transaction")}var h=aA();try{var i=d&&d.db._novip===this.db._novip?d===ao.trans?d._promise(a,g,c):aL(function(){return d._promise(a,g,c)},{trans:d,transless:ao.transless||ao}):function a(b,c,d,e){if(b.idbdb&&(b._state.openComplete||ao.letThrough||b._vip)){var f=b._createTransaction(c,d,b._dbSchema);try{f.create(),b._state.PR1398_maxLoop=3}catch(f){return f.name===R.InvalidState&&b.isOpen()&&0<--b._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),b.close({disableAutoOpen:!1}),b.open().then(function(){return a(b,c,d,e)})):aV(f)}return f._promise(c,function(a,b){return aL(function(){return ao.trans=f,e(a,b,f)})}).then(function(a){if("readwrite"===c)try{f.idbtrans.commit()}catch(a){}return"readonly"===c?a:f._completion.then(function(){return a})})}if(b._state.openComplete)return aV(new S.DatabaseClosed(b._state.dbOpenError));if(!b._state.isBeingOpened){if(!b._state.autoOpen)return aV(new S.DatabaseClosed);b.open().catch(U)}return b._state.dbReadyPromise.then(function(){return a(b,c,d,e)})}(this.db,a,[this.name],g);return f&&(i._consoleTask=f,i=i.catch(function(a){return console.trace(a),aV(a)})),i}finally{h&&aB()}},bb.prototype.get=function(a,b){var c=this;return a&&a.constructor===Object?this.where(a).first(b):null==a?aV(new S.Type("Invalid argument to Table.get()")):this._trans("readonly",function(b){return c.core.get({trans:b,key:a}).then(function(a){return c.hook.reading.fire(a)})}).then(b)},bb.prototype.where=function(a){if("string"==typeof a)return new this.db.WhereClause(this,a);if(f(a))return new this.db.WhereClause(this,"[".concat(a.join("+"),"]"));var b=e(a);if(1===b.length)return this.where(b[0]).equals(a[b[0]]);var c=this.schema.indexes.concat(this.schema.primKey).filter(function(a){if(a.compound&&b.every(function(b){return 0<=a.keyPath.indexOf(b)})){for(var c=0;c<b.length;++c)if(-1===b.indexOf(a.keyPath[c]))return!1;return!0}return!1}).sort(function(a,b){return a.keyPath.length-b.keyPath.length})[0];if(c&&this.db._maxKey!==aW)return g=c.keyPath.slice(0,b.length),this.where(g).equals(g.map(function(b){return a[b]}));!c&&ab&&console.warn("The query ".concat(JSON.stringify(a)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(b.join("+"),"]"));var d=this.schema.idxByName,g=b.reduce(function(b,c){var e=b[0],b=b[1],g=d[c],h=a[c];return[e||g,e||!g?a1(b,g&&g.multi?function(a){return f(a=u(a,c))&&a.some(function(a){return 0===a5(h,a)})}:function(a){return 0===a5(h,u(a,c))}):b]},[null,null]),h=g[0],g=g[1];return h?this.where(h.name).equals(a[h.keyPath]).filter(g):c?this.filter(g):this.where(b).equals("")},bb.prototype.filter=function(a){return this.toCollection().and(a)},bb.prototype.count=function(a){return this.toCollection().count(a)},bb.prototype.offset=function(a){return this.toCollection().offset(a)},bb.prototype.limit=function(a){return this.toCollection().limit(a)},bb.prototype.each=function(a){return this.toCollection().each(a)},bb.prototype.toArray=function(a){return this.toCollection().toArray(a)},bb.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},bb.prototype.orderBy=function(a){return new this.db.Collection(new this.db.WhereClause(this,f(a)?"[".concat(a.join("+"),"]"):a))},bb.prototype.reverse=function(){return this.toCollection().reverse()},bb.prototype.mapToClass=function(b){for(var c=this.db,d=this.name,e=((this.schema.mappedClass=b).prototype instanceof a4&&(b=(b=>{if("function"!=typeof b&&null!==b)throw TypeError("Class extends value "+String(b)+" is not a constructor or null");function e(){this.constructor=f}function f(){return null!==b&&b.apply(this,arguments)||this}return a(f,b),f.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e),Object.defineProperty(f.prototype,"db",{get:function(){return c},enumerable:!1,configurable:!0}),f.prototype.table=function(){return d},f})(b)),new Set),f=b.prototype;f;f=h(f))Object.getOwnPropertyNames(f).forEach(function(a){return e.add(a)});function g(a){if(!a)return a;var c,d=Object.create(b.prototype);for(c in a)if(!e.has(c))try{d[c]=a[c]}catch(a){}return d}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=g,this.hook("reading",g),b},bb.prototype.defineClass=function(){return this.mapToClass(function(a){g(this,a)})},bb.prototype.add=function(a,b){var c=this,d=this.schema.primKey,e=d.auto,f=d.keyPath,g=a;return f&&e&&(g=a3(f)(a)),this._trans("readwrite",function(a){return c.core.mutate({trans:a,type:"add",keys:null!=b?[b]:null,values:[g]})}).then(function(a){return a.numFailures?as.reject(a.failures[0]):a.lastResult}).then(function(b){if(f)try{v(a,f,b)}catch(a){}return b})},bb.prototype.upsert=function(a,b){var c=this,d=this.schema.primKey.keyPath;return this._trans("readwrite",function(e){return c.core.get({trans:e,key:a}).then(function(f){var g=null!=f?f:{};return ba(g,b),d&&v(g,d,a),c.core.mutate({trans:e,type:"put",values:[g],keys:[a],upsert:!0,updates:{keys:[a],changeSpecs:[b]}}).then(function(a){return a.numFailures?as.reject(a.failures[0]):!!f})})})},bb.prototype.update=function(a,b){return"object"!=typeof a||f(a)?this.where(":id").equals(a).modify(b):void 0===(a=u(a,this.schema.primKey.keyPath))?aV(new S.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(a).modify(b)},bb.prototype.put=function(a,b){var c=this,d=this.schema.primKey,e=d.auto,f=d.keyPath,g=a;return f&&e&&(g=a3(f)(a)),this._trans("readwrite",function(a){return c.core.mutate({trans:a,type:"put",values:[g],keys:null!=b?[b]:null})}).then(function(a){return a.numFailures?as.reject(a.failures[0]):a.lastResult}).then(function(b){if(f)try{v(a,f,b)}catch(a){}return b})},bb.prototype.delete=function(a){var b=this;return this._trans("readwrite",function(c){return b.core.mutate({trans:c,type:"delete",keys:[a]}).then(function(c){return a8(b,[a],c)}).then(function(a){return a.numFailures?as.reject(a.failures[0]):void 0})})},bb.prototype.clear=function(){var a=this;return this._trans("readwrite",function(b){return a.core.mutate({trans:b,type:"deleteRange",range:a2}).then(function(b){return a8(a,null,b)})}).then(function(a){return a.numFailures?as.reject(a.failures[0]):void 0})},bb.prototype.bulkGet=function(a){var b=this;return this._trans("readonly",function(c){return b.core.getMany({keys:a,trans:c}).then(function(a){return a.map(function(a){return b.hook.reading.fire(a)})})})},bb.prototype.bulkAdd=function(a,b,c){var d=this,e=Array.isArray(b)?b:void 0,f=(c=c||(e?void 0:b))?c.allKeys:void 0;return this._trans("readwrite",function(b){var c=d.schema.primKey,g=c.auto,c=c.keyPath;if(c&&e)throw new S.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(e&&e.length!==a.length)throw new S.InvalidArgument("Arguments objects and keys must have the same length");var h=a.length,g=c&&g?a.map(a3(c)):a;return d.core.mutate({trans:b,type:"add",keys:e,values:g,wantResults:f}).then(function(a){var b=a.numFailures,c=a.failures;if(0===b)return f?a.results:a.lastResult;throw new Q("".concat(d.name,".bulkAdd(): ").concat(b," of ").concat(h," operations failed"),c)})})},bb.prototype.bulkPut=function(a,b,c){var d=this,e=Array.isArray(b)?b:void 0,f=(c=c||(e?void 0:b))?c.allKeys:void 0;return this._trans("readwrite",function(b){var c=d.schema.primKey,g=c.auto,c=c.keyPath;if(c&&e)throw new S.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(e&&e.length!==a.length)throw new S.InvalidArgument("Arguments objects and keys must have the same length");var h=a.length,g=c&&g?a.map(a3(c)):a;return d.core.mutate({trans:b,type:"put",keys:e,values:g,wantResults:f}).then(function(a){var b=a.numFailures,c=a.failures;if(0===b)return f?a.results:a.lastResult;throw new Q("".concat(d.name,".bulkPut(): ").concat(b," of ").concat(h," operations failed"),c)})})},bb.prototype.bulkUpdate=function(a){var b=this,c=this.core,d=a.map(function(a){return a.key}),e=a.map(function(a){return a.changes}),f=[];return this._trans("readwrite",function(g){return c.getMany({trans:g,keys:d,cache:"clone"}).then(function(h){var i=[],j=[],k=(a.forEach(function(a,c){var d=a.key,e=a.changes,g=h[c];if(g){for(var k=0,l=Object.keys(e);k<l.length;k++){var m=l[k],n=e[m];if(m===b.schema.primKey.keyPath){if(0!==a5(n,d))throw new S.Constraint("Cannot update primary key in bulkUpdate()")}else v(g,m,n)}f.push(c),i.push(d),j.push(g)}}),i.length);return c.mutate({trans:g,type:"put",keys:i,values:j,updates:{keys:d,changeSpecs:e}}).then(function(a){var c=a.numFailures,d=a.failures;if(0===c)return k;for(var e=0,g=Object.keys(d);e<g.length;e++){var h,i=g[e],j=f[Number(i)];null!=j&&(h=d[i],delete d[i],d[j]=h)}throw new Q("".concat(b.name,".bulkUpdate(): ").concat(c," of ").concat(k," operations failed"),d)})})})},bb.prototype.bulkDelete=function(a){var b=this,c=a.length;return this._trans("readwrite",function(c){return b.core.mutate({trans:c,type:"delete",keys:a}).then(function(c){return a8(b,a,c)})}).then(function(a){var d=a.numFailures,e=a.failures;if(0===d)return a.lastResult;throw new Q("".concat(b.name,".bulkDelete(): ").concat(d," of ").concat(c," operations failed"),e)})},bl.prototype._read=function(a,b){var c=this._ctx;return c.error?c.table._trans(null,aV.bind(null,c.error)):c.table._trans("readonly",a).then(b)},bl.prototype._write=function(a){var b=this._ctx;return b.error?b.table._trans(null,aV.bind(null,b.error)):b.table._trans("readwrite",a,"locked")},bl.prototype._addAlgorithm=function(a){var b=this._ctx;b.algorithm=a1(b.algorithm,a)},bl.prototype._iterate=function(a,b){return bj(this._ctx,a,b,this._ctx.table.core)},bl.prototype.clone=function(a){var b=Object.create(this.constructor.prototype),c=Object.create(this._ctx);return a&&g(c,a),b._ctx=c,b},bl.prototype.raw=function(){return this._ctx.valueMapper=null,this},bl.prototype.each=function(a){var b=this._ctx;return this._read(function(c){return bj(b,a,c,b.table.core)})},bl.prototype.count=function(a){var b=this;return this._read(function(a){var c,d=b._ctx,e=d.table.core;return be(d,!0)?e.count({trans:a,query:{index:bh(d,e.schema),range:d.range}}).then(function(a){return Math.min(a,d.limit)}):(c=0,bj(d,function(){return++c,!1},a,e).then(function(){return c}))}).then(a)},bl.prototype.sortBy=function(a,b){var c=a.split(".").reverse(),d=c[0],e=c.length-1;function f(a,b){return b?f(a[c[b]],b-1):a[d]}var g="next"===this._ctx.dir?1:-1;function h(a,b){return a5(f(a,e),f(b,e))*g}return this.toArray(function(a){return a.sort(h)}).then(b)},bl.prototype.toArray=function(a){var b=this;return this._read(function(a){var c,d,e,f=b._ctx;return"next"===f.dir&&be(f,!0)&&0<f.limit?(c=f.valueMapper,d=bh(f,f.table.core.schema),f.table.core.query({trans:a,limit:f.limit,values:!0,query:{index:d,range:f.range}}).then(function(a){return a=a.result,c?a.map(c):a})):(e=[],bj(f,function(a){return e.push(a)},a,f.table.core).then(function(){return e}))},a)},bl.prototype.offset=function(a){var b=this._ctx;return a<=0||(b.offset+=a,be(b)?bg(b,function(){var b=a;return function(a,c){return 0===b||(1===b?--b:c(function(){a.advance(b),b=0}),!1)}}):bg(b,function(){var b=a;return function(){return--b<0}})),this},bl.prototype.limit=function(a){return this._ctx.limit=Math.min(this._ctx.limit,a),bg(this._ctx,function(){var b=a;return function(a,c,d){return--b<=0&&c(d),0<=b}},!0),this},bl.prototype.until=function(a,b){return bf(this._ctx,function(c,d,e){return!a(c.value)||(d(e),b)}),this},bl.prototype.first=function(a){return this.limit(1).toArray(function(a){return a[0]}).then(a)},bl.prototype.last=function(a){return this.reverse().first(a)},bl.prototype.filter=function(a){var b;return bf(this._ctx,function(b){return a(b.value)}),(b=this._ctx).isMatch=a1(b.isMatch,a),this},bl.prototype.and=function(a){return this.filter(a)},bl.prototype.or=function(a){return new this.db.WhereClause(this._ctx.table,a,this)},bl.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},bl.prototype.desc=function(){return this.reverse()},bl.prototype.eachKey=function(a){var b=this._ctx;return b.keysOnly=!b.isMatch,this.each(function(b,c){a(c.key,c)})},bl.prototype.eachUniqueKey=function(a){return this._ctx.unique="unique",this.eachKey(a)},bl.prototype.eachPrimaryKey=function(a){var b=this._ctx;return b.keysOnly=!b.isMatch,this.each(function(b,c){a(c.primaryKey,c)})},bl.prototype.keys=function(a){var b=this._ctx,c=(b.keysOnly=!b.isMatch,[]);return this.each(function(a,b){c.push(b.key)}).then(function(){return c}).then(a)},bl.prototype.primaryKeys=function(a){var b=this._ctx;if("next"===b.dir&&be(b,!0)&&0<b.limit)return this._read(function(a){var c=bh(b,b.table.core.schema);return b.table.core.query({trans:a,values:!1,limit:b.limit,query:{index:c,range:b.range}})}).then(function(a){return a.result}).then(a);b.keysOnly=!b.isMatch;var c=[];return this.each(function(a,b){c.push(b.primaryKey)}).then(function(){return c}).then(a)},bl.prototype.uniqueKeys=function(a){return this._ctx.unique="unique",this.keys(a)},bl.prototype.firstKey=function(a){return this.limit(1).keys(function(a){return a[0]}).then(a)},bl.prototype.lastKey=function(a){return this.reverse().firstKey(a)},bl.prototype.distinct=function(){var a,b=this._ctx,b=b.index&&b.table.schema.idxByName[b.index];return b&&b.multi&&(a={},bf(this._ctx,function(b){var b=b.primaryKey.toString(),c=j(a,b);return a[b]=!0,!c})),this},bl.prototype.modify=function(a){var b=this,c=this._ctx;return this._write(function(d){function f(a,b){var c=b.failures;n+=a-b.numFailures;for(var d=0,f=e(c);d<f.length;d++){var g=f[d];m.push(c[g])}}var g="function"==typeof a?a:function(b){return ba(b,a)},h=c.table.core,i=h.schema.primaryKey,j=i.outbound,k=i.extractKey,l=200,i=b.db._options.modifyChunkSize,m=(i&&(l="object"==typeof i?i[h.name]||i["*"]||200:i),[]),n=0,o=[],p=a===bm;return b.clone().primaryKeys().then(function(b){var e=be(c)&&c.limit===1/0&&("function"!=typeof a||p)&&{index:c.index,range:c.range};return(function i(m){var n=Math.min(l,b.length-m),o=b.slice(m,m+n);return(p?Promise.resolve([]):h.getMany({trans:d,keys:o,cache:"immutable"})).then(function(q){var r=[],s=[],t=j?[]:null,u=p?o:[];if(!p)for(var v=0;v<n;++v){var w=q[v],x={value:C(w),primKey:b[m+v]};!1!==g.call(x,x.value,x)&&(null==x.value?u.push(b[m+v]):j||0===a5(k(w),k(x.value))?(s.push(x.value),j&&t.push(b[m+v])):(u.push(b[m+v]),r.push(x.value)))}return Promise.resolve(0<r.length&&h.mutate({trans:d,type:"add",values:r}).then(function(a){for(var b in a.failures)u.splice(parseInt(b),1);f(r.length,a)})).then(function(){return(0<s.length||e&&"object"==typeof a)&&h.mutate({trans:d,type:"put",keys:t,values:s,criteria:e,changeSpec:"function"!=typeof a&&a,isAdditionalChunk:0<m}).then(function(a){return f(s.length,a)})}).then(function(){return(0<u.length||e&&p)&&h.mutate({trans:d,type:"delete",keys:u,criteria:e,isAdditionalChunk:0<m}).then(function(a){return a8(c.table,u,a)}).then(function(a){return f(u.length,a)})}).then(function(){return b.length>m+n&&i(m+l)})})})(0).then(function(){if(0<m.length)throw new P("Error modifying one or more objects",m,n,o);return b.length})})})},bl.prototype.delete=function(){var a=this._ctx,b=a.range;return be(a)&&!a.table.schema.yProps&&(a.isPrimKey||3===b.type)?this._write(function(c){var d=a.table.core.schema.primaryKey;return a.table.core.count({trans:c,query:{index:d,range:b}}).then(function(d){return a.table.core.mutate({trans:c,type:"deleteRange",range:b}).then(function(a){var b=a.failures,a=a.numFailures;if(a)throw new P("Could not delete some values",Object.keys(b).map(function(a){return b[a]}),d-a);return d-a})})}):this.modify(bm)};var bm=function(a,b){return b.value=null};function bn(a,b){return a<b?-1:+(a!==b)}function bo(a,b){return b<a?-1:+(a!==b)}function bp(a,b,c){return(a=a instanceof bu?new a.Collection(a):a)._ctx.error=new(c||TypeError)(b),a}function bq(a){return new a.Collection(a,function(){return bt("")}).limit(0)}function br(a,b,c,d){var e,f,g,h,i,j,k,l=c.length;if(!c.every(function(a){return"string"==typeof a}))return bp(a,aY);function m(a){e="next"===a?function(a){return a.toUpperCase()}:function(a){return a.toLowerCase()},f="next"===a?function(a){return a.toLowerCase()}:function(a){return a.toUpperCase()},g="next"===a?bn:bo;var b=c.map(function(a){return{lower:f(a),upper:e(a)}}).sort(function(a,b){return g(a.lower,b.lower)});h=b.map(function(a){return a.upper}),i=b.map(function(a){return a.lower}),k="next"===(j=a)?"":d}m("next");var a=new a.Collection(a,function(){return bs(h[0],i[l-1]+d)}),n=(a._ondirectionchange=function(a){m(a)},0);return a._addAlgorithm(function(a,c,d){var e=a.key;if("string"==typeof e){var m=f(e);if(b(m,i,n))return!0;for(var o=null,p=n;p<l;++p){var q=((a,b,c,d,e,f)=>{for(var g=Math.min(a.length,d.length),h=-1,i=0;i<g;++i){var j=b[i];if(j!==d[i])return 0>e(a[i],c[i])?a.substr(0,i)+c[i]+c.substr(i+1):0>e(a[i],d[i])?a.substr(0,i)+d[i]+c.substr(i+1):0<=h?a.substr(0,h)+b[h]+c.substr(h+1):null;0>e(a[i],j)&&(h=i)}return g<d.length&&"next"===f?a+c.substr(a.length):g<a.length&&"prev"===f?a.substr(0,c.length):h<0?null:a.substr(0,h)+d[h]+c.substr(h+1)})(e,m,h[p],i[p],g,j);null===q&&null===o?n=p+1:(null===o||0<g(o,q))&&(o=q)}c(null!==o?function(){a.continue(o+k)}:d)}return!1}),a}function bs(a,b,c,d){return{type:2,lower:a,upper:b,lowerOpen:c,upperOpen:d}}function bt(a){return{type:1,lower:a,upper:a}}Object.defineProperty(bv.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),bv.prototype.between=function(a,b,c,d){c=!1!==c,d=!0===d;try{return 0<this._cmp(a,b)||0===this._cmp(a,b)&&(c||d)&&(!c||!d)?bq(this):new this.Collection(this,function(){return bs(a,b,!c,!d)})}catch(a){return bp(this,aX)}},bv.prototype.equals=function(a){return null==a?bp(this,aX):new this.Collection(this,function(){return bt(a)})},bv.prototype.above=function(a){return null==a?bp(this,aX):new this.Collection(this,function(){return bs(a,void 0,!0)})},bv.prototype.aboveOrEqual=function(a){return null==a?bp(this,aX):new this.Collection(this,function(){return bs(a,void 0,!1)})},bv.prototype.below=function(a){return null==a?bp(this,aX):new this.Collection(this,function(){return bs(void 0,a,!1,!0)})},bv.prototype.belowOrEqual=function(a){return null==a?bp(this,aX):new this.Collection(this,function(){return bs(void 0,a)})},bv.prototype.startsWith=function(a){return"string"!=typeof a?bp(this,aY):this.between(a,a+aW,!0,!0)},bv.prototype.startsWithIgnoreCase=function(a){return""===a?this.startsWith(a):br(this,function(a,b){return 0===a.indexOf(b[0])},[a],aW)},bv.prototype.equalsIgnoreCase=function(a){return br(this,function(a,b){return a===b[0]},[a],"")},bv.prototype.anyOfIgnoreCase=function(){var a=J.apply(I,arguments);return 0===a.length?bq(this):br(this,function(a,b){return -1!==b.indexOf(a)},a,"")},bv.prototype.startsWithAnyOfIgnoreCase=function(){var a=J.apply(I,arguments);return 0===a.length?bq(this):br(this,function(a,b){return b.some(function(b){return 0===a.indexOf(b)})},a,aW)},bv.prototype.anyOf=function(){var a,b,c=this,d=J.apply(I,arguments),e=this._cmp;try{d.sort(e)}catch(a){return bp(this,aX)}return 0===d.length?bq(this):((a=new this.Collection(this,function(){return bs(d[0],d[d.length-1])}))._ondirectionchange=function(a){e="next"===a?c._ascending:c._descending,d.sort(e)},b=0,a._addAlgorithm(function(a,c,f){for(var g=a.key;0<e(g,d[b]);)if(++b===d.length)return c(f),!1;return 0===e(g,d[b])||(c(function(){a.continue(d[b])}),!1)}),a)},bv.prototype.notEqual=function(a){return this.inAnyRange([[-1/0,a],[a,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},bv.prototype.noneOf=function(){var a=J.apply(I,arguments);if(0===a.length)return new this.Collection(this);try{a.sort(this._ascending)}catch(a){return bp(this,aX)}var b=a.reduce(function(a,b){return a?a.concat([[a[a.length-1][1],b]]):[[-1/0,b]]},null);return b.push([a[a.length-1],this.db._maxKey]),this.inAnyRange(b,{includeLowers:!1,includeUppers:!1})},bv.prototype.inAnyRange=function(a,b){var c=this,d=this._cmp,e=this._ascending,f=this._descending,g=this._min,h=this._max;if(0===a.length)return bq(this);if(!a.every(function(a){return void 0!==a[0]&&void 0!==a[1]&&0>=e(a[0],a[1])}))return bp(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",S.InvalidArgument);var i,j=!b||!1!==b.includeLowers,k=b&&!0===b.includeUppers,l=e;function m(a,b){return l(a[0],b[0])}try{(i=a.reduce(function(a,b){for(var c=0,e=a.length;c<e;++c){var f=a[c];if(0>d(b[0],f[1])&&0<d(b[1],f[0])){f[0]=g(f[0],b[0]),f[1]=h(f[1],b[1]);break}}return c===e&&a.push(b),a},[])).sort(m)}catch(a){return bp(this,aX)}var n=0,o=k?function(a){return 0<e(a,i[n][1])}:function(a){return 0<=e(a,i[n][1])},p=j?function(a){return 0<f(a,i[n][0])}:function(a){return 0<=f(a,i[n][0])},q=o,b=new this.Collection(this,function(){return bs(i[0][0],i[i.length-1][1],!j,!k)});return b._ondirectionchange=function(a){l="next"===a?(q=o,e):(q=p,f),i.sort(m)},b._addAlgorithm(function(a,b,d){for(var f=a.key;q(f);)if(++n===i.length)return b(d),!1;return!o(f)&&!p(f)||(0===c._cmp(f,i[n][1])||0===c._cmp(f,i[n][0])||b(function(){l===e?a.continue(i[n][0]):a.continue(i[n][1])}),!1)}),b},bv.prototype.startsWithAnyOf=function(){var a=J.apply(I,arguments);return a.every(function(a){return"string"==typeof a})?0===a.length?bq(this):this.inAnyRange(a.map(function(a){return[a,a+aW]})):bp(this,"startsWithAnyOf() only works with strings")};var bu=bv;function bv(){}function bw(a){return aE(function(b){return bx(b),a(b.target.error),!1})}function bx(a){a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault()}var by="storagemutated",bz="x-storagemutated-1",bA=bc(null,by),bB=(bC.prototype._lock=function(){return s(!ao.global),++this._reculock,1!==this._reculock||ao.global||(ao.lockOwnerFor=this),this},bC.prototype._unlock=function(){if(s(!ao.global),0==--this._reculock)for(ao.global||(ao.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var a=this._blockedFuncs.shift();try{aS(a[1],a[0])}catch(a){}}return this},bC.prototype._locked=function(){return this._reculock&&ao.lockOwnerFor!==this},bC.prototype.create=function(a){var b=this;if(this.mode){var c=this.db.idbdb,d=this.db._state.dbOpenError;if(s(!this.idbtrans),!a&&!c)switch(d&&d.name){case"DatabaseClosedError":throw new S.DatabaseClosed(d);case"MissingAPIError":throw new S.MissingAPI(d.message,d);default:throw new S.OpenFailed(d)}if(!this.active)throw new S.TransactionInactive;s(null===this._completion._state),(a=this.idbtrans=a||(this.db.core||c).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=aE(function(c){bx(c),b._reject(a.error)}),a.onabort=aE(function(c){bx(c),b.active&&b._reject(new S.Abort(a.error)),b.active=!1,b.on("abort").fire(c)}),a.oncomplete=aE(function(){b.active=!1,b._resolve(),"mutatedParts"in a&&bA.storagemutated.fire(a.mutatedParts)})}return this},bC.prototype._promise=function(a,b,c){var d,e=this;return"readwrite"===a&&"readwrite"!==this.mode?aV(new S.ReadOnly("Transaction is readonly")):this.active?this._locked()?new as(function(d,f){e._blockedFuncs.push([function(){e._promise(a,b,c).then(d,f)},ao])}):c?aL(function(){var a=new as(function(a,c){e._lock();var d=b(a,c,e);d&&d.then&&d.then(a,c)});return a.finally(function(){return e._unlock()}),a._lib=!0,a}):((d=new as(function(a,c){var d=b(a,c,e);d&&d.then&&d.then(a,c)}))._lib=!0,d):aV(new S.TransactionInactive)},bC.prototype._root=function(){return this.parent?this.parent._root():this},bC.prototype.waitFor=function(a){var b,c=this._root(),d=as.resolve(a),e=(c._waitingFor?c._waitingFor=c._waitingFor.then(function(){return d}):(c._waitingFor=d,c._waitingQueue=[],b=c.idbtrans.objectStore(c.storeNames[0]),function a(){for(++c._spinCount;c._waitingQueue.length;)c._waitingQueue.shift()();c._waitingFor&&(b.get(-1/0).onsuccess=a)}()),c._waitingFor);return new as(function(a,b){d.then(function(b){return c._waitingQueue.push(aE(a.bind(null,b)))},function(a){return c._waitingQueue.push(aE(b.bind(null,a)))}).finally(function(){c._waitingFor===e&&(c._waitingFor=null)})})},bC.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new S.Abort))},bC.prototype.table=function(a){var b=this._memoizedTables||(this._memoizedTables={});if(j(b,a))return b[a];var c=this.schema[a];if(c)return(c=new this.db.Table(a,c,this)).core=this.db.core.table(a),b[a]=c;throw new S.NotFound("Table "+a+" not part of transaction")},bC);function bC(){}function bD(a,b,c,d,e,f,g,h){return{name:a,keyPath:b,unique:c,multi:d,auto:e,compound:f,src:(c&&!g?"&":"")+(d?"*":"")+(e?"++":"")+bE(b),type:h}}function bE(a){return"string"==typeof a?a:a?"["+[].join.call(a,"+")+"]":""}function bF(a,b,c){var d;return{name:a,primKey:b,indexes:c,mappedClass:null,idxByName:(d=function(a){return[a.name,a]},c.reduce(function(a,b,c){return(b=d(b,c))&&(a[b[0]]=b[1]),a},{}))}}var bG=function(a){try{return a.only([[]]),bG=function(){return[[]]},[[]]}catch(a){return bG=function(){return aW},aW}};function bH(a){return null==a?function(){}:"string"==typeof a?1===a.split(".").length?function(b){return b[a]}:function(b){return u(b,a)}:function(b){return u(b,a)}}function bI(a){return[].slice.call(a)}var bJ=0;function bK(a){return null==a?":id":"string"==typeof a?a:"[".concat(a.join("+"),"]")}function bL(a,c){var d,e,g,h=c.db,h=(d=a._middlewares,e=h,g=a._deps,e=function(a,b,c){function d(a){if(3===a.type)return null;if(4===a.type)throw Error("Cannot convert never type to IDBKeyRange");var c=a.lower,d=a.upper,e=a.lowerOpen,a=a.upperOpen;return void 0===c?void 0===d?null:b.upperBound(d,!!a):void 0===d?b.lowerBound(c,!!e):b.bound(c,d,!!e,!!a)}e=c,g=bI((c=a).objectStoreNames);var e,c={schema:{name:c.name,tables:g.map(function(a){return e.objectStore(a)}).map(function(a){var b=a.keyPath,c=a.autoIncrement,d=f(b),e={},d={name:a.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:null==b,compound:d,keyPath:b,autoIncrement:c,unique:!0,extractKey:bH(b)},indexes:bI(a.indexNames).map(function(b){return a.index(b)}).map(function(a){var b=a.name,c=a.unique,d=a.multiEntry,a=a.keyPath,b={name:b,compound:f(a),keyPath:a,unique:c,multiEntry:d,extractKey:bH(a)};return e[bK(a)]=b}),getIndexByKeyPath:function(a){return e[bK(a)]}};return e[":id"]=d.primaryKey,null!=b&&(e[bK(b)]=d.primaryKey),d})},hasGetAll:0<g.length&&"getAll"in e.objectStore(g[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)},g=c.schema,h=c.hasGetAll,c=g.tables.map(function(a){var b=a.name;return{name:b,schema:a,mutate:function(a){var c=a.trans,e=a.type,f=a.keys,g=a.values,h=a.range;return new Promise(function(a,i){a=aE(a);var j=c.objectStore(b),k=null==j.keyPath,l="put"===e||"add"===e;if(!l&&"delete"!==e&&"deleteRange"!==e)throw Error("Invalid operation type: "+e);var m,n=(f||g||{length:1}).length;if(f&&g&&f.length!==g.length)throw Error("Given keys array must have same length as given values array.");if(0===n)return a({numFailures:0,failures:{},results:[],lastResult:void 0});function o(a){++r,bx(a)}var p=[],q=[],r=0;if("deleteRange"===e){if(4===h.type)return a({numFailures:r,failures:q,results:[],lastResult:void 0});3===h.type?p.push(m=j.clear()):p.push(m=j.delete(d(h)))}else{var k=l?k?[g,f]:[g,null]:[f,null],s=k[0],t=k[1];if(l)for(var u=0;u<n;++u)p.push(m=t&&void 0!==t[u]?j[e](s[u],t[u]):j[e](s[u])),m.onerror=o;else for(u=0;u<n;++u)p.push(m=j[e](s[u])),m.onerror=o}function v(b){b=b.target.result,p.forEach(function(a,b){return null!=a.error&&(q[b]=a.error)}),a({numFailures:r,failures:q,results:"delete"===e?f:p.map(function(a){return a.result}),lastResult:b})}m.onerror=function(a){o(a),v(a)},m.onsuccess=v})},getMany:function(a){var c=a.trans,d=a.keys;return new Promise(function(a,e){a=aE(a);for(var f,g=c.objectStore(b),h=d.length,i=Array(h),j=0,k=0,l=function(b){i[(b=b.target)._pos]=b.result,++k===j&&a(i)},m=bw(e),n=0;n<h;++n)null!=d[n]&&((f=g.get(d[n]))._pos=n,f.onsuccess=l,f.onerror=m,++j);0===j&&a(i)})},get:function(a){var c=a.trans,d=a.key;return new Promise(function(a,e){a=aE(a);var f=c.objectStore(b).get(d);f.onsuccess=function(b){return a(b.target.result)},f.onerror=bw(e)})},query:function(a){return new Promise(function(c,e){c=aE(c);var f,g,i,j=a.trans,k=a.values,l=a.limit,m=a.query,n=l===1/0?void 0:l,o=m.index,m=m.range,j=j.objectStore(b),j=o.isPrimaryKey?j:j.index(o.name),o=d(m);if(0===l)return c({result:[]});h?((m=k?j.getAll(o,n):j.getAllKeys(o,n)).onsuccess=function(a){return c({result:a.target.result})},m.onerror=bw(e)):(f=0,g=!k&&"openKeyCursor"in j?j.openKeyCursor(o):j.openCursor(o),i=[],g.onsuccess=function(a){var b=g.result;return b&&(i.push(k?b.value:b.primaryKey),++f!==l)?void b.continue():c({result:i})},g.onerror=bw(e))})},openCursor:function(a){var c=a.trans,e=a.values,f=a.query,g=a.reverse,h=a.unique;return new Promise(function(a,i){a=aE(a);var j=f.index,k=f.range,l=c.objectStore(b),l=j.isPrimaryKey?l:l.index(j.name),j=g?h?"prevunique":"prev":h?"nextunique":"next",m=!e&&"openKeyCursor"in l?l.openKeyCursor(d(k),j):l.openCursor(d(k),j);m.onerror=bw(i),m.onsuccess=aE(function(b){var d,e,f,g,h=m.result;h?(h.___id=++bJ,h.done=!1,d=h.continue.bind(h),e=(e=h.continuePrimaryKey)&&e.bind(h),f=h.advance.bind(h),g=function(){throw Error("Cursor not stopped")},h.trans=c,h.stop=h.continue=h.continuePrimaryKey=h.advance=function(){throw Error("Cursor not started")},h.fail=aE(i),h.next=function(){var a=this,b=1;return this.start(function(){return b--?a.continue():a.stop()}).then(function(){return a})},h.start=function(a){function b(){if(m.result)try{a()}catch(a){h.fail(a)}else h.done=!0,h.start=function(){throw Error("Cursor behind last entry")},h.stop()}var c=new Promise(function(a,b){a=aE(a),m.onerror=bw(b),h.fail=b,h.stop=function(b){h.stop=h.continue=h.continuePrimaryKey=h.advance=g,a(b)}});return m.onsuccess=aE(function(a){m.onsuccess=b,b()}),h.continue=d,h.continuePrimaryKey=e,h.advance=f,b(),c},a(h)):a(null)},i)})},count:function(a){var c=a.query,e=a.trans,f=c.index,g=c.range;return new Promise(function(a,c){var h=e.objectStore(b),h=f.isPrimaryKey?h:h.index(f.name),i=d(g),i=i?h.count(i):h.count();i.onsuccess=aE(function(b){return a(b.target.result)}),i.onerror=bw(c)})}}}),i={};return c.forEach(function(a){return i[a.name]=a}),{stack:"dbcore",transaction:a.transaction.bind(a),table:function(a){if(i[a])return i[a];throw Error("Table '".concat(a,"' not found"))},MIN_KEY:-1/0,MAX_KEY:bG(b),schema:g}}(e,g=g.IDBKeyRange,c),{dbcore:d.dbcore.reduce(function(a,c){return c=c.create,b(b({},a),c(a))},e)});a.core=h.dbcore,a.tables.forEach(function(b){var c=b.name;a.core.schema.tables.some(function(a){return a.name===c})&&(b.core=a.core.table(c),a[c]instanceof a.Table)&&(a[c].core=b.core)})}function bM(a,b,c,d){c.forEach(function(c){var e=d[c];b.forEach(function(b){var d=function a(b,c){return o(b,c)||(b=h(b))&&a(b,c)}(b,c);(!d||"value"in d&&void 0===d.value)&&(b===a.Transaction.prototype||b instanceof a.Transaction?m(b,c,{get:function(){return this.table(c)},set:function(a){l(this,c,{value:a,writable:!0,configurable:!0,enumerable:!0})}}):b[c]=new a.Table(c,e))})})}function bN(a,b){b.forEach(function(b){for(var c in b)b[c]instanceof a.Table&&delete b[c]})}function bO(a,b){return a._cfg.version-b._cfg.version}function bP(a,b){var c,d={del:[],add:[],change:[]};for(c in a)b[c]||d.del.push(c);for(c in b){var e=a[c],f=b[c];if(e){var g={name:c,def:f,recreate:!1,del:[],add:[],change:[]};if(""+(e.primKey.keyPath||"")!=""+(f.primKey.keyPath||"")||e.primKey.auto!==f.primKey.auto)g.recreate=!0,d.change.push(g);else{var h=e.idxByName,i=f.idxByName,j=void 0;for(j in h)i[j]||g.del.push(j);for(j in i){var k=h[j],l=i[j];k?k.src!==l.src&&g.change.push(l):g.add.push(l)}(0<g.del.length||0<g.add.length||0<g.change.length)&&d.change.push(g)}}else d.add.push([c,f])}return d}function bQ(a,b,c,d){var e=a.db.createObjectStore(b,c.keyPath?{keyPath:c.keyPath,autoIncrement:c.auto}:{autoIncrement:c.auto});d.forEach(function(a){return bS(e,a)})}function bR(a,b){e(a).forEach(function(c){b.db.objectStoreNames.contains(c)||(ab&&console.debug("Dexie: Creating missing table",c),bQ(b,c,a[c].primKey,a[c].indexes))})}function bS(a,b){a.createIndex(b.name,b.keyPath,{unique:b.unique,multiEntry:b.multi})}function bT(a,b,c){var d={};return q(b.objectStoreNames,0).forEach(function(a){for(var b=c.objectStore(a),e=bD(bE(i=b.keyPath),i||"",!0,!1,!!b.autoIncrement,i&&"string"!=typeof i,!0),f=[],g=0;g<b.indexNames.length;++g){var h=b.index(b.indexNames[g]),i=h.keyPath,h=bD(h.name,i,!!h.unique,!!h.multiEntry,!1,i&&"string"!=typeof i,!1);f.push(h)}d[a]=bF(a,e,f)}),d}function bU(a,b,c){for(var e=c.db.objectStoreNames,f=0;f<e.length;++f){var g=e[f],h=c.objectStore(g);a._hasGetAll="getAll"in h;for(var i=0;i<h.indexNames.length;++i){var j,k=h.indexNames[i],l=h.index(k).keyPath,l="string"==typeof l?l:"["+q(l).join("+")+"]";b[g]&&(j=b[g].idxByName[l])&&(j.name=k,delete b[g].idxByName[l],b[g].idxByName[k]=j)}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&d.WorkerGlobalScope&&d instanceof d.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(a._hasGetAll=!1)}function bV(a){return a.split(",").map(function(a,b){var c=a.split(":"),d=null==(d=c[1])?void 0:d.trim(),c=(a=c[0].trim()).replace(/([&*]|\+\+)/g,""),e=/^\[/.test(c)?c.match(/^\[(.*)\]$/)[1].split("+"):c;return bD(c,e||null,/\&/.test(a),/\*/.test(a),/\+\+/.test(a),f(e),0===b,d)})}function bW(){}function bX(a,b){var c=a._dbNamesDB;return c||(c=a._dbNamesDB=new cv(a$,{addons:[],indexedDB:a,IDBKeyRange:b})).version(1).stores({dbnames:"name"}),c.table("dbnames")}function bY(a){return a&&"function"==typeof a.databases}function bZ(a){return aL(function(){return ao.letThrough=!0,a()})}function b$(a){return!("from"in a)}bW.prototype._createTableSchema=bF,bW.prototype._parseIndexSyntax=bV,bW.prototype._parseStoresSpec=function(a,b){var c=this;e(a).forEach(function(d){if(null!==a[d]){var e=c._parseIndexSyntax(a[d]),f=e.shift();if(!f)throw new S.Schema("Invalid schema for table "+d+": "+a[d]);if(f.unique=!0,f.multi)throw new S.Schema("Primary key cannot be multiEntry*");e.forEach(function(a){if(a.auto)throw new S.Schema("Only primary key can be marked as autoIncrement (++)");if(!a.keyPath)throw new S.Schema("Index must have a name and cannot be an empty string")}),f=c._createTableSchema(d,f,e),b[d]=f}})},bW.prototype.stores=function(a){var b=this.db,a=(this._cfg.storesSource=this._cfg.storesSource?g(this._cfg.storesSource,a):a,b._versions),c={},d={};return a.forEach(function(a){g(c,a._cfg.storesSource),d=a._cfg.dbschema={},a._parseStoresSpec(c,d)}),b._dbSchema=d,bN(b,[b._allTables,b,b.Transaction.prototype]),bM(b,[b._allTables,b,b.Transaction.prototype,this._cfg.tables],e(d),d),b._storeNames=e(d),this},bW.prototype.upgrade=function(a){return this._cfg.contentUpgrade=aa(this._cfg.contentUpgrade||U,a),this};var b_=function(a,b){var c;if(!this)return c=new b_,a&&"d"in a&&g(c,a),c;g(this,arguments.length?{d:1,from:a,to:1<arguments.length?b:a}:{d:0})};function b0(a,b,c){var d=a5(b,c);if(!isNaN(d)){if(0<d)throw RangeError();if(b$(a))return g(a,{from:b,to:c,d:1});var d=a.l,e=a.r;if(0>a5(c,a.from))return d?b0(d,b,c):a.l={from:b,to:c,d:1,l:null,r:null},b4(a);if(0<a5(b,a.to))return e?b0(e,b,c):a.r={from:b,to:c,d:1,l:null,r:null},b4(a);0>a5(b,a.from)&&(a.from=b,a.l=null,a.d=e?e.d+1:1),0<a5(c,a.to)&&(a.to=c,a.r=null,a.d=a.l?a.l.d+1:1),b=!a.r,d&&!a.l&&b1(a,d),e&&b&&b1(a,e)}}function b1(a,b){b$(b)||function a(b,c){var d=c.from,e=c.l,f=c.r;b0(b,d,c.to),e&&a(b,e),f&&a(b,f)}(a,b)}function b2(a,b){var c=b3(b),d=c.next();if(!d.done)for(var e=d.value,f=b3(a),g=f.next(e.from),h=g.value;!d.done&&!g.done;){if(0>=a5(h.from,e.to)&&0<=a5(h.to,e.from))return!0;0>a5(e.from,h.from)?e=(d=c.next(h.from)).value:h=(g=f.next(e.from)).value}return!1}function b3(a){var b=b$(a)?null:{s:0,n:a};return{next:function(a){for(var c=0<arguments.length;b;)switch(b.s){case 0:if(b.s=1,c)for(;b.n.l&&0>a5(a,b.n.from);)b={up:b,n:b.n.l,s:1};else for(;b.n.l;)b={up:b,n:b.n.l,s:1};case 1:if(b.s=2,!c||0>=a5(a,b.n.to))return{value:b.n,done:!1};case 2:if(b.n.r){b.s=3,b={up:b,n:b.n.r,s:0};continue}case 3:b=b.up}return{done:!0}}}}function b4(a){var c,d,e,f=((null==(f=a.r)?void 0:f.d)||0)-((null==(f=a.l)?void 0:f.d)||0),f=1<f?"r":f<-1?"l":"";f&&(c="r"==f?"l":"r",d=b({},a),e=a[f],a.from=e.from,a.to=e.to,a[f]=e[f],d[f]=e[c],(a[c]=d).d=b5(d)),a.d=b5(a)}function b5(a){var b=a.r,a=a.l;return(b?a?Math.max(b.d,a.d):b.d:a?a.d:0)+1}function b6(a,b){return e(b).forEach(function(c){a[c]?b1(a[c],b[c]):a[c]=function a(b){var c,d,e={};for(c in b)j(b,c)&&(d=b[c],e[c]=!d||"object"!=typeof d||A.has(d.constructor)?d:a(d));return e}(b[c])}),a}function b7(a,b){return a.all||b.all||Object.keys(a).some(function(c){return b[c]&&b2(b[c],a[c])})}k(b_.prototype,((L={add:function(a){return b1(this,a),this},addKey:function(a){return b0(this,a,a),this},addKeys:function(a){var b=this;return a.forEach(function(a){return b0(b,a,a)}),this},hasKey:function(a){var b=b3(this).next(a).value;return b&&0>=a5(b.from,a)&&0<=a5(b.to,a)}})[F]=function(){return b3(this)},L));var b8={},b9={},ca=!1;function cb(a){b6(b9,a),ca||(ca=!0,setTimeout(function(){ca=!1,cc(b9,(b9={},!1))},0))}function cc(a,b){void 0===b&&(b=!1);var c=new Set;if(a.all)for(var d=0,e=Object.values(b8);d<e.length;d++)cd(h=e[d],a,c,b);else for(var f in a){var g,h,f=/^idb\:\/\/(.*)\/(.*)\//.exec(f);f&&(g=f[1],f=f[2],h=b8["idb://".concat(g,"/").concat(f)])&&cd(h,a,c,b)}c.forEach(function(a){return a()})}function cd(a,b,c,d){for(var e=[],f=0,g=Object.entries(a.queries.query);f<g.length;f++){for(var h=g[f],i=h[0],j=[],k=0,l=h[1];k<l.length;k++){var m=l[k];b7(b,m.obsSet)?m.subscribers.forEach(function(a){return c.add(a)}):d&&j.push(m)}d&&e.push([i,j])}if(d)for(var n=0;n<e.length;n++){var o=e[n],i=o[0],j=o[1];a.queries.query[i]=j}}function ce(a){function b(b){return a.next(b)}var c=e(b),d=e(function(b){return a.throw(b)});function e(a){return function(b){var b=a(b),e=b.value;return b.done?e:e&&"function"==typeof e.then?e.then(c,d):f(e)?Promise.all(e).then(c,d):c(e)}}return e(b)()}function cf(a,b,c){for(var d=f(a)?a.slice():[a],e=0;e<c;++e)d.push(b);return d}var cg={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(a){return b(b({},a),{table:function(c){var d=a.table(c),c=d.schema,e={},f=[];function g(a,c,d){var h=bK(a),i=e[h]=e[h]||[],j=null==a?0:"string"==typeof a?1:a.length,k=0<c,h=b(b({},d),{name:k?"".concat(h,"(virtual-from:").concat(d.name,")"):d.name,lowLevelIndex:d,isVirtual:k,keyTail:c,keyLength:j,extractKey:bH(a),unique:!k&&d.unique});return i.push(h),h.isPrimaryKey||f.push(h),1<j&&g(2===j?a[0]:a.slice(0,j-1),c+1,d),i.sort(function(a,b){return a.keyTail-b.keyTail}),h}var h=g(c.primaryKey.keyPath,0,c.primaryKey);e[":id"]=[h];for(var i=0,j=c.indexes;i<j.length;i++){var k=j[i];g(k.keyPath,0,k)}function l(c){var d,e=c.query.index;return e.isVirtual?b(b({},c),{query:{index:e.lowLevelIndex,range:(d=c.query.range,e=e.keyTail,{type:1===d.type?2:d.type,lower:cf(d.lower,d.lowerOpen?a.MAX_KEY:a.MIN_KEY,e),lowerOpen:!0,upper:cf(d.upper,d.upperOpen?a.MIN_KEY:a.MAX_KEY,e),upperOpen:!0})}}):c}return b(b({},d),{schema:b(b({},c),{primaryKey:h,indexes:f,getIndexByKeyPath:function(a){return(a=e[bK(a)])&&a[0]}}),count:function(a){return d.count(l(a))},query:function(a){return d.query(l(a))},openCursor:function(b){var c=b.query.index,e=c.keyTail,f=c.keyLength;return c.isVirtual?d.openCursor(l(b)).then(function(c){var d;return c&&Object.create(d=c,{continue:{value:function(c){null!=c?d.continue(cf(c,b.reverse?a.MAX_KEY:a.MIN_KEY,e)):b.unique?d.continue(d.key.slice(0,f).concat(b.reverse?a.MIN_KEY:a.MAX_KEY,e)):d.continue()}},continuePrimaryKey:{value:function(b,c){d.continuePrimaryKey(cf(b,a.MAX_KEY,e),c)}},primaryKey:{get:function(){return d.primaryKey}},key:{get:function(){var a=d.key;return 1===f?a[0]:a.slice(0,f)}},value:{get:function(){return d.value}}})}):d.openCursor(b)}})}})}};function ch(a,b,c,d){return c=c||{},d=d||"",e(a).forEach(function(e){var f,g,h;j(b,e)?(f=a[e],g=b[e],"object"==typeof f&&"object"==typeof g&&f&&g?(h=E(f))!==E(g)?c[d+e]=b[e]:"Object"===h?ch(f,g,c,d+e+"."):f!==g&&(c[d+e]=b[e]):f!==g&&(c[d+e]=b[e])):c[d+e]=void 0}),e(b).forEach(function(e){j(a,e)||(c[d+e]=b[e])}),c}function ci(a,b){return"delete"===b.type?b.keys:b.keys||b.values.map(a.extractKey)}var cj={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(a){return b(b({},a),{table:function(d){var e=a.table(d),f=e.schema.primaryKey;return b(b({},e),{mutate:function(a){var g=ao.trans,h=g.table(d).hook,i=h.deleting,k=h.creating,l=h.updating;switch(a.type){case"add":if(k.fire===U)break;return g._promise("readwrite",function(){return m(a)},!0);case"put":if(k.fire===U&&l.fire===U)break;return g._promise("readwrite",function(){return m(a)},!0);case"delete":if(i.fire===U)break;return g._promise("readwrite",function(){return m(a)},!0);case"deleteRange":if(i.fire===U)break;return g._promise("readwrite",function(){return function a(c,d,g){return e.query({trans:c,values:!1,query:{index:f,range:d},limit:g}).then(function(e){var f=e.result;return m({type:"delete",keys:f,trans:c}).then(function(e){return 0<e.numFailures?Promise.reject(e.failures[0]):f.length<g?{failures:[],numFailures:0,lastResult:void 0}:a(c,b(b({},d),{lower:f[f.length-1],lowerOpen:!0}),g)})})}(a.trans,a.range,1e4)},!0)}return e.mutate(a);function m(a){var d,g=ao.trans,h=a.keys||ci(f,a);if(h)return"delete"!==(a="add"===a.type||"put"===a.type?b(b({},a),{keys:h}):b({},a)).type&&(a.values=c([],a.values,!0)),a.keys&&(a.keys=c([],a.keys,!0)),("add"===(d=a).type?Promise.resolve([]):e.getMany({trans:d.trans,keys:h,cache:"immutable"})).then(function(b){var c=h.map(function(c,d){var e,h,m,n=b[d],o={onerror:null,onsuccess:null};return"delete"===a.type?i.fire.call(o,c,n,g):"add"===a.type||void 0===n?(e=k.fire.call(o,c,a.values[d],g),null==c&&null!=e&&(a.keys[d]=c=e,f.outbound||v(a.values[d],f.keyPath,c))):(e=ch(n,a.values[d]),(h=l.fire.call(o,e,c,n,g))&&(m=a.values[d],Object.keys(h).forEach(function(a){j(m,a)?m[a]=h[a]:v(m,a,h[a])}))),o});return e.mutate(a).then(function(d){for(var e=d.failures,f=d.results,g=d.numFailures,d=d.lastResult,i=0;i<h.length;++i){var j=(f||h)[i],k=c[i];null==j?k.onerror&&k.onerror(e[i]):k.onsuccess&&k.onsuccess("put"===a.type&&b[i]?a.values[i]:j)}return{failures:e,results:f,numFailures:g,lastResult:d}}).catch(function(a){return c.forEach(function(b){return b.onerror&&b.onerror(a)}),Promise.reject(a)})});throw Error("Keys missing")}}})}})}};function ck(a,b,c){try{if(!b||b.keys.length<a.length)return null;for(var d=[],e=0,f=0;e<b.keys.length&&f<a.length;++e)0===a5(b.keys[e],a[f])&&(d.push(c?C(b.values[e]):b.values[e]),++f);return d.length===a.length?d:null}catch(a){return null}}var cl={stack:"dbcore",level:-1,create:function(a){return{table:function(c){var d=a.table(c);return b(b({},d),{getMany:function(a){var b;return a.cache?(b=ck(a.keys,a.trans._cache,"clone"===a.cache))?as.resolve(b):d.getMany(a).then(function(b){return a.trans._cache={keys:a.keys,values:"clone"===a.cache?C(b):b},b}):d.getMany(a)},mutate:function(a){return"add"!==a.type&&(a.trans._cache=null),d.mutate(a)}})}}}};function cm(a,b){return"readonly"===a.trans.mode&&!!a.subscr&&!a.trans.explicit&&"disabled"!==a.trans.db._options.cache&&!b.schema.primaryKey.outbound}function cn(a,b){switch(a){case"query":return b.values&&!b.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var co={stack:"dbcore",level:0,name:"Observability",create:function(a){var c=a.schema.name,d=new b_(a.MIN_KEY,a.MAX_KEY);return b(b({},a),{transaction:function(b,c,d){if(ao.subscr&&"readonly"!==c)throw new S.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ao.querier));return a.transaction(b,c,d)},table:function(g){function h(b){var c,b=b.query;return[c=b.index,new b_(null!=(c=(b=b.range).lower)?c:a.MIN_KEY,null!=(c=b.upper)?c:a.MAX_KEY)]}var i=a.table(g),j=i.schema,k=j.primaryKey,l=j.indexes,m=k.extractKey,n=k.outbound,o=k.autoIncrement&&l.filter(function(a){return a.compound&&a.keyPath.includes(k.keyPath)}),p=b(b({},i),{mutate:function(b){function e(a){return n[a="idb://".concat(c,"/").concat(g,"/").concat(a)]||(n[a]=new b_)}var h,l,m=b.trans,n=b.mutatedParts||(b.mutatedParts={}),p=e(""),q=e(":dels"),r=b.type,s="deleteRange"===b.type?[b.range]:"delete"===b.type?[b.keys]:b.values.length<50?[ci(k,b).filter(function(a){return a}),b.values]:[],t=s[0],s=s[1],u=b.trans._cache;return f(t)?(p.addKeys(t),(r="delete"===r||t.length===s.length?ck(t,u):null)||q.addKeys(t),(r||s)&&(h=r,l=s,j.indexes.forEach(function(a){var b=e(a.name||"");function c(b){return null!=b?a.extractKey(b):null}function d(c){a.multiEntry&&f(c)?c.forEach(function(a){return b.addKey(a)}):b.addKey(c)}(h||l).forEach(function(a,b){var e=h&&c(h[b]),b=l&&c(l[b]);0!==a5(e,b)&&(null!=e&&d(e),null!=b)&&d(b)})}))):t?(s={from:null!=(u=t.lower)?u:a.MIN_KEY,to:null!=(r=t.upper)?r:a.MAX_KEY},q.add(s),p.add(s)):(p.add(d),q.add(d),j.indexes.forEach(function(a){return e(a.name).add(d)})),i.mutate(b).then(function(a){return!t||"add"!==b.type&&"put"!==b.type||(p.addKeys(a.results),o&&o.forEach(function(c){for(var d=b.values.map(function(a){return c.extractKey(a)}),f=c.keyPath.findIndex(function(a){return a===k.keyPath}),g=0,h=a.results.length;g<h;++g)d[g][f]=a.results[g];e(c.name).addKeys(d)})),m.mutatedParts=b6(m.mutatedParts||{},n),a})}}),q={get:function(a){return[k,new b_(a.key)]},getMany:function(a){return[k,(new b_).addKeys(a.keys)]},count:h,query:h,openCursor:h};return e(q).forEach(function(a){p[a]=function(e){var f=ao.subscr,h=!!f,j=cm(ao,i)&&cn(a,e)?e.obsSet={}:f;if(h){var k,f=function(a){return j[a="idb://".concat(c,"/").concat(g,"/").concat(a)]||(j[a]=new b_)},l=f(""),o=f(":dels"),h=q[a](e),p=h[0],h=h[1];if(("query"===a&&p.isPrimaryKey&&!e.values?o:f(p.name||"")).add(h),!p.isPrimaryKey){if("count"!==a)return k="query"===a&&n&&e.values&&i.query(b(b({},e),{values:!1})),i[a].apply(this,arguments).then(function(b){if("query"===a){if(n&&e.values)return k.then(function(a){return a=a.result,l.addKeys(a),b});var c,d=e.values?b.result.map(m):b.result;(e.values?l:o).addKeys(d)}else if("openCursor"===a)return c=e.values,b&&Object.create(b,{key:{get:function(){return o.addKey(b.primaryKey),b.key}},primaryKey:{get:function(){var a=b.primaryKey;return o.addKey(a),a}},value:{get:function(){return c&&l.addKey(b.primaryKey),b.value}}});return b});o.add(d)}}return i[a].apply(this,arguments)}}),p}})}};function cp(a,c,d){var e;return 0===d.numFailures?c:"deleteRange"===c.type||(e=c.keys?c.keys.length:"values"in c&&c.values?c.values.length:1,d.numFailures===e)?null:(f((e=b({},c)).keys)&&(e.keys=e.keys.filter(function(a,b){return!(b in d.failures)})),"values"in e&&f(e.values)&&(e.values=e.values.filter(function(a,b){return!(b in d.failures)})),e)}function cq(a,b){var c,d;return c=a,(void 0===(d=b).lower||(d.lowerOpen?0<a5(c,d.lower):0<=a5(c,d.lower)))&&(c=a,void 0===(d=b).upper||(d.upperOpen?0>a5(c,d.upper):0>=a5(c,d.upper)))}function cr(a,b,c,d,e,g){var h,i,j,k,l,m;return c&&0!==c.length&&(i=(h=b.query.index).multiEntry,j=b.query.range,k=d.schema.primaryKey.extractKey,l=h.extractKey,m=(h.lowLevelIndex||h).extractKey,(d=c.reduce(function(a,c){var d=a,e=[];if("add"===c.type||"put"===c.type)for(var g=new b_,h=c.values.length-1;0<=h;--h){var m,n=c.values[h],o=k(n);!g.hasKey(o)&&(m=l(n),i&&f(m)?m.some(function(a){return cq(a,j)}):cq(m,j))&&(g.addKey(o),e.push(n))}switch(c.type){case"add":var p=(new b_).addKeys(b.values?a.map(function(a){return k(a)}):a),d=a.concat(b.values?e.filter(function(a){return a=k(a),!p.hasKey(a)&&(p.addKey(a),!0)}):e.map(function(a){return k(a)}).filter(function(a){return!p.hasKey(a)&&(p.addKey(a),!0)}));break;case"put":var q=(new b_).addKeys(c.values.map(function(a){return k(a)}));d=a.filter(function(a){return!q.hasKey(b.values?k(a):a)}).concat(b.values?e:e.map(function(a){return k(a)}));break;case"delete":var r=(new b_).addKeys(c.keys);d=a.filter(function(a){return!r.hasKey(b.values?k(a):a)});break;case"deleteRange":var s=c.range;d=a.filter(function(a){return!cq(k(a),s)})}return d},a))!==a)?(d.sort(function(a,b){return a5(m(a),m(b))||a5(k(a),k(b))}),b.limit&&b.limit<1/0&&(d.length>b.limit?d.length=b.limit:a.length===b.limit&&d.length<b.limit&&(e.dirty=!0)),g?Object.freeze(d):d):a}function cs(a,b){return 0===a5(a.lower,b.lower)&&0===a5(a.upper,b.upper)&&!!a.lowerOpen==!!b.lowerOpen&&!!a.upperOpen==!!b.upperOpen}var ct={stack:"dbcore",level:0,name:"Cache",create:function(a){var c=a.schema.name;return b(b({},a),{transaction:function(b,d,e){var f,g,h=a.transaction(b,d,e);return"readwrite"===d&&(e=(f=new AbortController).signal,h.addEventListener("abort",(g=function(e){return function(){if(f.abort(),"readwrite"===d){for(var g=new Set,i=0;i<b.length;i++){var j=b[i],k=b8["idb://".concat(c,"/").concat(j)];if(k){var l=a.table(j),m=k.optimisticOps.filter(function(a){return a.trans===h});if(h._explicit&&e&&h.mutatedParts)for(var n=0,o=Object.values(k.queries.query);n<o.length;n++)for(var p=0,q=(t=o[n]).slice();p<q.length;p++)b7((u=q[p]).obsSet,h.mutatedParts)&&(H(t,u),u.subscribers.forEach(function(a){return g.add(a)}));else if(0<m.length){k.optimisticOps=k.optimisticOps.filter(function(a){return a.trans!==h});for(var r=0,s=Object.values(k.queries.query);r<s.length;r++)for(var t,u,v,w=0,x=(t=s[r]).slice();w<x.length;w++)null!=(u=x[w]).res&&h.mutatedParts&&(e&&!u.dirty?(v=Object.isFrozen(u.res),v=cr(u.res,u.req,m,l,u,v),u.dirty?(H(t,u),u.subscribers.forEach(function(a){return g.add(a)})):v!==u.res&&(u.res=v,u.promise=as.resolve({result:v}))):(u.dirty&&H(t,u),u.subscribers.forEach(function(a){return g.add(a)})))}}}g.forEach(function(a){return a()})}}})(!1),{signal:e}),h.addEventListener("error",g(!1),{signal:e}),h.addEventListener("complete",g(!0),{signal:e})),h},table:function(d){var e=a.table(d),f=e.schema.primaryKey;return b(b({},e),{mutate:function(a){var g,h=ao.trans;return!f.outbound&&"disabled"!==h.db._options.cache&&!h.explicit&&"readwrite"===h.idbtrans.mode&&(g=b8["idb://".concat(c,"/").concat(d)])?(h=e.mutate(a),("add"===a.type||"put"===a.type)&&(50<=a.values.length||ci(f,a).some(function(a){return null==a}))?h.then(function(c){var d=cp(0,b(b({},a),{values:a.values.map(function(a,d){var e;return c.failures[d]?a:(v(e=null!=(e=f.keyPath)&&e.includes(".")?C(a):b({},a),f.keyPath,c.results[d]),e)})}),c);g.optimisticOps.push(d),queueMicrotask(function(){return a.mutatedParts&&cb(a.mutatedParts)})}):(g.optimisticOps.push(a),a.mutatedParts&&cb(a.mutatedParts),h.then(function(b){0<b.numFailures&&(H(g.optimisticOps,a),(b=cp(0,a,b))&&g.optimisticOps.push(b),a.mutatedParts)&&cb(a.mutatedParts)}),h.catch(function(){H(g.optimisticOps,a),a.mutatedParts&&cb(a.mutatedParts)})),h):e.mutate(a)},query:function(a){var b,f,g,h,i,j,k,l,m,n;return cm(ao,e)&&cn("query",a)?(b="immutable"===(null==(g=ao.trans)?void 0:g.db._options.cache),f=(g=ao).requery,g=g.signal,k=(j=((a,b,c,d)=>{var e=b8["idb://".concat(a,"/").concat(b)];if(!e)return[];if(!(a=e.queries[c]))return[null,!1,e,null];var f=a[(d.query?d.query.index.name:null)||""];if(!f)return[null,!1,e,null];switch(c){case"query":var g=f.find(function(a){return a.req.limit===d.limit&&a.req.values===d.values&&cs(a.req.query.range,d.query.range)});return g?[g,!0,e,f]:[f.find(function(a){var b,c;return("limit"in a.req?a.req.limit:1/0)>=d.limit&&(!d.values||a.req.values)&&(b=a.req.query.range,c=d.query.range,0>=((a,b,c,d)=>{if(void 0===a)return void 0!==b?-1:0;if(void 0===b)return 1;if(0===(a=a5(a,b))){if(c&&d)return 0;if(c)return 1;if(d)return -1}return a})(b.lower,c.lower,b.lowerOpen,c.lowerOpen)&&0<=((a,b,c,d)=>{if(void 0===a)return+(void 0!==b);if(void 0===b)return -1;if(0===(a=a5(a,b))){if(c&&d)return 0;if(c)return -1;if(d)return 1}return a})(b.upper,c.upper,b.upperOpen,c.upperOpen))}),!1,e,f];case"count":return[g=f.find(function(a){return cs(a.req.query.range,d.query.range)}),!!g,e,f]}})(c,d,"query",a))[0],h=j[2],i=j[3],k&&j[1]?k.obsSet=a.obsSet:(j=e.query(a).then(function(a){var c=a.result;if(k&&(k.res=c),b){for(var d=0,e=c.length;d<e;++d)Object.freeze(c[d]);Object.freeze(c)}else a.result=C(c);return a}).catch(function(a){return i&&k&&H(i,k),Promise.reject(a)}),k={obsSet:a.obsSet,promise:j,subscribers:new Set,type:"query",req:a,dirty:!1},i?i.push(k):(i=[k],(h=h||(b8["idb://".concat(c,"/").concat(d)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[a.query.index.name||""]=i)),l=k,m=i,n=g,l.subscribers.add(f),n.addEventListener("abort",function(){l.subscribers.delete(f),0===l.subscribers.size&&setTimeout(function(){0===l.subscribers.size&&H(m,l)},3e3)}),k.promise.then(function(c){return{result:cr(c.result,a,null==h?void 0:h.optimisticOps,e,k,b)}})):e.query(a)}})}})}};function cu(a,b){return new Proxy(a,{get:function(a,c,d){return"db"===c?b:Reflect.get(a,c,d)}})}cw.prototype.version=function(a){if(isNaN(a)||a<.1)throw new S.Type("Given version is not a positive number");if(a=Math.round(10*a)/10,this.idbdb||this._state.isBeingOpened)throw new S.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,a);var b=this._versions,c=b.filter(function(b){return b._cfg.version===a})[0];return c||(c=new this.Version(a),b.push(c),b.sort(bO),c.stores({}),this._state.autoSchema=!1),c},cw.prototype._whenReady=function(a){var b=this;return this.idbdb&&(this._state.openComplete||ao.letThrough||this._vip)?a():new as(function(a,c){if(b._state.openComplete)return c(new S.DatabaseClosed(b._state.dbOpenError));if(!b._state.isBeingOpened){if(!b._state.autoOpen)return void c(new S.DatabaseClosed);b.open().catch(U)}b._state.dbReadyPromise.then(a,c)}).then(a)},cw.prototype.use=function(a){var b=a.stack,c=a.create,d=a.level,a=a.name,e=(a&&this.unuse({stack:b,name:a}),this._middlewares[b]||(this._middlewares[b]=[]));return e.push({stack:b,create:c,level:null==d?10:d,name:a}),e.sort(function(a,b){return a.level-b.level}),this},cw.prototype.unuse=function(a){var b=a.stack,c=a.name,d=a.create;return b&&this._middlewares[b]&&(this._middlewares[b]=this._middlewares[b].filter(function(a){return d?a.create!==d:!!c&&a.name!==c})),this},cw.prototype.open=function(){var a=this;return aS(an,function(){return function(a){var b=a._state,c=a._deps.indexedDB;if(b.isBeingOpened||a.idbdb)return b.dbReadyPromise.then(function(){return b.dbOpenError?aV(b.dbOpenError):a});b.isBeingOpened=!0,b.dbOpenError=null,b.openComplete=!1;var d=b.openCanceller,f=Math.round(10*a.verno),g=!1;function h(){if(b.openCanceller!==d)throw new S.DatabaseClosed("db.open() was cancelled")}var i,j=b.dbReadyResolve,k=null,l=!1;return as.race([d,("undefined"==typeof navigator?as.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(a){function b(){return indexedDB.databases().finally(a)}i=setInterval(b,100),b()}).finally(function(){return clearInterval(i)}):Promise.resolve()).then(function d(){return new as(function(i,j){if(h(),!c)throw new S.MissingAPI;var m=a.name,n=b.autoSchema||!f?c.open(m):c.open(m,f);if(!n)throw new S.MissingAPI;n.onerror=bw(j),n.onblocked=aE(a._fireOnBlocked),n.onupgradeneeded=aE(function(d){var f,h,i,o,p,q,r;k=n.transaction,b.autoSchema&&!a._options.allowEmptyDB?(n.onerror=bx,k.abort(),n.result.close(),(f=c.deleteDatabase(m)).onsuccess=f.onerror=aE(function(){j(new S.NoSuchDatabase("Database ".concat(m," doesnt exist")))})):(k.onerror=bw(j),l=(f=d.oldVersion>0x4000000000000000?0:d.oldVersion)<1,a.idbdb=n.result,g&&function(a,b){bR(a._dbSchema,b),b.db.version%10!=0||b.objectStoreNames.contains("$meta")||b.db.createObjectStore("$meta").add(Math.ceil(b.db.version/10-1),"version");var c=bT(0,a.idbdb,b);bU(a,a._dbSchema,b);for(var d=0,e=bP(c,a._dbSchema).change;d<e.length;d++){var f=(a=>{if(a.change.length||a.recreate)return console.warn("Unable to patch indexes of table ".concat(a.name," because it has changes on the type of index or primary key.")),{value:void 0};var c=b.objectStore(a.name);a.add.forEach(function(b){ab&&console.debug("Dexie upgrade patch: Creating missing index ".concat(a.name,".").concat(b.src)),bS(c,b)})})(e[d]);if("object"==typeof f)return f.value}}(a,k),h=f/10,i=k,o=a._dbSchema,(i.objectStoreNames.contains("$meta")&&!o.$meta&&(o.$meta=bF("$meta",bV("")[0],[]),a._storeNames.push("$meta")),p=a._createTransaction("readwrite",a._storeNames,o)).create(i),p._completion.catch(j),q=p._reject.bind(p),r=ao.transless||ao,aL(function(){if(ao.trans=p,ao.transless=r,0!==h)return bL(a,i),(p.storeNames.includes("$meta")?p.table("$meta").get("version").then(function(a){return null!=a?a:h}):as.resolve(h)).then(function(b){var c=b,d=[],b=a._versions,f=a._dbSchema=bT(0,a.idbdb,i);return 0===(b=b.filter(function(a){return a._cfg.version>=c})).length?as.resolve():(b.forEach(function(b){d.push(function(){var d,g,h,j=f,k=b._cfg.dbschema,l=(bU(a,j,i),bU(a,k,i),f=a._dbSchema=k,bP(j,k)),m=(l.add.forEach(function(a){bQ(i,a[0],a[1].primKey,a[1].indexes)}),l.change.forEach(function(a){if(a.recreate)throw new S.Upgrade("Not yet support for changing primary key");var b=i.objectStore(a.name);a.add.forEach(function(a){return bS(b,a)}),a.change.forEach(function(a){b.deleteIndex(a.name),bS(b,a)}),a.del.forEach(function(a){return b.deleteIndex(a)})}),b._cfg.contentUpgrade);if(m&&b._cfg.version>c)return bL(a,i),p._memoizedTables={},d=w(k),l.del.forEach(function(a){d[a]=j[a]}),bN(a,[a.Transaction.prototype]),bM(a,[a.Transaction.prototype],e(d),d),p.schema=d,(g=K(m))&&aM(),k=as.follow(function(){var a;(h=m(p))&&g&&(a=aN.bind(null,null),h.then(a,a))}),h&&"function"==typeof h.then?as.resolve(h):k.then(function(){return h})}),d.push(function(c){var d=b._cfg.dbschema;[].slice.call(c.db.objectStoreNames).forEach(function(a){return null==d[a]&&c.db.deleteObjectStore(a)}),bN(a,[a.Transaction.prototype]),bM(a,[a.Transaction.prototype],a._storeNames,a._dbSchema),p.schema=a._dbSchema}),d.push(function(c){a.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(a.idbdb.version/10)===b._cfg.version?(a.idbdb.deleteObjectStore("$meta"),delete a._dbSchema.$meta,a._storeNames=a._storeNames.filter(function(a){return"$meta"!==a})):c.objectStore("$meta").put(b._cfg.version,"version"))})}),(function a(){return d.length?as.resolve(d.shift()(p.idbtrans)).then(a):as.resolve()})().then(function(){bR(f,i)}))}).catch(q);e(o).forEach(function(a){bQ(i,a,o[a].primKey,o[a].indexes)}),bL(a,i),as.follow(function(){return a.on.populate.fire(p)}).catch(q)}))},j),n.onsuccess=aE(function(){k=null;var c,h,j,o,p=a.idbdb=n.result,r=q(p.objectStoreNames);if(0<r.length)try{var s=p.transaction(1===(j=r).length?j[0]:j,"readonly");if(b.autoSchema)o=p,h=s,a.verno=o.version/10,h=a._dbSchema=bT(0,o,h),a._storeNames=q(o.objectStoreNames,0),bM(a,[a._allTables],e(h),h);else if(bU(a,a._dbSchema,s),c=s,((c=bP(bT(0,a.idbdb,c),a._dbSchema)).add.length||c.change.some(function(a){return a.add.length||a.change.length}))&&!g)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),p.close(),f=p.version+1,g=!0,i(d());bL(a,s)}catch(a){}aZ.push(a),p.onversionchange=aE(function(c){b.vcFired=!0,a.on("versionchange").fire(c)}),p.onclose=aE(function(){a.close({disableAutoOpen:!1})}),l&&(r=a._deps,j=m,bY(o=r.indexedDB)||j===a$||bX(o,r.IDBKeyRange).put({name:j}).catch(U)),i()},j)}).catch(function(a){switch(null==a?void 0:a.name){case"UnknownError":if(0<b.PR1398_maxLoop)return b.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),d();break;case"VersionError":if(0<f)return f=0,d()}return as.reject(a)})})]).then(function(){return h(),b.onReadyBeingFired=[],as.resolve(bZ(function(){return a.on.ready.fire(a.vip)})).then(function c(){var d;if(0<b.onReadyBeingFired.length)return d=b.onReadyBeingFired.reduce(aa,U),b.onReadyBeingFired=[],as.resolve(bZ(function(){return d(a.vip)})).then(c)})}).finally(function(){b.openCanceller===d&&(b.onReadyBeingFired=null,b.isBeingOpened=!1)}).catch(function(c){b.dbOpenError=c;try{k&&k.abort()}catch(a){}return d===b.openCanceller&&a._close(),aV(c)}).finally(function(){b.openComplete=!0,j()}).then(function(){var b;return l&&(b={},a.tables.forEach(function(c){c.schema.indexes.forEach(function(d){d.name&&(b["idb://".concat(a.name,"/").concat(c.name,"/").concat(d.name)]=new b_(-1/0,[[[]]]))}),b["idb://".concat(a.name,"/").concat(c.name,"/")]=b["idb://".concat(a.name,"/").concat(c.name,"/:dels")]=new b_(-1/0,[[[]]])}),bA(by).fire(b),cc(b,!0)),a})}(a)})},cw.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var a=this._state,b=aZ.indexOf(this);if(0<=b&&aZ.splice(b,1),this.idbdb){try{this.idbdb.close()}catch(a){}this.idbdb=null}a.isBeingOpened||(a.dbReadyPromise=new as(function(b){a.dbReadyResolve=b}),a.openCanceller=new as(function(b,c){a.cancelOpen=c}))},cw.prototype.close=function(a){var a=(void 0===a?{disableAutoOpen:!0}:a).disableAutoOpen,b=this._state;a?(b.isBeingOpened&&b.cancelOpen(new S.DatabaseClosed),this._close(),b.autoOpen=!1,b.dbOpenError=new S.DatabaseClosed):(this._close(),b.autoOpen=this._options.autoOpen||b.isBeingOpened,b.openComplete=!1,b.dbOpenError=null)},cw.prototype.delete=function(a){var b=this,c=(void 0===a&&(a={disableAutoOpen:!0}),0<arguments.length&&"object"!=typeof arguments[0]),d=this._state;return new as(function(e,f){function g(){b.close(a);var c=b._deps.indexedDB.deleteDatabase(b.name);c.onsuccess=aE(function(){var a,c,d;a=b._deps,c=b.name,bY(d=a.indexedDB)||c===a$||bX(d,a.IDBKeyRange).delete(c).catch(U),e()}),c.onerror=bw(f),c.onblocked=b._fireOnBlocked}if(c)throw new S.InvalidArgument("Invalid closeOptions argument to db.delete()");d.isBeingOpened?d.dbReadyPromise.then(g):g()})},cw.prototype.backendDB=function(){return this.idbdb},cw.prototype.isOpen=function(){return null!==this.idbdb},cw.prototype.hasBeenClosed=function(){var a=this._state.dbOpenError;return a&&"DatabaseClosed"===a.name},cw.prototype.hasFailed=function(){return null!==this._state.dbOpenError},cw.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(cw.prototype,"tables",{get:function(){var a=this;return e(this._allTables).map(function(b){return a._allTables[b]})},enumerable:!1,configurable:!0}),cw.prototype.transaction=function(){var a=(function(a,b,c){var d=arguments.length;if(d<2)throw new S.InvalidArgument("Too few arguments");for(var e=Array(d-1);--d;)e[d-1]=arguments[d];return c=e.pop(),[a,y(e),c]}).apply(this,arguments);return this._transaction.apply(this,a)},cw.prototype._transaction=function(a,b,c){var d,e,f=this,g=ao.trans,h=(g&&g.db===this&&-1===a.indexOf("!")||(g=null),-1!==a.indexOf("?"));a=a.replace("!","").replace("?","");try{if(e=b.map(function(a){if(a=a instanceof f.Table?a.name:a,"string"!=typeof a)throw TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return a}),"r"==a||a===a_)d=a_;else{if("rw"!=a&&a!=a0)throw new S.InvalidArgument("Invalid transaction mode: "+a);d=a0}if(g){if(g.mode===a_&&d===a0){if(!h)throw new S.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");g=null}g&&e.forEach(function(a){if(g&&-1===g.storeNames.indexOf(a)){if(!h)throw new S.SubTransaction("Table "+a+" not included in parent transaction.");g=null}}),h&&g&&!g.active&&(g=null)}}catch(a){return g?g._promise(null,function(b,c){c(a)}):aV(a)}var i=(function a(b,c,d,e,f){return as.resolve().then(function(){var g=ao.transless||ao,h=b._createTransaction(c,d,b._dbSchema,e),g=(h.explicit=!0,{trans:h,transless:g});if(e)h.idbtrans=e.idbtrans;else try{h.create(),h.idbtrans._explicit=!0,b._state.PR1398_maxLoop=3}catch(e){return e.name===R.InvalidState&&b.isOpen()&&0<--b._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),b.close({disableAutoOpen:!1}),b.open().then(function(){return a(b,c,d,null,f)})):aV(e)}var i,j=K(f),g=(j&&aM(),as.follow(function(){var a;(i=f.call(h,h))&&(j?(a=aN.bind(null,null),i.then(a,a)):"function"==typeof i.next&&"function"==typeof i.throw&&(i=ce(i)))},g));return(i&&"function"==typeof i.then?as.resolve(i).then(function(a){return h.active?a:aV(new S.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):g.then(function(){return i})).then(function(a){return e&&h._resolve(),h._completion.then(function(){return a})}).catch(function(a){return h._reject(a),aV(a)})})}).bind(null,this,d,e,g,c);return g?g._promise(d,i,"lock"):ao.trans?aS(ao.transless,function(){return f._whenReady(i)}):this._whenReady(i)},cw.prototype.table=function(a){if(j(this._allTables,a))return this._allTables[a];throw new S.InvalidTable("Table ".concat(a," does not exist"))};var cv=cw;function cw(a,c){var d,e,f,g,h,i=this,j=(this._middlewares={},this.verno=0,cw.dependencies),j=(this._options=c=b({addons:cw.addons,autoOpen:!0,indexedDB:j.indexedDB,IDBKeyRange:j.IDBKeyRange,cache:"cloned"},c),this._deps={indexedDB:c.indexedDB,IDBKeyRange:c.IDBKeyRange},c.addons),k=(this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this,{dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:U,dbReadyPromise:null,cancelOpen:U,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:c.autoOpen}),l=(k.dbReadyPromise=new as(function(a){k.dbReadyResolve=a}),k.openCanceller=new as(function(a,b){k.cancelOpen=b}),this._state=k,this.name=a,this.on=bc(this,"populate","blocked","versionchange","close",{ready:[aa,U]}),this.once=function(a,b){var c=function(){for(var d=[],e=0;e<arguments.length;e++)d[e]=arguments[e];i.on(a).unsubscribe(c),b.apply(i,d)};return i.on(a,c)},this.on.ready.subscribe=r(this.on.ready.subscribe,function(a){return function(b,c){cw.vip(function(){var d=i._state;d.openComplete?(d.dbOpenError||as.resolve().then(b),c&&a(b)):d.onReadyBeingFired?(d.onReadyBeingFired.push(b),c&&a(b)):(a(b),c||a(function a(){i.on.ready.unsubscribe(b),i.on.ready.unsubscribe(a)}))})}}),this.Collection=(d=this,bd(bl.prototype,function(a,b){this.db=d;var c=a2,e=null;if(b)try{c=b()}catch(a){e=a}var b=a._ctx,a=b.table,f=a.hook.reading.fire;this._ctx={table:a,index:b.index,isPrimKey:!b.index||a.schema.primKey.keyPath&&b.index===a.schema.primKey.name,range:c,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:e,or:b.or,valueMapper:f!==V?f:null}})),this.Table=(e=this,bd(bb.prototype,function(a,b,c){this.db=e,this._tx=c,this.name=a,this.schema=b,this.hook=e._allTables[a]?e._allTables[a].hook:bc(null,{creating:[Y,U],reading:[W,V],updating:[$,U],deleting:[Z,U]})})),this.Transaction=(f=this,bd(bB.prototype,function(a,b,c,d,e){var g=this;"readonly"!==a&&b.forEach(function(a){(a=null==(a=c[a])?void 0:a.yProps)&&(b=b.concat(a.map(function(a){return a.updatesTable})))}),this.db=f,this.mode=a,this.storeNames=b,this.schema=c,this.chromeTransactionDurability=d,this.idbtrans=null,this.on=bc(this,"complete","error","abort"),this.parent=e||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new as(function(a,b){g._resolve=a,g._reject=b}),this._completion.then(function(){g.active=!1,g.on.complete.fire()},function(a){var b=g.active;return g.active=!1,g.on.error.fire(a),g.parent?g.parent._reject(a):b&&g.idbtrans&&g.idbtrans.abort(),aV(a)})})),this.Version=(g=this,bd(bW.prototype,function(a){this.db=g,this._cfg={version:a,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(h=this,bd(bu.prototype,function(a,b,c){if(this.db=h,this._ctx={table:a,index:":id"===b?null:b,or:c},this._cmp=this._ascending=a5,this._descending=function(a,b){return a5(b,a)},this._max=function(a,b){return 0<a5(a,b)?a:b},this._min=function(a,b){return 0>a5(a,b)?a:b},this._IDBKeyRange=h._deps.IDBKeyRange,!this._IDBKeyRange)throw new S.MissingAPI})),this.on("versionchange",function(a){0<a.newVersion?console.warn("Another connection wants to upgrade database '".concat(i.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(i.name,"'. Closing db now to resume the delete request.")),i.close({disableAutoOpen:!1})}),this.on("blocked",function(a){!a.newVersion||a.newVersion<a.oldVersion?console.warn("Dexie.delete('".concat(i.name,"') was blocked")):console.warn("Upgrade '".concat(i.name,"' blocked by other connection holding version ").concat(a.oldVersion/10))}),this._maxKey=bG(c.IDBKeyRange),this._createTransaction=function(a,b,c,d){return new i.Transaction(a,b,c,i._options.chromeTransactionDurability,d)},this._fireOnBlocked=function(a){i.on("blocked").fire(a),aZ.filter(function(a){return a.name===i.name&&a!==i&&!a._state.vcFired}).map(function(b){return b.on("versionchange").fire(a)})},this.use(cl),this.use(ct),this.use(co),this.use(cg),this.use(cj),new Proxy(this,{get:function(a,b,c){var d;return"_vip"===b||("table"===b?function(a){return cu(i.table(a),l)}:(d=Reflect.get(a,b,c))instanceof bb?cu(d,l):"tables"===b?d.map(function(a){return cu(a,l)}):"_createTransaction"===b?function(){return cu(d.apply(this,arguments),l)}:d)}}));this.vip=l,j.forEach(function(a){return a(i)})}var cx,ae="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable",cy=(cz.prototype.subscribe=function(a,b,c){return this._subscribe(a&&"function"!=typeof a?a:{next:a,error:b,complete:c})},cz.prototype[ae]=function(){return this},cz);function cz(a){this._subscribe=a}try{cx={indexedDB:d.indexedDB||d.mozIndexedDB||d.webkitIndexedDB||d.msIndexedDB,IDBKeyRange:d.IDBKeyRange||d.webkitIDBKeyRange}}catch(a){cx={indexedDB:null,IDBKeyRange:null}}function cA(a){var b,c=!1,d=new cy(function(d){var e,f=K(a),g=!1,h={},i={},k={get closed(){return g},unsubscribe:function(){g||(g=!0,e&&e.abort(),l&&bA.storagemutated.unsubscribe(n))}},l=(d.start&&d.start(k),!1),m=function(){return aU(o)},n=function(a){b6(h,a),b7(i,h)&&m()},o=function(){var k,o;!g&&cx.indexedDB&&(h={},k={},e&&e.abort(),Promise.resolve((b=>{var c=aA();try{f&&aM();var d=aL(a,b);return d=f?d.finally(aN):d}finally{c&&aB()}})(o={subscr:k,signal:(e=new AbortController).signal,requery:m,querier:a,trans:null})).then(function(a){c=!0,b=a,g||o.signal.aborted||(h={},(a=>{for(var b in a)if(j(a,b))return;return 1})(i=k)||l||(bA(by,n),l=!0),aU(function(){return!g&&d.next&&d.next(a)}))},function(a){c=!1,["DatabaseClosedError","AbortError"].includes(null==a?void 0:a.name)||g||aU(function(){g||d.error&&d.error(a)})}))};return setTimeout(m,0),k});return d.hasValue=function(){return c},d.getValue=function(){return b},d}function cB(a){var b=cD;try{cD=!0,bA.storagemutated.fire(a),cc(a,!0)}finally{cD=b}}k(cv,b(b({},z),{delete:function(a){return new cv(a,{addons:[]}).delete()},exists:function(a){return new cv(a,{addons:[]}).open().then(function(a){return a.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(a){var b,c;try{return c=(b=cv.dependencies).indexedDB,b=b.IDBKeyRange,(bY(c)?Promise.resolve(c.databases()).then(function(a){return a.map(function(a){return a.name}).filter(function(a){return a!==a$})}):bX(c,b).toCollection().primaryKeys()).then(a)}catch(a){return aV(new S.MissingAPI)}},defineClass:function(){return function(a){g(this,a)}},ignoreTransaction:function(a){return ao.trans?aS(ao.transless,a):a()},vip:bZ,async:function(a){return function(){try{var b=ce(a.apply(this,arguments));return b&&"function"==typeof b.then?b:as.resolve(b)}catch(a){return aV(a)}}},spawn:function(a,b,c){try{var d=ce(a.apply(c,b||[]));return d&&"function"==typeof d.then?d:as.resolve(d)}catch(a){return aV(a)}},currentTransaction:{get:function(){return ao.trans||null}},waitFor:function(a,b){return a=as.resolve("function"==typeof a?cv.ignoreTransaction(a):a).timeout(b||6e4),ao.trans?ao.trans.waitFor(a):a},Promise:as,debug:{get:function(){return ab},set:function(a){ab=a}},derive:n,extend:g,props:k,override:r,Events:bc,on:bA,liveQuery:cA,extendObservabilitySet:b6,getByKeyPath:u,setByKeyPath:v,delByKeyPath:function(a,b){"string"==typeof b?v(a,b,void 0):"length"in b&&[].map.call(b,function(b){v(a,b,void 0)})},shallowClone:w,deepClone:C,getObjectDiff:ch,cmp:a5,asap:t,minKey:-1/0,addons:[],connections:aZ,errnames:R,dependencies:cx,cache:b8,semVer:"4.3.0",version:"4.3.0".split(".").map(function(a){return parseInt(a)}).reduce(function(a,b,c){return a+b/Math.pow(10,2*c)})})),cv.maxKey=bG(cv.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(bA(by,function(a){cD||(a=new CustomEvent(bz,{detail:a}),cD=!0,dispatchEvent(a),cD=!1)}),addEventListener(bz,function(a){a=a.detail,cD||cB(a)}));var cC,cD=!1,cE=function(){};return"undefined"!=typeof BroadcastChannel&&((cE=function(){(cC=new BroadcastChannel(bz)).onmessage=function(a){return a.data&&cB(a.data)}})(),"function"==typeof cC.unref&&cC.unref(),bA(by,function(a){cD||cC.postMessage(a)})),"undefined"!=typeof addEventListener&&(addEventListener("pagehide",function(a){if(!cv.disableBfCache&&a.persisted){ab&&console.debug("Dexie: handling persisted pagehide"),null!=cC&&cC.close();for(var b=0;b<aZ.length;b++)aZ[b].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(a){!cv.disableBfCache&&a.persisted&&(ab&&console.debug("Dexie: handling persisted pageshow"),cE(),cB({all:new b_(-1/0,[[]])}))})),as.rejectionMapper=function(a,b){return!a||a instanceof N||a instanceof TypeError||a instanceof SyntaxError||!a.name||!T[a.name]?a:(b=new T[a.name](b||a.message,a),"stack"in a&&m(b,"stack",{get:function(){return this.inner.stack}}),b)},b(cv,Object.freeze({__proto__:null,Dexie:cv,Entity:a4,PropModification:a9,RangeSet:b_,add:function(a){return new a9({add:a})},cmp:a5,default:cv,liveQuery:cA,mergeRanges:b1,rangesOverlap:b2,remove:function(a){return new a9({remove:a})},replacePrefix:function(a,b){return new a9({replacePrefix:[a,b]})}}),{default:cv}),cv}()},456:(a,b,c)=>{"use strict";a.exports=c(6796).vendored.contexts.ImageConfigContext},846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},967:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>d});let d=(0,c(7954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/jim/work/mthfr-food-scanner/src/app/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/jim/work/mthfr-food-scanner/src/app/page.tsx","default")},1025:a=>{"use strict";a.exports=require("next/dist/server/app-render/dynamic-access-async-storage.external.js")},1135:()=>{},1472:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>i,metadata:()=>g,viewport:()=>h});var d=c(5338);c(1135);var e=c(9375),f=c(5825);let g={title:"MTHFR Food Scanner",description:"Scan food products and evaluate ingredient safety for MTHFR methylation health. Identify unsafe ingredients, masking terms, and get personalized safety recommendations.",manifest:"/manifest.json",appleWebApp:{capable:!0,statusBarStyle:"black-translucent",title:"MTHFR Scan"},icons:{icon:"/icons/icon.svg",apple:"/icons/icon.svg"},openGraph:{title:"MTHFR Food Scanner",description:"Evaluate food safety for MTHFR methylation health",type:"website"}},h={width:"device-width",initialScale:1,maximumScale:1,userScalable:!1,viewportFit:"cover",themeColor:[{media:"(prefers-color-scheme: light)",color:"#f7f9f8"},{media:"(prefers-color-scheme: dark)",color:"#0d1512"}]};function i({children:a}){return(0,d.jsxs)("html",{lang:"en",suppressHydrationWarning:!0,children:[(0,d.jsxs)("head",{children:[(0,d.jsx)("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),(0,d.jsx)("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"}),(0,d.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&display=swap",rel:"stylesheet"}),(0,d.jsx)("script",{"data-design-ignore":"true",dangerouslySetInnerHTML:{__html:`(function() {
            if (window === window.parent || window.__DESIGN_NAV_REPORTER__) return;
            window.__DESIGN_NAV_REPORTER__ = true;
            function report() {
              try { window.parent.postMessage({ type: 'IFRAME_URL_CHANGE', payload: { url: location.origin + location.pathname + location.hash } }, '*'); } catch(e) {}
            }
            report();
            var ps = history.pushState, rs = history.replaceState;
            history.pushState = function() { ps.apply(this, arguments); report(); };
            history.replaceState = function() { rs.apply(this, arguments); report(); };
            window.addEventListener('popstate', report);
            window.addEventListener('hashchange', report);
            window.addEventListener('load', report);
          })();`}})]}),(0,d.jsxs)("body",{suppressHydrationWarning:!0,className:"antialiased min-h-screen",children:[(0,d.jsx)(e.default,{children:a}),(0,d.jsx)(f.Toaster,{position:"top-center",richColors:!0,closeButton:!0})]})]})}},1578:(a,b,c)=>{"use strict";a.exports=c(6796).vendored.contexts.AmpContext},2149:(a,b,c)=>{"use strict";c.d(b,{default:()=>e});var d=c(1124);function e({children:a}){return(0,d.jsx)("div",{className:"antialiased",children:a})}c(8301)},2666:(a,b,c)=>{Promise.resolve().then(c.bind(c,967))},2903:(a,b,c)=>{"use strict";c.r(b),c.d(b,{GlobalError:()=>D.a,__next_app__:()=>J,handler:()=>L,pages:()=>I,routeModule:()=>K,tree:()=>H});var d=c(9754),e=c(9117),f=c(6595),g=c(2324),h=c(9326),i=c(8928),j=c(175),k=c(12),l=c(4290),m=c(2696),n=c(2802),o=c(7533),p=c(5229),q=c(2822),r=c(261),s=c(6453),t=c(2474),u=c(6713),v=c(1356),w=c(2685),x=c(6225),y=c(3446),z=c(2762),A=c(5742),B=c(6439),C=c(1170),D=c.n(C),E=c(2506),F=c(1203),G={};for(let a in E)0>["default","tree","pages","GlobalError","__next_app__","routeModule","handler"].indexOf(a)&&(G[a]=()=>E[a]);c.d(b,G);let H=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(c.bind(c,967)),"/Users/jim/work/mthfr-food-scanner/src/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(c.bind(c,1472)),"/Users/jim/work/mthfr-food-scanner/src/app/layout.tsx"],"global-error":[()=>Promise.resolve().then(c.t.bind(c,1170,23)),"next/dist/client/components/builtin/global-error.js"],"not-found":[()=>Promise.resolve().then(c.t.bind(c,7028,23)),"next/dist/client/components/builtin/not-found.js"],forbidden:[()=>Promise.resolve().then(c.t.bind(c,461,23)),"next/dist/client/components/builtin/forbidden.js"],unauthorized:[()=>Promise.resolve().then(c.t.bind(c,2768,23)),"next/dist/client/components/builtin/unauthorized.js"]}],I=["/Users/jim/work/mthfr-food-scanner/src/app/page.tsx"],J={require:c,loadChunk:()=>Promise.resolve()},K=new d.AppPageRouteModule({definition:{kind:e.RouteKind.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:H},distDir:".next-build",relativeProjectDir:""});async function L(a,b,d){var C;let G="/page";"/index"===G&&(G="/");let M=(0,h.getRequestMeta)(a,"postponed"),N=(0,h.getRequestMeta)(a,"minimalMode"),O=await K.prepare(a,b,{srcPage:G,multiZoneDraftMode:!1});if(!O)return b.statusCode=400,b.end("Bad Request"),null==d.waitUntil||d.waitUntil.call(d,Promise.resolve()),null;let{buildId:P,query:Q,params:R,parsedUrl:S,pageIsDynamic:T,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,serverActionsManifest:X,clientReferenceManifest:Y,subresourceIntegrityManifest:Z,prerenderManifest:$,isDraftMode:_,resolvedPathname:aa,revalidateOnlyGenerated:ab,routerServerContext:ac,nextConfig:ad,interceptionRoutePatterns:ae}=O,af=S.pathname||"/",ag=(0,r.normalizeAppPath)(G),{isOnDemandRevalidate:ah}=O,ai=K.match(af,$),aj=!!$.routes[aa],ak=!!(ai||aj||$.routes[ag]),al=a.headers["user-agent"]||"",am=(0,u.getBotType)(al),an=(0,p.isHtmlBotRequest)(a),ao=(0,h.getRequestMeta)(a,"isPrefetchRSCRequest")??"1"===a.headers[t.NEXT_ROUTER_PREFETCH_HEADER],ap=(0,h.getRequestMeta)(a,"isRSCRequest")??!!a.headers[t.RSC_HEADER],aq=(0,s.getIsPossibleServerAction)(a),ar=(0,m.checkIsAppPPREnabled)(ad.experimental.ppr)&&(null==(C=$.routes[ag]??$.dynamicRoutes[ag])?void 0:C.renderingMode)==="PARTIALLY_STATIC",as=!1,at=!1,au=ar?M:void 0,av=ar&&ap&&!ao,aw=(0,h.getRequestMeta)(a,"segmentPrefetchRSCRequest"),ax=!al||(0,p.shouldServeStreamingMetadata)(al,ad.htmlLimitedBots);an&&ar&&(ak=!1,ax=!1);let ay=!0===K.isDev||!ak||"string"==typeof M||av,az=an&&ar,aA=null;_||!ak||ay||aq||au||av||(aA=aa);let aB=aA;!aB&&K.isDev&&(aB=aa),K.isDev||_||!ak||!ap||av||(0,k.d)(a.headers);let aC={...E,tree:H,pages:I,GlobalError:D(),handler:L,routeModule:K,__next_app__:J};X&&Y&&(0,o.setReferenceManifestsSingleton)({page:G,clientReferenceManifest:Y,serverActionsManifest:X,serverModuleMap:(0,q.createServerModuleMap)({serverActionsManifest:X})});let aD=a.method||"GET",aE=(0,g.getTracer)(),aF=aE.getActiveScopeSpan();try{let f=K.getVaryHeader(aa,ae);b.setHeader("Vary",f);let k=async(c,d)=>{let e=new l.NodeNextRequest(a),f=new l.NodeNextResponse(b);return K.render(e,f,d).finally(()=>{if(!c)return;c.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let d=aE.getRootSpanAttributes();if(!d)return;if(d.get("next.span_type")!==i.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${d.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let e=d.get("next.route");if(e){let a=`${aD} ${e}`;c.setAttributes({"next.route":e,"http.route":e,"next.span_name":a}),c.updateName(a)}else c.updateName(`${aD} ${a.url}`)})},m=async({span:e,postponed:f,fallbackRouteParams:g})=>{let i={query:Q,params:R,page:ag,sharedContext:{buildId:P},serverComponentsHmrCache:(0,h.getRequestMeta)(a,"serverComponentsHmrCache"),fallbackRouteParams:g,renderOpts:{App:()=>null,Document:()=>null,pageConfig:{},ComponentMod:aC,Component:(0,j.T)(aC),params:R,routeModule:K,page:G,postponed:f,shouldWaitOnAllReady:az,serveStreamingMetadata:ax,supportsDynamicResponse:"string"==typeof f||ay,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,subresourceIntegrityManifest:Z,serverActionsManifest:X,clientReferenceManifest:Y,setIsrStatus:null==ac?void 0:ac.setIsrStatus,dir:c(9902).join(process.cwd(),K.relativeProjectDir),isDraftMode:_,isRevalidate:ak&&!f&&!av,botType:am,isOnDemandRevalidate:ah,isPossibleServerAction:aq,assetPrefix:ad.assetPrefix,nextConfigOutput:ad.output,crossOrigin:ad.crossOrigin,trailingSlash:ad.trailingSlash,previewProps:$.preview,deploymentId:ad.deploymentId,enableTainting:ad.experimental.taint,htmlLimitedBots:ad.htmlLimitedBots,devtoolSegmentExplorer:ad.experimental.devtoolSegmentExplorer,reactMaxHeadersLength:ad.reactMaxHeadersLength,multiZoneDraftMode:!1,incrementalCache:(0,h.getRequestMeta)(a,"incrementalCache"),cacheLifeProfiles:ad.experimental.cacheLife,basePath:ad.basePath,serverActions:ad.experimental.serverActions,...as?{nextExport:!0,supportsDynamicResponse:!1,isStaticGeneration:!0,isRevalidate:!0,isDebugDynamicAccesses:as}:{},experimental:{isRoutePPREnabled:ar,expireTime:ad.expireTime,staleTimes:ad.experimental.staleTimes,cacheComponents:!!ad.experimental.cacheComponents,clientSegmentCache:!!ad.experimental.clientSegmentCache,clientParamParsing:!!ad.experimental.clientParamParsing,dynamicOnHover:!!ad.experimental.dynamicOnHover,inlineCss:!!ad.experimental.inlineCss,authInterrupts:!!ad.experimental.authInterrupts,clientTraceMetadata:ad.experimental.clientTraceMetadata||[]},waitUntil:d.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:()=>{},onInstrumentationRequestError:(b,c,d)=>K.onRequestError(a,b,d,ac),err:(0,h.getRequestMeta)(a,"invokeError"),dev:K.isDev}},l=await k(e,i),{metadata:m}=l,{cacheControl:n,headers:o={},fetchTags:p}=m;if(p&&(o[y.NEXT_CACHE_TAGS_HEADER]=p),a.fetchMetrics=m.fetchMetrics,ak&&(null==n?void 0:n.revalidate)===0&&!K.isDev&&!ar){let a=m.staticBailoutInfo,b=Object.defineProperty(Error(`Page changed from static to dynamic at runtime ${aa}${(null==a?void 0:a.description)?`, reason: ${a.description}`:""}
see more here https://nextjs.org/docs/messages/app-static-to-dynamic-error`),"__NEXT_ERROR_CODE",{value:"E132",enumerable:!1,configurable:!0});if(null==a?void 0:a.stack){let c=a.stack;b.stack=b.message+c.substring(c.indexOf("\n"))}throw b}return{value:{kind:v.CachedRouteKind.APP_PAGE,html:l,headers:o,rscData:m.flightData,postponed:m.postponed,status:m.statusCode,segmentData:m.segmentData},cacheControl:n}},o=async({hasResolved:c,previousCacheEntry:f,isRevalidating:g,span:i})=>{let j,k=!1===K.isDev,l=c||b.writableEnded;if(ah&&ab&&!f&&!N)return(null==ac?void 0:ac.render404)?await ac.render404(a,b):(b.statusCode=404,b.end("This page could not be found")),null;if(ai&&(j=(0,w.parseFallbackField)(ai.fallback)),j===w.FallbackMode.PRERENDER&&(0,u.isBot)(al)&&(!ar||an)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),(null==f?void 0:f.isStale)===-1&&(ah=!0),ah&&(j!==w.FallbackMode.NOT_FOUND||f)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),!N&&j!==w.FallbackMode.BLOCKING_STATIC_RENDER&&aB&&!l&&!_&&T&&(k||!aj)){let b;if((k||ai)&&j===w.FallbackMode.NOT_FOUND)throw new B.NoFallbackError;if(ar&&!ap){let c="string"==typeof(null==ai?void 0:ai.fallback)?ai.fallback:k?ag:null;if(b=await K.handleResponse({cacheKey:c,req:a,nextConfig:ad,routeKind:e.RouteKind.APP_PAGE,isFallback:!0,prerenderManifest:$,isRoutePPREnabled:ar,responseGenerator:async()=>m({span:i,postponed:void 0,fallbackRouteParams:k||at?(0,n.u)(ag):null}),waitUntil:d.waitUntil}),null===b)return null;if(b)return delete b.cacheControl,b}}let o=ah||g||!au?void 0:au;if(as&&void 0!==o)return{cacheControl:{revalidate:1,expire:void 0},value:{kind:v.CachedRouteKind.PAGES,html:x.default.EMPTY,pageData:{},headers:void 0,status:void 0}};let p=T&&ar&&((0,h.getRequestMeta)(a,"renderFallbackShell")||at)?(0,n.u)(af):null;return m({span:i,postponed:o,fallbackRouteParams:p})},p=async c=>{var f,g,i,j,k;let l,n=await K.handleResponse({cacheKey:aA,responseGenerator:a=>o({span:c,...a}),routeKind:e.RouteKind.APP_PAGE,isOnDemandRevalidate:ah,isRoutePPREnabled:ar,req:a,nextConfig:ad,prerenderManifest:$,waitUntil:d.waitUntil});if(_&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate"),K.isDev&&b.setHeader("Cache-Control","no-store, must-revalidate"),!n){if(aA)throw Object.defineProperty(Error("invariant: cache entry required but not generated"),"__NEXT_ERROR_CODE",{value:"E62",enumerable:!1,configurable:!0});return null}if((null==(f=n.value)?void 0:f.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant app-page handler received invalid cache entry ${null==(i=n.value)?void 0:i.kind}`),"__NEXT_ERROR_CODE",{value:"E707",enumerable:!1,configurable:!0});let p="string"==typeof n.value.postponed;ak&&!av&&(!p||ao)&&(N||b.setHeader("x-nextjs-cache",ah?"REVALIDATED":n.isMiss?"MISS":n.isStale?"STALE":"HIT"),b.setHeader(t.NEXT_IS_PRERENDER_HEADER,"1"));let{value:q}=n;if(au)l={revalidate:0,expire:void 0};else if(N&&ap&&!ao&&ar)l={revalidate:0,expire:void 0};else if(!K.isDev)if(_)l={revalidate:0,expire:void 0};else if(ak){if(n.cacheControl)if("number"==typeof n.cacheControl.revalidate){if(n.cacheControl.revalidate<1)throw Object.defineProperty(Error(`Invalid revalidate configuration provided: ${n.cacheControl.revalidate} < 1`),"__NEXT_ERROR_CODE",{value:"E22",enumerable:!1,configurable:!0});l={revalidate:n.cacheControl.revalidate,expire:(null==(j=n.cacheControl)?void 0:j.expire)??ad.expireTime}}else l={revalidate:y.CACHE_ONE_YEAR,expire:void 0}}else b.getHeader("Cache-Control")||(l={revalidate:0,expire:void 0});if(n.cacheControl=l,"string"==typeof aw&&(null==q?void 0:q.kind)===v.CachedRouteKind.APP_PAGE&&q.segmentData){b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"2");let c=null==(k=q.headers)?void 0:k[y.NEXT_CACHE_TAGS_HEADER];N&&ak&&c&&"string"==typeof c&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,c);let d=q.segmentData.get(aw);return void 0!==d?(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(d,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl}):(b.statusCode=204,(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.EMPTY,cacheControl:n.cacheControl}))}let r=(0,h.getRequestMeta)(a,"onCacheEntry");if(r&&await r({...n,value:{...n.value,kind:"PAGE"}},{url:(0,h.getRequestMeta)(a,"initURL")}))return null;if(p&&au)throw Object.defineProperty(Error("Invariant: postponed state should not be present on a resume request"),"__NEXT_ERROR_CODE",{value:"E396",enumerable:!1,configurable:!0});if(q.headers){let a={...q.headers};for(let[c,d]of(N&&ak||delete a[y.NEXT_CACHE_TAGS_HEADER],Object.entries(a)))if(void 0!==d)if(Array.isArray(d))for(let a of d)b.appendHeader(c,a);else"number"==typeof d&&(d=d.toString()),b.appendHeader(c,d)}let s=null==(g=q.headers)?void 0:g[y.NEXT_CACHE_TAGS_HEADER];if(N&&ak&&s&&"string"==typeof s&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,s),!q.status||ap&&ar||(b.statusCode=q.status),!N&&q.status&&F.RedirectStatusCode[q.status]&&ap&&(b.statusCode=200),p&&b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"1"),ap&&!_){if(void 0===q.rscData){if(q.postponed)throw Object.defineProperty(Error("Invariant: Expected postponed to be undefined"),"__NEXT_ERROR_CODE",{value:"E372",enumerable:!1,configurable:!0});return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:q.html,cacheControl:av?{revalidate:0,expire:void 0}:n.cacheControl})}return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(q.rscData,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl})}let u=q.html;if(!p||N||ap)return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:n.cacheControl});if(as)return u.push(new ReadableStream({start(a){a.enqueue(z.ENCODED_TAGS.CLOSED.BODY_AND_HTML),a.close()}})),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}});let w=new TransformStream;return u.push(w.readable),m({span:c,postponed:q.postponed,fallbackRouteParams:null}).then(async a=>{var b,c;if(!a)throw Object.defineProperty(Error("Invariant: expected a result to be returned"),"__NEXT_ERROR_CODE",{value:"E463",enumerable:!1,configurable:!0});if((null==(b=a.value)?void 0:b.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant: expected a page response, got ${null==(c=a.value)?void 0:c.kind}`),"__NEXT_ERROR_CODE",{value:"E305",enumerable:!1,configurable:!0});await a.value.html.pipeTo(w.writable)}).catch(a=>{w.writable.abort(a).catch(a=>{console.error("couldn't abort transformer",a)})}),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}})};if(!aF)return await aE.withPropagatedContext(a.headers,()=>aE.trace(i.BaseServerSpan.handleRequest,{spanName:`${aD} ${a.url}`,kind:g.SpanKind.SERVER,attributes:{"http.method":aD,"http.target":a.url}},p));await p(aF)}catch(b){throw b instanceof B.NoFallbackError||await K.onRequestError(a,b,{routerKind:"App Router",routePath:G,routeType:"render",revalidateReason:(0,f.c)({isRevalidate:ak,isOnDemandRevalidate:ah})},ac),b}}},3001:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{VALID_LOADERS:function(){return c},imageConfigDefault:function(){return d}});let c=["default","imgix","cloudinary","akamai","custom"],d={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:60,formats:["image/webp"],maximumResponseBody:5e7,dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"attachment",localPatterns:void 0,remotePatterns:[],qualities:void 0,unoptimized:!1}},3033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3725:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{default:function(){return p},defaultHead:function(){return l}});let d=c(5288),e=c(5823),f=c(1124),g=e._(c(8301)),h=d._(c(7684)),i=c(1578),j=c(9746),k=c(5217);function l(a){void 0===a&&(a=!1);let b=[(0,f.jsx)("meta",{charSet:"utf-8"},"charset")];return a||b.push((0,f.jsx)("meta",{name:"viewport",content:"width=device-width"},"viewport")),b}function m(a,b){return"string"==typeof b||"number"==typeof b?a:b.type===g.default.Fragment?a.concat(g.default.Children.toArray(b.props.children).reduce((a,b)=>"string"==typeof b||"number"==typeof b?a:a.concat(b),[])):a.concat(b)}c(1507);let n=["name","httpEquiv","charSet","itemProp"];function o(a,b){let{inAmpMode:c}=b;return a.reduce(m,[]).reverse().concat(l(c).reverse()).filter(function(){let a=new Set,b=new Set,c=new Set,d={};return e=>{let f=!0,g=!1;if(e.key&&"number"!=typeof e.key&&e.key.indexOf("$")>0){g=!0;let b=e.key.slice(e.key.indexOf("$")+1);a.has(b)?f=!1:a.add(b)}switch(e.type){case"title":case"base":b.has(e.type)?f=!1:b.add(e.type);break;case"meta":for(let a=0,b=n.length;a<b;a++){let b=n[a];if(e.props.hasOwnProperty(b))if("charSet"===b)c.has(b)?f=!1:c.add(b);else{let a=e.props[b],c=d[b]||new Set;("name"!==b||!g)&&c.has(a)?f=!1:(c.add(a),d[b]=c)}}}return f}}()).reverse().map((a,b)=>{let c=a.key||b;return g.default.cloneElement(a,{key:c})})}let p=function(a){let{children:b}=a,c=(0,g.useContext)(i.AmpStateContext),d=(0,g.useContext)(j.HeadManagerContext);return(0,f.jsx)(h.default,{reduceComponentsToState:o,headManager:d,inAmpMode:(0,k.isInAmpMode)(c),children:b})};("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},3974:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"getImgProps",{enumerable:!0,get:function(){return i}}),c(1507);let d=c(8757),e=c(3001),f=["-moz-initial","fill","none","scale-down",void 0];function g(a){return void 0!==a.default}function h(a){return void 0===a?a:"number"==typeof a?Number.isFinite(a)?a:NaN:"string"==typeof a&&/^[0-9]+$/.test(a)?parseInt(a,10):NaN}function i(a,b){var c,i;let j,k,l,{src:m,sizes:n,unoptimized:o=!1,priority:p=!1,loading:q,className:r,quality:s,width:t,height:u,fill:v=!1,style:w,overrideSrc:x,onLoad:y,onLoadingComplete:z,placeholder:A="empty",blurDataURL:B,fetchPriority:C,decoding:D="async",layout:E,objectFit:F,objectPosition:G,lazyBoundary:H,lazyRoot:I,...J}=a,{imgConf:K,showAltText:L,blurComplete:M,defaultLoader:N}=b,O=K||e.imageConfigDefault;if("allSizes"in O)j=O;else{let a=[...O.deviceSizes,...O.imageSizes].sort((a,b)=>a-b),b=O.deviceSizes.sort((a,b)=>a-b),d=null==(c=O.qualities)?void 0:c.sort((a,b)=>a-b);j={...O,allSizes:a,deviceSizes:b,qualities:d}}if(void 0===N)throw Object.defineProperty(Error("images.loaderFile detected but the file is missing default export.\nRead more: https://nextjs.org/docs/messages/invalid-images-config"),"__NEXT_ERROR_CODE",{value:"E163",enumerable:!1,configurable:!0});let P=J.loader||N;delete J.loader,delete J.srcSet;let Q="__next_img_default"in P;if(Q){if("custom"===j.loader)throw Object.defineProperty(Error('Image with src "'+m+'" is missing "loader" prop.\nRead more: https://nextjs.org/docs/messages/next-image-missing-loader'),"__NEXT_ERROR_CODE",{value:"E252",enumerable:!1,configurable:!0})}else{let a=P;P=b=>{let{config:c,...d}=b;return a(d)}}if(E){"fill"===E&&(v=!0);let a={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}}[E];a&&(w={...w,...a});let b={responsive:"100vw",fill:"100vw"}[E];b&&!n&&(n=b)}let R="",S=h(t),T=h(u);if((i=m)&&"object"==typeof i&&(g(i)||void 0!==i.src)){let a=g(m)?m.default:m;if(!a.src)throw Object.defineProperty(Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received "+JSON.stringify(a)),"__NEXT_ERROR_CODE",{value:"E460",enumerable:!1,configurable:!0});if(!a.height||!a.width)throw Object.defineProperty(Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received "+JSON.stringify(a)),"__NEXT_ERROR_CODE",{value:"E48",enumerable:!1,configurable:!0});if(k=a.blurWidth,l=a.blurHeight,B=B||a.blurDataURL,R=a.src,!v)if(S||T){if(S&&!T){let b=S/a.width;T=Math.round(a.height*b)}else if(!S&&T){let b=T/a.height;S=Math.round(a.width*b)}}else S=a.width,T=a.height}let U=!p&&("lazy"===q||void 0===q);(!(m="string"==typeof m?m:R)||m.startsWith("data:")||m.startsWith("blob:"))&&(o=!0,U=!1),j.unoptimized&&(o=!0),Q&&!j.dangerouslyAllowSVG&&m.split("?",1)[0].endsWith(".svg")&&(o=!0);let V=h(s),W=Object.assign(v?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:F,objectPosition:G}:{},L?{}:{color:"transparent"},w),X=M||"empty"===A?null:"blur"===A?'url("data:image/svg+xml;charset=utf-8,'+(0,d.getImageBlurSvg)({widthInt:S,heightInt:T,blurWidth:k,blurHeight:l,blurDataURL:B||"",objectFit:W.objectFit})+'")':'url("'+A+'")',Y=f.includes(W.objectFit)?"fill"===W.objectFit?"100% 100%":"cover":W.objectFit,Z=X?{backgroundSize:Y,backgroundPosition:W.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:X}:{},$=function(a){let{config:b,src:c,unoptimized:d,width:e,quality:f,sizes:g,loader:h}=a;if(d)return{src:c,srcSet:void 0,sizes:void 0};let{widths:i,kind:j}=function(a,b,c){let{deviceSizes:d,allSizes:e}=a;if(c){let a=/(^|\s)(1?\d?\d)vw/g,b=[];for(let d;d=a.exec(c);)b.push(parseInt(d[2]));if(b.length){let a=.01*Math.min(...b);return{widths:e.filter(b=>b>=d[0]*a),kind:"w"}}return{widths:e,kind:"w"}}return"number"!=typeof b?{widths:d,kind:"w"}:{widths:[...new Set([b,2*b].map(a=>e.find(b=>b>=a)||e[e.length-1]))],kind:"x"}}(b,e,g),k=i.length-1;return{sizes:g||"w"!==j?g:"100vw",srcSet:i.map((a,d)=>h({config:b,src:c,quality:f,width:a})+" "+("w"===j?a:d+1)+j).join(", "),src:h({config:b,src:c,quality:f,width:i[k]})}}({config:j,src:m,unoptimized:o,width:S,quality:V,sizes:n,loader:P});return{props:{...J,loading:U?"lazy":q,fetchPriority:C,width:S,height:T,decoding:D,className:r,style:{...W,...Z},sizes:$.sizes,srcSet:$.srcSet,src:x||$.src},meta:{unoptimized:o,priority:p,placeholder:A,fill:v}}}},4074:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,1170,23)),Promise.resolve().then(c.t.bind(c,3597,23)),Promise.resolve().then(c.t.bind(c,6893,23)),Promise.resolve().then(c.t.bind(c,9748,23)),Promise.resolve().then(c.t.bind(c,6060,23)),Promise.resolve().then(c.t.bind(c,7184,23)),Promise.resolve().then(c.t.bind(c,9576,23)),Promise.resolve().then(c.t.bind(c,3041,23)),Promise.resolve().then(c.t.bind(c,1384,23))},5217:(a,b)=>{"use strict";function c(a){let{ampFirst:b=!1,hybrid:c=!1,hasQuery:d=!1}=void 0===a?{}:a;return b||c&&d}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"isInAmpMode",{enumerable:!0,get:function(){return c}})},5825:(a,b,c)=>{"use strict";c.d(b,{Toaster:()=>d});let d=(0,c(7954).registerClientReference)(function(){throw Error("Attempted to call Toaster() from the server but Toaster is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/jim/work/mthfr-food-scanner/src/components/ui/sonner.tsx","Toaster")},6439:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external")},6713:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/is-bot")},6946:(a,b,c)=>{Promise.resolve().then(c.bind(c,189))},7122:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,4160,23)),Promise.resolve().then(c.t.bind(c,1603,23)),Promise.resolve().then(c.t.bind(c,8495,23)),Promise.resolve().then(c.t.bind(c,5170,23)),Promise.resolve().then(c.t.bind(c,7526,23)),Promise.resolve().then(c.t.bind(c,8922,23)),Promise.resolve().then(c.t.bind(c,9234,23)),Promise.resolve().then(c.t.bind(c,2263,23)),Promise.resolve().then(c.bind(c,2146))},7502:(a,b,c)=>{Promise.resolve().then(c.bind(c,2149)),Promise.resolve().then(c.bind(c,8911))},7516:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{default:function(){return i},getImageProps:function(){return h}});let d=c(5288),e=c(3974),f=c(106),g=d._(c(9656));function h(a){let{props:b}=(0,e.getImgProps)(a,{defaultLoader:g.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[a,c]of Object.entries(b))void 0===c&&delete b[a];return{props:b}}let i=f.Image},7684:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"default",{enumerable:!0,get:function(){return f}});let d=c(8301),e=()=>{};function f(a){var b;let{headManager:c,reduceComponentsToState:f}=a;function g(){if(c&&c.mountedInstances){let b=d.Children.toArray(Array.from(c.mountedInstances).filter(Boolean));c.updateHead(f(b,a))}}return null==c||null==(b=c.mountedInstances)||b.add(a.children),g(),e(()=>{var b;return null==c||null==(b=c.mountedInstances)||b.add(a.children),()=>{var b;null==c||null==(b=c.mountedInstances)||b.delete(a.children)}}),e(()=>(c&&(c._pendingUpdate=g),()=>{c&&(c._pendingUpdate=g)})),null}},7766:(a,b,c)=>{Promise.resolve().then(c.bind(c,9375)),Promise.resolve().then(c.bind(c,5825))},8354:a=>{"use strict";a.exports=require("util")},8355:(a,b,c)=>{"use strict";a.exports=c(6796).vendored.contexts.RouterContext},8757:(a,b)=>{"use strict";function c(a){let{widthInt:b,heightInt:c,blurWidth:d,blurHeight:e,blurDataURL:f,objectFit:g}=a,h=d?40*d:b,i=e?40*e:c,j=h&&i?"viewBox='0 0 "+h+" "+i+"'":"";return"%3Csvg xmlns='http://www.w3.org/2000/svg' "+j+"%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='"+(j?"none":"contain"===g?"xMidYMid":"cover"===g?"xMidYMid slice":"none")+"' style='filter: url(%23b);' href='"+f+"'/%3E%3C/svg%3E"}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"getImageBlurSvg",{enumerable:!0,get:function(){return c}})},8911:(a,b,c)=>{"use strict";c.d(b,{Toaster:()=>g});var d=c(1124),e=c(5523),f=c(2830);let g=({...a})=>{let{theme:b="system"}=(0,e.D)();return(0,d.jsx)(f.l$,{theme:b,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...a})}},9121:a=>{"use strict";a.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9375:(a,b,c)=>{"use strict";c.d(b,{default:()=>d});let d=(0,c(7954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/jim/work/mthfr-food-scanner/src/app/ClientBody.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/jim/work/mthfr-food-scanner/src/app/ClientBody.tsx","default")},9427:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"useMergedRef",{enumerable:!0,get:function(){return e}});let d=c(8301);function e(a,b){let c=(0,d.useRef)(null),e=(0,d.useRef)(null);return(0,d.useCallback)(d=>{if(null===d){let a=c.current;a&&(c.current=null,a());let b=e.current;b&&(e.current=null,b())}else a&&(c.current=f(a,d)),b&&(e.current=f(b,d))},[a,b])}function f(a,b){if("function"!=typeof a)return a.current=b,()=>{a.current=null};{let c=a(b);return"function"==typeof c?c:()=>a(null)}}("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},9656:(a,b)=>{"use strict";function c(a){var b;let{config:c,src:d,width:e,quality:f}=a,g=f||(null==(b=c.qualities)?void 0:b.reduce((a,b)=>Math.abs(b-75)<Math.abs(a-75)?b:a))||75;return c.path+"?url="+encodeURIComponent(d)+"&w="+e+"&q="+g+(d.startsWith("/_next/static/media/"),"")}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"default",{enumerable:!0,get:function(){return d}}),c.__next_img_default=!0;let d=c},9746:(a,b,c)=>{"use strict";a.exports=c(6796).vendored.contexts.HeadManagerContext},9902:a=>{"use strict";a.exports=require("path")}};var b=require("../webpack-runtime.js");b.C(a);var c=b.X(0,[61],()=>b(b.s=2903));module.exports=c})();