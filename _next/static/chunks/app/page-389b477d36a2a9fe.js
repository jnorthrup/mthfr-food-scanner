(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{24574:(e,a,t)=>{Promise.resolve().then(t.bind(t,45774))},45774:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>aJ});var s=t(95155),n=t(12115),i=t(14492),r=t(26497),o=t(25959),l=t(89863);let d={location:{consentType:"location",granted:!1,version:1},photo:{consentType:"photo",granted:!1,version:1},review:{consentType:"review",granted:!1,version:1},data_contribution:{consentType:"data_contribution",granted:!1,version:1}},c=(0,o.v)()((0,l.Zr)((e,a)=>({currentProduct:null,scanHistory:[],favorites:[],consents:d,isLoading:!1,error:null,hasCompletedOnboarding:!1,activeTab:"home",setCurrentProduct:a=>e({currentProduct:a}),addToHistory:t=>{let s=a().scanHistory,n=s.findIndex(e=>e.upc===t.upc);if(n>=0){let a=[...s];a[n]={...t,lastScannedAt:new Date},e({scanHistory:a})}else e({scanHistory:[{...t,lastScannedAt:new Date},...s].slice(0,100)})},toggleFavorite:t=>{let s=a().scanHistory,n=a().favorites,i=s.find(e=>e.id===t);i&&(n.some(e=>e.id===t)?e({favorites:n.filter(e=>e.id!==t)}):e({favorites:[...n,{...i,isFavorite:!0}]}))},setConsent:(t,s)=>{let n=a().consents;e({consents:{...n,[t]:{...n[t],granted:s,grantedAt:s?new Date:void 0,withdrawnAt:s?void 0:new Date}}})},setLoading:a=>e({isLoading:a}),setError:a=>e({error:a}),completeOnboarding:()=>e({hasCompletedOnboarding:!0}),setActiveTab:a=>e({activeTab:a}),clearHistory:()=>e({scanHistory:[]})}),{name:"mthfr-scanner-storage",partialize:e=>({scanHistory:e.scanHistory,favorites:e.favorites,consents:e.consents,hasCompletedOnboarding:e.hasCompletedOnboarding})}));var m=t(43278);class u extends m.Ay{constructor(){super("MTHFRFoodScanner"),this.version(1).stores({products:"++id, upc, name, brand, sourceProvenance, createdAt, isFavorite, lastScannedAt",canonicalIngredients:"++id, canonicalName, *synonyms, safetyStatus, category",maskingTerms:"++id, term, riskLevel",classificationRules:"++id, ingredientPattern, safetyStatus, version",userConsents:"++id, consentType, granted",scanHistory:"++id, productId, scannedAt, upc"})}}let f=new u;async function x(){0===await f.canonicalIngredients.count()&&await h(),0===await f.maskingTerms.count()&&await g(),0===await f.classificationRules.count()&&await p()}async function h(){await f.canonicalIngredients.bulkAdd([{canonicalName:"folic acid",synonyms:["folacin","vitamin b9","pteroylglutamic acid","synthetic folate"],safetyStatus:"unsafe",safetyReason:"Synthetic folic acid can interfere with methylation in individuals with MTHFR variants. It may block folate receptors and inhibit natural folate metabolism.",evidence:"Research indicates that unmetabolized folic acid may compete with natural folates for cellular uptake.",category:"vitamins"},{canonicalName:"methylfolate",synonyms:["5-mthf","l-methylfolate","5-methyltetrahydrofolate","metafolin","quatrefolic","active folate"],safetyStatus:"safe",safetyReason:"Methylfolate is the bioactive form of folate that bypasses the MTHFR enzyme, making it suitable for individuals with MTHFR variants.",evidence:"Methylfolate does not require conversion by the MTHFR enzyme.",category:"vitamins"},{canonicalName:"cyanocobalamin",synonyms:["vitamin b12 (cyanocobalamin)","synthetic b12"],safetyStatus:"unsafe",safetyReason:"Cyanocobalamin is a synthetic form of B12 that requires conversion and contains a cyanide molecule. May not be efficiently processed by those with MTHFR variants.",evidence:"The body must convert cyanocobalamin to methylcobalamin or adenosylcobalamin for use.",category:"vitamins"},{canonicalName:"methylcobalamin",synonyms:["methyl b12","active b12","coenzyme b12"],safetyStatus:"safe",safetyReason:"Methylcobalamin is the bioactive methylated form of vitamin B12 that supports methylation directly.",evidence:"Already in active form, no conversion needed.",category:"vitamins"},{canonicalName:"hydroxocobalamin",synonyms:["hydroxycobalamin","b12a"],safetyStatus:"safe",safetyReason:"Hydroxocobalamin is a natural form of B12 that the body can convert to active forms.",evidence:"Natural form found in food, easily converted.",category:"vitamins"},{canonicalName:"adenosylcobalamin",synonyms:["dibencozide","cobamamide","coenzyme b12"],safetyStatus:"safe",safetyReason:"Adenosylcobalamin is a bioactive form of B12 used directly in cellular energy production.",evidence:"Active coenzyme form of B12.",category:"vitamins"},{canonicalName:"pyridoxine hydrochloride",synonyms:["vitamin b6 (pyridoxine)","pyridoxine hcl","synthetic b6"],safetyStatus:"unknown",safetyReason:"While generally usable, some individuals with MTHFR variants may benefit from pyridoxal-5-phosphate instead.",category:"vitamins"},{canonicalName:"pyridoxal-5-phosphate",synonyms:["p5p","plp","active b6","pyridoxal phosphate"],safetyStatus:"safe",safetyReason:"P5P is the active coenzyme form of vitamin B6 that supports methylation reactions.",category:"vitamins"},{canonicalName:"riboflavin",synonyms:["vitamin b2","riboflavin-5-phosphate"],safetyStatus:"safe",safetyReason:"Riboflavin is essential for MTHFR enzyme function and supports methylation.",evidence:"B2 is a cofactor for the MTHFR enzyme.",category:"vitamins"},{canonicalName:"monosodium glutamate",synonyms:["msg","glutamate","e621","sodium glutamate"],safetyStatus:"unsafe",safetyReason:"MSG is an excitotoxin that may affect neurological function and can be problematic for some with MTHFR variants.",category:"additives"},{canonicalName:"aspartame",synonyms:["e951","nutrasweet","equal","canderel"],safetyStatus:"unsafe",safetyReason:"Aspartame breaks down into phenylalanine and can affect neurotransmitter balance. May be problematic for methylation.",category:"sweeteners"},{canonicalName:"high fructose corn syrup",synonyms:["hfcs","glucose-fructose syrup","isoglucose","corn sugar"],safetyStatus:"unsafe",safetyReason:"HFCS may deplete nutrients needed for methylation and contribute to inflammation.",category:"sweeteners"},{canonicalName:"sodium nitrite",synonyms:["nitrite","e250","curing salt"],safetyStatus:"unsafe",safetyReason:"Nitrites can form nitrosamines and may interfere with oxygen transport and methylation processes.",category:"preservatives"},{canonicalName:"sodium nitrate",synonyms:["nitrate","e251","chile saltpeter"],safetyStatus:"unsafe",safetyReason:"Nitrates convert to nitrites in the body and may affect methylation and overall health.",category:"preservatives"},{canonicalName:"bht",synonyms:["butylated hydroxytoluene","e321"],safetyStatus:"unsafe",safetyReason:"BHT is a synthetic antioxidant that may affect hormones and cellular function.",category:"preservatives"},{canonicalName:"bha",synonyms:["butylated hydroxyanisole","e320"],safetyStatus:"unsafe",safetyReason:"BHA is a synthetic preservative with potential endocrine-disrupting effects.",category:"preservatives"},{canonicalName:"tbhq",synonyms:["tertiary butylhydroquinone","e319"],safetyStatus:"unsafe",safetyReason:"TBHQ is a synthetic preservative derived from petroleum that may affect immune function.",category:"preservatives"},{canonicalName:"carrageenan",synonyms:["e407","irish moss extract"],safetyStatus:"unknown",safetyReason:"Carrageenan may cause gut inflammation in some individuals, which can affect nutrient absorption.",category:"additives"},{canonicalName:"potassium bromate",synonyms:["bromate","e924"],safetyStatus:"unsafe",safetyReason:"Potassium bromate is a possible carcinogen and can affect thyroid function.",category:"additives"},{canonicalName:"sodium benzoate",synonyms:["benzoate","e211"],safetyStatus:"unsafe",safetyReason:"Sodium benzoate can form benzene when combined with vitamin C and may deplete glutathione.",category:"preservatives"},{canonicalName:"propyl gallate",synonyms:["e310","propyl 3,4,5-trihydroxybenzoate"],safetyStatus:"unsafe",safetyReason:"Propyl gallate is a synthetic antioxidant that may have estrogenic effects.",category:"preservatives"},{canonicalName:"water",synonyms:["purified water","filtered water","spring water","mineral water","aqua"],safetyStatus:"safe",safetyReason:"Water is essential and does not affect methylation.",category:"base"},{canonicalName:"salt",synonyms:["sodium chloride","sea salt","table salt","kosher salt","himalayan salt"],safetyStatus:"safe",safetyReason:"Natural salt in moderate amounts does not affect methylation.",category:"base"},{canonicalName:"sugar",synonyms:["cane sugar","beet sugar","sucrose","granulated sugar"],safetyStatus:"safe",safetyReason:"Natural sugar in moderate amounts is generally safe for methylation.",category:"sweeteners"},{canonicalName:"olive oil",synonyms:["extra virgin olive oil","evoo","virgin olive oil"],safetyStatus:"safe",safetyReason:"Olive oil is a healthy fat that does not interfere with methylation.",category:"fats"},{canonicalName:"coconut oil",synonyms:["virgin coconut oil","refined coconut oil"],safetyStatus:"safe",safetyReason:"Coconut oil is a healthy fat that supports cellular function.",category:"fats"}])}async function g(){await f.maskingTerms.bulkAdd([{term:"natural flavors",riskLevel:"high",reason:"Natural flavors can contain hundreds of undisclosed ingredients including MSG, preservatives, and synthetic additives. The term is loosely regulated and may hide problematic components.",verificationGuidance:"Contact the manufacturer to request a complete breakdown of natural flavor components. Ask specifically about MSG, glutamates, and any synthetic processing aids."},{term:"artificial flavors",riskLevel:"high",reason:"Artificial flavors are synthetic compounds that may contain excitotoxins, preservatives, or other additives that could affect methylation.",verificationGuidance:"Request the specific artificial flavor compounds from the manufacturer. Consider avoiding products with artificial flavors when possible."},{term:"spices",riskLevel:"medium",reason:'The term "spices" can hide MSG, anti-caking agents, or preservatives. While often benign, specifics are not disclosed.',verificationGuidance:"Ask the manufacturer for a complete spice breakdown. Look for products that list specific spices."},{term:"proprietary blend",riskLevel:"high",reason:"Proprietary blends hide exact ingredient amounts and may contain undisclosed fillers, flow agents, or synthetic additives.",verificationGuidance:"Contact manufacturer for complete ingredient disclosure. Be cautious of proprietary blends in supplements."},{term:"other ingredients",riskLevel:"high",reason:"This catch-all term may include unlisted additives, processing aids, or ingredients below labeling thresholds.",verificationGuidance:"Request complete ingredient list from manufacturer. Consider choosing products with full transparency."},{term:"processing aids",riskLevel:"medium",reason:"Processing aids may include enzymes, solvents, or chemicals used during manufacturing that remain in trace amounts.",verificationGuidance:"Ask manufacturer about specific processing aids used. Look for organic or minimally processed alternatives."},{term:"flavor enhancers",riskLevel:"high",reason:"Flavor enhancers often include MSG or similar glutamate compounds that may affect those with MTHFR variants.",verificationGuidance:"Request specific flavor enhancer identification. Look for E-numbers (E620-E625 are glutamates)."},{term:"yeast extract",riskLevel:"medium",reason:"Yeast extract naturally contains glutamates (similar to MSG) and may affect sensitive individuals.",verificationGuidance:"Contains free glutamic acid. May be problematic for MSG-sensitive individuals."},{term:"hydrolyzed protein",riskLevel:"high",reason:"Hydrolyzed proteins contain free glutamic acid (MSG) created during processing.",verificationGuidance:"Treat similarly to MSG. Includes hydrolyzed vegetable protein, hydrolyzed soy protein, etc."},{term:"autolyzed yeast",riskLevel:"medium",reason:"Autolyzed yeast contains naturally occurring MSG-like compounds.",verificationGuidance:"Contains free glutamates. Consider sensitivity if avoiding MSG."},{term:"natural colors",riskLevel:"low",reason:"While generally safer than artificial colors, natural colors may come from sources that cause reactions in some individuals.",verificationGuidance:"Ask for specific color sources. Common sources include carmine (insects), annatto (seeds), turmeric."},{term:"enzymes",riskLevel:"low",reason:"Enzymes are generally safe but may be derived from sources that concern some individuals (fungal, bacterial, or animal).",verificationGuidance:"Ask about enzyme sources if you have specific dietary restrictions."},{term:"modified food starch",riskLevel:"medium",reason:"Modified starches may be chemically treated and could contain residual processing chemicals.",verificationGuidance:"Ask about the type of modification and source (corn, wheat, tapioca)."},{term:"natural sweeteners",riskLevel:"low",reason:"Term may include various sweeteners with different safety profiles. Could contain stevia, monk fruit, or sugar alcohols.",verificationGuidance:"Ask for specific sweetener identification to verify individual safety."}])}async function p(){let e=[{ingredientPattern:"folic acid",safetyStatus:"unsafe",reason:"Synthetic folic acid requires MTHFR enzyme conversion and may accumulate unmetabolized.",evidence:"MTHFR C677T and A1298C variants reduce conversion efficiency by 30-70%.",version:1,createdAt:new Date},{ingredientPattern:"cyanocobalamin",safetyStatus:"unsafe",reason:"Synthetic B12 form requires conversion and contains cyanide molecule.",evidence:"Methylcobalamin or adenosylcobalamin are preferred for MTHFR variants.",version:1,createdAt:new Date},{ingredientPattern:"enriched|fortified",safetyStatus:"unsafe",reason:"Enriched and fortified foods typically contain synthetic folic acid.",evidence:"US fortification mandate uses synthetic folic acid in grain products.",version:1,createdAt:new Date},{ingredientPattern:"methylfolate|5-mthf|l-methylfolate",safetyStatus:"safe",reason:"Active form of folate that bypasses MTHFR enzyme.",evidence:"Direct cellular uptake without conversion requirement.",version:1,createdAt:new Date},{ingredientPattern:"methylcobalamin|adenosylcobalamin|hydroxocobalamin",safetyStatus:"safe",reason:"Active or easily converted forms of vitamin B12.",evidence:"Preferred B12 forms for MTHFR-affected individuals.",version:1,createdAt:new Date},{ingredientPattern:"msg|monosodium glutamate|glutamate",safetyStatus:"unsafe",reason:"Excitotoxin that may affect neurological function.",evidence:"May deplete glutathione and affect detoxification pathways.",version:1,createdAt:new Date}];await f.classificationRules.bulkAdd(e)}async function y(){await f.products.clear(),await f.scanHistory.clear()}async function b(){return JSON.stringify({products:await f.products.toArray(),scanHistory:await f.scanHistory.toArray(),consents:await f.userConsents.toArray(),exportedAt:new Date().toISOString()},null,2)}let v=[{name:"Open Food Facts",priority:1,fetchProduct:async function(e){try{let a=await fetch("".concat("https://world.openfoodfacts.org/api/v2","/product/").concat(e,".json"),{headers:{"User-Agent":"MTHFRFoodScanner/1.0 (contact@example.com)"}});if(!a.ok)return null;let t=await a.json();if(1!==t.status||!t.product)return null;let s=t.product;return{upc:e,name:s.product_name||s.product_name_en||"Unknown Product",brand:s.brands||void 0,ingredients:s.ingredients_text||s.ingredients_text_en||void 0,imageUrl:s.image_front_url||s.image_url||void 0,source:"open_food_facts"}}catch(e){return console.error("Open Food Facts API error:",e),null}}},{name:"UPC Item DB",priority:2,fetchProduct:async function(e){try{var a;let t=await fetch("https://api.upcitemdb.com/prod/trial/lookup?upc=".concat(e),{headers:{Accept:"application/json"}});if(!t.ok)return null;let s=await t.json();if(!s.items||0===s.items.length)return null;let n=s.items[0];return{upc:e,name:n.title||"Unknown Product",brand:n.brand||void 0,ingredients:n.description||void 0,imageUrl:(null==(a=n.images)?void 0:a[0])||void 0,source:"upc_item_db"}}catch(e){return console.error("UPC Item DB API error:",e),null}}}];async function j(e){let a=function(e){let a=e.replace(/[^0-9]/g,"");return 12===a.length?a:13===a.length&&a.startsWith("0")?a.substring(1):13===a.length?a:a.length<12?a.padStart(12,"0"):a}(e),t=[];for(let e of v.sort((e,a)=>e.priority-a.priority)){t.push(e.name);try{let s=await e.fetchProduct(a);if(s)return{success:!0,product:s,source:"api",searchedAPIs:t}}catch(a){console.error("Error fetching from ".concat(e.name,":"),a)}}return{success:!1,product:null,source:"api",error:"Product not found in any database",searchedAPIs:t}}var N=t(93736);let w=null,k=new Map;async function A(){let e=await f.canonicalIngredients.toArray();for(let a of(k.clear(),e))for(let e of(k.set(a.canonicalName.toLowerCase(),a),a.synonyms))k.set(e.toLowerCase(),a);let a=e.flatMap(e=>[{...e,searchName:e.canonicalName},...e.synonyms.map(a=>({...e,searchName:a}))]);w=new N.A(a,{keys:["searchName"],threshold:.3,includeScore:!0,ignoreLocation:!0})}async function C(e){let a=e.toLowerCase().trim().replace(/[^\w\s\-']/g," ").replace(/\s+/g," ").replace(/^\s+|\s+$/g,"").replace(/\d+(\.\d+)?\s*(mg|g|ml|mcg|iu|%)/gi,"").trim(),t=k.get(a);if(t)return{originalText:e,normalizedName:a,canonicalName:t.canonicalName,confidence:1};if(w){let t=w.search(a);if(t.length>0&&void 0!==t[0].score){let s=1-t[0].score;if(s>=.7)return{originalText:e,normalizedName:a,canonicalName:t[0].item.canonicalName,confidence:s}}}return{originalText:e,normalizedName:a,canonicalName:a,confidence:.5}}async function S(e){let a=function(e){if(!e||""===e.trim())return[];let a=e,t=(a=(a=(a=(a=(a=a.replace(/contains\s*(?:less\s*than\s*)?[\d.]+%\s*(?:of\s*)?:?/gi,",")).replace(/contains\s*(?:one\s*or\s*more\s*of\s*)?:?/gi,",")).replace(/may\s*contain:?/gi,",")).replace(/ingredients:?/gi,"")).replace(/\s*\([^()]*\)/g,e=>{let a=e.slice(1,-1);return a.includes(",")?" [".concat(a,"]"):e})).split(/,(?![^[]*\])/).map(e=>e.trim()).filter(Boolean),s=[];for(let e of t)if(e.includes("[")){let a=e.match(/^([^[]+)\s*\[([^\]]+)\]/);if(a){let e=a[1].trim(),t=a[2].split(",").map(e=>e.trim());for(let a of(s.push(e),t))s.push("  ".concat(a))}else s.push(e.replace(/[\[\]]/g,""))}else if(e.includes("(")){let a=e.match(/^([^(]+)\s*\(([^)]+)\)/);a?s.push(a[1].trim()):s.push(e)}else s.push(e);return s.map(e=>e.trim()).filter(e=>e.length>0)}(e),t=[];for(let e of a){let a=e.startsWith("  "),s=e.trim();if(s){let e=await C(s);if(a){let a=t[t.length-1];a&&!a.subIngredients&&(a.subIngredients=[]),a&&a.subIngredients.push(e)}else t.push(e)}}return t}let R=[],P=[],M=new Map;async function T(){R=await f.classificationRules.toArray(),P=await f.maskingTerms.toArray();let e=await f.canonicalIngredients.toArray();for(let a of(M.clear(),e))for(let e of(M.set(a.canonicalName.toLowerCase(),a),a.synonyms))M.set(e.toLowerCase(),a)}function F(e){let a=function e(a){let t=[];for(let s of a)t.push(s),s.subIngredients&&s.subIngredients.length>0&&t.push(...e(s.subIngredients));return t}(e),t=a.filter(e=>"safe"===e.safetyStatus).length,s=a.filter(e=>"unsafe"===e.safetyStatus).length,n=a.filter(e=>"unknown"===e.safetyStatus).length,i=a.length,r=a.filter(e=>"unsafe"===e.safetyStatus),o=a.filter(e=>e.isMasking);return{overallStatus:s>0?"unsafe":n>.5*i||o.some(e=>"high"===e.maskingRiskLevel)||n>0?"unknown":"safe",safeCount:t,unsafeCount:s,unknownCount:n,safePercentage:i>0?Math.round(t/i*100):0,unsafePercentage:i>0?Math.round(s/i*100):0,unknownPercentage:i>0?Math.round(n/i*100):0,unsafeIngredients:r,maskingIngredients:o,totalIngredients:i}}let z=!1;async function L(){z||(await x(),await A(),await T(),z=!0)}async function H(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];await L();let t=await f.products.where("upc").equals(e).first();if(t){let a=F(t.ingredients);return await f.scanHistory.add({productId:t.id,scannedAt:new Date,upc:e}),{success:!0,product:{...t,lastScannedAt:new Date},safety:a,source:t.sourceProvenance}}let s=await j(e);if(!s.success||!s.product)return a?U(e,"Demo Product","Water, Enriched Wheat Flour (Wheat Flour, Niacin, Reduced Iron, Thiamine Mononitrate, Riboflavin, Folic Acid), Sugar, Natural Flavors, Salt, Yeast Extract, Citric Acid","Demo Brand",void 0,"manual"):{success:!1,product:null,safety:null,error:s.error||"Product not found",source:"api",notFound:!0};let n=s.product;return U(n.upc,n.name,n.ingredients||"",n.brand,n.imageUrl,"api")}async function U(e,a,t,s,n){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"manual";await L();try{let r=await S(t),o=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";return e.map(e=>(function e(a){let t,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api",n=a.canonicalName.toLowerCase(),i=a.originalText.toLowerCase(),r="unknown",o=M.get(n);if(o)r=o.safetyStatus,t=o.safetyReason;else for(let e of R){let a=RegExp(e.ingredientPattern,"i");if(a.test(i)||a.test(n)){r=e.safetyStatus,t=e.reason;break}}let l=function(e){let a=e.toLowerCase();for(let e of P)if(a.includes(e.term.toLowerCase()))return{isMasking:!0,reason:e.reason,riskLevel:e.riskLevel,verificationGuidance:e.verificationGuidance};for(let a of[{pattern:/and\/or/i,reason:"Ingredient composition is variable and unspecified"},{pattern:/one or more of/i,reason:"Multiple possible ingredients, exact composition unknown"},{pattern:/may contain/i,reason:"Potential cross-contamination or variable formulation"},{pattern:/less than \d+%/i,reason:"Minor ingredients may not be fully disclosed"}])if(a.pattern.test(e))return{isMasking:!0,reason:a.reason,riskLevel:"medium"};return{isMasking:!1}}(i),d={originalText:a.originalText,canonicalName:a.canonicalName,normalizedName:a.normalizedName,confidence:a.confidence,safetyStatus:r,safetyReason:t,isMasking:l.isMasking,maskingReason:l.reason,maskingRiskLevel:l.riskLevel,sourceProvenance:s};if(a.subIngredients&&a.subIngredients.length>0&&(d.subIngredients=a.subIngredients.map(a=>e(a,s)),d.subIngredients.some(e=>"unsafe"===e.safetyStatus)&&"unsafe"!==r)){d.safetyStatus="unsafe";let e=d.subIngredients.filter(e=>"unsafe"===e.safetyStatus);d.safetyReason="Contains unsafe sub-ingredients: ".concat(e.map(e=>e.canonicalName).join(", "))}return d})(e,a))}(r,i),l=F(o),d={upc:e,name:a,brand:s,imageUrl:n,ingredients:o,sourceProvenance:i,createdAt:new Date,updatedAt:new Date,lastScannedAt:new Date},c=await f.products.add(d),m={...d,id:c};return void 0!==c&&await f.scanHistory.add({productId:c,scannedAt:new Date,upc:e}),{success:!0,product:m,safety:l,source:i}}catch(e){return console.error("Error processing product:",e),{success:!1,product:null,safety:null,error:e instanceof Error?e.message:"Failed to process product",source:i}}}var D=t(65993),I=t(80111),E=t(54485),G=t(15870),q=t(2821),_=t(75889);function B(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,_.QP)((0,q.$)(a))}let O=[{id:"home",label:"Home",icon:D.A},{id:"scan",label:"Scan",icon:I.A},{id:"history",label:"History",icon:E.A},{id:"settings",label:"Settings",icon:G.A}];function W(){let{activeTab:e,setActiveTab:a}=c();return(0,s.jsx)("nav",{"data-design-id":"bottom-nav",className:"fixed bottom-0 left-0 right-0 z-50 glass bg-card/90 border-t border-border",children:(0,s.jsx)("div",{className:"flex items-center justify-around h-16 max-w-lg mx-auto mobile-safe-area",children:O.map(t=>{let n=e===t.id,r=t.icon;return(0,s.jsxs)("button",{"data-design-id":"nav-item-".concat(t.id),onClick:()=>a(t.id),className:B("relative flex flex-col items-center justify-center w-16 h-full transition-all duration-200","focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/50 rounded-lg",n?"text-primary":"text-muted-foreground hover:text-foreground"),children:[n&&(0,s.jsx)(i.P.div,{layoutId:"nav-indicator",className:"absolute -top-0.5 w-8 h-1 rounded-full safe-bg",transition:{type:"spring",stiffness:500,damping:35}}),(0,s.jsx)(i.P.div,{animate:{scale:n?1.1:1},transition:{type:"spring",stiffness:400,damping:20},children:(0,s.jsx)(r,{className:"w-5 h-5",strokeWidth:n?2.5:2})}),(0,s.jsx)("span",{className:B("text-[10px] mt-0.5 font-medium",n?"font-semibold":""),children:t.label})]},t.id)})})})}var V=t(95740),Y=t(17910),Z=t(52056),J=t(90368),$=t(27937),K=t(32467),Q=t(83101);let X=(0,Q.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),ee=n.forwardRef((e,a)=>{let{className:t,variant:n,size:i,asChild:r=!1,...o}=e,l=r?K.DX:"button";return(0,s.jsx)(l,{className:B(X({variant:n,size:i,className:t})),ref:a,...o})});ee.displayName="Button";let ea=[{id:"welcome",title:"Welcome to MTHFR Scanner",description:"Your personal guide to finding foods that support healthy methylation. Scan products and get instant safety analysis.",icon:V.A,iconBg:"bg-gradient-to-br from-emerald-400 to-teal-500",iconColor:"text-white"},{id:"scan",title:"Scan or Enter Products",description:"Use your camera to scan barcodes or manually enter product information. We'll look up ingredients from trusted databases.",icon:I.A,iconBg:"bg-gradient-to-br from-blue-400 to-indigo-500",iconColor:"text-white"},{id:"analyze",title:"MTHFR Safety Analysis",description:"Each ingredient is evaluated against MTHFR-safe criteria. We identify synthetic vitamins, additives, and other problematic components.",icon:Y.A,iconBg:"bg-gradient-to-br from-purple-400 to-pink-500",iconColor:"text-white"},{id:"masking",title:"Detect Hidden Ingredients",description:'We flag vague terms like "natural flavors" that may mask hazardous ingredients, helping you make informed decisions.',icon:Z.A,iconBg:"bg-gradient-to-br from-amber-400 to-orange-500",iconColor:"text-white"}];function et(){let[e,a]=(0,n.useState)(0),{completeOnboarding:t}=c(),o=ea[e],l=e===ea.length-1,d=o.icon;return(0,s.jsxs)("div",{"data-design-id":"onboarding-flow",className:"fixed inset-0 bg-background z-50 flex flex-col",children:[(0,s.jsx)("div",{"data-design-id":"onboarding-header",className:"p-4 flex justify-end",children:(0,s.jsx)(ee,{"data-design-id":"onboarding-skip",variant:"ghost",size:"sm",onClick:()=>{t()},className:"text-muted-foreground",children:"Skip"})}),(0,s.jsx)("div",{className:"flex-1 flex flex-col items-center justify-center px-8",children:(0,s.jsx)(r.N,{mode:"wait",children:(0,s.jsxs)(i.P.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3},className:"flex flex-col items-center text-center max-w-sm",children:[(0,s.jsx)(i.P.div,{"data-design-id":"onboarding-icon-".concat(o.id),initial:{scale:.8,rotate:-10},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:300,damping:20},className:"w-28 h-28 rounded-3xl ".concat(o.iconBg," flex items-center justify-center mb-8 shadow-xl"),children:(0,s.jsx)(d,{className:"w-14 h-14 ".concat(o.iconColor)})}),(0,s.jsx)("h1",{"data-design-id":"onboarding-title-".concat(o.id),className:"text-2xl font-bold mb-4",children:o.title}),(0,s.jsx)("p",{"data-design-id":"onboarding-desc-".concat(o.id),className:"text-muted-foreground leading-relaxed",children:o.description})]},o.id)})}),(0,s.jsx)("div",{"data-design-id":"onboarding-progress",className:"flex justify-center gap-2 mb-8",children:ea.map((a,t)=>(0,s.jsx)(i.P.div,{"data-design-id":"onboarding-dot-".concat(t),className:"h-2 rounded-full transition-all duration-300 ".concat(t===e?"w-8 bg-primary":t<e?"w-2 bg-primary/50":"w-2 bg-muted")},t))}),(0,s.jsxs)("div",{"data-design-id":"onboarding-actions",className:"p-6 flex gap-3",children:[e>0&&(0,s.jsxs)(ee,{"data-design-id":"onboarding-prev",variant:"outline",size:"lg",onClick:()=>{e>0&&a(e=>e-1)},className:"flex-1",children:[(0,s.jsx)(J.A,{className:"w-4 h-4 mr-1"}),"Back"]}),(0,s.jsx)(ee,{"data-design-id":"onboarding-next",size:"lg",onClick:()=>{l?t():a(e=>e+1)},className:"".concat(0===e?"w-full":"flex-1"),children:l?(0,s.jsxs)(s.Fragment,{children:["Get Started",(0,s.jsx)(V.A,{className:"w-4 h-4 ml-2"})]}):(0,s.jsxs)(s.Fragment,{children:["Next",(0,s.jsx)($.A,{className:"w-4 h-4 ml-1"})]})})]})]})}var es=t(86651),en=t(6191),ei=t(1524),er=t(83457),eo=t(26983);let el=n.forwardRef((e,a)=>{let{className:t,type:n,...i}=e;return(0,s.jsx)("input",{type:n,className:B("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...i})});el.displayName="Input";let ed=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)("div",{ref:a,className:B("rounded-xl border bg-card text-card-foreground shadow",t),...n})});ed.displayName="Card";let ec=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)("div",{ref:a,className:B("flex flex-col space-y-1.5 p-6",t),...n})});ec.displayName="CardHeader";let em=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)("div",{ref:a,className:B("font-semibold leading-none tracking-tight",t),...n})});em.displayName="CardTitle";let eu=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)("div",{ref:a,className:B("text-sm text-muted-foreground",t),...n})});eu.displayName="CardDescription";let ef=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)("div",{ref:a,className:B("p-6 pt-0",t),...n})});ef.displayName="CardContent",n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)("div",{ref:a,className:B("flex items-center p-6 pt-0",t),...n})}).displayName="CardFooter";var ex=t(15239),eh=t(85710),eg=t(95664),ep=t(93499),ey=t(20508),eb=t(77801),ev=t(12817),ej=t(61362),eN=t(20908),ew=t(78874);let ek={safe:{icon:Y.A,label:"MTHFR Safe",color:"text-emerald-600 dark:text-emerald-400",bgColor:"bg-emerald-50 dark:bg-emerald-950/50",borderColor:"border-emerald-200 dark:border-emerald-800"},unsafe:{icon:eb.A,label:"Contains Unsafe Ingredients",color:"text-red-600 dark:text-red-400",bgColor:"bg-red-50 dark:bg-red-950/50",borderColor:"border-red-200 dark:border-red-800"},unknown:{icon:ev.A,label:"Requires Review",color:"text-amber-600 dark:text-amber-400",bgColor:"bg-amber-50 dark:bg-amber-950/50",borderColor:"border-amber-200 dark:border-amber-800"}};function eA(e){let{summary:a,compact:t=!1}=e,n=ek[a.overallStatus],r=n.icon;return t?(0,s.jsxs)("div",{"data-design-id":"safety-summary-compact",className:B("flex items-center gap-2 px-3 py-1.5 rounded-full border",n.bgColor,n.borderColor),children:[(0,s.jsx)(r,{className:B("w-4 h-4",n.color)}),(0,s.jsx)("span",{className:B("text-sm font-medium",n.color),children:"safe"===a.overallStatus?"Safe":"unsafe"===a.overallStatus?"".concat(a.unsafeCount," Unsafe"):"Review Needed"})]}):(0,s.jsxs)(i.P.div,{"data-design-id":"safety-summary",initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:B("rounded-2xl border-2 p-5 space-y-4",n.bgColor,n.borderColor),children:[(0,s.jsxs)("div",{"data-design-id":"safety-summary-header",className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:B("w-14 h-14 rounded-xl flex items-center justify-center","safe"===a.overallStatus?"bg-emerald-500":"unsafe"===a.overallStatus?"bg-red-500":"bg-amber-500"),children:(0,s.jsx)(r,{className:"w-7 h-7 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{"data-design-id":"safety-summary-title",className:B("text-lg font-bold",n.color),children:n.label}),(0,s.jsxs)("p",{"data-design-id":"safety-summary-subtitle",className:"text-sm text-muted-foreground",children:[a.totalIngredients," ingredients analyzed"]})]})]}),(0,s.jsxs)("div",{"data-design-id":"safety-summary-bars",className:"space-y-2",children:[(0,s.jsxs)("div",{className:"h-3 rounded-full bg-muted overflow-hidden flex",children:[(0,s.jsx)(i.P.div,{"data-design-id":"safety-bar-safe",initial:{width:0},animate:{width:"".concat(a.safePercentage,"%")},transition:{duration:.5,delay:.1},className:"h-full bg-emerald-500"}),(0,s.jsx)(i.P.div,{"data-design-id":"safety-bar-unknown",initial:{width:0},animate:{width:"".concat(a.unknownPercentage,"%")},transition:{duration:.5,delay:.2},className:"h-full bg-amber-500"}),(0,s.jsx)(i.P.div,{"data-design-id":"safety-bar-unsafe",initial:{width:0},animate:{width:"".concat(a.unsafePercentage,"%")},transition:{duration:.5,delay:.3},className:"h-full bg-red-500"})]}),(0,s.jsxs)("div",{"data-design-id":"safety-summary-legend",className:"flex justify-between text-xs",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,s.jsx)(ej.A,{className:"w-3.5 h-3.5 text-emerald-500"}),(0,s.jsxs)("span",{children:[a.safeCount," Safe (",a.safePercentage,"%)"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,s.jsx)(eN.A,{className:"w-3.5 h-3.5 text-amber-500"}),(0,s.jsxs)("span",{children:[a.unknownCount," Unknown (",a.unknownPercentage,"%)"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,s.jsx)(ew.A,{className:"w-3.5 h-3.5 text-red-500"}),(0,s.jsxs)("span",{children:[a.unsafeCount," Unsafe (",a.unsafePercentage,"%)"]})]})]})]}),a.unsafeIngredients.length>0&&(0,s.jsxs)("div",{"data-design-id":"unsafe-ingredients-list",className:"space-y-2",children:[(0,s.jsxs)("h4",{className:"text-sm font-semibold text-red-600 dark:text-red-400 flex items-center gap-2",children:[(0,s.jsx)(ew.A,{className:"w-4 h-4"}),"Unsafe Ingredients"]}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[a.unsafeIngredients.slice(0,5).map((e,a)=>(0,s.jsxs)("div",{"data-design-id":"unsafe-ingredient-".concat(a),className:"flex items-start gap-2 text-sm bg-red-100 dark:bg-red-900/30 rounded-lg px-3 py-2",children:[(0,s.jsx)(Z.A,{className:"w-4 h-4 text-red-500 mt-0.5 flex-shrink-0"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-red-700 dark:text-red-300",children:e.canonicalName}),e.safetyReason&&(0,s.jsx)("p",{className:"text-xs text-red-600/80 dark:text-red-400/80 mt-0.5",children:e.safetyReason})]})]},a)),a.unsafeIngredients.length>5&&(0,s.jsxs)("p",{className:"text-xs text-red-500 pl-6",children:["+",a.unsafeIngredients.length-5," more unsafe ingredients"]})]})]}),a.maskingIngredients.length>0&&(0,s.jsxs)("div",{"data-design-id":"masking-ingredients-list",className:"space-y-2",children:[(0,s.jsxs)("h4",{className:"text-sm font-semibold text-violet-600 dark:text-violet-400 flex items-center gap-2",children:[(0,s.jsx)(Z.A,{className:"w-4 h-4"}),"Masking Ingredients"]}),(0,s.jsx)("div",{className:"space-y-1.5",children:a.maskingIngredients.slice(0,3).map((e,a)=>(0,s.jsxs)("div",{"data-design-id":"masking-ingredient-".concat(a),className:"flex items-start gap-2 text-sm bg-violet-100 dark:bg-violet-900/30 rounded-lg px-3 py-2",children:[(0,s.jsx)(Z.A,{className:"w-4 h-4 text-violet-500 mt-0.5 flex-shrink-0"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-violet-700 dark:text-violet-300",children:e.canonicalName}),e.maskingReason&&(0,s.jsx)("p",{className:"text-xs text-violet-600/80 dark:text-violet-400/80 mt-0.5",children:e.maskingReason})]})]},a))})]})]})}let eC=(0,Q.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function eS(e){let{className:a,variant:t,...n}=e;return(0,s.jsx)("div",{className:B(eC({variant:t}),a),...n})}let eR={api:eh.A,ocr:eg.A,review:ep.A,manual:ey.A,community:ey.A},eP={api:"Product Database",ocr:"Photo OCR",review:"Review Data",manual:"Manual Entry",community:"Community"};function eM(e){let{product:a,onSelect:t,onToggleFavorite:n,compact:r=!1,showDetails:o=!1}=e,l=F(a.ingredients),d=eR[a.sourceProvenance];return r?(0,s.jsxs)(i.P.button,{"data-design-id":"product-card-compact-".concat(a.upc),onClick:t,whileTap:{scale:.98},className:"w-full flex items-center gap-4 p-4 bg-card rounded-xl border border-border hover:border-primary/30 hover:shadow-sm transition-all text-left",children:[a.imageUrl?(0,s.jsx)("div",{"data-design-id":"product-image-".concat(a.upc),className:"w-14 h-14 rounded-lg overflow-hidden bg-muted flex-shrink-0",children:(0,s.jsx)(ex.default,{src:a.imageUrl,alt:a.name,width:56,height:56,className:"w-full h-full object-cover"})}):(0,s.jsx)("div",{"data-design-id":"product-placeholder-".concat(a.upc),className:"w-14 h-14 rounded-lg bg-muted flex items-center justify-center flex-shrink-0",children:(0,s.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCE6"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h3",{"data-design-id":"product-name-".concat(a.upc),className:"font-semibold text-sm truncate",children:a.name}),a.brand&&(0,s.jsx)("p",{"data-design-id":"product-brand-".concat(a.upc),className:"text-xs text-muted-foreground truncate",children:a.brand}),(0,s.jsx)("div",{className:"flex items-center gap-2 mt-1",children:(0,s.jsx)(eA,{summary:l,compact:!0})})]}),(0,s.jsx)($.A,{className:"w-5 h-5 text-muted-foreground flex-shrink-0"})]}):(0,s.jsxs)(i.P.div,{"data-design-id":"product-card-".concat(a.upc),initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-card rounded-2xl border border-border overflow-hidden",children:[(0,s.jsxs)("div",{"data-design-id":"product-header-".concat(a.upc),className:"relative",children:[a.imageUrl?(0,s.jsx)("div",{className:"aspect-video bg-muted",children:(0,s.jsx)(ex.default,{src:a.imageUrl,alt:a.name,fill:!0,className:"object-contain"})}):(0,s.jsx)("div",{className:"aspect-video bg-gradient-to-br from-muted to-muted/50 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-6xl",children:"\uD83D\uDCE6"})}),n&&(0,s.jsx)(ee,{"data-design-id":"favorite-btn-".concat(a.upc),variant:"ghost",size:"icon",onClick:e=>{e.stopPropagation(),n()},className:"absolute top-3 right-3 glass bg-white/80 dark:bg-black/50 hover:bg-white dark:hover:bg-black/70",children:(0,s.jsx)(er.A,{className:B("w-5 h-5 transition-colors",a.isFavorite?"fill-red-500 text-red-500":"text-muted-foreground")})}),(0,s.jsx)("div",{"data-design-id":"source-badge-".concat(a.upc),className:"absolute bottom-3 left-3",children:(0,s.jsxs)(eS,{variant:"secondary",className:"glass bg-white/90 dark:bg-black/70",children:[(0,s.jsx)(d,{className:"w-3 h-3 mr-1"}),eP[a.sourceProvenance]]})})]}),(0,s.jsxs)("div",{"data-design-id":"product-content-".concat(a.upc),className:"p-5 space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{"data-design-id":"product-title-".concat(a.upc),className:"text-xl font-bold",children:a.name}),a.brand&&(0,s.jsx)("p",{"data-design-id":"product-brand-full-".concat(a.upc),className:"text-muted-foreground",children:a.brand}),(0,s.jsxs)("p",{"data-design-id":"product-upc-".concat(a.upc),className:"text-xs text-muted-foreground mt-1 font-mono",children:["UPC: ",a.upc]})]}),(0,s.jsx)(eA,{summary:l}),a.lastScannedAt&&(0,s.jsxs)("div",{"data-design-id":"last-scanned-".concat(a.upc),className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,s.jsx)(eo.A,{className:"w-3.5 h-3.5"}),"Last scanned: ",new Date(a.lastScannedAt).toLocaleDateString()]}),o&&t&&(0,s.jsxs)(ee,{"data-design-id":"view-details-btn-".concat(a.upc),onClick:t,className:"w-full",children:["View Full Details",(0,s.jsx)($.A,{className:"w-4 h-4 ml-1"})]})]})]})}var eT=t(20531);let eF=n.forwardRef((e,a)=>{let{className:t,children:n,...i}=e;return(0,s.jsxs)(eT.bL,{ref:a,className:B("relative overflow-hidden",t),...i,children:[(0,s.jsx)(eT.LM,{className:"h-full w-full rounded-[inherit]",children:n}),(0,s.jsx)(ez,{}),(0,s.jsx)(eT.OK,{})]})});eF.displayName=eT.bL.displayName;let ez=n.forwardRef((e,a)=>{let{className:t,orientation:n="vertical",...i}=e;return(0,s.jsx)(eT.VM,{ref:a,orientation:n,className:B("flex touch-none select-none transition-colors","vertical"===n&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===n&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...i,children:(0,s.jsx)(eT.lr,{className:"relative flex-1 rounded-full bg-border"})})});function eL(){let{scanHistory:e,favorites:a,setActiveTab:t,setCurrentProduct:r}=c(),[o,l]=(0,n.useState)(""),[d,m]=(0,n.useState)("");(0,n.useEffect)(()=>{let e=new Date().getHours();e<12?m("Good morning"):e<18?m("Good afternoon"):m("Good evening")},[]);let u=e.slice(0,5),f=o?e.filter(e=>{var a;return e.name.toLowerCase().includes(o.toLowerCase())||(null==(a=e.brand)?void 0:a.toLowerCase().includes(o.toLowerCase()))||e.upc.includes(o)}):[];return(0,s.jsx)(eF,{className:"h-full",children:(0,s.jsxs)("div",{"data-design-id":"home-screen",className:"pb-24 px-5 pt-4 space-y-6",children:[(0,s.jsxs)(i.P.div,{"data-design-id":"home-header",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"space-y-1",children:[(0,s.jsx)("h1",{"data-design-id":"home-greeting",className:"text-2xl font-bold",children:d}),(0,s.jsx)("p",{"data-design-id":"home-subtitle",className:"text-muted-foreground",children:"Ready to scan your next product?"})]}),(0,s.jsxs)(i.P.div,{"data-design-id":"home-search",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},className:"relative",children:[(0,s.jsx)(es.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,s.jsx)(el,{"data-design-id":"home-search-input",placeholder:"Search scanned products...",value:o,onChange:e=>l(e.target.value),className:"pl-10 h-12 rounded-xl"})]}),o&&f.length>0&&(0,s.jsxs)(i.P.div,{"data-design-id":"search-results",initial:{opacity:0},animate:{opacity:1},className:"space-y-3",children:[(0,s.jsx)("h3",{className:"font-semibold text-sm text-muted-foreground",children:"Search Results"}),(0,s.jsx)("div",{className:"space-y-2",children:f.map(e=>(0,s.jsx)(eM,{product:e,compact:!0,onSelect:()=>{r(e),t("history")}},e.id))})]}),!o&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(i.P.div,{"data-design-id":"quick-actions",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)(ee,{"data-design-id":"action-scan",onClick:()=>t("scan"),className:"h-28 flex-col gap-2 rounded-2xl bg-gradient-to-br from-primary to-emerald-600 hover:from-primary/90 hover:to-emerald-600/90 shadow-lg shadow-primary/20",children:[(0,s.jsx)(I.A,{className:"w-8 h-8"}),(0,s.jsx)("span",{className:"font-semibold",children:"Scan Product"})]}),(0,s.jsxs)(ee,{"data-design-id":"action-manual",variant:"outline",onClick:()=>t("scan"),className:"h-28 flex-col gap-2 rounded-2xl border-2 hover:bg-secondary/50",children:[(0,s.jsx)(en.A,{className:"w-8 h-8"}),(0,s.jsx)("span",{className:"font-semibold",children:"Add Manually"})]})]}),(0,s.jsxs)(i.P.div,{"data-design-id":"stats-section",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},className:"grid grid-cols-3 gap-3",children:[(0,s.jsx)(ed,{"data-design-id":"stat-scanned",className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-950/50 dark:to-blue-900/30 border-blue-200 dark:border-blue-800",children:(0,s.jsxs)(ef,{className:"p-4 text-center",children:[(0,s.jsx)(ei.A,{className:"w-5 h-5 mx-auto mb-1 text-blue-600 dark:text-blue-400"}),(0,s.jsx)("p",{"data-design-id":"stat-scanned-value",className:"text-2xl font-bold text-blue-700 dark:text-blue-300",children:e.length}),(0,s.jsx)("p",{className:"text-xs text-blue-600/80 dark:text-blue-400/80",children:"Scanned"})]})}),(0,s.jsx)(ed,{"data-design-id":"stat-favorites",className:"bg-gradient-to-br from-pink-50 to-pink-100 dark:from-pink-950/50 dark:to-pink-900/30 border-pink-200 dark:border-pink-800",children:(0,s.jsxs)(ef,{className:"p-4 text-center",children:[(0,s.jsx)(er.A,{className:"w-5 h-5 mx-auto mb-1 text-pink-600 dark:text-pink-400"}),(0,s.jsx)("p",{"data-design-id":"stat-favorites-value",className:"text-2xl font-bold text-pink-700 dark:text-pink-300",children:a.length}),(0,s.jsx)("p",{className:"text-xs text-pink-600/80 dark:text-pink-400/80",children:"Favorites"})]})}),(0,s.jsx)(ed,{"data-design-id":"stat-safe",className:"bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-emerald-950/50 dark:to-emerald-900/30 border-emerald-200 dark:border-emerald-800",children:(0,s.jsxs)(ef,{className:"p-4 text-center",children:[(0,s.jsx)(V.A,{className:"w-5 h-5 mx-auto mb-1 text-emerald-600 dark:text-emerald-400"}),(0,s.jsx)("p",{"data-design-id":"stat-safe-value",className:"text-2xl font-bold text-emerald-700 dark:text-emerald-300",children:e.filter(e=>e.ingredients.every(e=>"safe"===e.safetyStatus)).length}),(0,s.jsx)("p",{className:"text-xs text-emerald-600/80 dark:text-emerald-400/80",children:"Safe"})]})})]}),u.length>0&&(0,s.jsxs)(i.P.div,{"data-design-id":"recent-scans",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("h3",{"data-design-id":"recent-title",className:"font-semibold flex items-center gap-2",children:[(0,s.jsx)(eo.A,{className:"w-4 h-4"}),"Recent Scans"]}),(0,s.jsxs)(ee,{"data-design-id":"view-all-btn",variant:"ghost",size:"sm",onClick:()=>t("history"),className:"text-primary",children:["View All",(0,s.jsx)($.A,{className:"w-4 h-4 ml-1"})]})]}),(0,s.jsx)("div",{className:"space-y-2",children:u.map((e,a)=>(0,s.jsx)(i.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5+.1*a},children:(0,s.jsx)(eM,{product:e,compact:!0,onSelect:()=>{r(e),t("history")}})},e.id))})]}),0===u.length&&(0,s.jsxs)(i.P.div,{"data-design-id":"empty-state",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"text-center py-12",children:[(0,s.jsx)("div",{className:"w-20 h-20 rounded-full bg-muted flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(I.A,{className:"w-10 h-10 text-muted-foreground"})}),(0,s.jsx)("h3",{"data-design-id":"empty-title",className:"font-semibold mb-2",children:"No products scanned yet"}),(0,s.jsx)("p",{"data-design-id":"empty-desc",className:"text-sm text-muted-foreground mb-4",children:"Start by scanning a product barcode or adding one manually"}),(0,s.jsxs)(ee,{"data-design-id":"empty-cta",onClick:()=>t("scan"),children:[(0,s.jsx)(I.A,{className:"w-4 h-4 mr-2"}),"Scan Your First Product"]})]})]})]})})}ez.displayName=eT.VM.displayName;var eH=t(35299),eU=t(35626),eD=t(11716),eI=t(6132),eE=t(65229),eG=t(76482),eq=t(23361),e_=t(6189),eB=t(72448),eO=t(30121);function eW(e){let{onScan:a,onClose:t,isActive:o=!0}=e,[l,d]=(0,n.useState)(!1),[c,m]=(0,n.useState)(""),[u,f]=(0,n.useState)(!1),{videoRef:x,isScanning:h,error:g,hasPermission:p,lastScannedCode:y,startScanning:b,stopScanning:v,resetLastCode:j}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,n.useRef)(null),t=(0,n.useRef)(null),[s,i]=(0,n.useState)({isScanning:!1,error:null,lastScannedCode:null,hasPermission:null}),r=(0,n.useCallback)(async()=>{if(!a.current)return void i(e=>({...e,error:"Video element not available"}));try{let s,n=new Map;n.set(eO.DecodeHintType.TRY_HARDER,!0);let r=new eO.BrowserMultiFormatReader(n);t.current=r;let o=null;try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw Error("Camera implementation not found. Are you in a secure context (HTTPS/localhost)?");o=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1920,min:1280},height:{ideal:1080,min:720},aspectRatio:{ideal:16/9},advanced:[{focusMode:"continuous"}]}})}catch(e){if(e instanceof Error&&("NotAllowedError"===e.name||e.message.includes("Permission denied")))throw Error("Camera permission denied");throw Error("Failed to verify camera support or permission was denied")}if(i(e=>({...e,isScanning:!0,error:null,hasPermission:!0})),!o)throw Error("Failed to acquire camera stream");let l=document.createElement("canvas"),d=l.getContext("2d",{willReadFrequently:!0}),c=!1,m=0,u=()=>{if(c||!a.current||!d)return;let t=a.current;if(t.readyState===t.HAVE_ENOUGH_DATA){let a=Date.now();if(a-m>=250){l.width!==t.videoWidth&&(l.width=t.videoWidth,l.height=t.videoHeight),d.drawImage(t,0,0,l.width,l.height);let s=l.width,c=l.height,u=Math.floor(.6*s),f=Math.floor(.3*c),x=Math.floor((s-u)/2),h=Math.floor((c-f)/2),g=document.createElement("canvas");g.width=u,g.height=f;let p=g.getContext("2d");if(p){var n,o;p.drawImage(l,x,h,u,f,0,0,u,f);try{let t=r.decode(g);if(t){let s=t.getText();i(e=>({...e,lastScannedCode:s})),null==(n=e.onScan)||n.call(e,s),m=a;return}}catch(e){"NotFoundException"!==e.name&&console.error("Horizontal decode error:",e)}let t=Math.floor((s-f)/2),d=Math.floor((c-u)/2),y=document.createElement("canvas");y.width=f,y.height=u;let b=y.getContext("2d");if(b){b.drawImage(l,t,d,f,u,0,0,f,u);try{let a=r.decode(y);if(a){let t=a.getText();i(e=>({...e,lastScannedCode:t})),null==(o=e.onScan)||o.call(e,t)}}catch(e){"NotFoundException"!==e.name&&console.error("Vertical decode error:",e)}}m=a}}}c||(s=requestAnimationFrame(u))};a.current&&(a.current.srcObject=o,a.current.play().then(()=>{u()}).catch(e=>console.error("Video play error:",e)));let f=r.reset.bind(r);r.reset=()=>{c=!0,s&&cancelAnimationFrame(s),o&&o.getTracks().forEach(e=>e.stop()),a.current&&(a.current.srcObject=null),f()}}catch(t){var s;let a=t instanceof Error?t.message:"Failed to start scanner";a.includes("Permission denied")||a.includes("NotAllowedError")?i(e=>({...e,hasPermission:!1,error:"Camera permission denied"})):i(e=>({...e,error:a})),null==(s=e.onError)||s.call(e,a)}},[e]),o=(0,n.useCallback)(()=>{t.current&&(t.current.reset(),t.current=null),i(e=>({...e,isScanning:!1}))},[]),l=(0,n.useCallback)(()=>{i(e=>({...e,lastScannedCode:null}))},[]);return(0,n.useEffect)(()=>()=>{o()},[o]),{videoRef:a,...s,startScanning:r,stopScanning:o,resetLastCode:l}}({onScan:(0,n.useCallback)(e=>{a(e)},[a])});return(0,n.useEffect)(()=>(o&&!l?b():v(),()=>{v()}),[o,l,b,v]),(0,n.useEffect)(()=>{if(y){let e=setTimeout(()=>{j()},3e3);return()=>clearTimeout(e)}},[y,j]),(0,s.jsxs)("div",{"data-design-id":"barcode-scanner",className:"relative w-full h-full flex flex-col",children:[(0,s.jsxs)("div",{"data-design-id":"scanner-header",className:"absolute top-0 left-0 right-0 z-20 p-4 flex justify-between items-center",children:[t&&(0,s.jsx)(ee,{"data-design-id":"scanner-close-btn",variant:"ghost",size:"icon",onClick:t,className:"glass bg-black/30 text-white hover:bg-black/50",children:(0,s.jsx)(eE.A,{className:"w-5 h-5"})}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(ee,{"data-design-id":"scanner-keyboard-btn",variant:"ghost",size:"icon",onClick:()=>d(!l),className:"glass bg-black/30 text-white hover:bg-black/50",children:(0,s.jsx)(eG.A,{className:"w-5 h-5"})}),(0,s.jsx)(ee,{"data-design-id":"scanner-torch-btn",variant:"ghost",size:"icon",onClick:()=>f(!u),className:"glass bg-black/30 text-white hover:bg-black/50",disabled:!h,children:u?(0,s.jsx)(eq.A,{className:"w-5 h-5"}):(0,s.jsx)(e_.A,{className:"w-5 h-5"})})]})]}),(0,s.jsx)(r.N,{mode:"wait",children:l?(0,s.jsxs)(i.P.div,{"data-design-id":"manual-entry-panel",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"flex-1 flex flex-col items-center justify-center p-6 bg-background",children:[(0,s.jsx)("div",{"data-design-id":"manual-entry-icon",className:"w-20 h-20 rounded-full bg-primary/10 flex items-center justify-center mb-6",children:(0,s.jsx)(eG.A,{className:"w-10 h-10 text-primary"})}),(0,s.jsx)("h2",{"data-design-id":"manual-entry-title",className:"text-xl font-semibold mb-2",children:"Enter UPC Manually"}),(0,s.jsx)("p",{"data-design-id":"manual-entry-description",className:"text-muted-foreground text-center mb-6",children:"Type the barcode number found on the product packaging"}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),c.trim()&&(a(c.trim()),m(""),d(!1))},className:"w-full max-w-sm space-y-4",children:[(0,s.jsx)(el,{"data-design-id":"manual-entry-input",type:"text",inputMode:"numeric",pattern:"[0-9]*",placeholder:"Enter UPC (e.g., 012345678905)",value:c,onChange:e=>m(e.target.value.replace(/[^0-9]/g,"")),className:"text-center text-lg h-12 tracking-widest",autoFocus:!0}),(0,s.jsx)(ee,{"data-design-id":"manual-entry-submit",type:"submit",className:"w-full h-12 text-base font-semibold",disabled:!c.trim()||c.length<8,children:"Look Up Product"}),(0,s.jsx)(ee,{"data-design-id":"manual-entry-cancel",type:"button",variant:"ghost",onClick:()=>d(!1),className:"w-full",children:"Back to Scanner"})]})]},"manual-entry"):(0,s.jsxs)(i.P.div,{"data-design-id":"scanner-view",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"relative flex-1 bg-black overflow-hidden",children:[(0,s.jsx)("video",{ref:x,className:"absolute inset-0 w-full h-full object-contain bg-black",playsInline:!0,muted:!0,autoPlay:!0}),(0,s.jsx)("div",{"data-design-id":"scanner-overlay",className:"absolute inset-0 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"relative w-72 h-44",children:[(0,s.jsx)("div",{className:"absolute inset-0 border-2 border-white/30 rounded-xl"}),(0,s.jsx)("div",{className:"absolute -top-1 -left-1 w-8 h-8 border-t-4 border-l-4 border-primary rounded-tl-xl"}),(0,s.jsx)("div",{className:"absolute -top-1 -right-1 w-8 h-8 border-t-4 border-r-4 border-primary rounded-tr-xl"}),(0,s.jsx)("div",{className:"absolute -bottom-1 -left-1 w-8 h-8 border-b-4 border-l-4 border-primary rounded-bl-xl"}),(0,s.jsx)("div",{className:"absolute -bottom-1 -right-1 w-8 h-8 border-b-4 border-r-4 border-primary rounded-br-xl"}),h&&(0,s.jsx)(i.P.div,{"data-design-id":"scan-line",className:"absolute left-2 right-2 h-0.5 bg-gradient-to-r from-transparent via-primary to-transparent",animate:{top:["10%","90%","10%"]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}})]})}),(0,s.jsx)("div",{"data-design-id":"scanner-status",className:"absolute bottom-8 left-0 right-0 px-6",children:(0,s.jsx)("div",{className:"glass bg-black/50 rounded-2xl p-4 text-center",children:g?(0,s.jsxs)("div",{"data-design-id":"scanner-error",className:"text-red-400",children:[(0,s.jsx)(eB.A,{className:"w-6 h-6 mx-auto mb-2"}),(0,s.jsx)("p",{className:"text-sm",children:g}),(0,s.jsx)(ee,{onClick:b,variant:"outline",size:"sm",className:"mt-3 border-white/20 text-white hover:bg-white/10",children:"Try Again"})]}):!1===p?(0,s.jsxs)("div",{"data-design-id":"scanner-permission",className:"text-yellow-400",children:[(0,s.jsx)(eB.A,{className:"w-6 h-6 mx-auto mb-2"}),(0,s.jsx)("p",{className:"text-sm",children:"Camera access is required to scan barcodes"}),(0,s.jsx)("p",{className:"text-xs text-white/60 mt-1",children:"Please enable camera in your browser settings"})]}):h?(0,s.jsxs)("div",{"data-design-id":"scanner-active",className:"text-white",children:[(0,s.jsx)(eg.A,{className:"w-6 h-6 mx-auto mb-2 animate-pulse"}),(0,s.jsx)("p",{className:"text-sm font-medium",children:"Point camera at barcode"}),(0,s.jsx)("p",{className:"text-xs text-white/60 mt-1",children:"Position barcode within the frame"})]}):(0,s.jsxs)("div",{"data-design-id":"scanner-starting",className:"text-white/60",children:[(0,s.jsx)("div",{className:"w-6 h-6 mx-auto mb-2 border-2 border-white/30 border-t-white rounded-full animate-spin"}),(0,s.jsx)("p",{className:"text-sm",children:"Starting camera..."})]})})}),(0,s.jsx)(r.N,{children:y&&(0,s.jsx)(i.P.div,{"data-design-id":"scan-success",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 glass bg-primary/90 text-primary-foreground px-6 py-3 rounded-xl",children:(0,s.jsx)("p",{className:"font-mono font-semibold",children:y})})})]},"scanner")})]})}var eV=t(23327),eY=t(16083),eZ=t(24033);let eJ=eY.bL,e$=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)(eY.q7,{ref:a,className:B("border-b",t),...n})});e$.displayName="AccordionItem";let eK=n.forwardRef((e,a)=>{let{className:t,children:n,...i}=e;return(0,s.jsx)(eY.Y9,{className:"flex",children:(0,s.jsxs)(eY.l9,{ref:a,className:B("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline text-left [&[data-state=open]>svg]:rotate-180",t),...i,children:[n,(0,s.jsx)(eZ.A,{className:"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200"})]})})});eK.displayName=eY.l9.displayName;let eQ=n.forwardRef((e,a)=>{let{className:t,children:n,...i}=e;return(0,s.jsx)(eY.UC,{ref:a,className:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...i,children:(0,s.jsx)("div",{className:B("pb-4 pt-0",t),children:n})})});eQ.displayName=eY.UC.displayName;var eX=t(51617);let e0=eX.Kq;eX.bL,eX.l9,n.forwardRef((e,a)=>{let{className:t,sideOffset:n=4,...i}=e;return(0,s.jsx)(eX.ZL,{children:(0,s.jsx)(eX.UC,{ref:a,sideOffset:n,className:B("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...i})})}).displayName=eX.UC.displayName;let e1={safe:{icon:ej.A,color:"text-emerald-600 dark:text-emerald-400",bgColor:"bg-emerald-50 dark:bg-emerald-950/30",label:"Safe"},unsafe:{icon:ew.A,color:"text-red-600 dark:text-red-400",bgColor:"bg-red-50 dark:bg-red-950/30",label:"Unsafe"},unknown:{icon:eN.A,color:"text-amber-600 dark:text-amber-400",bgColor:"bg-amber-50 dark:bg-amber-950/30",label:"Unknown"}},e2={high:{color:"bg-red-500",label:"High Risk"},medium:{color:"bg-amber-500",label:"Medium Risk"},low:{color:"bg-blue-500",label:"Low Risk"}};function e5(e){var a;let{ingredient:t,index:n,showProvenance:r=!1}=e,o=e1[t.safetyStatus],l=o.icon;return t.safetyReason||t.maskingReason||(null==(a=t.subIngredients)?void 0:a.length)?(0,s.jsx)(i.P.div,{"data-design-id":"ingredient-accordion-".concat(n),initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.03*n},children:(0,s.jsx)(eJ,{type:"single",collapsible:!0,children:(0,s.jsxs)(e$,{value:"ing-".concat(n),className:"border-0",children:[(0,s.jsxs)(eK,{className:B("p-3 rounded-xl border hover:no-underline",o.bgColor,"border-transparent hover:border-border/50"),children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,s.jsx)(l,{className:B("w-5 h-5 flex-shrink-0",o.color)}),(0,s.jsxs)("div",{className:"text-left",children:[(0,s.jsx)("span",{className:"font-medium",children:t.canonicalName}),t.originalText.toLowerCase()!==t.canonicalName.toLowerCase()&&(0,s.jsxs)("span",{className:"text-xs text-muted-foreground ml-2",children:["(",t.originalText,")"]})]})]}),(0,s.jsx)("div",{className:"flex items-center gap-2 mr-2",children:t.isMasking&&t.maskingRiskLevel&&(0,s.jsxs)(eS,{variant:"outline",className:B("text-[10px] px-1.5",e2[t.maskingRiskLevel].color,"text-white border-0"),children:[(0,s.jsx)(Z.A,{className:"w-3 h-3 mr-0.5"}),"Masking"]})})]}),(0,s.jsx)(eQ,{className:"px-3 pt-2 pb-3",children:(0,s.jsxs)("div",{className:"space-y-3 pl-8",children:[t.safetyReason&&(0,s.jsxs)("div",{"data-design-id":"safety-reason-".concat(n),className:"flex items-start gap-2 text-sm",children:[(0,s.jsx)(eV.A,{className:"w-4 h-4 text-muted-foreground mt-0.5 flex-shrink-0"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:t.safetyReason})]}),t.isMasking&&t.maskingReason&&(0,s.jsxs)("div",{"data-design-id":"masking-reason-".concat(n),className:"flex items-start gap-2 text-sm bg-violet-50 dark:bg-violet-950/30 rounded-lg p-2",children:[(0,s.jsx)(Z.A,{className:"w-4 h-4 text-violet-500 mt-0.5 flex-shrink-0"}),(0,s.jsx)("p",{className:"text-violet-700 dark:text-violet-300",children:t.maskingReason})]}),t.subIngredients&&t.subIngredients.length>0&&(0,s.jsxs)("div",{"data-design-id":"sub-ingredients-".concat(n),className:"space-y-2",children:[(0,s.jsx)("p",{className:"text-xs font-medium text-muted-foreground",children:"Sub-ingredients:"}),(0,s.jsx)("div",{className:"space-y-1.5 pl-2 border-l-2 border-muted",children:t.subIngredients.map((e,a)=>{let t=e1[e.safetyStatus],i=t.icon;return(0,s.jsxs)("div",{"data-design-id":"sub-ingredient-".concat(n,"-").concat(a),className:"flex items-center gap-2 text-sm",children:[(0,s.jsx)(i,{className:B("w-4 h-4",t.color)}),(0,s.jsx)("span",{children:e.canonicalName})]},a)})})]}),(0,s.jsxs)("div",{"data-design-id":"confidence-".concat(n),className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,s.jsxs)("span",{children:["Confidence: ",Math.round(100*t.confidence),"%"]}),r&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:""}),(0,s.jsxs)("span",{children:["Source: ",t.sourceProvenance]})]})]})]})})]})})}):(0,s.jsxs)(i.P.div,{"data-design-id":"ingredient-item-".concat(n),initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.03*n},className:B("flex items-center justify-between p-3 rounded-xl border",o.bgColor,"border-transparent"),children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(l,{className:B("w-5 h-5 flex-shrink-0",o.color)}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium",children:t.canonicalName}),t.originalText.toLowerCase()!==t.canonicalName.toLowerCase()&&(0,s.jsxs)("span",{className:"text-xs text-muted-foreground ml-2",children:["(",t.originalText,")"]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[t.isMasking&&t.maskingRiskLevel&&(0,s.jsxs)(eS,{variant:"outline",className:B("text-[10px] px-1.5",e2[t.maskingRiskLevel].color,"text-white border-0"),children:[(0,s.jsx)(Z.A,{className:"w-3 h-3 mr-0.5"}),"Masking"]}),r&&(0,s.jsx)(eS,{variant:"outline",className:"text-[10px]",children:t.sourceProvenance})]})]})}function e4(e){let{ingredients:a,showProvenance:t=!1}=e,n=[...a].sort((e,a)=>{let t={unsafe:0,unknown:1,safe:2};return t[e.safetyStatus]-t[a.safetyStatus]});return(0,s.jsx)(e0,{children:(0,s.jsxs)("div",{"data-design-id":"ingredient-list",className:"space-y-2",children:[(0,s.jsxs)("div",{"data-design-id":"ingredient-list-header",className:"flex items-center justify-between mb-3",children:[(0,s.jsxs)("h3",{className:"font-semibold",children:["Ingredients (",a.length,")"]}),(0,s.jsxs)("div",{className:"flex gap-3 text-xs",children:[(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(ej.A,{className:"w-3.5 h-3.5 text-emerald-500"}),"Safe"]}),(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(eN.A,{className:"w-3.5 h-3.5 text-amber-500"}),"Unknown"]}),(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(ew.A,{className:"w-3.5 h-3.5 text-red-500"}),"Unsafe"]})]})]}),(0,s.jsx)("div",{className:"space-y-1.5",children:n.map((e,a)=>(0,s.jsx)(e5,{ingredient:e,index:a,showProvenance:t},a))})]})})}var e3=t(26617),e6=t(60349),e8=t(45345),e9=t(89715),e7=t(42529),ae=t(32894);let aa=(0,Q.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),at=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)(ae.b,{ref:a,className:B(aa(),t),...n})});at.displayName=ae.b.displayName;let as=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)("textarea",{className:B("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...n})});function an(e){let{initialUPC:a="",onSubmit:t,onCancel:r,isLoading:o=!1}=e,[l,d]=(0,n.useState)(a),[c,m]=(0,n.useState)(""),[u,f]=(0,n.useState)(""),[x,h]=(0,n.useState)(""),[g,p]=(0,n.useState)({}),y=async e=>{e.preventDefault();let a={},s=function(e){let a=e.replace(/[^0-9]/g,"");return 0===a.length?{valid:!1,message:"UPC is required"}:a.length<8?{valid:!1,message:"UPC must be at least 8 digits"}:a.length>14?{valid:!1,message:"UPC cannot exceed 14 digits"}:/^\d+$/.test(a)?{valid:!0}:{valid:!1,message:"UPC must contain only numbers"}}(l);if(s.valid||(a.upc=s.message||"Invalid UPC"),c.trim()||(a.name="Product name is required"),x.trim()?x.trim().length<10&&(a.ingredients="Please enter the complete ingredient list"):a.ingredients="Ingredients are required",Object.keys(a).length>0)return void p(a);p({}),await t({upc:l.replace(/[^0-9]/g,""),name:c.trim(),brand:u.trim()||void 0,ingredients:x.trim()})};return(0,s.jsxs)(i.P.form,{"data-design-id":"manual-entry-form",initial:{opacity:0,y:20},animate:{opacity:1,y:0},onSubmit:y,className:"space-y-6 p-1",children:[(0,s.jsxs)("div",{"data-design-id":"form-header",className:"text-center mb-6",children:[(0,s.jsx)("div",{className:"w-16 h-16 rounded-2xl bg-primary/10 flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(e3.A,{className:"w-8 h-8 text-primary"})}),(0,s.jsx)("h2",{"data-design-id":"form-title",className:"text-xl font-bold",children:"Add Product Manually"}),(0,s.jsx)("p",{"data-design-id":"form-subtitle",className:"text-muted-foreground text-sm mt-1",children:"Enter the product details from the label"})]}),(0,s.jsxs)("div",{"data-design-id":"form-field-upc",className:"space-y-2",children:[(0,s.jsxs)(at,{htmlFor:"upc",className:"flex items-center gap-2",children:[(0,s.jsx)(e6.A,{className:"w-4 h-4"}),"UPC / Barcode"]}),(0,s.jsx)(el,{id:"upc",type:"text",inputMode:"numeric",placeholder:"Enter 8-14 digit barcode",value:l,onChange:e=>d(e.target.value.replace(/[^0-9]/g,"")),className:g.upc?"border-red-500":"",disabled:o}),g.upc&&(0,s.jsx)("p",{className:"text-xs text-red-500",children:g.upc})]}),(0,s.jsxs)("div",{"data-design-id":"form-field-name",className:"space-y-2",children:[(0,s.jsxs)(at,{htmlFor:"name",className:"flex items-center gap-2",children:[(0,s.jsx)(e8.A,{className:"w-4 h-4"}),"Product Name *"]}),(0,s.jsx)(el,{id:"name",type:"text",placeholder:"e.g., Organic Whole Wheat Bread",value:c,onChange:e=>m(e.target.value),className:g.name?"border-red-500":"",disabled:o}),g.name&&(0,s.jsx)("p",{className:"text-xs text-red-500",children:g.name})]}),(0,s.jsxs)("div",{"data-design-id":"form-field-brand",className:"space-y-2",children:[(0,s.jsxs)(at,{htmlFor:"brand",className:"flex items-center gap-2",children:[(0,s.jsx)(e3.A,{className:"w-4 h-4"}),"Brand (Optional)"]}),(0,s.jsx)(el,{id:"brand",type:"text",placeholder:"e.g., Nature's Own",value:u,onChange:e=>f(e.target.value),disabled:o})]}),(0,s.jsxs)("div",{"data-design-id":"form-field-ingredients",className:"space-y-2",children:[(0,s.jsxs)(at,{htmlFor:"ingredients",className:"flex items-center gap-2",children:[(0,s.jsx)(e9.A,{className:"w-4 h-4"}),"Ingredients *"]}),(0,s.jsx)(as,{id:"ingredients",placeholder:"Paste or type the ingredients list exactly as shown on the package. Separate ingredients with commas.",value:x,onChange:e=>h(e.target.value),className:"min-h-[150px] ".concat(g.ingredients?"border-red-500":""),disabled:o}),g.ingredients?(0,s.jsx)("p",{className:"text-xs text-red-500",children:g.ingredients}):(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:'Include all ingredients, sub-ingredients in parentheses, and any "contains" statements.'})]}),(0,s.jsxs)("div",{"data-design-id":"form-actions",className:"flex gap-3 pt-2",children:[r&&(0,s.jsx)(ee,{type:"button",variant:"outline",onClick:r,disabled:o,className:"flex-1",children:"Cancel"}),(0,s.jsx)(ee,{type:"submit",disabled:o,className:"flex-1",children:o?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eH.A,{className:"w-4 h-4 mr-2 animate-spin"}),"Analyzing..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e7.A,{className:"w-4 h-4 mr-2"}),"Add & Analyze"]})})]})]})}as.displayName="Textarea";let ai=(0,Q.F)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),ar=n.forwardRef((e,a)=>{let{className:t,variant:n,...i}=e;return(0,s.jsx)("div",{ref:a,role:"alert",className:B(ai({variant:n}),t),...i})});ar.displayName="Alert";let ao=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)("h5",{ref:a,className:B("mb-1 font-medium leading-none tracking-tight",t),...n})});ao.displayName="AlertTitle";let al=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)("div",{ref:a,className:B("text-sm [&_p]:leading-relaxed",t),...n})});al.displayName="AlertDescription";var ad=t(18720);function ac(){let[e,a]=(0,n.useState)("scanner"),[t,o]=(0,n.useState)(null),[l,d]=(0,n.useState)(null),[m,u]=(0,n.useState)(""),[f,x]=(0,n.useState)(!1),{addToHistory:h,setActiveTab:g,setCurrentProduct:p,toggleFavorite:y}=c(),b=(0,n.useCallback)(async e=>{if(!f&&e!==m){x(!0),u(e),a("loading");try{let n=await H(e);if(n.success&&n.product){var t,s;o(n.product),d(n.safety),h(n.product),a("result"),(null==(t=n.safety)?void 0:t.overallStatus)==="safe"?ad.oR.success("Product is MTHFR Safe!"):(null==(s=n.safety)?void 0:s.overallStatus)==="unsafe"?ad.oR.warning("Found ".concat(n.safety.unsafeCount," unsafe ingredient(s)")):ad.oR.info("Some ingredients require review")}else if(n.notFound)a("not-found");else throw Error(n.error||"Failed to process product")}catch(e){console.error("Scan error:",e),ad.oR.error("Failed to look up product"),a("scanner")}finally{x(!1)}}},[f,m,h]),v=async e=>{x(!0);try{let t=await U(e.upc,e.name,e.ingredients,e.brand,void 0,"manual");if(t.success&&t.product)o(t.product),d(t.safety),h(t.product),a("result"),ad.oR.success("Product added successfully!");else throw Error(t.error||"Failed to add product")}catch(e){console.error("Manual entry error:",e),ad.oR.error("Failed to add product")}finally{x(!1)}},j=()=>{a("scanner"),o(null),d(null),u("")};return(0,s.jsx)("div",{"data-design-id":"scan-screen",className:"h-full flex flex-col bg-background",children:(0,s.jsxs)(r.N,{mode:"wait",children:["scanner"===e&&(0,s.jsx)(i.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex-1",children:(0,s.jsx)(eW,{onScan:b,isActive:"scanner"===e})},"scanner"),"loading"===e&&(0,s.jsxs)(i.P.div,{"data-design-id":"scan-loading",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex-1 flex flex-col items-center justify-center p-8",children:[(0,s.jsx)("div",{className:"w-20 h-20 rounded-2xl bg-primary/10 flex items-center justify-center mb-6",children:(0,s.jsx)(eH.A,{className:"w-10 h-10 text-primary animate-spin"})}),(0,s.jsx)("h2",{"data-design-id":"loading-title",className:"text-xl font-semibold mb-2",children:"Looking up product..."}),(0,s.jsx)("p",{"data-design-id":"loading-subtitle",className:"text-muted-foreground text-center",children:"Searching product databases and analyzing ingredients"}),(0,s.jsxs)("p",{"data-design-id":"loading-upc",className:"font-mono text-sm mt-4 text-muted-foreground",children:["UPC: ",m]})]},"loading"),"result"===e&&t&&(0,s.jsxs)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex-1 flex flex-col",children:[(0,s.jsxs)("div",{"data-design-id":"result-header",className:"p-4 flex items-center gap-3 border-b",children:[(0,s.jsx)(ee,{"data-design-id":"result-back",variant:"ghost",size:"icon",onClick:j,children:(0,s.jsx)(eU.A,{className:"w-5 h-5"})}),(0,s.jsx)("h2",{className:"font-semibold flex-1",children:"Scan Result"}),(0,s.jsx)(ee,{"data-design-id":"scan-another",variant:"outline",size:"sm",onClick:j,children:"Scan Another"})]}),(0,s.jsx)(eF,{className:"flex-1",children:(0,s.jsxs)("div",{className:"p-5 space-y-6 pb-24",children:[(0,s.jsx)(eM,{product:t,onToggleFavorite:()=>{t.id&&y(t.id)}}),(0,s.jsx)(e4,{ingredients:t.ingredients,showProvenance:!0})]})})]},"result"),"not-found"===e&&(0,s.jsxs)(i.P.div,{"data-design-id":"not-found-screen",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex-1 flex flex-col",children:[(0,s.jsxs)("div",{"data-design-id":"not-found-header",className:"p-4 flex items-center gap-3 border-b",children:[(0,s.jsx)(ee,{variant:"ghost",size:"icon",onClick:j,children:(0,s.jsx)(eU.A,{className:"w-5 h-5"})}),(0,s.jsx)("h2",{className:"font-semibold",children:"Product Not Found"})]}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center p-8",children:[(0,s.jsx)("div",{"data-design-id":"not-found-icon",className:"w-24 h-24 rounded-full bg-amber-100 dark:bg-amber-950/50 flex items-center justify-center mb-6",children:(0,s.jsx)(eD.A,{className:"w-12 h-12 text-amber-600 dark:text-amber-400"})}),(0,s.jsx)("h2",{"data-design-id":"not-found-title",className:"text-xl font-semibold mb-2",children:"Product Not in Database"}),(0,s.jsx)("p",{"data-design-id":"not-found-desc",className:"text-muted-foreground text-center mb-2",children:"We couldn't find this product in our databases."}),(0,s.jsxs)("p",{"data-design-id":"not-found-upc",className:"font-mono text-sm text-muted-foreground mb-6",children:["UPC: ",m]}),(0,s.jsxs)(ar,{"data-design-id":"not-found-alert",className:"mb-6 max-w-sm",children:[(0,s.jsx)(eI.A,{className:"w-4 h-4"}),(0,s.jsx)(ao,{children:"Help improve the database"}),(0,s.jsx)(al,{children:"You can add this product manually by entering its name and ingredient list."})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-3 w-full max-w-sm",children:[(0,s.jsx)(ee,{"data-design-id":"google-search-btn",variant:"secondary",onClick:()=>window.open("https://www.google.com/search?q=UPC+".concat(m),"_blank"),className:"w-full",children:"Search Web for UPC"}),(0,s.jsxs)("div",{className:"flex gap-3 w-full",children:[(0,s.jsx)(ee,{"data-design-id":"try-again-btn",variant:"outline",onClick:j,className:"flex-1",children:"Scan Again"}),(0,s.jsx)(ee,{"data-design-id":"add-manually-btn",onClick:()=>a("manual-entry"),className:"flex-1",children:"Add Manually"})]})]})]})]},"not-found"),"manual-entry"===e&&(0,s.jsxs)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex-1 flex flex-col",children:[(0,s.jsxs)("div",{"data-design-id":"manual-header",className:"p-4 flex items-center gap-3 border-b",children:[(0,s.jsx)(ee,{variant:"ghost",size:"icon",onClick:j,children:(0,s.jsx)(eU.A,{className:"w-5 h-5"})}),(0,s.jsx)("h2",{className:"font-semibold",children:"Manual Entry"})]}),(0,s.jsx)(eF,{className:"flex-1",children:(0,s.jsx)("div",{className:"p-5 pb-24",children:(0,s.jsx)(an,{initialUPC:m,onSubmit:v,onCancel:j,isLoading:f})})})]},"manual-entry")]})})}var am=t(66955),au=t(25978),af=t(25667);let ax=af.bL,ah=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)(af.B8,{ref:a,className:B("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",t),...n})});ah.displayName=af.B8.displayName;let ag=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)(af.l9,{ref:a,className:B("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",t),...n})});ag.displayName=af.l9.displayName,n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)(af.UC,{ref:a,className:B("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...n})}).displayName=af.UC.displayName;var ap=t(37738),ay=t(5917),ab=t(99051);let av=ap.bL,aj=ap.l9;ap.YJ,ap.ZL,ap.Pb,ap.z6,n.forwardRef((e,a)=>{let{className:t,inset:n,children:i,...r}=e;return(0,s.jsxs)(ap.ZP,{ref:a,className:B("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",n&&"pl-8",t),...r,children:[i,(0,s.jsx)($.A,{className:"ml-auto"})]})}).displayName=ap.ZP.displayName,n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)(ap.G5,{ref:a,className:B("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...n})}).displayName=ap.G5.displayName;let aN=n.forwardRef((e,a)=>{let{className:t,sideOffset:n=4,...i}=e;return(0,s.jsx)(ap.ZL,{children:(0,s.jsx)(ap.UC,{ref:a,sideOffset:n,className:B("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...i})})});aN.displayName=ap.UC.displayName;let aw=n.forwardRef((e,a)=>{let{className:t,inset:n,...i}=e;return(0,s.jsx)(ap.q7,{ref:a,className:B("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",n&&"pl-8",t),...i})});function ak(){let{scanHistory:e,favorites:a,currentProduct:t,setCurrentProduct:o,toggleFavorite:l,clearHistory:d}=c(),[m,u]=(0,n.useState)(""),[f,x]=(0,n.useState)("recent"),[h,g]=(0,n.useState)("all"),[p,y]=(0,n.useState)("all"),b=e=>F(e.ingredients).overallStatus,v=(e=>{let a=[...e];if(m){let e=m.toLowerCase();a=a.filter(a=>{var t;return a.name.toLowerCase().includes(e)||(null==(t=a.brand)?void 0:t.toLowerCase().includes(e))||a.upc.includes(e)})}return"all"!==h&&(a=a.filter(e=>b(e)===h)),a.sort((e,a)=>{switch(f){case"name":return e.name.localeCompare(a.name);case"safety":{let t={unsafe:0,unknown:1,safe:2};return t[b(e)]-t[b(a)]}default:return new Date(a.lastScannedAt||a.createdAt).getTime()-new Date(e.lastScannedAt||e.createdAt).getTime()}}),a})("favorites"===p?a:e);return t?(F(t.ingredients),(0,s.jsxs)("div",{"data-design-id":"product-detail",className:"h-full flex flex-col bg-background",children:[(0,s.jsxs)("div",{"data-design-id":"detail-header",className:"p-4 flex items-center gap-3 border-b",children:[(0,s.jsx)(ee,{"data-design-id":"detail-back",variant:"ghost",size:"icon",onClick:()=>o(null),children:(0,s.jsx)(eU.A,{className:"w-5 h-5"})}),(0,s.jsx)("h2",{className:"font-semibold flex-1 truncate",children:t.name}),(0,s.jsx)(ee,{"data-design-id":"detail-favorite",variant:"ghost",size:"icon",onClick:()=>t.id&&l(t.id),children:(0,s.jsx)(er.A,{className:"w-5 h-5 ".concat(t.isFavorite?"fill-red-500 text-red-500":"")})})]}),(0,s.jsx)(eF,{className:"flex-1",children:(0,s.jsxs)("div",{className:"p-5 space-y-6 pb-24",children:[(0,s.jsx)(eM,{product:t}),(0,s.jsx)(e4,{ingredients:t.ingredients,showProvenance:!0}),(0,s.jsxs)("div",{"data-design-id":"product-meta",className:"text-xs text-muted-foreground space-y-1",children:[(0,s.jsxs)("p",{children:["UPC: ",t.upc]}),(0,s.jsxs)("p",{children:["Source: ",t.sourceProvenance]}),(0,s.jsxs)("p",{children:["Added: ",new Date(t.createdAt).toLocaleDateString()]}),t.lastScannedAt&&(0,s.jsxs)("p",{children:["Last scanned:"," ",new Date(t.lastScannedAt).toLocaleDateString()]})]})]})})]})):(0,s.jsxs)("div",{"data-design-id":"history-screen",className:"h-full flex flex-col bg-background",children:[(0,s.jsxs)("div",{"data-design-id":"history-header",className:"p-4 border-b space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h1",{"data-design-id":"history-title",className:"text-xl font-bold",children:"Product History"}),(0,s.jsxs)(eS,{"data-design-id":"history-count",variant:"secondary",children:[e.length," products"]})]}),(0,s.jsx)(ax,{value:p,onValueChange:e=>y(e),children:(0,s.jsxs)(ah,{"data-design-id":"history-tabs",className:"w-full",children:[(0,s.jsxs)(ag,{"data-design-id":"tab-all",value:"all",className:"flex-1",children:[(0,s.jsx)(E.A,{className:"w-4 h-4 mr-2"}),"All Scans"]}),(0,s.jsxs)(ag,{"data-design-id":"tab-favorites",value:"favorites",className:"flex-1",children:[(0,s.jsx)(er.A,{className:"w-4 h-4 mr-2"}),"Favorites (",a.length,")"]})]})}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("div",{className:"relative flex-1",children:[(0,s.jsx)(es.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,s.jsx)(el,{"data-design-id":"history-search",placeholder:"Search products...",value:m,onChange:e=>u(e.target.value),className:"pl-10"})]}),(0,s.jsxs)(av,{children:[(0,s.jsx)(aj,{asChild:!0,children:(0,s.jsx)(ee,{"data-design-id":"filter-btn",variant:"outline",size:"icon",children:(0,s.jsx)(am.A,{className:"w-4 h-4"})})}),(0,s.jsxs)(aN,{align:"end",children:[(0,s.jsxs)(aw,{onClick:()=>g("all"),children:["All Products","all"===h&&(0,s.jsx)("span",{className:"ml-auto",children:""})]}),(0,s.jsxs)(aw,{onClick:()=>g("safe"),children:["Safe Only","safe"===h&&(0,s.jsx)("span",{className:"ml-auto",children:""})]}),(0,s.jsxs)(aw,{onClick:()=>g("unsafe"),children:["Unsafe Only","unsafe"===h&&(0,s.jsx)("span",{className:"ml-auto",children:""})]}),(0,s.jsxs)(aw,{onClick:()=>g("unknown"),children:["Unknown Only","unknown"===h&&(0,s.jsx)("span",{className:"ml-auto",children:""})]})]})]}),(0,s.jsxs)(av,{children:[(0,s.jsx)(aj,{asChild:!0,children:(0,s.jsx)(ee,{"data-design-id":"sort-btn",variant:"outline",size:"icon",children:(0,s.jsx)(au.A,{className:"w-4 h-4"})})}),(0,s.jsxs)(aN,{align:"end",children:[(0,s.jsxs)(aw,{onClick:()=>x("recent"),children:["Most Recent","recent"===f&&(0,s.jsx)("span",{className:"ml-auto",children:""})]}),(0,s.jsxs)(aw,{onClick:()=>x("name"),children:["Name (A-Z)","name"===f&&(0,s.jsx)("span",{className:"ml-auto",children:""})]}),(0,s.jsxs)(aw,{onClick:()=>x("safety"),children:["Safety Status","safety"===f&&(0,s.jsx)("span",{className:"ml-auto",children:""})]})]})]})]})]}),(0,s.jsx)(eF,{className:"flex-1",children:(0,s.jsx)("div",{className:"p-4 pb-24 space-y-2",children:(0,s.jsx)(r.N,{mode:"popLayout",children:v.length>0?v.map((e,a)=>(0,s.jsx)(i.P.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.9},transition:{delay:.05*a},children:(0,s.jsx)(eM,{product:e,compact:!0,onSelect:()=>o(e)})},e.id)):(0,s.jsxs)(i.P.div,{"data-design-id":"history-empty",initial:{opacity:0},animate:{opacity:1},className:"text-center py-16",children:[(0,s.jsx)("div",{className:"w-20 h-20 rounded-full bg-muted flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(e3.A,{className:"w-10 h-10 text-muted-foreground"})}),(0,s.jsx)("h3",{"data-design-id":"empty-title",className:"font-semibold mb-2",children:m?"No matching products":"favorites"===p?"No favorites yet":"No products scanned"}),(0,s.jsx)("p",{"data-design-id":"empty-desc",className:"text-sm text-muted-foreground",children:m?"Try adjusting your search or filters":"favorites"===p?"Tap the heart icon on a product to add it to favorites":"Start scanning products to build your history"})]})})})})]})}aw.displayName=ap.q7.displayName,n.forwardRef((e,a)=>{let{className:t,children:n,checked:i,...r}=e;return(0,s.jsxs)(ap.H_,{ref:a,className:B("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:i,...r,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(ap.VF,{children:(0,s.jsx)(ay.A,{className:"h-4 w-4"})})}),n]})}).displayName=ap.H_.displayName,n.forwardRef((e,a)=>{let{className:t,children:n,...i}=e;return(0,s.jsxs)(ap.hN,{ref:a,className:B("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...i,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(ap.VF,{children:(0,s.jsx)(ab.A,{className:"h-2 w-2 fill-current"})})}),n]})}).displayName=ap.hN.displayName,n.forwardRef((e,a)=>{let{className:t,inset:n,...i}=e;return(0,s.jsx)(ap.JU,{ref:a,className:B("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",t),...i})}).displayName=ap.JU.displayName,n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)(ap.wv,{ref:a,className:B("-mx-1 my-1 h-px bg-muted",t),...n})}).displayName=ap.wv.displayName;var aA=t(37494),aC=t(59427),aS=t(39867),aR=t(71360),aP=t(21873),aM=t(37586),aT=t(91169),aF=t(47621);let az=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)(aF.bL,{className:B("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...n,ref:a,children:(0,s.jsx)(aF.zi,{className:B("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})});az.displayName=aF.bL.displayName;let aL=[{type:"location",title:"Location Access",description:"Help find local product availability and regional formulations",howUsed:"Location is used to find nearby stores carrying products and identify region-specific product variations that may have different ingredients.",icon:aP.A,iconColor:"text-blue-500"},{type:"photo",title:"Photo Upload & Analysis",description:"Scan ingredient labels using your camera for OCR analysis",howUsed:"Photos of product labels are processed using OCR to extract ingredient lists. This helps verify or supplement data from product databases.",icon:eg.A,iconColor:"text-purple-500"},{type:"review",title:"Review Aggregation",description:"Access community reviews for additional ingredient insights",howUsed:"With your permission, we search public product reviews for mentions of ingredients that may not appear on standard labels.",icon:aM.A,iconColor:"text-amber-500"},{type:"data_contribution",title:"Data Contribution",description:"Share your findings to improve the database for everyone",howUsed:"Your manually entered products and OCR corrections help improve ingredient data accuracy for the entire community.",icon:aT.A,iconColor:"text-emerald-500"}];function aH(e){let{config:a,isGranted:t,onToggle:n}=e,r=a.icon;return(0,s.jsx)(i.P.div,{"data-design-id":"consent-item-".concat(a.type),initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:B("p-4 rounded-xl border transition-colors",t?"bg-primary/5 border-primary/20":"bg-card border-border"),children:(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)("div",{className:B("w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0",t?"bg-primary/10":"bg-muted"),children:(0,s.jsx)(r,{className:B("w-5 h-5",t?a.iconColor:"text-muted-foreground")})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,s.jsx)("h4",{"data-design-id":"consent-title-".concat(a.type),className:"font-semibold",children:a.title}),(0,s.jsx)(az,{"data-design-id":"consent-toggle-".concat(a.type),checked:t,onCheckedChange:n})]}),(0,s.jsx)("p",{"data-design-id":"consent-desc-".concat(a.type),className:"text-sm text-muted-foreground mt-1",children:a.description}),t&&(0,s.jsx)(i.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-3 p-3 bg-background rounded-lg border border-border/50",children:(0,s.jsxs)("div",{className:"flex items-start gap-2 text-xs text-muted-foreground",children:[(0,s.jsx)(eV.A,{className:"w-3.5 h-3.5 mt-0.5 flex-shrink-0"}),(0,s.jsx)("p",{children:a.howUsed})]})})]})]})})}function aU(){let{consents:e,setConsent:a}=c();return(0,s.jsxs)("div",{"data-design-id":"consent-manager",className:"space-y-6",children:[(0,s.jsxs)(ed,{"data-design-id":"consent-header-card",children:[(0,s.jsx)(ec,{className:"pb-3",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-xl bg-primary/10 flex items-center justify-center",children:(0,s.jsx)(Y.A,{className:"w-6 h-6 text-primary"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)(em,{"data-design-id":"consent-manager-title",children:"Privacy & Permissions"}),(0,s.jsx)(eu,{"data-design-id":"consent-manager-desc",children:"Control how your data is collected and used"})]})]})}),(0,s.jsx)(ef,{children:(0,s.jsxs)(ar,{"data-design-id":"consent-info-alert",children:[(0,s.jsx)(eV.A,{className:"w-4 h-4"}),(0,s.jsx)(al,{children:"All data collection is opt-in. The app works fully offline with core features. Enable permissions only for features you want to use."})]})})]}),(0,s.jsx)("div",{"data-design-id":"consent-list",className:"space-y-3",children:aL.map((t,n)=>{var r;return(0,s.jsx)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*n},children:(0,s.jsx)(aH,{config:t,isGranted:(null==(r=e[t.type])?void 0:r.granted)||!1,onToggle:e=>a(t.type,e)})},t.type)})}),(0,s.jsx)(ed,{"data-design-id":"data-policy-card",className:"bg-muted/30",children:(0,s.jsxs)(ef,{className:"pt-4",children:[(0,s.jsx)("h4",{"data-design-id":"data-policy-title",className:"font-semibold text-sm mb-2",children:"How We Protect Your Data"}),(0,s.jsxs)("ul",{className:"space-y-2 text-xs text-muted-foreground",children:[(0,s.jsxs)("li",{"data-design-id":"data-policy-item-1",className:"flex items-start gap-2",children:[(0,s.jsx)("span",{className:"text-primary",children:""}),"All product data is stored locally on your device using IndexedDB"]}),(0,s.jsxs)("li",{"data-design-id":"data-policy-item-2",className:"flex items-start gap-2",children:[(0,s.jsx)("span",{className:"text-primary",children:""}),"Photos are processed on-device when possible; never stored on servers"]}),(0,s.jsxs)("li",{"data-design-id":"data-policy-item-3",className:"flex items-start gap-2",children:[(0,s.jsx)("span",{className:"text-primary",children:""}),"Location data is used only for queries and never logged"]}),(0,s.jsxs)("li",{"data-design-id":"data-policy-item-4",className:"flex items-start gap-2",children:[(0,s.jsx)("span",{className:"text-primary",children:""}),"You can withdraw consent and delete all data at any time"]})]})]})})]})}var aD=t(93409);let aI=aD.bL,aE=aD.l9,aG=aD.ZL;aD.bm;let aq=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)(aD.hJ,{ref:a,className:B("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...n})});aq.displayName=aD.hJ.displayName;let a_=n.forwardRef((e,a)=>{let{className:t,children:n,...i}=e;return(0,s.jsxs)(aG,{children:[(0,s.jsx)(aq,{}),(0,s.jsxs)(aD.UC,{ref:a,className:B("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...i,children:[n,(0,s.jsxs)(aD.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(eE.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});a_.displayName=aD.UC.displayName;let aB=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:B("flex flex-col space-y-1.5 text-center sm:text-left",a),...t})};aB.displayName="DialogHeader";let aO=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:B("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t})};aO.displayName="DialogFooter";let aW=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)(aD.hE,{ref:a,className:B("text-lg font-semibold leading-none tracking-tight",t),...n})});aW.displayName=aD.hE.displayName;let aV=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)(aD.VY,{ref:a,className:B("text-sm text-muted-foreground",t),...n})});function aY(){let{clearHistory:e,scanHistory:a}=c(),[t,r]=(0,n.useState)(!1),[o,l]=(0,n.useState)(!1),d=async()=>{try{let e=await b(),a=new Blob([e],{type:"application/json"}),t=URL.createObjectURL(a),s=document.createElement("a");s.href=t,s.download="mthfr-scanner-export-".concat(new Date().toISOString().split("T")[0],".json"),document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(t),ad.oR.success("Data exported successfully!")}catch(e){ad.oR.error("Failed to export data")}},m=async()=>{try{await y(),e(),l(!1),ad.oR.success("All data cleared")}catch(e){ad.oR.error("Failed to clear data")}};return(0,s.jsx)(eF,{className:"h-full",children:(0,s.jsxs)("div",{"data-design-id":"settings-screen",className:"pb-24 px-5 pt-4 space-y-6",children:[(0,s.jsxs)(i.P.div,{"data-design-id":"settings-header",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[(0,s.jsxs)("h1",{"data-design-id":"settings-title",className:"text-2xl font-bold flex items-center gap-2",children:[(0,s.jsx)(G.A,{className:"w-6 h-6"}),"Settings"]}),(0,s.jsx)("p",{"data-design-id":"settings-subtitle",className:"text-muted-foreground",children:"Manage your preferences and data"})]}),(0,s.jsx)(i.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},children:(0,s.jsx)(aU,{})}),(0,s.jsx)(i.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:(0,s.jsxs)(ed,{"data-design-id":"appearance-card",children:[(0,s.jsx)(ec,{className:"pb-3",children:(0,s.jsxs)(em,{"data-design-id":"appearance-title",className:"text-base flex items-center gap-2",children:[t?(0,s.jsx)(aA.A,{className:"w-4 h-4"}):(0,s.jsx)(aC.A,{className:"w-4 h-4"}),"Appearance"]})}),(0,s.jsx)(ef,{children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{"data-design-id":"dark-mode-label",className:"font-medium",children:"Dark Mode"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Use dark theme for reduced eye strain"})]}),(0,s.jsx)(az,{"data-design-id":"dark-mode-toggle",checked:t,onCheckedChange:()=>{r(!t),document.documentElement.classList.toggle("dark")}})]})})]})}),(0,s.jsx)(i.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},children:(0,s.jsxs)(ed,{"data-design-id":"data-card",children:[(0,s.jsxs)(ec,{className:"pb-3",children:[(0,s.jsxs)(em,{"data-design-id":"data-title",className:"text-base flex items-center gap-2",children:[(0,s.jsx)(eh.A,{className:"w-4 h-4"}),"Data Management"]}),(0,s.jsxs)(eu,{children:[a.length," products in history"]})]}),(0,s.jsxs)(ef,{className:"space-y-3",children:[(0,s.jsxs)(ee,{"data-design-id":"export-btn",variant:"outline",className:"w-full justify-between",onClick:d,children:[(0,s.jsxs)("span",{className:"flex items-center gap-2",children:[(0,s.jsx)(aS.A,{className:"w-4 h-4"}),"Export Data"]}),(0,s.jsx)($.A,{className:"w-4 h-4 text-muted-foreground"})]}),(0,s.jsxs)(aI,{open:o,onOpenChange:l,children:[(0,s.jsx)(aE,{asChild:!0,children:(0,s.jsxs)(ee,{"data-design-id":"clear-btn",variant:"outline",className:"w-full justify-between text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-950/30",children:[(0,s.jsxs)("span",{className:"flex items-center gap-2",children:[(0,s.jsx)(aR.A,{className:"w-4 h-4"}),"Clear All Data"]}),(0,s.jsx)($.A,{className:"w-4 h-4"})]})}),(0,s.jsxs)(a_,{children:[(0,s.jsxs)(aB,{children:[(0,s.jsx)(aW,{children:"Clear All Data?"}),(0,s.jsx)(aV,{children:"This will permanently delete all your scanned products, history, and favorites. This action cannot be undone."})]}),(0,s.jsxs)(aO,{className:"gap-2 sm:gap-0",children:[(0,s.jsx)(ee,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),(0,s.jsx)(ee,{variant:"destructive",onClick:m,children:"Yes, Clear All"})]})]})]})]})]})}),(0,s.jsx)(i.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},children:(0,s.jsxs)(ed,{"data-design-id":"about-card",children:[(0,s.jsx)(ec,{className:"pb-3",children:(0,s.jsxs)(em,{"data-design-id":"about-title",className:"text-base flex items-center gap-2",children:[(0,s.jsx)(eN.A,{className:"w-4 h-4"}),"About MTHFR & This App"]})}),(0,s.jsx)(ef,{children:(0,s.jsxs)(eJ,{type:"single",collapsible:!0,className:"w-full",children:[(0,s.jsxs)(e$,{value:"what-is-mthfr",children:[(0,s.jsx)(eK,{"data-design-id":"faq-mthfr",children:"What is MTHFR?"}),(0,s.jsx)(eQ,{children:(0,s.jsx)("p",{className:"text-sm text-muted-foreground leading-relaxed",children:"MTHFR (methylenetetrahydrofolate reductase) is an enzyme that plays a crucial role in processing folate and supporting methylationa vital biochemical process affecting DNA repair, detoxification, and neurotransmitter production. Genetic variants (like C677T and A1298C) can reduce enzyme efficiency by 30-70%, making it important to avoid synthetic folic acid and other problematic ingredients."})})]}),(0,s.jsxs)(e$,{value:"classification",children:[(0,s.jsx)(eK,{"data-design-id":"faq-classification",children:"How are ingredients classified?"}),(0,s.jsx)(eQ,{children:(0,s.jsxs)("div",{className:"text-sm text-muted-foreground space-y-3",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{className:"text-foreground",children:"Safe (Green):"})," ","Ingredients that support methylation or have no negative impact. Includes methylated vitamins, whole foods, and natural ingredients."]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{className:"text-foreground",children:"Unsafe (Red):"})," ","Ingredients that may interfere with methylation. Includes synthetic folic acid, cyanocobalamin, MSG, and certain preservatives."]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{className:"text-foreground",children:"Unknown (Yellow):"})," ","Ingredients without enough research to classify, or ingredients that may affect individuals differently."]})]})})]}),(0,s.jsxs)(e$,{value:"masking",children:[(0,s.jsx)(eK,{"data-design-id":"faq-masking",children:"What are masking ingredients?"}),(0,s.jsx)(eQ,{children:(0,s.jsx)("p",{className:"text-sm text-muted-foreground leading-relaxed",children:'Masking ingredients are vague terms like "natural flavors," "spices," or "proprietary blend" that can hide undisclosed components. These may contain MSG, synthetic additives, or other problematic ingredients. We flag these for your awareness so you can investigate further or contact the manufacturer for clarification.'})})]}),(0,s.jsxs)(e$,{value:"accuracy",children:[(0,s.jsx)(eK,{"data-design-id":"faq-accuracy",children:"How accurate is this app?"}),(0,s.jsx)(eQ,{children:(0,s.jsx)("p",{className:"text-sm text-muted-foreground leading-relaxed",children:"This app is a tool for awareness, not medical advice. While we strive for accuracy using product databases and research-backed classifications, ingredient lists can change, regional variations exist, and individual sensitivities vary. Always consult healthcare providers for personalized guidance, especially regarding MTHFR-related dietary changes."})})]})]})})]})}),(0,s.jsx)(i.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},children:(0,s.jsx)(ed,{"data-design-id":"app-info-card",className:"bg-muted/30",children:(0,s.jsxs)(ef,{className:"pt-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-xl bg-primary/10 flex items-center justify-center",children:(0,s.jsx)(Y.A,{className:"w-6 h-6 text-primary"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{"data-design-id":"app-name",className:"font-semibold",children:"MTHFR Food Scanner"}),(0,s.jsx)("p",{"data-design-id":"app-version",className:"text-sm text-muted-foreground",children:"Version 1.0.0"})]})]}),(0,s.jsx)("p",{"data-design-id":"app-description",className:"text-xs text-muted-foreground",children:"A local-first PWA for MTHFR-conscious individuals to evaluate food product safety. All data is stored locally on your device. No account required."})]})})})]})})}function aZ(){let{activeTab:e,hasCompletedOnboarding:a}=c(),[t,o]=(0,n.useState)(!0);if((0,n.useEffect)(()=>{(async()=>{try{await L()}catch(e){console.error("Failed to initialize services:",e)}finally{o(!1)}})()},[]),t)return(0,s.jsx)("div",{"data-design-id":"loading-screen",className:"fixed inset-0 flex flex-col items-center justify-center bg-background",children:(0,s.jsxs)(i.P.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},className:"flex flex-col items-center",children:[(0,s.jsx)("div",{"data-design-id":"loading-icon",className:"w-20 h-20 rounded-2xl bg-gradient-to-br from-primary to-emerald-600 flex items-center justify-center mb-6 shadow-xl shadow-primary/30",children:(0,s.jsx)(Y.A,{className:"w-10 h-10 text-white"})}),(0,s.jsx)("h1",{"data-design-id":"loading-title",className:"text-xl font-bold mb-2",children:"MTHFR Scanner"}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,s.jsx)(eH.A,{className:"w-4 h-4 animate-spin"}),(0,s.jsx)("span",{"data-design-id":"loading-text",children:"Loading..."})]})]})});if(!a)return(0,s.jsx)(et,{});let l={initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20}};return(0,s.jsxs)("div",{"data-design-id":"app-shell",className:"fixed inset-0 flex flex-col bg-background",children:[(0,s.jsx)("main",{"data-design-id":"main-content",className:"flex-1 overflow-hidden",children:(0,s.jsxs)(r.N,{mode:"wait",children:["home"===e&&(0,s.jsx)(i.P.div,{variants:l,initial:"initial",animate:"animate",exit:"exit",transition:{duration:.2},className:"h-full",children:(0,s.jsx)(eL,{})},"home"),"scan"===e&&(0,s.jsx)(i.P.div,{variants:l,initial:"initial",animate:"animate",exit:"exit",transition:{duration:.2},className:"h-full",children:(0,s.jsx)(ac,{})},"scan"),"history"===e&&(0,s.jsx)(i.P.div,{variants:l,initial:"initial",animate:"animate",exit:"exit",transition:{duration:.2},className:"h-full",children:(0,s.jsx)(ak,{})},"history"),"settings"===e&&(0,s.jsx)(i.P.div,{variants:l,initial:"initial",animate:"animate",exit:"exit",transition:{duration:.2},className:"h-full",children:(0,s.jsx)(aY,{})},"settings")]})}),(0,s.jsx)(W,{})]})}function aJ(){return(0,s.jsx)(aZ,{})}aV.displayName=aD.VY.displayName}},e=>{e.O(0,[720,679,441,255,358],()=>e(e.s=24574)),_N_E=e.O()}]);